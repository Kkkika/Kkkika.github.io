<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>大文档</title>
      <link href="/2025/09/24/%E5%A4%A7%E6%96%87%E6%A1%A3/"/>
      <url>/2025/09/24/%E5%A4%A7%E6%96%87%E6%A1%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="工资"><a href="#工资" class="headerlink" title="工资"></a>工资</h1><h2 id="个税"><a href="#个税" class="headerlink" title="个税"></a>个税</h2><h3 id="五险一金"><a href="#五险一金" class="headerlink" title="五险一金"></a>五险一金</h3><ul><li>详细解释一下 五险一金</li><li>用一句话说清楚每一个的作用、特点、注意事项，最多三句话</li></ul><h3 id="专项附加扣除"><a href="#专项附加扣除" class="headerlink" title="专项附加扣除"></a>专项附加扣除</h3><h4 id="赡养老人"><a href="#赡养老人" class="headerlink" title="赡养老人"></a>赡养老人</h4><p><strong>🔍查询信息：</strong></p><p>1️⃣执行标准<br>➡️独生子女<br>不论赡养1位或2位60岁以上老人<br>每月固定扣除3000元（不可叠加）<br>➡️非独生子女<br>不论赡养1位或2位60岁以上老人，每月3000元额度<br>需与兄弟姐妹均摊3000元额度<br>每人每月上限1500元（即使协商由1人承担）<br><br>2️⃣3大高频误填场景<br>❌父母未满60岁，填报祖父母信息<br>正确操作：仅限父母年满60岁，或（子女均去世的）祖父母满60岁<br>❌填写配偶父母信息<br>重要限制：仅承认生父母&#x2F;继父母&#x2F;养父母，不含公婆、岳父母<br>❌虚报独生子女身份<br>风险提示：系统已联网户籍数据，造假将影响征信记录<br><br>3️⃣滞纳金预警<br>错误填报将面临：</p><ol><li>年度汇算补缴税款</li><li>每日0.05%滞纳金（约年化18.25%）</li><li>影响纳税信用评级</li></ol><p>4️⃣特殊情形处理<br>▶️离异重组家庭<br>独生子女认定条件：在新家庭中父母方无其他赡养人<br>需备注说明亲属关系<br>▶️多子女赡养协议<br>必备材料：留存书面分摊协议（无需提交但需备查）</p><p>5️⃣自查清单</p><ol><li>父母身份证是否年满60周岁（按申报年度计算）</li><li>非独生子女是否超1500元&#x2F;月限额</li><li>被赡养人关系是否合规</li><li>共同赡养人信息是否完整录入</li></ol><p><strong>APP填报提示:</strong></p><table><thead><tr><th>类型</th><th>填报提示</th></tr></thead><tbody><tr><td><strong>赡养老人</strong></td><td>纳税人赡养一位及以上被赡养人的赡养支出，统一按照以下标准定额扣除：<br/>（一）纳税人为独生子女的，按照<br/>每月3000元的标准定额扣除；<br/>（二）纳税人为非独生子女的，由其与兄弟姐妹分摊每月3000元的扣除额度，每人分摊的额度不能超过每月1500元。可以由赡养人均摊或者约定分摊，也可以由被赡养人指定分摊。<br/>温馨提示：被赡养人须年满60周岁。</td></tr><tr><td><strong>住房租金</strong></td><td>根据政策规定，纳税人在主要工作城市有自有住房则不能享受住房租金专项附加扣除。纳税人的配偶在纳税人的主要工作城市有自有住房的，视同纳税人在主要工作城市有自有住房。<br/>同时，若夫妻双方主要工作城市相同，只能由一方享受住房租金专项附加扣除。</td></tr><tr><td><strong>大病医疗</strong></td><td>在一个纳税年度内，纳税人发生的与基本医保相关的医药费用支出，扣除医保报销后个人负担（指医保目录范围内的自付部分）累计超过15000元的部分，由纳税人在办理年度汇算清缴时，在80000元限额内据实扣除。<br/>温馨提示：<br/>1.若纳税人本人、配偶、未成年子女中一人或多人一个纳税年度内发生大病医疗费用支出，需各自单独计算扣除额，再按政策规定办理扣除；<br/>2.您可以登录国家医保服务平台APP查询相关可扣除的大病医疗费用支出；<br/>3.当年发生的大病医疗费用，在次年办理年度汇算时才能享受，建议您在办理时一次性汇总报送。</td></tr><tr><td><strong>继续教育</strong></td><td>纳税人在中国境内接受学历（学位）继续教育的支出，在学历（学位）教育期间按照每月400元定额扣除。<br/>同一学历（学位）继续教育的扣除期限不能超过48个月。<br/>纳税人接受技能人员职业资格继续教育、专业技术人员职业资格继续教育的支出，在取得相关证书的当年，按照3600元定额扣除。<br/>温馨提示：<br/>不在《国家职业资格目录》内的不属于可扣除的职业资格继续教育。</td></tr></tbody></table><hr>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>怎么缴税</title>
      <link href="/2025/09/24/%E6%80%8E%E4%B9%88%E7%BC%B4%E7%A8%8E/"/>
      <url>/2025/09/24/%E6%80%8E%E4%B9%88%E7%BC%B4%E7%A8%8E/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重新输入" data-whm="认证失败，再试一试">  <script id="hbeData" type="hbeData" data-hmacdigest="03e73f0a5f2c876c8054f9ccece775c07e5b2a7ad87f177c5e37c08b61cfc065">0640814d7970e5570cffe55936b380a90daef6281b13579af07a07d02cd23cf464d3f45913dbfb02a38fb5ffd5957b8da63ffbe7de0342b78b3701b1e4cbd69dc53665ad63cd97a41851b466c4d099afeea14ea0e94f2d7e3315405940ab54d1b8e2a5ad5893f3a820f3160454bbe3298598a71a82f2f74fbbce5e54ce17cfd90e777b9cca63a1fb7ddf17d1b8267a7146f8cfe6a5b05110374624f8ad2b5547fee938d751d2c4c45fd8ee7a6cdfcb3f669d1748ab1bc468ac7344f8f8611e584a7f4705d3b569100ba33c64aac3a8dbeca1631fdfedc4085c58194df43d815438a29ff1ba1fbb14cd8f86d9b8e5a50dcf92201657f4e27e6e5efafae09ef2b2e924da10e39cab5bfb8da56eafd93eaa076b4f38a6903a3576c36e506a50dc5394f5d996a137fbdb5508fdba19200957cd2973c8c5db688235ba0389a4f0fcae0e2870713fe7a80e47abfa3d6ca28d21903660d389814607b374f86f92a677fce45b7d29876f3f6789b0219a1401f5198c350bb11cb999beffb0652f976543d47b6fd3923d0f75845fa3ef342bd6159081db9221790aeff97e69869f60af4c7efa4be2735147593217062e2440d1475e4b21225e46dc6592ea61dbd9f52167b7c9ab4c037183bf3e537e07c929aeff32ec024c92da69c58892656d105bed51b1b7f011fdefaa0b2178d5094e699d0a5e4291c126a055317a759ad3019972f08f97eaacb4ba861ba04a55d5726fffc11622f1cc0b8c542746183ddc8dd28a955e628787fa3a17dbd42eee18dd0790b9a841d99caaafd4531aa705bf6c2e5a3ac97b99b87724a36ab92aa745ad56ffe575b7759387b7dd5c04b281bfe2e484a319a40d33136c17ce4ca40e42496638123eb8f7a7fe8d0b2319caa5a5a1dff910f2491725a743ae7a57c671457267b19ccf4358f04858ee67d7148cb6e63597e1d5030286e10fbe7e1634316c8d9b93237a545c6906f2f680d1259c6b31bbf4c69a291d37f86ee1d39197ac523c423862ed5314232335364072f09391aeff988a444cce91ede5c57a813751809da98f7ccd54b17e4648b3a41fab632c2f01eed62dbaff6feacdaec15d477a2544007cfbd4ff8245ca6065a6041249c70344c11d5cd44a6234c42865c3886e9f6b4ec0ddfff8bfc6870f8ba111ef146580ccc2a696a9b0b857678dd9062a6a452abc4d0f918ba8b850844dc77a34e92b18a1d27ffcfe212481a41fc39f6d150a4970cf500c5052ecad21821d1e0237b30b19e573373123f53b0906a6c5bdc2d1e7e34d904810e78d7fa76172752e46bbe84b6f9502956d1b1b593ada9c0cba9dc723d1ee4277ea0374807f8f01ac6f23fdc80bfa1859d2aed5a29af9b08caf5d82c0c8e5fa2e6e3b5da1e33e9ac591100a806ae09c709fe86b2fe06de1921ba6ec271d72a338f51ce004572f4a6b15a68363649d951b578adc27d19938602ed5dcce8304ddb0c13320875b2027a31c8a7c0412d621fa1a8aefb5607531ee07d37ad5495ea88e11f31a0505656d5b6e9c73b5845127eacbad9d9a1e7841f9809d8a3cf07cdd2ff1ff67d27be81ed50e4510ea484b98f402df05238f2d50302a08d658dc2ea9ae2000071a08a87e1974659cb42e8e6711337575c718b99099a9be332f2ca9d136526c23173bba8d060cd5b9c10416eb5b66e43b6ca55a7fa7d771d3dfc56fc4b53e214089e55757b36a6ff62926d6afa53b2558b2da8215a451b22805dd76e5f12ea92b8247b9180c4ac88496e151d3ac080a4ea6b2239073337f632d05ea2dbf4ca126f8761124b3b6c962b959177d3af2793c61b375b2f32b9a553f0ebce6b3d7c363c15fc9b3adc4a96b87256ddb853a2c3ad01383ae94404b3e2964eb364bd524f9a31001ca445192dbfb724e951a4e718bc4392cafeaf746a5c226210ec7f2b15e96bff8ac9defa191a1a01910a4f1fa50a380062a3d981d21d71817504494681571d280d14935846e64f070ae635137c6afa0c0432b10303e16c14eddc2cbc3d058bc6eb7a974b8e52fc767edd7ec72e8fca2ab8c8f5f152194e8594583c8425fad00ae51a66e2a56ae9f3b1e7fa7916b62a04a42d3a5a523a24637d2a3804cdf8ecfd1e4416a21f71e15cdf9877ae8535f76c150a566feed3dd9a3b64fe3df89b402774dbb38fe648fda42e702f1033e390a883ff7fa44701e7bb3921fa843272596f3fed3df5ef8bade4131da291af87c410a592229c284aab6526b5074e9fa425aec022f64dec8db9458dff8a256fd8751867d960d1a1e0cdfadc3e1a04f3353adbf5e4bd626f322297990cf996ed353697768c7e99f0591c492c564a2eeead35fb1c6f4773d97c9462f842c04d75344cf89994ad2a2eaaa502f8f1906c323c7158f46ca14a4a2d879523bf6d40acaef097ca217cad84b6ec06e84a5854b2e23123eb9f84d1702206a0a8bb139dc28c2c4adeac36632155633af52e6a51fd2dcc13cf525b3933e9aca3e243c12c3410ac0625a5a96572bde9b13b684cf197ad772598316d93c2ddf69d5d5a9b32dfac0af570b3c02213158a48fc24d3dc701720c453cb9f080af18aa14658441211a03d474e73fd4dfa6dba92a765e7f686deed2f320ae1d8c6860ccb718b2962822db2dc418f002e6f3384e88ace768dd85dc04465d3918db6becbeb1db08e713437760a50fa0f962f1227a365853b3a0242b6242daacfd29393eb8880c90501a71db52bb92e0ce5e4bd664fa005fe1ae788c2aaadbbf6e0cb8cf5c501e1d6f92e0b7bfa93f70503c37151db0f3d80cbc721c7e3a933e24fc530a3bbf6cae8edf311b4cd5979844dbddc9cee104bce0becf09b9eaffbfd02af358ffa9361628566cbd84fc97c7d7848ef4abf7526d745bb2d0519cd126078098a4fd1022ace8f2a46ab9dc50fe1b39b97ed5ea8caccbb8c15b400ef6b234acee19eee8bce43c876a5bd19f4d6519c83ccec319f3009022649497b660be87e1138bc31b149aaf2bb158355026d5f38ca35dbc6b7b46ae3c2a13aade4c3f0c417d233f67de05a2c4c72a60a41ae2a66e7fc842051342fb83ae564fbb089b13933ebcead18c43dabc499cc8b28a224832128c36c5ded77a37548938dd14f18bcd7d5a854c275aa21ba4f5bf8334c0859478b270950ae4ea859a014172b4225f8fd8b007859a67578399b6429a98766156f6bea8b04b46e292222b8131d221b77b684bcc8097f88587b629bd62d86ba37ca6b1f702142a7e16b9a057b35a1d95840645927a9905a0daa0ad5653b6caab6e0200cf60397f5cd4a78abbad71ca2f69fa785244b12a69d6289dd2c7689088df55100b492b5abe6e63676d82cd307ee83885bac46947de6882a8f15ba76e678355dcce82a814da49a6773201f59e403fc524f83d90f3c6ed612ef72a7f3a84db3098ca5d2c70e036f1b1cc0c2df6741cc6daebaad4da249486d370ceecdd392e1d334d3c3df75a3497ca3a7c6252ef9e26c15d91db0f688d8bdd61dc131e9a3f73a539a2c8fd6ac9bf3d7beaee27d59c6c3355cf05cf14124362f4ef40baa92c397083aca2b096c1745aa7babfef4a62e7b87fa48a769e59d8e96e846b47005176ad42d8ae57e0d408a7bfa9281ec3299fbd35fe854e1afb3402390ddb29c05db26b3bdb7929537be51cd9141dab1cf766f854c41816af5ef13212b7c475fd6c2cd6ebf9c5e9f2bdbf718b5ef90643a03fd6afad99fee277583116c56b4ac1849a1536b0c09204bbab17cdc660ff9e77fb0e389157de771c9a9b98dd2e683a174d172d3b3de860c79a044edb5ce70bcbe9725319e46f4db29bea46f8d6c23d16bb5847bb9f9a4af7ea6b06eda13b7bf43f9517bb7504bf707b0786e0aa69d6eb97c5ee23495f1251d83a66c3987b22e818a17b942476dad8327f5897321ef9494e31738870beca256ebb6812d27e1dabae759b2a05b2f0190db5df7857ea476a7ed1d50cd4645c15c261222e68f81e49c7b1916c416f800d95e41583bf37d3f9277da78ab352e84b60e4b58d5bb185c886a404c1cb46a998995efe41a0704586dab8deb70c832a7394139e5a174fa8237f933f487b9f6d25dac14ed939436e86dc7b12ee643c99fe70770877400eb261411ff3568dcc3fa421ab5012b9518fdf52bd20051119cc5fe05dae7352092c7a4a316d64bf927fe0eb516baf08dca43b3994ab17e86dceac4c735d7fe57ff16cb7944efd00d2af63d34a53903a95b878e44c2054556a0fd8f710e96a381a2ebd16ef6e9c232e49b9de6c7ab80af79c7ae3e8996a5c7fd6fb937a4aaca75788bfebc43ba237ef7942844988e9b8575a2c0ab2b2494b52b92b60683736ebb6b6fef1ebcb2c0b88a2dea8602bbb312d34973669eab8572390c70ae978f4ada6a6820e36e0b27d23970c703aa57a6dde07d8c0c432ed665f3b34718b11f398b82e64f8d2f88eb2f3083a4c78c70e24d3a44e0e77c201bec62804d5cf1d3ea8f36a5e8962d20ca1e4721a36aa0a2338734968179b0dc7c2532ac6767d21e634bafd2078fabf3900a926594d0aaa7e4712057b6f5c4df7c4b0d617cf37305929755f4d39b9048ffb5f082ea40c1866f084f67e31daf97dee224a84a4f76175344f3fd79e0deb6910856acfd41e40e1d30ddae612147b3471daf5c7f10372520eacfb900a98f6fb156b28e664bb43ad23121398272cfc4dfbc1c89c2b103ce447bf8dd6fd9b36aa0fa3597f8cb8301fa4d2373a0ce024f6573dbda15472ad33c5bcaff080624b12a48550371f094814be3749be0f023d64af445d4321e807c7defe18c4ba31304dea5ec6b7ad7ef3b109da7885ad77a8767ddd1ff85c19b6751b4d1e2aed697a44b7298b4c9059bfbecb91519b8ce20923f190f21b73a0dbff386d10d090366370a84e5a3daff1d4d345b4885f2e753ead54910f754cb58977483781e1bddefa159244190d4e901b5b3e17aa0359ee8bf30e4cddab473a3fb704292c65813b8689e38b8133bd35b8e2ef6282138e4413177e280fe5dd5944e2e09c05ad9eeb50ba66a8a34788e99183968660d65d95418d2f8cb4a5d68c6b49eea068ef9d90f0f0c5bff25168d0123504742bff06dbb08b649bf279725d4cc0d0ec5df00d6723755a99febd53acd99135e72fa271f0b8886869f81e3f61031e888d94b4dde5250c951f300b1b8be5a12ca77cb320f6d00f4af41b1d19024b1221d72b3f62f52a204bcd3037df698548f5159dcf55006ba9232040190d43e59c4f96a5f68052ccc2f7a9b5b3c0dd65c6ef1e64a402751527a6808b77fb6e0d069abfde6f61b9bfd92dba435a67c8db14df49a2a14298b5f21c87f13de535a257ae3cac4dbaad041a35ecb21c040b2ee27d3e3083929a620635fe30b8b552b41dd2674c71ae56048a22d2d168c3598f0d7b61e9d9dffeb44aa06046926c4b1bf9f3183d3d6f27afe8ff689688cc543a7bdf18ba61f04963b11d8b20cf985df47d66bc2d68bf5a2a4669bd0538953cbb3c085a9dc87cfe6ec18fe5e75c8b29909b9277cf268413ca13bbf2cb8a330359f7fef494fb459301a65fa842e4b0f3089a7447d9495c5c3512e522c5191a651197aedb78bd62adaffe228e39e9ffa77e8f033bd2165b364fd708895d206e93e62a828e0f02e4ded9ea23d67dbf2edb6baf48cedc99b6621225f13ace7dfecd13707609fa82b63ecb5e27d715a37c83fa90b946cb60251df0ac6f06667868d9a3c19139255542a07552718f9aacbb55c759f7444b51ce5a3c9ef967cf2d218950e990fd703ada2b12d592002620bb80bbfaaf5283336c4ab635a00911ad5703fb97e53e1494f600b09e83d67b38607c2a8ef78787542f4a99e83dfe3b8048fe4e47f0a4ee0098139f1aca1a5ca912e3b2752d21058be4e7485736cbd7d789979551665ce7f9c42692143400da3ef44914e10a49019949023750d136818646477fb39bc9b36d4a21c7a06d3186fe8152976a1a3ac4971b5371a65a3fdd74703d9aafa6d415171e33e49f7a875562566ee5a416ad8c2253d76c09db286c5fe1a13d720a1207d1093fba7ecc5e55f96ccb63bbb448dceb41d62d3bb4c28f79a7384f6dec294b8e675d88defdba3a93bf5cf2260cd0805f7a9129544f6361de336faafbf6df7074e6258e2fe57cdd2bbeefa1caed355b0c9b532c5ebbb6e5eab23337103ed2ebca61823fe04e632e26bd25eff8c988e5a93e2d187f0d321c9636f7b6ffb2d021de85b23b0209720a89661e0e3f0621125d6ca42acb53070cee61a1eebae75a0a62c589bbbb5cd8bd38b9a4c6b016ba898e07ae7bb39d5a4761d215cb1f695569d324bc4cf78c48a5a8142811043d3108703415655e4b48a6af3cdac97668f2ec87f5b91f8b9b9af405d88d23be564175a3da556281f0701e35b74309b1c1954d63e449694bbf5082d83ec174ad19ffde50cdd38e3e94f990402eec7f4b49095fb2fe1afb5ea4cafeb1d163f325feec2a6142f31ce7671d368183133c7eff1f02ecc1897133c69337d9623ca124a584c821986a203cc9cceb60278c6c764447ae7304c794b7d3de84e96b6baa2ba193088a6d139589ebaac21ed984deb6c7b89e774d57792c3422ab73989023cc079d382e672d9bc46928d564f2716f32bd3817c3154bd74005e9573cf84174a432775932d6f7df83cd299505fbcbb5888cf82adaee5f9e37ccccc87e75aeec65838eeb0866ea3f501ca000687f53a0267d0897c47f5b82fdffea8f8bb749f62f80b307e0e7e827a83e1d7b3c8f2832ec8cf8e6473b58efd0c74954eacda823ff11fc7a7d71fe8b0dd1bd81518bc121d42e4e38d769f605797a0f21be4a1df2006ec17aa8af0599da8c0883b4699ef6294c2856063211e57f1fd2a619b7452d6c4713789689b750076c070d0911ff58ccec4e612412441b97e92fce67a4468131bec544e596803961f6ced8f613bfeb4d41e8b3ff302b5d12dbd78d4dbc4de509d9c2fdbb028b1e0b00ba05f264961da66f118389599eb32b68cc483140694ebbf2e9fb2297af066e4b95d226d4123f38de2c1d4036780c298e2dac97a04d488f481440ee79e887d7956812a54a53b51df75930d931579256bc9aec4edb315a60f81efa59255a614f931f83de209495e6c4fc1a230a3394c8f61480cad842780375db98dcbcfe8c1ff948484b1a638455118fe152862da0c815ef36ce2e3da6ed7871c23fa74bbee7a2314082ae8ce6c880f4905454531f29498fbbd6eb61f1fd0c22c4d0b1643d3ad6701ec30ab0552f5976f5f8ea763dbfee077b107c7d7e2416ac1189975020df390cc9c8be937bab43da0eda90bd6cae5473691e6b189da2a083066bd5979dfaabb34c3df67ca0e33ddb7653be1cfee2ea056d1cbba7f6b4194c1d50eb57bc24e2b3d9e8eb725dc206119e0f3b2ef81734c7bd1d1e7794fd27e393fcd84940bb050a236898ef5248e645d99d0a4810a15e67185fd7ac61aaafae106899cb586c39aae03744fec0b5c75ffc4ed3e45ab5eff0308637fcdfc5a880a74f2eb04f7c77e94393fadce8181abad5ecbb5fc817e90a40941bd2ffbd4826da212affda708cbc755ddc96bea0cac18fa284d0b29c9ad952b70d3c626b71367617ae524eb71c831cf39fb87fb34d5f066f4901ca3c0252cc5aee0626e9fd05407987c0d5b19d571a41531455c797ea4da904fff753eee2ffbf16c2af727d80c0126584ea9767909684259dae6e19938d29cba6c835f68bd331635486fa47136d956a4367a91a444e944b56f588b35c49cc41cec015f7e168fd587e84446934b9ee3d4d217e15d596ebc03f1b6ac14b1e3b75356f8f18ac5aa6358886a00c382a7a7971442312fc6d938fea452177eccfe37459caf95553725049bc7fa36368b6f32ed35f32efe035085a862bee1c9ef1ecf2267b43b2ace172496347317911c2918df17593c2107080b5797e7214885536347d6588892802f81b82dc87fe7f14a581ca1f36a0b3d0bddad2c9f9ed49df9ab037cc1ba1b23393576309546ec5ff20069aceebac8af5ae2acc938f19b74932a1bb29b2d2fd3881de0ac756453a8bdb04489d9a36158ba7a4f13a762afc79397276fea90774216824f83e2dbe505507bb0d74d0ef088418c2f6cb10ea0d6c70a0cb4f418bdba94b7fc96fb783b6b2b4b61ebb3941496ec587058c6addf466dfb8cb0341b1ae2fcf7e2323c2bc90efc4fa3a0955e40b06100be6d72c3bfd793110b04ab349fdd744c0b02e3b918bb64cc595ab1017f9dff30bfe709353ef7442d4a4478c3a15d1c85146a2c6f0898d033f229767085ae2bd48cc879f23dc1929408ced9112ce31d7af1781faf68209f0a2ce702f014bf93d2aeb19b4f2899fe551e858ddc88d883a9a93320b2a31a8aa5fa916d79c6d5dccd274a00dd722542a1223e1f194eaab54f4f8f994f447f04ed7ac46650362ee1b6f2ef1f42fc533160d940a157fedd0465c9a5d50a456b89b417ccc28ee9fd3abe46bac975b5d1910f4caf3b26e9ac1d0c05a888d83c7111757afea78f7cc3e26bfeac93e42bdf828480d7f1a733ec0fb5f943b26bc43adfd16608be40d4c6a9fda4dff1f92cb49040954e87409e5dc65cda951ab8cf75db76b2ad97f071449855683820a51a649a77f646786a112ca990683ad04ea9e86b537cb29b36d4969b14589fe22920f62ec3478b8eca1fed937ab41c3d7169af6daf95d1a95097f396942f87d7aea0b34066f11574a288397ae6cc93c7bb92c2861feadbca68dc41f38946e1ce8504ff658edb927cfc697e71470d3f97d3bbf14f3e8d42963963c2c0b9e2601352535a9d8aab16d4b26a5af7626980d4f867e67f826f6be0de89fcf04772c1bbcac4c3d6155518daecbeed912067b83d67a04f7a5d34575fbb5dbf376e02ef7bc4bc5ab737d9973882462e6be626203dd53b62bdc933a9ce0285db6e69e809d549dd2d7655f5829f72e320ba801dee233214d925ef0bec8fdc4337a7951afcb071e48ce1f912265b9fd3238c385b0b37f93cefe263434b19a21b77800822d7259f9e88ae35a2791feb1eb9d3f2c74304ad5dbe878c213477fa2b617f2f90ec185ed7eaeccd37f70e2f20a3f53165147b519f20f37482ae52c58147ebb94101865d954173b21b9a558a45b22689fb1564bce20ac39bbe4815b97d67ed6dc3c590d3d8f0d44581a39e7a0877075f6d33581f859f8e7531dcfc50ce8f140b05ed9a39fd2347d321f214ac3dd3b518b8317bc802a3094dec24df733752bf1095e9cc039f157c5d7e6ab5e0c5c42707b08bc54d1ba8d8d6bcb0e9431768411e90ca62035898874adfa489ecb98f3a47fe1ff605a9578d08c7a24933e9e97b9c8b900b9d62561c28bd38aa81327c08a21f26001d4f6db8c6cc14d4ba5d5e5b257eabf1f79a4e6b260b3536968a44fd49491f848aa416df13e19fc3ad8f47e836f9a0f027214118ec7b39ea61b9d1cd5db55181467375a820cb0a83c8b5b9123859a02d33b3360fa0e3bbb6ef62d6574947f3e484d78badef7731b5348f979fd09ae8466513cd6bc0b83f096d9f511a4565b1cfd3363a1fae4b8770d88f08c9c02df49d7d343a49a21e9378027cd2abae6f73f67855525e78e5133d19e6c58db4c478ab07629a55a41bf9fafc24479944e8d503f78fc578ca9cceba0f4be9d5d3d6b77002eacad657529df3bf99018617993df3e751d6f0b6e952a9a1d114e6d1bbe96db8d3ddd34aefa2381b95d51593478b833f66c4d75110ccb65abf1e4e402d3af203b1f81d1e9c41516ca09a14ce8b968df1804ec3583e999d51812181238f4c45a4895cbc75af07cf041a4ac4ed6159117dcdf190739e3e87def88f636802c3d10d412d801917b5af6d6727fd94dc9118da3baed622b9aa87f607d21ed002cf66b3954b61e0eaa93f2783a8d48a4eaf98938f5a25cb70e9f4a29ac2f870c53822a6db372b4b0d1e990faed5ea064ba3fb4fecfffd3c340ebfb60c068f8b3dd6c9cc343215d41767f912982c58630a2675e71172a9bcd6acfd36526bc3b54ff44465b3ad7d15818dbce3ca926312f6c5b266c96129acc5ed68376defa1109e8b5718fb1684c06443ef75b058bbc8085cf6c4400ae2b09b0c60fc2d053e8b2c588b74bc349f399e4421e268da2fc95c79d5778f544a8273c9806f534a5df9e492106300a51e34a51dbad5057fb6ce39a5f73ca04b0d0242667c3eaf73647fa5ce20e2a0044e9ab1b3e6453603fae33d1c5523a40e3132c1bfb31307fe00e92175b71f97b8cea6fd762c3c4759eb2d907287b1afd8e1be9bec66d39946ddd747dfe53b61241726f9866bf547f317270b58b23df05f6c8121d8cf203e9fc98eda4f573a7aec525dcfc78eac2c39036e07ca2d813bb51b241f3cc1b380abf6277dd67ffa761226f2837ab6f1cc535f1f495a97edb68cd2ff1ec0c50c3c5676ac75163d5c59473dcb5f457570d0ef5a1b20db0f053e39dbc177e7cf125d864732cea6bdfe3a8ed4d91b1c156058a4b251d9b65307ad592d50835d570f559d85a8d2a5f9c819161fc5c0e2c00b94966c51e1b13ee0b128451bc05fe1e77b3f4c9add652175085d4b07e2eb55fc562e1109aa9afc6b1a332dfc180edc6a4c2fda51a536e58330798cde0f544bad3da0d6f0eaa2e6400e5d6e63b54123c0928f1d8b53732ea9d0c93d7d3560eace7ae73bfbb73c5d05afb33d7614e440d5e2f0d500949b5c9ba1eb1cae49a4a5c51cf15736c5c6a50c6674e0bc287faf32c1dd98f99170d319cddeeb062fa0fb2571585bf77edfa5e3e9442f63fe3c356348c3c19bad88194e35e3e39e46b01809a07bff8bfb14612ecf8efd95a0b86272a9c32fa0df85c082bbbfdc637efe5647d1c2ccfd11879e8ea64a529a3c4a85e69775dbb3033b7619a3789e703110d6768a7151623c8313d875d4b82db63dd7e0f7a3f8c1cc1504c9425add5630676f748d756a65c89116413d68f2a09c9fcd89fa47d029141465f3cedbe0713a3c57efeb9888f71b63fa0711699232780f4be7b401ef6c08a829b64b4c2c411a2c12799c4512fbb1a0e1e5bf0f9ebd100054dd07bb98fbb421e71809ee4dc86078fa861e9f1c72cf16a666ce5f3a5e2cafefaae2d03e6b5f5ae06ec57a3c7555e53977f76bd0d4b0d2a653e26c51a0a779e9d704ae5c93ee7b67614aff4bd253943c9255962ba7e927098c8759275ad224820b8d8c93e8998016df408794675b71c3c1ae8e0a8b2afdc925b3380e4e548d1bdc9cd93dc68fa3b8b0b8746f06c691158c9e914b692c50f7520c3805832bb5b3afddd18962c138be9a8097092cb19a76e8d3e54b5ee94c05a40814d644f25f603c7160650d5c1d39ca8fb14d720e95c6db8f9925de7682f87d94a183b3278885cf913984a8dfedf9f38c8d67f390bc52555831d38af42802f06c123eecda4b48cfcabf4154629cf2180c9df3a359450cbaf69941734d526ae2992b73db1daf11ec0663e0317993b569ff1eb68bc1cc3f7ba08d054202ab5908fa82a14cc81916eb6d0d0b21f8c195942fc4dbec01366e5bb262abdcdcdb17b2ea06ded560b03ac019d4c5e33a8fb02c0da0304343799a0f8d732274d2fea3c34b27b021ccfb1e31b5c6046c85bbd4fc9a6776e82ec6b99d578585fea73edb165c1835f6a8d78ee9e765afdb5600b8d98fa59ed79664f4372bab8c314ad6b7dd91851b56f0b2b48ca5e641cb602ad7c715b9795f663849c7ddf92f6cfe245ac470d738ed9c19f1860f944caab3a580af3d3b723477f70e1a0e63cf65193ada22b4942603db32ad362fa19a12d9aa27ec33aa091829a402db8c7356db1c1f83c742a20b475ebbe67d16d77e44c589105e432068205cd229465ebadb7d68e3507d81e269e16c47f9f9c82bd5a8bb716e44b0d3faff27d6a4e37e0910edb29f97a9ded662957448361afb414cb215fd960f3a3bbe28acd024c63597b0a9f1ea91657fc43a922c41608688880e103624e544949f8e9561b7117128233bb3de49587cf47ae7369f91a2a2ff999e9a5f444c46fb0c558d4dc39c058d3de8d9c954f98a350cbb304bee22f380132e2715036300b34da111179e03b863bf94360c66b2d967ede706f83b2c687a7cbd48b61c826aa7b4f041b34ae0980f1e20e771598af2e45e63bcfdab16430ec2d06a02f2a43b1a65a6e9c7e3023dda8d58022f180857135bc1bd30f9d7b350f3da564b07aa863ca198a3383d3f10b6e51ee25b4598d999645f3eed6df398dd5f25e16503f44ce2403170a47bd0185ac9d1947fc6383d7c4a78b125337e9bc6c2ddaf7ac404eb2c1e90db2ee6878c854c885695e61e29ba992e2b60175e2e7c15244970e312560fed74c1c3457d4cbdb3fe189f3b985d00878219527f8a59df0db3604804e3a4ee5adfdb5cc98dbf7e8d2c39c3e75ab9be38dcddecea7bc78c39d901fa7ff9638d40b23d4e33ad5a6263b3c489f4ecf6915ac6b4c59d742a1c201f2c087b7d853dd6969e35de16b27f50015de9ca2fa42d8be0b287686839920967b580e7db63d34d1073415ff2b6607c92c42593e33b9c68aad8987c56c6b276cf431641660c2668a2a2f5cdda1c3ef4b919e428236a4d4be6b9854393af37ad43c3f0424259a696a269800031e06ad6aa6cf983e63f347c5c6ff71e50adb305e79d79eb9bfa29c609e43c4cb39550d0739b0a43a36559e42b421d6f4d3d1b6cf8bd1cb60e2a35b7bccb0c435434182a6d633e0f6d1729833e2613c0f15e854995f97bbc6bf2b8420a40e74e133bcf013040128b05e572b6f4dfc5d708835af2dabdc20249b0bb45d17381d32ae4a6ae660a14bf85d8d10ed2e29a0d46054a9da9fa516706c7a32cf0fbe8c196884d6291a8e1062c25560d300c4c85aa9e02986a9326a13fd8a0ea2de58d224b76af9088bef9bedd964a2df98942de3ab366040cc38a756ca223c40779c5b8b53da9860d3132f2aa46f429de7db5517ede8fcd05caab71b3ab8202b160aabdc1d361876850c28d8be902d43e2343588b2394e05e3e20b5f9d0cfb411da9dc37ac9db9ea754d10f695adec30c5018f9843349793b688774a02b07cd1cbac45095513911265ad32854d8e3e779989f68c3cc8526b1c0c446e476266d4989aecdcf1fc61adc6f0584500dd7dfc638873802c4c64e14c43182131846517babefb35321d16caefbfbc7aa765e8c3aedc8e231165db13abd3ab2ca485a0251963c9440d71f6ab294dfa00557226c47458e6ac4d46448a4b024cbe9864b27fec39c7af996af39b49cd8656639887c96391c5ec465b8b749041da15c0cebda6bfbec77295251ccae1c42c423127479a91469f80eef3130ba58434cbce62134fdeeead75c1ad0ced40f21197e0ab4de6a39758e1e6e7ac82282fddbff4102c7086a6b56d6882201127cfb1d87beb30bb30f109a7cb52c79ae00cfd4cd9f47fbedf803c699264c342ffc269b0b5ffc495892eab3ed59aac5d7b00bfce25007196810ad16acbe3ab475c6c517db9af680ee99380188daed00ee13c091f17b1886f11101a77a9b7bd949cdd9a2c1a411c98ba845d114a3610432aeeab084a4532db6f931ad2dfb5332b3d0131952d0e4c129b8b15dd30cbcb2736c37d238a6466ef2ee8a6daea54f7354086085bd513acf35c04c37b33dd718422885924583903f57a66ca4bab98ddef1d985980e533aa824c1d27ef206e75feda062d1b80da79122c2c05d339879d277a4bb2aa4da628a1c0985fcca70d88b06ac42393ee7e3440b8556cf3ad5840dd338a6fec7d5ee54fe6b105239f091ca002489f108f030cb0d9c1555bd63dc9b1c3903b366c852786dd4d0c281d072628eba0fd944b5ab5e9532897486601910b3ae7eb54cee2db7f042b99f535c7dc71495a4f90332ee82d0a791cf697d5c634bec565edb3c126fb376924b757241eb834de2dff81de94d94bdd535ab89bb3702066980ccbf7bd7afb31e35b0f1b3377e9e61a4ec6add38a537aec2afeabe1d3940c11b07eb9420a03cd365add8c9de2e9c11c6e5ec37d3331ffd167a6dffff4732c1598372dc3ded7f64145936e2e14cfb6bdc8a46b347b978febae8c204ea7058aa3891b17c347c77498b31bab040d6c47c4eb77569c72bbcfaed0c1f1808efec11ef14b6f3295e9cfff1ef825595c6375afa2c632d3378fbf8258bba206d8ef734f86db7ed0b9330e9fe513679e1b4a90fba9e799eff7ba274acd0b6cba8ea94db7151b90c56ac2112de90f8e0dc3741ab033db32817d9d7889353d58db6bac4c30a6f1b47f09365ece2519102a73acd170b09a659a751666dc9f4e93df6070bcdaefafb665829d94a0e55f64319cf8506a16d001da7620aa68f03abfbfeebb79d5a05c1577a194038f5ef5456cbb450b42b6ff0060a94fdbb1cb7822e03cdc37933ca3efaff20d080d9de065c16a494d56deadbc0c0f377307ef98d0c35ea0ef63c961f803aba981e93e118be2dea87a55d275b3f9d1c9cd01ae196277f244639200099ea9e7b5e752818b73b04ddbec4e9dcc805f159093600d304c2304aa23e7e7319344ec5a455590a3477a934fe5f56c79a604e936ffeead8ac04f5e42f53f228c0bb58e6c0ad331c0875d7823c728e6b4c0fa605bc567edb7b770243faf5737dce59e3bcc3bc44e93111cd05778c6b1e7cb664380c4d3f22d18b595f527dba6cd0a8254d5de03777806c37a4adc7c29d8cca4d80d504d0aae4459c473340bf008524097ab2701245fe3e784ab199d4d77474f4ddf3e66c06e38a563e5d45205af10f08d9728513fc2bd86ea20b3536651915eeada873cce178adb1e56602eb5ecf9adc5c7441341be510e58970e6d01ea771ed4e3e1009a3ae1f198bb6ac153494043851f945a5a98a8d859f730608d0beacc7f77218f0b87a697e7f93e5476ecfd065ea96492bc9c23c3c0e826d3220c24bd95763fee966376efd0517fc1a5ba6e01dc71fb380a31dcf7f2e004662b08456068c49615f00428d0bf4a08fac970b1120a4acb5293a498f5769f3c19630459a84f5807e8daac4d7bc436736e7d11b86b814313609e88118f007225abe9dce023928fec7a0f5f8f1512ddbf172444adb7467f073fb9c8afb547afce35f369a66863e2acef4404757283e3eb64e7a3de6f6d9d23787a5e63ca370ae4b14982fc15ce8f3c1c2504f9e0e27e4cc32a0fa2001cc12141895f3a5f50e022e3e354ddebcdf273ce677c3e627d816e64bb0c29ee2e17cfe4e8157cc9656b6a84050474bd232bdb305894f1bde57e1bfb78c51fa37967115c748e44768e9263639a5c8a0faf364fba54b4dc96bd80f930cc71e3612e669bc6db507c136ce4c0480dda8ad2b5ada315eaa808c6af8b88724ace436a151edb4eecd95b82f583a5b778d037108197254737e34a0400f62f40c7e16941ec7e2ef274ed2fcc2f50914516d795c3f30cc25406304c2eec7ec614270ba479eebe24a943eab3fe04b1efdf51826eb7b1d637ede0f2d6ec82aada39a8949653f46f14fa827be26c1c1d55b7f91dbac4b12145f25381e040b1135d925cd7df020d0f4fb7da3cb200a5e415b8abc24728255e70e6cfb7316f863b45c07580e6b9f7eeb333e318242a94a0a2fc0313c6fbeeca09711a2d67de76f3443b9ee691652d7920e8678a90f4ef3b1a9abb5e7babfaa8e8ec79170664093d39560e27289c9f2384ca25f7c0dd8af18ae9394f53bffa6f4eeb3bf019141ed416ad1e338419d064771c5e77d9d007c401c48fa348d8cade5ba4d16e41ca052a0f9041afeb267a1681026bfc3f28a8ddfb38c919f536e7d4b228771e3eb8b429cf0e03270b758fbce2d1505b22ddc69ecd96017e0a1d8625942de60cfd43075fe09fcedd8ee99a736971771762b563cde631412de531e6e17e3b8b90bc3955933d3ac1eefbdf12c19480eecd30384bc3ce65699662c5f2d38cf6af5c80d4089f683427f401e59b2ef78b49d42f326249b5d87bb9b0ae7a14aa4b51d1b2afed34436642cf4c80cbd4b5ef976829a230a14f39ac688eb319393fcf07f42ecbc9aec78415643d98d351aa9bc080fbe162195c75b2cd04ba1d72206a77b80e3537999ddcaa1bb5feec06e79142f91bbe6506c9028878c101d5b2131c510238edb5676e2a8aa4d5082fdba93b726dc262a7f3a07959bf26c35dec27016a5624351dea14bd916d8c0afdafc203da712a4cbcebd35f3164be9d2e49f43364a7a937406514ef118346ec5f94afaa51e5bb7cda89da0cefaa5840d6420bf2ce9de86ce26aa2f58b4be5f98b61cbb339c7af095ef98e2140467fc3bf1821c9bf3c8071973991a602790c03d900589e2b1b576cb2b452d20516fb242fa5c46cc2475db2f6a931ecea4001009fc6e749c72e55966ff2b5495437d5a6386965021c4310671c65fd0b07cd879e823f06312a200ecd5dcc7ae18b0f036de611552267193908c4cbe721bfa5f144a312678b7252007f187ad8f81af86aa5803f4ce9d920b083fb4d0bc42db9e98903926d65354ad65a645057e060e1aaa7ec46d5dc66f91467f3a38270830bb36ec748fda26c6678f247282018708691ca887ed627bcad5d4955687dc05fa427e3d644f39f79d3b7c379a4b6f6bf2838c9f289488cf0815e12353bc9b79bdbaeadfcb4fc8d8e7f5ea37ecc8a3368b8371bdd794c8ef08704ee8db12714b92e50e67943e65d0841d8d8ae156b20610d097cb04a43da4ca097fc0ad1370c7108e7262ebd4f26d04ea93f331607be1a76e6cf6b1c1fe556c82607639c931a668aa10b7d6468c12fc5d087f92f776ac3589419d16468ba82818f6756433b1f6b2b90c6f2fa1913c9d7f67308f33e999527fc186435bbd329b8f08c3a88a445ebf68e2fc6a444e01c7b569dc19ae1411841a7402192dd6fbb880d5b0e96acea3ee27fb7279d272bb3b24927c7cd122253034f15ca55e521042a439d6b854c1ddf4ad41184295162b9a6ca70111e90699f50e03c0a85b8f66d19070c4739b93b7d9e4fe18b5ba2b3e161730aa63f827c8b10c23ebe4ee67bade6074e17aee0f784e42b7262eab93efa121214b5a39ffee72e92dd87ecef79abae59072f638505644bef2b705d272cd54ffa78955a06da604279704252dbf229915795b47df8ba514818dc17c1de827442090ef0fdc6bb1695da061433cbf788cceaee144ea77e4dec946f4f95f770db1e5f646b5e8bc6954da95121dba27d06c933d7d550f5c50b894d93bf8160838df6e9b2b247c0cb0be45dfc298f1b46ab4a78a69cc7c659f093992ddafa782e6dc961d4711e714b789cf9fc53d59334206723a1385e4665585be34624abd8e34878f26f28e29670b78a09ebd1657b5f87a3d5b83e4a454802228f688b4cf3da816421b485ea1b24eb78e2a97833e3e8e1ef85000749f17724dcabe94f21432102c9262d18172463b80949a328b0b6c1ee03d17a50e271ecdd9843deef66ee05cb9efbc2933ce01c3aa0c4141f649931597f4c5678f7e80737d243eb45e6639c980689dcd195a06525b8cf5c912da684474c93b1159d4b274bf791551efa335215ab86f4b7a01b644e9eb7854ce5240f98599653734189e8535ab783fd0139d6acd023de3d0f87958c3a6253bfee8a614416f04f9ee6e1fb9ac4da1b28d83f79c0003725c5ac86a3ca3b7e6426b124dd2e2ad2d24e2236f0deb836ab2159a1806c96680dd89566e09cccf17ca7e63159f27913b79679065d23b37a977be748a339598a2bc7715c07ea615d0650c08aa751f488ad03f3ae4b3c5a2207d04547ebb7e84d004448990b796dc9ccd3dabdf6858e8fb3f3dee22623ecb0648e081a6f06685703a6d6a7ec979d45bc62a601cfa3a8d4d6940a50b08d7b934eec79b887668ff26731449a0b5911b4ed9c10524bd6d94827a10a1ed8f391a90969711ec70ee6b68e56a4c1582a4138b56ad4cfd4f9cedd040e83b13f0e1e037a41198bc47167e3220165f068111c334399e55195052cffd5723925d6dcc9944b929276db024ff0809f67e63ee18cf1af0f49c77562661ae8c5551eb79585541a3d516af2fafd803ddfcb6c4d8c717496b3184fd416dccd10fd7a72261de214b47182a1565fe4675723db2219932be09182c1ae0b90809687969bf3246d2566c3fe1ee205a1f742d7f750c96f349a535ccd849bf99be421d057044c09e2766ca656f4843fcaed6a6a5f02c5e8d8549571f93b4a6d79fb09a003c83761e2ae65a7c5f20734747a3e0dd125214db32d7c9957139899d1c2b095e20a27e9a00af43272df5c7cb5a58888b2c81a37b084c7272774b585922926c94b26670c253b12218055d13c4423cc6896baf8c715eeef6289e0d9f3e948dcd1bfdcfde23fed723b2b52dbe76a6874312bc99c7f168c8df5ccc6f0c0ad18745a3f08f81b6bc238f37791318c58462fa8ee8a6dec81482d6e525b54109b796d81eeb19925562d5857afda348dc15a404880b5c7534d3abe20c889e4a0fe82f0c43c8d107cd67bb64ce0cdc267bcf480f92a7917e93f853978fa857c128f2fbb24df87e08fa9aca967767ac71987348d89fb44232287451cbcae56719131058ad4a7bdc57fe39b94c79f8c796aabb3724a81013266c9d06010ff4ade7fe2742a9ab9fc13016f51109abac2a8691749ac42ab8bdfcf3e958672ffb702bf3d3224e2ad3c458c00dee0c3071cdf84733f98afd2ca0e254adcd69696a2d79eadf91b86f442871eb74b917d1d14d8e192a091b5b31b654beccddf045deb4a0645809b87f26a373b33cd3c0c62884f57b3e46deac566afee75e721e76ed2ffdcaa8af1e1cfdf9f8acbc2e4fe316db7f2b63d74b7a1cbd6d27164aa189c46138d96a2df44bdb78dbbd14c244b1d7a4611960171ee522371ca1ba3e3a0611685d3030a063ea6473a36973af079e27c4ea8bb3971957d00f34cd33b9cd1fa5f47032591cc1646ebba823c8db67c6042a7b941a09646fce2ad15591097d9b0d8ccb7b16e767fe9c6308957d5a1079951e968a8ea5e1acd54a1d74f812681f3594651da024a4c0bff705762fdfd747380cf1e62041bd54ce84fcbbbb57d43582c7719696d1f4c961d9b9b2ba02f5e0ee7ee87b35f14e8682359314274bd20b142de656b5225a3b648d8abd49b036a74859bdc540a4bfc77c9b65d7c0bd97a72e21d463b865fb6435bc156ebc065f20037f77eb3ff2a4d4d413817315d6a8053a14238a43c9ca71105355aba03aeb82b3e3890b840fe359c7a2b7c1971039d2cf51768d8d30887cd24a4e5177cff20437dcafe7f829615bc35035fbc81238f25f267336f0a110e6df2c36c2db7c6756955b2c665420fee495bd521fa836608f08e418014fc22c85b158279c050fd6b888474e3c925eaca80adb37bff3d7f209370b1a0ec25ae870755f9efeea048f58d3687cad3202e8078bc5f4532b0253fd4c6eaeb66b6c8e0d3d05cac003728934a0aa3cf3e84026c2c589ff92ee731f70b39e8d1ada5667d19cd1079ab205e92cd595af3e938643265d65b769410cab3a1458ed8be7bbe24973e65ca6f6fd1f8abb2b46d3fcc726585cf5bf53d3f411ed81c7d30320ad8e72fbba1fb2035ade819716f63edcf23eec22b7a6216ad79c5de335e5d69baada221ec687081031713791094b51b3aed664dd76c892658b64543b0d5e553f8da892f8f492c913c6f7d6308e4531160c581ac620c615c6a23cf64e115a92212cdcd2a282014aad5e1e0b81a3f1084bc2986aff875693501aeba58f633fff6f2b81ff4c66b8a107a0522b22c102487ddf4b31e71a48fa25cc4cd2bdc771b4a5723be6859782629d7d776b7f10356aad8c673c0eb48891b9256fefa4210936359272804934958ae395835cf6351385d984c47dcd00ebcddc0bb1a61f9f902d61819c9ddbc2318fc9082f64bc89fc076114d11824564a35f143357e7395ba99ea1763e93d2f2832cdae3fccfb210bc267a0cf57ccabb3c965525441972a3cbe4d65836f4c7aeba7e27ab2c133cedaa6ae5506ededc1844c0cc477a3ae9e6161a56d10906bcddd83b06352ce2422665cf708a346779f9fb3acb1516ebc9949985f3892f81f33e0aa63de927f6a61cc636330cc3f7b23261a1e4033a54446fde46bb654fc0c07c755f7703feb2a788be4df6b8d8bb836811e5de4390f69e36f6f7d854b16daa493e7991a9941422670c3a28944c397d14f03db3a7212a939bff5ee344b5d8746431b50ecb87bfa5c88e99a3ac2fa5272c00cc678914d72417588b6f3e41005107e3585e95193a78ab198546ee6951e71a1cd3e0ef0d8d7786b734cd146c27f2ba44e09d3fc202c4178992418faef5293dea2f92d34b910da618e1f48b0188086e0aafe33698ef12a3b6e2076eb3e9ae0ccea45780f413ef1e7aac88a30ba14f8c77a27c4067c42512d7d625f7cdb36f1bbe3ab5deee0bb30711aff28fe891663f685baea89ddce2d56eb4d04aa38565b5f916d4cf86e09cd3bb5d38d45b95a93751a17dbf9424154bf0ee20afde573c20e600c0787f07127038183750a44c540479fdea78ee0fb020178f82fe6778a756a6beed5611be2aa8c30b20d6a5b0ed42069e8b2b5669f3d3dcf1a1b4169b1ab7e6631db1c0102b3bc6f1a6f3903f9add437a5f27cb3881f3304062a09f274747edc671fe74cf0c76eb8106f99c44a498a31db96ba929af8b0c413fb92d4fa8f5b319ce543135d7562554145b08b334d02c3b1999d899510d0528d3ed623eb5cc2d0f8f634bd1c2bca20a1a18790a1ce194813468e3c224d8810e39d5d0afe68996a4c93a73ded22e07d624cc9cbf1424cf729314e35b9d05a5e33648ca2069a6413c3f2b62c8e2dd63fa04475f5d300a6f9a92c5d03d11d390143fc7ad8ceb3bc35dd724642385f5df3275b9293b4622b1ce8af40966948daaa32a098eac011133d6e7d152c81769965564641767594a779590c8816cc5139b0c515f8cb055355a82564833ec1bc2755d7f483555461b118388b8777f3245ade64450d34dff2f5ce8b538bedd60dae7305dfcce8cfb6beb6ca46280b25829cb25e6865770c4f36bf228982af178c364524fc31545b4813d2342fa3003515fe80232c16e44d51724bf7b36f7c8bd75ebcdbf86dc15393c6ca954004db21ff90699015c6ba2546a8064635800bf0a0231d474eb37d93119785f5521c527e42051ac42eaac2aa676882fec7bd4237ed4b3ebed94a6d0c90585efde6ce4d8332e416e4a8319f706b5337b88c5b7355fd7362223ca235970af7de0a3d0dc19d8ba3b306a6dcaf2b6f1a2daeac569f63d2eb30747fc7a4a299f740a4b178c19ca29a9bd85598faa8ffd96900a7187ae3c548227e69d258fd01df6195f24151123a781473f19b9427da5fe81ce971c8ea81991fb11c9b19aea6f13b1c079088285516c238ac991a0917806c8f6e331edb4227698043836796a1747e6662597c8ef167b213e22bc419d55888e3d09fe29dc14242dcfd073a7a4fa30e4215fe9a8de78576067bcf1250ee064dba166c31e55d81166b18adf185d9a75008fa083fcd5d51aa3ff7fbef800fd6c074f9c6ea3613d9a3138a8666f394b527d962735cfee61921a2ccf5eb25efbfdcd0dcdddbd9c041e35386b150bfbe49ade391bbd24aba4656b417bab505724e2d9ed9f4a146064ac0460994effd981279354f21b5974d5024d18ef2fc2dc0495214a68adbd0a4411650201dcf54c72338306ac6920b1f6f395bfda91ba6d0058217530c754cd06eae12c827dde06b6f795b341e313d882d403f457a11627754a36ae4aca35da4bdbcdcb4cb5cefb4ae08ed068548c582221cd11bd1d9598f3e273001672708808560b6a66ae27dc194d9613962fe1baae0ad52efa92b99c7bbec9e1938b08418a76dd7b6de969a3c0fbf5060b34e6530ed32fe5fd3091bd2658ff677f8fe4e7990ff3d36c</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SQL子查询</title>
      <link href="/2025/09/23/SQL%E5%AD%90%E6%9F%A5%E8%AF%A2/"/>
      <url>/2025/09/23/SQL%E5%AD%90%E6%9F%A5%E8%AF%A2/</url>
      
        <content type="html"><![CDATA[<ul><li>企业常用的子查询示例？</li><li>有哪些必须用子查询的情况，有哪些常见的改join&#x2F;with提高性能的例子？</li><li>Hash Join、Semi Join、宽表、FilterProject、SemiJoin 、HashBuilder这些词什么意思</li></ul><p>下面把“<strong>必须用子查询</strong>”和“<strong>可以改 JOIN &#x2F; WITH 提速</strong>”这两种场景一次性拆开讲透。</p><p>每条都给出 <strong>Trino（Presto）语法示例</strong>，并注明 <strong>为什么必须&#x2F;可以改写</strong></p><h3 id="一、4-种“必须用子查询”的场景"><a href="#一、4-种“必须用子查询”的场景" class="headerlink" title="一、4 种“必须用子查询”的场景"></a>一、4 种“<strong>必须</strong>用子查询”的场景</h3><p>（改写 JOIN 会<strong>语义错误</strong>或<strong>更慢</strong>）</p><table><thead><tr><th align="left">场景</th><th align="left">必须用子查询的原因</th><th align="left">Trino 示例</th></tr></thead><tbody><tr><td align="left">1. 聚合后回查原表（“找高于部门平均”）</td><td align="left">聚合值与明细行<strong>逐行比较</strong>，JOIN 先聚合再回查&#x3D;自己和自己连，只能用相关子查询或窗口函数</td><td align="left">SELECT * FROM employee e WHERE <code>salary &gt;</code> (SELECT <code>AVG(salary)</code> FROM employee WHERE dept&#x3D;e.dept)</td></tr><tr><td align="left">2. EXISTS &#x2F; NOT EXISTS</td><td align="left">语义是“<strong>有无匹配</strong>”，JOIN 会<strong>放大行数</strong>；NOT IN 对 NULL 敏感</td><td align="left">SELECT * FROM customer c WHERE NOT <code>EXISTS</code> (<code>SELECT 1</code> FROM orders o WHERE o.customer_id&#x3D;c.id)</td></tr><tr><td align="left">3. 行号&#x2F; Top-N 子查询（每组取最新 1 条）</td><td align="left">需要<strong>先排序再过滤</strong>，JOIN 写不出“每组”限制</td><td align="left">SELECT * FROM (SELECT *, row_number() OVER (PARTITION BY user_id ORDER BY login_dt DESC) rn FROM login_log) t <code>WHERE rn=1</code></td></tr><tr><td align="left">4. 测量数据质量（重复主键、空值率）</td><td align="left">只关心<strong>统计结果</strong>，不需要展开明细；JOIN 会强行拉明细</td><td align="left">SELECT order_id, COUNT() FROM orders GROUP BY order_id <code>HAVING COUNT()&gt;1</code></td></tr></tbody></table><h3 id="二、6-个“常见可改写”例子"><a href="#二、6-个“常见可改写”例子" class="headerlink" title="二、6 个“常见可改写”例子"></a>二、6 个“<strong>常见可改写</strong>”例子</h3><p>（子查询 → JOIN &#x2F; WITH，<strong>性能 2-10 倍</strong>提升）</p><h4 id="1-相关子查询-→-JOIN"><a href="#1-相关子查询-→-JOIN" class="headerlink" title="1. 相关子查询 → JOIN"></a>1. 相关子查询 → JOIN</h4><p><strong>原写法（慢）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> emp_id, emp_name,</span><br><span class="line">       (<span class="keyword">SELECT</span> dept_name <span class="keyword">FROM</span> department d <span class="keyword">WHERE</span> d.dept_id <span class="operator">=</span> e.dept_id) <span class="keyword">AS</span> dept_name</span><br><span class="line"><span class="keyword">FROM</span> employee e;</span><br></pre></td></tr></table></figure><p><strong>改写（快）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.emp_id, e.emp_name, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employee e</span><br><span class="line"><span class="keyword">JOIN</span> department d <span class="keyword">ON</span> d.dept_id <span class="operator">=</span> e.dept_id;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：把 <strong>每行一次索引回表</strong> 改成 <strong>一次 Hash Join</strong>。</p><hr><h4 id="2-相关聚合子查询-→-WITH-JOIN"><a href="#2-相关聚合子查询-→-WITH-JOIN" class="headerlink" title="2. 相关聚合子查询 → WITH + JOIN"></a>2. 相关聚合子查询 → WITH + JOIN</h4><p><strong>原写法（O(N²)）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> emp_id, salary,</span><br><span class="line">       salary <span class="operator">-</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> e.dept_id) <span class="keyword">AS</span> diff</span><br><span class="line"><span class="keyword">FROM</span> employee e;</span><br></pre></td></tr></table></figure><p><strong>改写（O(N)）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WITH</span> dept_avg <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> dept_id, <span class="built_in">AVG</span>(salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line">    <span class="keyword">FROM</span> employee</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> dept_id</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> e.emp_id, e.salary, e.salary <span class="operator">-</span> d.avg_salary <span class="keyword">AS</span> diff</span><br><span class="line"><span class="keyword">FROM</span> employee e</span><br><span class="line"><span class="keyword">JOIN</span> dept_avg d <span class="keyword">ON</span> d.dept_id <span class="operator">=</span> e.dept_id;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：聚合只算一次，复用结果。</p><hr><h4 id="3-IN-子查询-→-Semi-Join"><a href="#3-IN-子查询-→-Semi-Join" class="headerlink" title="3. IN (子查询) → Semi Join"></a>3. IN (子查询) → Semi Join</h4><p><strong>原写法</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> customer</span><br><span class="line"><span class="keyword">WHERE</span> customer_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> customer_id <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> order_amt <span class="operator">&gt;</span> <span class="number">10000</span>);</span><br></pre></td></tr></table></figure><p><strong>改写（Trino 自动做，也可显式写）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> c.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> customer c</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> orders o <span class="keyword">WHERE</span> o.customer_id <span class="operator">=</span> c.customer_id <span class="keyword">AND</span> o.order_amt <span class="operator">&gt;</span> <span class="number">10000</span>);</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：Semi Join 可在 <strong>Hash Build 阶段</strong>直接过滤，<strong>不放大右表</strong>。</p><hr><h4 id="4-子查询当“临时宽表”-→-WITH-展开后多次复用"><a href="#4-子查询当“临时宽表”-→-WITH-展开后多次复用" class="headerlink" title="4. 子查询当“临时宽表” → WITH 展开后多次复用"></a>4. 子查询当“临时宽表” → WITH 展开后多次复用</h4><p><strong>场景</strong>：同一张中间结果要被<strong>选两次</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WITH</span> high_val_customer <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> customer_id, <span class="built_in">SUM</span>(order_amt) <span class="keyword">AS</span> total</span><br><span class="line">    <span class="keyword">FROM</span> orders</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> customer_id</span><br><span class="line">    <span class="keyword">HAVING</span> <span class="built_in">SUM</span>(order_amt) <span class="operator">&gt;</span> <span class="number">100000</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> h.customer_id, h.total, a.address</span><br><span class="line"><span class="keyword">FROM</span> high_val_customer h</span><br><span class="line"><span class="keyword">JOIN</span> address a <span class="keyword">ON</span> a.customer_id <span class="operator">=</span> h.customer_id;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：只扫描一次 <code>orders</code>，<strong>CTE 结果默认物化</strong>（Trino 358+ 支持 <strong>CTE Reuse</strong>）。</p><hr><h4 id="5-多层嵌套子查询-→-一步-JOIN"><a href="#5-多层嵌套子查询-→-一步-JOIN" class="headerlink" title="5. 多层嵌套子查询 → 一步 JOIN"></a>5. 多层嵌套子查询 → 一步 JOIN</h4><p><strong>原写法</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> sku s</span><br><span class="line"><span class="keyword">WHERE</span> category_id <span class="operator">=</span> (<span class="keyword">SELECT</span> category_id <span class="keyword">FROM</span> category <span class="keyword">WHERE</span> category_name <span class="operator">=</span> <span class="string">&#x27;手机&#x27;</span>)</span><br><span class="line">  <span class="keyword">AND</span> brand_id    <span class="operator">=</span> (<span class="keyword">SELECT</span> brand_id   <span class="keyword">FROM</span> brand    <span class="keyword">WHERE</span> brand_name    <span class="operator">=</span> <span class="string">&#x27;华为&#x27;</span>);</span><br></pre></td></tr></table></figure><p><strong>改写</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> sku s</span><br><span class="line"><span class="keyword">JOIN</span> category c <span class="keyword">ON</span> c.category_id <span class="operator">=</span> s.category_id <span class="keyword">AND</span> c.category_name <span class="operator">=</span> <span class="string">&#x27;手机&#x27;</span></span><br><span class="line"><span class="keyword">JOIN</span> brand    b <span class="keyword">ON</span> b.brand_id    <span class="operator">=</span> s.brand_id    <span class="keyword">AND</span> b.brand_name    <span class="operator">=</span> <span class="string">&#x27;华为&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：两次相关子查询 → <strong>一次多表 Hash Join</strong>，且可以利用 <strong>复合索引</strong>。</p><hr><h4 id="6-子查询里再子查询-→-扁平化-JOIN-窗口函数"><a href="#6-子查询里再子查询-→-扁平化-JOIN-窗口函数" class="headerlink" title="6. 子查询里再子查询 → 扁平化 JOIN + 窗口函数"></a>6. 子查询里再子查询 → 扁平化 JOIN + 窗口函数</h4><p><strong>原写法</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="operator">*</span>, (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> orders o <span class="keyword">WHERE</span> o.customer_id <span class="operator">=</span> c.customer_id) <span class="keyword">AS</span> cnt</span><br><span class="line">    <span class="keyword">FROM</span> customer c</span><br><span class="line">) t</span><br><span class="line"><span class="keyword">WHERE</span> cnt <span class="operator">&gt;=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p><strong>改写</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> c.<span class="operator">*</span>, t.cnt</span><br><span class="line"><span class="keyword">FROM</span> customer c</span><br><span class="line"><span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> customer_id, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> cnt <span class="keyword">FROM</span> orders <span class="keyword">GROUP</span> <span class="keyword">BY</span> customer_id) t</span><br><span class="line">  <span class="keyword">ON</span> t.customer_id <span class="operator">=</span> c.customer_id</span><br><span class="line"><span class="keyword">WHERE</span> t.cnt <span class="operator">&gt;=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：把 <strong>相关子查询</strong> 变成 <strong>非相关聚合</strong>，再 <strong>Hash Join</strong>。</p><h3 id="三、1-张决策表，10-秒判断“能不能改”"><a href="#三、1-张决策表，10-秒判断“能不能改”" class="headerlink" title="三、1 张决策表，10 秒判断“能不能改”"></a>三、1 张决策表，10 秒判断“能不能改”</h3><table><thead><tr><th align="left">检查项</th><th align="left">子查询必须保留</th><th align="left">可改写 JOIN&#x2F;WITH</th></tr></thead><tbody><tr><td align="left">是否 EXISTS &#x2F; NOT EXISTS</td><td align="left">✅</td><td align="left">❌</td></tr><tr><td align="left">是否“聚合后回查明细”</td><td align="left">✅（或改窗口）</td><td align="left">❌</td></tr><tr><td align="left">是否“每组 Top-N”</td><td align="left">✅（需窗口）</td><td align="left">❌</td></tr><tr><td align="left">是否只拿聚合指标</td><td align="left">❌</td><td align="left">✅（先 WITH 聚合）</td></tr><tr><td align="left">是否相关子查询且<strong>无聚合</strong></td><td align="left">❌</td><td align="left">✅（直接 JOIN）</td></tr><tr><td align="left">是否 IN (子查询)</td><td align="left">❌</td><td align="left">✅（Semi Join）</td></tr></tbody></table><h3 id="四、小结口诀"><a href="#四、小结口诀" class="headerlink" title="四、小结口诀"></a>四、小结口诀</h3><blockquote><p><strong>“聚合回查、存在性、Top-N 必须子查；其余一律拉出来做 JOIN&#x2F;WITH。”</strong></p></blockquote><p>拿不准执行计划时，<strong>EXPLAIN (TYPE DISTRIBUTED)</strong> 看有没有 <strong>FilterProject+SemiJoin</strong> 或 <strong>HashBuilder</strong> 即可。</p><h3 id="高频黑话"><a href="#高频黑话" class="headerlink" title="高频黑话"></a>高频黑话</h3><ol><li>Hash Join（哈希连接）</li></ol><ul><li><p><strong>定义</strong>：把两表里<strong>连接键</strong>先算成哈希表，再一次性“对号入座”做等值匹配。</p></li><li><p><strong>类比</strong>：老师拿两张名单，先给 A 班每人发一个“学号-座位号”小纸条（建哈希表），再让 B 班学生按纸条找座位，<strong>O(1) 定位</strong>。</p></li><li><p><strong>Trino 计划里</strong>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">└─ InnerJoin[hash = (user_id)]  </span><br><span class="line">   ├─ Scan[user_id, …]  ←  Build 端（通常选小表）  </span><br><span class="line">   └─ Scan[user_id, …]  ←  Probe 端</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>Semi Join（半连接）</li></ol><ul><li><p><strong>定义</strong>：只关心<strong>左表记录是否在右表存在匹配</strong>，<strong>不返回右表列</strong>，也<strong>不去重左表</strong>。</p></li><li><p><strong>类比</strong>：安检门只看你是否在“黑名单”里，<strong>查到就拦下</strong>，不会把黑名单详细信息打印出来。</p></li><li><p><strong>Trino 自动把</strong> <code>EXISTS / IN (子查询)</code> <strong>改写成</strong> <code>SemiJoin</code>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">└─ SemiJoin[hash = (user_id)]  </span><br><span class="line">   ├─ Scan…  ← 左表（旅客）  </span><br><span class="line">   └─ Scan…  ← 右表（黑名单）</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li>HashBuilder（哈希建造者）</li></ol><ul><li><strong>定义</strong>：Trino 执行计划里的一个<strong>运行时算子</strong>，负责把 Build 端数据<strong>全部读进内存</strong>并建成哈希表。</li><li><strong>类比</strong>：安检人员先把黑名单<strong>一次性录入扫描枪</strong>（HashBuilder），后面每过来一个旅客就<strong>扫一下枪</strong>（Probe）。</li><li><strong>计划关键字</strong>：<code>HashBuilder[hash = (key)]</code> 常出现在 <code>SemiJoin</code> 或 <code>HashJoin</code> 的<strong>右分支</strong>。</li></ul><ol start="4"><li>FilterProject（过滤+投影）</li></ol><ul><li><p><strong>定义</strong>：Trino 里最轻量的算子，<strong>先过滤行</strong>（Filter）<strong>再裁剪列</strong>（Project），无 I&#x2F;O 开销。</p></li><li><p><strong>类比</strong>：超市收银台：先把你购物车里的<strong>过期商品扔掉</strong>（Filter），再把<strong>不需要的小票副联撕掉</strong>（Project）。</p></li><li><p><strong>计划示例</strong>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">└─ FilterProject[predicate = (status = &#x27;PAID&#x27;)]  </span><br><span class="line">   └─ Scan…</span><br></pre></td></tr></table></figure></li></ul><ol start="5"><li>宽表（Wide Table）</li></ol><ul><li><strong>定义</strong>：把<strong>多张维度表字段冗余到一张事实表</strong>里，减少 Join，牺牲存储换查询速度。</li><li><strong>类比</strong>：原本要点 5 份外卖（5 张表 Join），现在直接买一份“全家桶”（宽表），<strong>一口吃到所有菜</strong>。</li><li><strong>在 Trino 里</strong>：宽表通常以 <strong>Hive&#x2F;Iceberg Parquet&#x2F;ORC</strong> 形式存在，<strong>列式存储 + 分区</strong>，配合 <strong>列裁剪</strong> 扫描极快。</li></ul><ol start="6"><li>总结</li></ol><table><thead><tr><th>术语</th><th>口诀</th></tr></thead><tbody><tr><td>Hash Join</td><td>小表先变哈希，大表逐行探。</td></tr><tr><td>Semi Join</td><td>只问“有没有”，不拿右表数据。</td></tr><tr><td>HashBuilder</td><td>造哈希表的阶段，看右支。</td></tr><tr><td>FilterProject</td><td>先过滤行，再裁剪列。</td></tr><tr><td>宽表</td><td>把字段先拼好，省掉 Join。</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> SQL </tag>
            
            <tag> Trino </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL窗口函数速查表</title>
      <link href="/2025/09/23/SQL%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0%E9%80%9F%E6%9F%A5%E8%A1%A8/"/>
      <url>/2025/09/23/SQL%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0%E9%80%9F%E6%9F%A5%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="一、排名与分布分析类（核心用：给数据-“排位置、看占比”）"><a href="#一、排名与分布分析类（核心用：给数据-“排位置、看占比”）" class="headerlink" title="一、排名与分布分析类（核心用：给数据 “排位置、看占比”）"></a>一、排名与分布分析类（核心用：给数据 “排位置、看占比”）</h3><p>专门用于确定数据在整体 &#x2F; 分区中的相对位置、排名顺序或分布比例，是最常用的窗口函数类型。</p><ol><li><strong>ROW_NUMBER()</strong>：给分区内每行贴唯一连续序号，同值也不重复（如 “给每天的订单按时间排 1、2、3 号”）。</li><li><strong>RANK()</strong>：按排序值排名，同值同名次，后续名次跳号（如 “成绩并列第 1，下一名直接第 3”）。</li><li><strong>DENSE_RANK()</strong>：按排序值排名，同值同名次，后续名次不跳号（如 “成绩并列第 1，下一名仍第 2”）。</li><li><strong>PERCENT_RANK()</strong>：返回相对百分位排名（公式：(名次 - 1)&#x2F;(总行数 - 1)），范围 0~1，体现 “比多少数据好 &#x2F; 差”。</li><li><strong>CUME_DIST()</strong>：返回 “≤当前值的行数 &#x2F; 总行数”，范围 0~1，体现 “当前值及以下数据的占比”。</li><li><strong>NTILE(n)</strong>：将分区数据均匀分成 n 个 “桶”，返回每行所属桶号（如 “把员工绩效分成 3 组，标 1&#x2F;2&#x2F;3 桶”）。</li></ol><h3 id="二、相邻数据取值类（核心用：“跨行取数”，比当前行前-后-特定位置的值）"><a href="#二、相邻数据取值类（核心用：“跨行取数”，比当前行前-后-特定位置的值）" class="headerlink" title="二、相邻数据取值类（核心用：“跨行取数”，比当前行前 &#x2F; 后 &#x2F; 特定位置的值）"></a>二、相邻数据取值类（核心用：“跨行取数”，比当前行前 &#x2F; 后 &#x2F; 特定位置的值）</h3><p>专门用于获取分区内 “非当前行” 的数据，无需手动关联表，直接跨行提取目标位置的值。</p><ol><li><strong>LAG(expr [,offset [,default]])</strong>：取当前行 “往上数 offset 行” 的 expr 值，无对应行返回 default（如 “取前 1 天的销售额，无则返回 0”）。</li><li><strong>LEAD(expr [,offset [,default]])</strong>：取当前行 “往下数 offset 行” 的 expr 值，无对应行返回 default（如 “取后 1 天的销售额，无则返回 0”）。</li><li><strong>FIRST_VALUE(expr)</strong>：取分区内按排序规则的 “第一行” expr 值（如 “取店铺本月第一天的销售额”）。</li><li><strong>LAST_VALUE(expr)</strong>：取分区内 “到当前行为止” 的最后一行 expr 值（需注意窗口框架，默认到当前行，非全分区）。</li><li><strong>NTH_VALUE(expr, n)</strong>：取分区内排序后的 “第 n 行” expr 值，无第 n 行则返回 NULL（如 “取店铺本月第 2 天的销售额”）。</li></ol><h3 id="三、窗口聚合计算类（核心用：“累计-整体统计”，在分区内做聚合，不压缩行数）"><a href="#三、窗口聚合计算类（核心用：“累计-整体统计”，在分区内做聚合，不压缩行数）" class="headerlink" title="三、窗口聚合计算类（核心用：“累计 &#x2F; 整体统计”，在分区内做聚合，不压缩行数）"></a>三、窗口聚合计算类（核心用：“累计 &#x2F; 整体统计”，在分区内做聚合，不压缩行数）</h3><p>将普通聚合函数（SUM&#x2F;AVG 等）改造为窗口模式，不合并行，每行都能显示聚合结果（累计或全分区）。</p><h4 id="1-基础累计-局部聚合（支持按顺序累计，默认-“从第一行到当前行”）"><a href="#1-基础累计-局部聚合（支持按顺序累计，默认-“从第一行到当前行”）" class="headerlink" title="1. 基础累计 &#x2F; 局部聚合（支持按顺序累计，默认 “从第一行到当前行”）"></a>1. 基础累计 &#x2F; 局部聚合（支持按顺序累计，默认 “从第一行到当前行”）</h4><ul><li><strong>SUM(expr)</strong>：计算分区内到当前行的 expr 累计和（如 “按日期累计店铺销售额”）。</li><li><strong>AVG(expr)</strong>：计算分区内到当前行的 expr 累计平均值（如 “按日期累计店铺日均销售额”）。</li><li><strong>COUNT(expr)</strong>：统计分区内到当前行的非 NULL 行数（如 “按日期累计店铺营业天数”）。</li><li><strong>MIN(expr)</strong>：取分区内到当前行的 expr 最小值（如 “按日期记录店铺截至当天的最低销售额”）。</li><li><strong>MAX(expr)</strong>：取分区内到当前行的 expr 最大值（如 “按日期记录店铺截至当天的最高销售额”）。</li></ul><h4 id="2-全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）"><a href="#2-全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）" class="headerlink" title="2. 全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）"></a>2. 全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）</h4><ul><li><strong>STDDEV_POP(expr)</strong>：计算分区内 expr 的 “总体标准差”（用全部数据计算，分母为总行数）。</li><li><strong>STDDEV_SAMP(expr)</strong>：计算分区内 expr 的 “样本标准差”（用样本数据计算，分母为总行数 - 1）。</li><li><strong>VAR_POP(expr)</strong>：计算分区内 expr 的 “总体方差”（总体标准差的平方）。</li><li><strong>VAR_SAMP(expr)</strong>：计算分区内 expr 的 “样本方差”（样本标准差的平方）。</li></ul><h3 id="四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）"><a href="#四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）" class="headerlink" title="四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）"></a>四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）</h3><p>专门用于分析分区内两个变量（如 “销售额” 与 “日期”、“广告投入” 与 “销量”）的关联程度或回归规律。</p><ol><li><p><strong>COVAR_POP(y, x)</strong>：计算 y 和 x 的 “总体协方差”，体现两变量的整体联动方向（正 &#x2F; 负相关趋势）。</p></li><li><p><strong>COVAR_SAMP(y, x)</strong>：计算 y 和 x 的 “样本协方差”，基于样本数据体现两变量的联动方向。</p></li><li><p><strong>CORR(y, x)</strong>：计算 y 和 x 的 “皮尔逊相关系数”，范围 - 1~1，直接体现关联强度（1 &#x3D; 完全正相关，-1 &#x3D; 完全负相关）。</p></li><li><p>REGR_* 系列</p><p>：一次线性回归专用函数，如：</p><ul><li><strong>REGR_SLOPE(y, x)</strong>：计算 y 对 x 的回归斜率（如 “销售额随日期变化的每日增长幅度”）。</li><li><strong>REGR_INTERCEPT(y, x)</strong>：计算回归截距（如 “回归公式的初始值”）。</li><li><strong>REGR_R2(y, x)</strong>：计算决定系数 R²，体现回归模型的拟合优度（越接近 1 拟合越好）。</li><li><strong>REGR_COUNT(y, x)</strong>：统计 y 和 x 均非空的行数（回归分析的有效数据量）</li></ul></li></ol><h3 id="五、窗口函数常见错误与避坑指南"><a href="#五、窗口函数常见错误与避坑指南" class="headerlink" title="五、窗口函数常见错误与避坑指南"></a>五、窗口函数常见错误与避坑指南</h3><p>窗口函数功能强大但细节复杂，实际使用中容易因理解框架范围、分区逻辑或排序规则导致结果不符合预期。以下是最常见的错误类型及解决方案：</p><h4 id="1-LAST-VALUE-结果不符合预期（最容易踩的坑）"><a href="#1-LAST-VALUE-结果不符合预期（最容易踩的坑）" class="headerlink" title="1.LAST_VALUE() 结果不符合预期（最容易踩的坑）"></a>1.<code>LAST_VALUE()</code> 结果不符合预期（最容易踩的坑）</h4><p><strong>错误表现：</strong></p><p>使用 <code>LAST_VALUE()</code> 时，返回的不是分区内最后一行的值，而是当前行或靠前位置的值。</p><p><strong>错误原因：</strong></p><p>窗口函数默认框架是 <code>RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW</code>（从第一行到当前行），而非全分区。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想取全分区最后一行，却返回当前行及之前的最后一行</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">LAST_VALUE</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> last_sales</span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><p><strong>解决方案：</strong></p><p>显式指定全分区框架 <code>ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING</code>：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">LAST_VALUE</span>(sales) <span class="keyword">OVER</span> (</span><br><span class="line">    <span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop </span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span></span><br><span class="line">    <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">  ) <span class="keyword">AS</span> last_sales  <span class="comment">-- 正确返回分区内最后一行</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="二、遗漏-PARTITION-BY-导致全局计算"><a href="#二、遗漏-PARTITION-BY-导致全局计算" class="headerlink" title="二、遗漏 PARTITION BY 导致全局计算"></a>二、遗漏 <code>PARTITION BY</code> 导致全局计算</h2><h3 id="错误表现："><a href="#错误表现：" class="headerlink" title="错误表现："></a>错误表现：</h3><p>希望按分组（如店铺）单独计算窗口函数，结果却变成了所有数据的全局计算。</p><h3 id="错误原因："><a href="#错误原因：" class="headerlink" title="错误原因："></a>错误原因：</h3><p>忘记添加 <code>PARTITION BY</code>，函数默认对全表数据进行计算。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想按店铺计算累计销售额，却计算了所有店铺的总和</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> running_sum  <span class="comment">-- 缺少 PARTITION BY shop</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h3><p>明确添加 <code>PARTITION BY</code> 定义分组：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> running_sum  <span class="comment">-- 正确按店铺分组</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="三、ORDER-BY-排序方向错误影响结果"><a href="#三、ORDER-BY-排序方向错误影响结果" class="headerlink" title="三、ORDER BY 排序方向错误影响结果"></a>三、<code>ORDER BY</code> 排序方向错误影响结果</h2><h3 id="错误表现：-1"><a href="#错误表现：-1" class="headerlink" title="错误表现："></a>错误表现：</h3><p><code>PERCENT_RANK()</code>&#x2F;<code>CUME_DIST()</code> 等排名函数的值与预期相反（如最大值的百分比反而大）。</p><h3 id="错误原因：-1"><a href="#错误原因：-1" class="headerlink" title="错误原因："></a>错误原因：</h3><p>排序方向与分析目标不符。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想让销售额越高，PERCENT_RANK() 越小，却用了升序</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, sales,</span><br><span class="line">  <span class="built_in">PERCENT_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">ASC</span>) <span class="keyword">AS</span> pct_rnk  <span class="comment">-- 升序导致最大值的百分比为1</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-1"><a href="#解决方案：-1" class="headerlink" title="解决方案："></a>解决方案：</h3><p>根据业务目标选择排序方向（通常分析 “头部数据” 用 <code>DESC</code>）：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, sales,</span><br><span class="line">  <span class="built_in">PERCENT_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">DESC</span>) <span class="keyword">AS</span> pct_rnk  <span class="comment">-- 降序让最大值的百分比为0</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="四、RANK-与-DENSE-RANK-混淆导致排名错误"><a href="#四、RANK-与-DENSE-RANK-混淆导致排名错误" class="headerlink" title="四、RANK() 与 DENSE_RANK() 混淆导致排名错误"></a>四、<code>RANK()</code> 与 <code>DENSE_RANK()</code> 混淆导致排名错误</h2><h3 id="错误表现：-2"><a href="#错误表现：-2" class="headerlink" title="错误表现："></a>错误表现：</h3><p>需要连续排名时用了 <code>RANK()</code>（出现跳号），或需要保留名次空位时用了 <code>DENSE_RANK()</code>（连续编号）。</p><h3 id="错误示例："><a href="#错误示例：" class="headerlink" title="错误示例："></a>错误示例：</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 若想统计“第2名”包含并列情况但不跳号，却用了 RANK()</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  sales,</span><br><span class="line">  <span class="built_in">RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">DESC</span>) <span class="keyword">AS</span> rnk  <span class="comment">-- 若前2名并列，下一名会是3（跳号）</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-2"><a href="#解决方案：-2" class="headerlink" title="解决方案："></a>解决方案：</h3><ul><li>需跳号（如比赛排名，允许第 1 名并列后直接第 3 名）→ 用 <code>RANK()</code></li><li>需连续（如筛选前 3 名，包含并列且不跳号）→ 用 <code>DENSE_RANK()</code></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  sales,</span><br><span class="line">  <span class="built_in">DENSE_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">DESC</span>) <span class="keyword">AS</span> dense_rnk  <span class="comment">-- 并列第1后，下一名是2（不跳号）</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="五、窗口聚合函数的-“累计”-与-“全量”-混淆"><a href="#五、窗口聚合函数的-“累计”-与-“全量”-混淆" class="headerlink" title="五、窗口聚合函数的 “累计” 与 “全量” 混淆"></a>五、窗口聚合函数的 “累计” 与 “全量” 混淆</h2><h3 id="错误表现：-3"><a href="#错误表现：-3" class="headerlink" title="错误表现："></a>错误表现：</h3><p>使用 <code>SUM()</code>&#x2F;<code>AVG()</code> 时，希望得到全分区的总量，却返回了累计值。</p><h3 id="错误原因：-2"><a href="#错误原因：-2" class="headerlink" title="错误原因："></a>错误原因：</h3><p><code>ORDER BY</code> 会触发 “累计计算”（从第一行到当前行），省略 <code>ORDER BY</code> 则返回全分区聚合结果。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想获取店铺总销售额，却因加了 ORDER BY 变成累计值</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> total_sales  <span class="comment">-- 累计值，非总量</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-3"><a href="#解决方案：-3" class="headerlink" title="解决方案："></a>解决方案：</h3><ul><li>需累计值 → 保留 <code>ORDER BY</code>（默认从第一行到当前行）</li><li>需全分区总量 → 省略 <code>ORDER BY</code></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop) <span class="keyword">AS</span> total_sales  <span class="comment">-- 正确返回店铺总销售额</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="六、LAG-LEAD-越界处理缺失"><a href="#六、LAG-LEAD-越界处理缺失" class="headerlink" title="六、LAG()&#x2F;LEAD() 越界处理缺失"></a>六、<code>LAG()</code>&#x2F;<code>LEAD()</code> 越界处理缺失</h2><h3 id="错误表现：-4"><a href="#错误表现：-4" class="headerlink" title="错误表现："></a>错误表现：</h3><p>第一行用 <code>LAG()</code> 或最后一行用 <code>LEAD()</code> 时，返回 <code>NULL</code> 导致后续计算错误。</p><h3 id="错误原因：-3"><a href="#错误原因：-3" class="headerlink" title="错误原因："></a>错误原因：</h3><p>未指定越界时的默认值，函数默认返回 <code>NULL</code>。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：第一行的 LAG() 返回 NULL，可能导致计算失败</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  sales <span class="operator">-</span> <span class="built_in">LAG</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> diff  <span class="comment">-- 第一行 diff 为 NULL</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-4"><a href="#解决方案：-4" class="headerlink" title="解决方案："></a>解决方案：</h3><p>显式指定 <code>default</code> 参数（如 0 或其他合理值）：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  sales <span class="operator">-</span> <span class="built_in">LAG</span>(sales, <span class="number">1</span>, <span class="number">0</span>) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> diff  <span class="comment">-- 越界返回0</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="七、NTILE-n-数据分配不均时的误解"><a href="#七、NTILE-n-数据分配不均时的误解" class="headerlink" title="七、NTILE(n) 数据分配不均时的误解"></a>七、<code>NTILE(n)</code> 数据分配不均时的误解</h2><h3 id="错误表现：-5"><a href="#错误表现：-5" class="headerlink" title="错误表现："></a>错误表现：</h3><p>期望 <code>NTILE(n)</code> 严格均分数据，实际某些桶的行数多 1（如 7 行数据分 3 桶，结果为 3、2、2）。</p><h3 id="错误原因：-4"><a href="#错误原因：-4" class="headerlink" title="错误原因："></a>错误原因：</h3><p><code>NTILE(n)</code> 会优先向前几个桶分配多余的行（总行数不能被 n 整除时），保证分配尽可能均匀而非绝对均分。</p><h3 id="解决方案：-5"><a href="#解决方案：-5" class="headerlink" title="解决方案："></a>解决方案：</h3><ul><li>接受合理偏差（函数设计如此）</li><li>若需严格均分，可先过滤数据使总行数为 n 的倍数，或自定义逻辑：</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 替代方案：用 ROW_NUMBER() 手动分配，确保前m个桶多1行</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  <span class="operator">*</span>,</span><br><span class="line">  (<span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales) <span class="operator">-</span> <span class="number">1</span>) <span class="operator">%</span> <span class="number">3</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">AS</span> custom_ntile</span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="避坑总结：3-个核心检查点"><a href="#避坑总结：3-个核心检查点" class="headerlink" title="避坑总结：3 个核心检查点"></a>避坑总结：3 个核心检查点</h2><ol><li><strong>框架范围</strong>：<code>LAST_VALUE()</code> 必须显式指定全分区框架，其他函数注意默认框架是否符合需求。</li><li><strong>分区与排序</strong>：是否遗漏 <code>PARTITION BY</code>（导致全局计算），<code>ORDER BY</code> 方向是否与业务目标一致。</li><li><strong>边界处理</strong>：<code>LAG()</code>&#x2F;<code>LEAD()</code> 显式指定默认值，<code>RANK()</code> 与 <code>DENSE_RANK()</code> 根据排名规则选择。</li></ol>]]></content>
      
      
      <categories>
          
          <category> 技术速查 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown常用</title>
      <link href="/2025/04/12/Markdown%E5%B8%B8%E7%94%A8/"/>
      <url>/2025/04/12/Markdown%E5%B8%B8%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Markdown中使用表格</p><p>Markdown中使用表格</p><p>博客文章 Front-matter的Markdown使用</p><p>如果有文章（例如：转载文章）不需要显示版权，可以在文章 Front-matter 单独设置</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">copyright:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>从Butterfly3.0.0开始，支持对单独文章设置版权信息，可以在文章 Front-matter 单独设置</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">copyright<span class="emphasis">_author: xxxx</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href: https://xxxxxx.com</span></span><br><span class="line"><span class="emphasis">copyright_</span>url: https://xxxxxx.com</span><br><span class="line">copyright<span class="emphasis">_info: 此文章版权归 xxxxx 所有，如有转载，请注明来自原作者</span></span><br></pre></td></tr></table></figure><h2 id="Markdown中使用Mermaid画图"><a href="#Markdown中使用Mermaid画图" class="headerlink" title="Markdown中使用Mermaid画图"></a>Markdown中使用Mermaid画图</h2><p>可以绘制流程图、序列图、饼图、甘特图和类图等图形。</p><h3 id="Mermaid代码的语法"><a href="#Mermaid代码的语法" class="headerlink" title="Mermaid代码的语法"></a><strong>Mermaid代码的语法</strong></h3><p>Mermaid代码通常放在一个代码块中，代码块的语法如下：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="code">```mermaid</span></span><br><span class="line"><span class="code">[Mermaid代码]</span></span><br><span class="line"><span class="code">```</span></span><br></pre></td></tr></table></figure><p>使用方法：在 Markdown 中，敲击三个后写下mermaid回车即可。</p><p>展示如下图：</p><p><img src="/./../Markdown%E5%B8%B8%E7%94%A8/image-20250904101750820.png" alt="展示图"></p><h3 id="流程图graph-TD"><a href="#流程图graph-TD" class="headerlink" title="流程图graph TD"></a>流程图graph TD</h3><p>流程图用于展示流程步骤和关系，支持多种布局方向。</p><p><strong>语法说明</strong>：</p><ul><li><code>graph [方向]</code>：定义图表方向（<code>LR</code> 左右，<code>TB</code> 上下，<code>RL</code> 右左，<code>BT</code> 下上）</li><li>节点表示：<code>id[文本]</code>（矩形）、<code>id(文本)</code>（圆角矩形）、<code>id&#123;文本&#125;</code>（菱形）等</li><li>连接线：<code>--&gt;</code>（实线箭头）、<code>---</code>（实线无箭头）、<code>-.-&gt;</code>（虚线箭头）等，可添加标签（<code>--&gt;|标签|</code>）</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">graph TD    A[开始] --&gt; B&#123;是或否&#125;    B --&gt;|是| C[执行任务]    B --&gt;|否| D[结束]    C --&gt; D</code></pre><h3 id="序列图sequenceDiagram"><a href="#序列图sequenceDiagram" class="headerlink" title="序列图sequenceDiagram"></a>序列图sequenceDiagram</h3><p>展示对象之间的交互时序，常用于系统交互流程。</p><p><strong>语法说明</strong>：</p><ul><li><code>participant 参与者</code>：定义参与对象</li><li>消息传递：<code>A-&gt;B: 消息内容</code>（实线箭头）、<code>A--&gt;B: 消息内容</code>（虚线箭头，如返回）</li><li>激活状态：<code>activate A</code>（激活对象，显示生命线）、<code>deactivate A</code>（取消激活）</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">sequenceDiagram    participant A    participant B    A-&gt;&gt;B: 发送消息    B-&gt;&gt;A: 回复消息</code></pre><h3 id="饼图Pie"><a href="#饼图Pie" class="headerlink" title="饼图Pie"></a>饼图Pie</h3><p>展示数据占比关系。</p><p><strong>语法说明</strong>：</p><ul><li><code>pie</code> 开头</li><li><code>title 标题</code></li><li><code>标签: 数值</code> 定义各部分</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">pie    title 网站用户来源    &quot;直接访问&quot; : 30    &quot;搜索引擎&quot; : 50    &quot;外部链接&quot; : 15    &quot;其他&quot; : 5</code></pre><h3 id="甘特图gantt"><a href="#甘特图gantt" class="headerlink" title="甘特图gantt"></a>甘特图gantt</h3><p>用于项目进度规划，展示任务时间安排。</p><p><strong>语法说明</strong>：</p><ul><li><code>dateFormat</code>：日期格式（如 <code>YYYY-MM-DD</code>）</li><li><code>section 模块名</code>：分组任务</li><li>任务格式：<code>任务名 : 状态, 任务ID, 开始日期, 结束日期</code>（状态可选 <code>done</code>&#x2F;<code>active</code> 等）</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">gantt    dateFormat  YYYY-MM-DD    section 现有任务    已完成任务           :done,    des1, 2025-01-06,2025-01-08    进行中任务           :active,  des2, 2025-01-09, 3d    待办任务             :         des3, after des2, 5d    section 新增任务    新任务1              :         des4, after des3, 5d    新任务2              :         des5, after des4, 5d</code></pre><h1 id="使用-Markdown-编写文档用什么软件"><a href="#使用-Markdown-编写文档用什么软件" class="headerlink" title="使用 Markdown 编写文档用什么软件"></a>使用 Markdown 编写文档用什么软件</h1><ol><li><p>Typora<br> 核心优势：所见即所得（WYSIWYG）界面，实时渲染 Markdown 语法，支持表格、代码块、数学公式（LaTeX）、任务列表等。<br> 导出能力：直接导出为 PDF、HTML、Word、ePub 等格式，适合生成报告或电子书。<br> 价格：买断制 89 元人民币，支持 Windows&#x2F;macOS&#x2F;Linux。<br> 适用场景：个人写作、技术文档、学术论文。</p></li><li><p>VS Code + 插件<br> 核心优势：代码编辑器的强大扩展性，通过插件支持 Markdown 语法高亮、实时预览、TOC 生成。<br> 插件：<br> Markdown All in One：快捷键和格式转换工具。<br> Markdown PDF：一键导出 PDF（需安装 LaTeX 环境）。<br> 适用场景：开发者、技术文档撰写者。<br> 缺点：不能通过剪切板粘图，需要手动上传图片。这是我特别常用的一个功能，所以需要一个更好的软件。</p></li><li><p>MarkText<br> 核心优势：开源免费，支持实时预览、多主题切换（如 Material Dark）、三种编辑模式（源码 &#x2F; 打字机 &#x2F; 专注）。<br> 特色功能：直接粘贴图片到文档，支持数学公式（KaTeX）和 Mermaid 图表。<br> 导出能力：导出 HTML 和 PDF，适合轻量级文档。<br> 适用场景：学生、自由职业者、开源项目贡献者。<br> 缺点：现在好像没人维护了，最新版本还是v0.17.1。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> Typora </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github常用</title>
      <link href="/2025/04/11/Github%E5%B8%B8%E7%94%A8/"/>
      <url>/2025/04/11/Github%E5%B8%B8%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<hr><h1 id="Git命令"><a href="#Git命令" class="headerlink" title="Git命令"></a>Git命令</h1><h2 id="专业名词（黑话）"><a href="#专业名词（黑话）" class="headerlink" title="专业名词（黑话）"></a>专业名词（黑话）</h2><ol><li><p><strong>Git 工作流</strong></p><pre><code class="highlight mermaid">graph LR    A[关联工作区] -- git add --&gt; B[暂存区]    B -- git commit --&gt; C[本地仓库]    C -- git push --&gt; E[远程仓库]</code></pre></li><li><p><strong>工作区文件</strong>：本地文件夹的文件。<br>在 Git 版本控制中，<strong>工作区文件</strong>指的是你在本地电脑上直接编辑、修改的项目文件，也就是你能在操作系统的文件夹里看到的那些文件（比如文档、代码、图片等）。</p><p>简单说，工作区（Working Directory）就是你克隆或创建项目后，在本地电脑上存放项目文件的那个文件夹，而这个文件夹里的所有文件（包括子文件夹里的文件）都可以称为 “工作区文件”。</p></li><li><p><strong>暂存区：</strong><br>在 Git 版本控制中，<strong>暂存区（Staging Area）</strong> 是一个介于「工作区」和「本地仓库」之间的临时存储区域，也被称为「索引（Index）」。它的核心作用是：<strong>临时存放你想要提交到本地仓库的修改</strong>，让你可以先 “预览” 哪些修改会被纳入下一次提交，再统一提交到仓库</p><p><strong>为什么需要暂存区？</strong></p><p>想象一个场景：你同时修改了项目中的 3 个文件（A、B、C），但其中只有 A 和 B 的修改是完整的，C 的修改还没完成。这时候你想先提交 A 和 B 的修改，而暂时忽略 C—— 暂存区就是用来解决这个问题的：你可以先把 A 和 B 放入暂存区，然后只提交暂存区的内容，C 仍然留在工作区继续修改。</p></li><li><p><strong>工作区文件的状态：</strong></p><ol><li><strong>未跟踪（Untracked）</strong>：新创建的文件，还没被 Git 记录（Git 不知道它的存在）；</li><li>已跟踪（Tracked）：已被 Git 记录的文件，包括：<ul><li>未修改（Unmodified）：和 Git 最后一次记录的版本一致；</li><li>已修改（Modified）：被编辑过，但还没存入暂存区；</li><li>已暂存（Staged）：修改后被添加到暂存区（通过 <code>git add</code> 命令），等待提交到本地仓库。</li></ul></li></ol></li><li><p>**子模块：**嵌套仓库<br>在 Git 中，<strong>子模块（Submodule）</strong> 是一种特殊功能，用于在一个 Git 仓库（称为 “主项目”）中嵌入另一个独立的 Git 仓库（称为 “子模块项目”），同时保持两个仓库的独立性。</p></li><li><p>done</p></li></ol><h2 id="Git-版本控制工具中常用的命令"><a href="#Git-版本控制工具中常用的命令" class="headerlink" title="Git 版本控制工具中常用的命令"></a>Git 版本控制工具中常用的命令</h2><h3 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a><code>git clone</code></h3><p>：“下载” 远程项目到本地；</p><p><strong>作用</strong>：从远程仓库（比如 GitHub、GitLab 等）复制一个完整的项目到本地电脑。<br>它会将远程仓库的所有文件、分支、提交历史等完整下载到本地，并自动创建一个与远程仓库同名的文件夹，同时初始化本地 Git 仓库，关联到远程仓库。</p><p><strong>示例</strong>：</p><p>克隆远程仓库到当前目录（生成与仓库同名的文件夹）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 示例：克隆 GitHub 上的仓库</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/Kkkika/Kkkika.github.io.git</span><br></pre></td></tr></table></figure><ul><li><p><strong>自定义文件夹名称</strong>（不使用仓库默认名称）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;远程仓库地址&gt; &lt;本地目录名&gt;</span><br><span class="line"><span class="comment"># 示例：克隆到名为 &quot;my-project&quot; 的文件夹</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/Kkkika/Kkkika.github.io.git my-project</span><br></pre></td></tr></table></figure></li><li><p><strong>只克隆指定分支</strong>（默认克隆所有分支，此参数可节省时间）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b &lt;分支名&gt; --single-branch &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 示例：只克隆远程的 dev 分支</span></span><br><span class="line">git <span class="built_in">clone</span> -b dev --single-branch https://github.com/username/repo-name.git</span><br></pre></td></tr></table></figure></li><li><p><strong>浅克隆</strong>（只获取最近的 N 次提交，适合大型仓库，加快克隆速度）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth &lt;次数&gt; &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 示例：只获取最近 10 次提交</span></span><br><span class="line">git <span class="built_in">clone</span> --depth 10 https://github.com/username/repo-name.git</span><br></pre></td></tr></table></figure></li><li><p><strong>克隆时包含子模块</strong>（如果项目包含子模块，需用此参数才能完整克隆）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 若已克隆但子模块未下载，可补拉：git submodule update --init --recursive</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a><code>git branch</code></h3><p>：“管理” 本地分支（查看、创建、删除）；</p><p><strong>作用</strong>：用于管理本地分支（分支可以理解为项目的 “并行开发线”，方便多人协作或功能隔离）。</p><p>常用用法：</p><h4 id="1-查看分支"><a href="#1-查看分支" class="headerlink" title="1. 查看分支"></a>1. 查看分支</h4><ul><li><p>不带参数：查看本地所有分支（当前分支前有 <code>*</code> 标记）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure></li><li><p>查看本地 + 远程所有分支（远程分支以 <code>remotes/origin/</code> 开头）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure></li><li><p>查看远程分支（仅远程，不包含本地）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -r</span><br></pre></td></tr></table></figure></li><li><p>查看分支关联的远程分支（多人协作时常用，确认本地分支对应哪个远程分支）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -vv</span><br><span class="line"><span class="comment"># 输出示例：* main  a1b2c3d [origin/main] 提交说明</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="2-创建分支"><a href="#2-创建分支" class="headerlink" title="2. 创建分支"></a>2. 创建分支</h4><ul><li><p>基于当前分支创建新分支（创建后仍在当前分支，需手动切换）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch &lt;新分支名&gt;</span><br><span class="line"><span class="comment"># 示例：基于当前分支创建 feature/payment 分支</span></span><br><span class="line">git branch feature/payment</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-删除分支"><a href="#3-删除分支" class="headerlink" title="3. 删除分支"></a>3. 删除分支</h4><ul><li><p>删除本地分支（需确保分支已合并，否则会提示错误）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -d &lt;分支名&gt;</span><br><span class="line"><span class="comment"># 示例：删除已合并的 old-branch</span></span><br><span class="line">git branch -d old-branch</span><br></pre></td></tr></table></figure></li><li><p>强制删除未合并的分支（危险！未合并的修改会丢失）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -D &lt;分支名&gt;</span><br><span class="line"><span class="comment"># 示例：强制删除未合并的 test-branch</span></span><br><span class="line">git branch -D test-branch</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-重命名分支"><a href="#4-重命名分支" class="headerlink" title="4. 重命名分支"></a>4. 重命名分支</h4><ul><li><p>重命名当前所在分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -m &lt;新分支名&gt;</span><br><span class="line"><span class="comment"># 示例：将当前分支重命名为 bugfix/login</span></span><br><span class="line">git branch -m bugfix/login</span><br></pre></td></tr></table></figure></li><li><p>重命名指定分支（无需切换到该分支）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -m &lt;旧分支名&gt; &lt;新分支名&gt;</span><br><span class="line"><span class="comment"># 示例：将 feature/old 重命名为 feature/new</span></span><br><span class="line">git branch -m feature/old feature/new</span><br></pre></td></tr></table></figure></li><li><p>带分支名：创建新分支（但不会自动切换到新分支）。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch feature-login  <span class="comment"># 创建名为 feature-login 的新分支</span></span><br></pre></td></tr></table></figure></li><li><p><code>-d</code> 参数：删除指定分支（删除前需确保该分支的修改已合并，否则用 <code>-D</code> 强制删除）。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -d old-branch  <span class="comment"># 删除 old-branch 分支</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a><code>git checkout</code></h3><p>：“切换” 分支或 “恢复” 文件。</p><p><strong>作用</strong>：主要用于 “切换分支” 或 “恢复工作区文件”（Git 2.23+ 后推荐用 <code>git switch</code> 切换分支，功能更清晰，但 <code>checkout</code> 仍广泛使用）。</p><p>常用用法：</p><ul><li><p>切换到已存在的分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout dev  <span class="comment"># 切换到 dev 分支</span></span><br></pre></td></tr></table></figure></li><li><p>创建并立即切换到新分支（相当于 <code>git branch 新分支名</code> + <code>git checkout 新分支名</code> 的简写）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b dev  <span class="comment"># 创建并切换到 dev 分支</span></span><br></pre></td></tr></table></figure></li><li><p>恢复工作区的某个文件到最近一次提交的状态（丢弃本地修改）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -- README.md  <span class="comment"># 把 README.md 恢复到最近提交的版本</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="GitHub中clone指定Commits"><a href="#GitHub中clone指定Commits" class="headerlink" title="GitHub中clone指定Commits"></a>GitHub中clone指定Commits</h1><p>（Github中怎么找回历史版本；GitHub历史版本恢复指南；GitHub中下载指定版本；Github查看项目的历史版本，并实现版本的回滚）</p><blockquote><p>假设：我想下载<a href="https://github.com/Kkkika/Kkkika.github.io">Kkkika&#x2F;Kkkika.github.io</a>仓库master分支的第一次提交</p></blockquote><p>首先进入仓库后，点击【Commits】<strong>获取历史版本的提交哈希值</strong></p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250912102842935.png" alt="image-20250912102842935"></p><p>时间拉到最前，找到第一次提交，点击【复制】按钮</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250912103044962.png" alt="image-20250912103044962"></p><h3 id="克隆后创建新分支"><a href="#克隆后创建新分支" class="headerlink" title="克隆后创建新分支"></a>克隆后创建新分支</h3><p>如果你想在特定提交的基础上进行一些修改或实验，最好创建一个新分支。</p><p>新建一个文件夹来存放代码，注意路径不要有中文：</p><p>C:\Code\githubclone</p><p>然后打开cmd</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\Code\githubclone</span><br></pre></td></tr></table></figure><ol><li><p><strong>克隆仓库并进入目录</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Kkkika/Kkkika.github.io.git</span><br><span class="line"><span class="built_in">cd</span> Kkkika.github.io</span><br></pre></td></tr></table></figure></li><li><p><strong>基于特定提交创建并切换到一个新分支</strong>：这可以避免“分离头指针”状态。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch my-new-branch cc09550ac7db24e987f6f2130da2ee1564191b12</span><br><span class="line">git checkout my-new-branch</span><br></pre></td></tr></table></figure><p>或者更简洁地用一条命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b my-new-branch cc09550ac7db24e987f6f2130da2ee1564191b12</span><br></pre></td></tr></table></figure><p>这样，你就在一个名为 <code>my-new-branch</code> 的分支上工作，这个分支的起点就是你指定的那个提交。</p></li></ol><h3 id="浅克隆（如果只想快速获取）"><a href="#浅克隆（如果只想快速获取）" class="headerlink" title="浅克隆（如果只想快速获取）"></a>浅克隆（如果只想快速获取）</h3><p>如果你只关心最新的一部分提交，或者仓库很大想加快克隆速度，可以考虑浅克隆。</p><ol><li><p><strong>浅克隆仓库</strong>（例如只克隆最近 10 个提交）：</p><p>bash</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth 10 https://github.com/Kkkika/Kkkika.github.io.git</span><br><span class="line"><span class="built_in">cd</span> Kkkika.github.io</span><br></pre></td></tr></table></figure><p><code>--depth 10</code> 参数表示只克隆最近10次提交的历史。你需要确保你想要的提交（<code>cc09550...</code>）在这最近的10次提交之内。</p></li><li><p><strong>然后切换到你想要的提交</strong>：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout cc09550ac7db24e987f6f2130da2ee1564191b12</span><br></pre></td></tr></table></figure></li></ol><h3 id="重要提示"><a href="#重要提示" class="headerlink" title="重要提示"></a>重要提示</h3><ul><li><strong>关于 <code>-b</code> 参数</strong>：<code>-b</code> 在 <code>git clone</code> 中用于指定分支或标签，不能直接用于提交哈希5。</li><li><strong>“分离头指针”状态</strong>：直接 <code>git checkout &lt;commit-hash&gt;</code> 会进入此状态。在此状态下进行更改并提交后，如果不创建分支指向这些新提交，它们可能会被 Git 的垃圾回收机制清除10。如果计划基于该提交进行修改，请务必创建新分支。</li><li><strong>获取正确的提交哈希</strong>：确保你复制的提交哈希是正确的且存在于远程仓库中。你可以通过 GitHub 网站的提交历史页面来查看和确认提交哈希。</li></ul><h3 id="如何选择方法？"><a href="#如何选择方法？" class="headerlink" title="如何选择方法？"></a>如何选择方法？</h3><p>为了更清晰地选择，可以参考下面的流程：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout</span><br></pre></td></tr></table></figure><pre><code class="highlight mermaid">graph LR    A[需求：克隆特定提交] --&gt; B&#123;完整历史？&#125;    B -- 是 --&gt; C[克隆仓库&lt;br&gt;checkout 提交]    B -- 否 --&gt; D[浅克隆&lt;br&gt;checkout 提交]    C --&gt; E&#123;需修改？&#125;    D --&gt; F&#123;需修改？&#125;    E -- 是 --&gt; G[创建分支]    E -- 否 --&gt; H[分离头指针]    F -- 是 --&gt; G    F -- 否 --&gt; H</code></pre><h3 id="可能遇到的问题"><a href="#可能遇到的问题" class="headerlink" title="可能遇到的问题"></a>可能遇到的问题</h3><ol><li>网络问题<ol><li><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250919152150671.png" alt="image-20250919152150671"></li><li>关闭梯子</li><li>打开加速器</li></ol></li><li></li></ol><h1 id="Gitee"><a href="#Gitee" class="headerlink" title="Gitee"></a>Gitee</h1><h3 id="新建仓库"><a href="#新建仓库" class="headerlink" title="新建仓库"></a>新建仓库</h3><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909092345765.png" alt="示例"></p><p>上传到仓库的文件夹需要命名为blog：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909092433077.png" alt="上传到仓库的文件夹"></p><h3 id="git推送"><a href="#git推送" class="headerlink" title="git推送"></a>git推送</h3><p>将本地内容首次推送到空的 Git 远程仓库，需按顺序执行以下命令流程。以下是完整操作步骤及注意事项：</p><ol><li><p><strong>初始化本地仓库</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><ul><li>在项目根目录执行，生成隐藏的.git文件夹</li></ul></li><li><p><strong>添加文件并提交</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .              <span class="comment"># 添加所有文件到暂存区</span></span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span>  <span class="comment"># 提交到本地仓库</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span></span><br></pre></td></tr></table></figure><ul><li>必须至少有一次提交，否则推送会失败（Git 不允许推送空分支）。</li></ul></li><li><p><strong>关联远程仓库</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote add origin &lt;远程仓库URL&gt;</span><br></pre></td></tr></table></figure><ul><li><p>验证关联：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p> 查看 URL 是否正确。</p></li></ul></li><li><p><strong>首次推送并设置上游分支</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><ul><li><p>分支名为 master</p></li><li><p>-u（或–set-upstream）参数：</p><ul><li><p>建立本地分支与远程分支的追踪关系。</p></li><li><p>后续推送只需</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;写上描述&quot;</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p> 无需指定分支。</p></li></ul></li></ul></li></ol><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>在任何IDE的终端或者cmd中运行命令行都可以</p><p>在Cursor中打开终端：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909093433821.png" alt="在Cursor中打开终端"></p><p>确保路径最后的文件夹和仓库同名：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909093610035.png" alt="仓库名是blog文件夹名是blog"></p><p>所有用到的命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span></span><br><span class="line">git remote add origin https://gitee.com/kika00/blog.git</span><br><span class="line">git remote -v</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><p>成功推送：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909102559411.png" alt="成功推送"></p><p>后续推送用到的三个命令：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250910091241450.png" alt="改完 → git add -A → git commit -m &quot;说人话&quot; → git push"></p>]]></content>
      
      
      <categories>
          
          <category> 常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> Gitee </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pic</title>
      <link href="/2025/04/11/pic/"/>
      <url>/2025/04/11/pic/</url>
      
        <content type="html"><![CDATA[<p>文章路径：C:\Code\KikaBlog\blog\source_posts</p><p>（疑问：为什么source和_posts之间的斜杠显示的时候会被隐藏？）</p><h2 id="1-【-】"><a href="#1-【-】" class="headerlink" title="1 【.&#x2F;】"></a>1 【.&#x2F;】</h2><p>【typora可 博客不可】</p><p>实际路径在C:\Code\KikaBlog\blog\source_posts</p><p><img src="/./test1.png" alt=".&#x2F;test1.png"></p><p>但是如果我复制图片到C:\Code\KikaBlog\blog\source的时候，博客上就可以正常显示，而图片路径还是.&#x2F;</p><p><img src="/./../pic/test1-2.png" alt=".&#x2F;..&#x2F;pic&#x2F;test1-2.png"></p><p>也就是说把图片放在C:\Code\KikaBlog\blog\source上用路径.&#x2F;和.&#x2F;..&#x2F;是等价的；还有就是_posts文件夹是进不去的，这个文件夹只能放.md</p><h2 id="2【-】"><a href="#2【-】" class="headerlink" title="2【.&#x2F;..&#x2F;】"></a>2【.&#x2F;..&#x2F;】</h2><p>【都可！typora可 博客可】</p><p>实际路径在C:\Code\KikaBlog\blog\source</p><p><img src="/./../test2.png" alt=".&#x2F;..&#x2F;test2.png"></p><p>缺点：图片文件挤在同一个文件夹，不方便管理</p><h2 id="3【-filename-】"><a href="#3【-filename-】" class="headerlink" title="3【.&#x2F;${filename}】"></a>3【.&#x2F;${filename}】</h2><p>【typora可 博客不可】</p><p>实际路径在C:\Code\KikaBlog\blog\source_posts\pic</p><p><img src="/./pic/test3.png" alt=".&#x2F;pic&#x2F;test3.png"></p><p>为什么不行？这样管理分类最有秩序了，在_posts中搜索文章名，还可以直接搜到文章存放图片的文件夹。啊啊啊啊</p><h2 id="4【-filename-】"><a href="#4【-filename-】" class="headerlink" title="4【.&#x2F;..&#x2F;${filename}】"></a>4【.&#x2F;..&#x2F;${filename}】</h2><p>【都可！typora可 博客可】</p><p>实际路径在C:\Code\KikaBlog\blog\source\pic</p><p><img src="/./../pic/test4.png" alt=".&#x2F;..&#x2F;pic&#x2F;test4.png"></p><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>第2种和第4种在Typora写文章时可以看到图片，并且GitHub搭建的博客网站上也能正常显示图片。</p><p>第2种是把图片统一放在博客文件夹下的source里；</p><p>第4种则在source文件夹中创建一个与文章名同名的文件夹存放图片，个人更喜欢第4种存放方式。</p>]]></content>
      
      
      <categories>
          
          <category> blog </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo搭建Butterfly主题记录</title>
      <link href="/2024/09/04/Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
      <url>/2024/09/04/Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h2 id="Hexo常用命令"><a href="#Hexo常用命令" class="headerlink" title="Hexo常用命令"></a>Hexo常用命令</h2><p>生成主题静态文件：</p><p>等价于hexo generate</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><p>启动本地服务：</p><p>等价于hexo server</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在博客根目录下执行以下命令，创建一篇新文章：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">&quot;我的第一篇文章&quot;</span></span><br></pre></td></tr></table></figure><p>部署到GitHub：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>清除缓存</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure><h2 id="美化-常用链接"><a href="#美化-常用链接" class="headerlink" title="美化-常用链接"></a>美化-常用链接</h2><p>图标：</p><p><a href="https://fontawesome.com/v6/icons?o=r#packs">Version 6 Icons | Font Awesome</a></p><p>注意：<em>带pro的是付费版</em></p><h2 id="美化-需要下载插件的"><a href="#美化-需要下载插件的" class="headerlink" title="美化-需要下载插件的"></a>美化-需要下载插件的</h2><h3 id="本地搜索"><a href="#本地搜索" class="headerlink" title="本地搜索"></a>本地搜索</h3><p>1.安装搜索插件</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>2.配置_config.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#本地搜索开启</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>3.主题配置文件 _config.butterfly.yml：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">input_placeholder:</span> <span class="string">Search</span> <span class="string">for</span> <span class="string">Posts</span></span><br><span class="line">    <span class="attr">hits_empty:</span> <span class="string">&quot;We didn&#x27;t find any results for the search: $&#123;query&#125;&quot;</span> <span class="comment"># 如果没有查到内容相关内容显示</span></span><br></pre></td></tr></table></figure><h3 id="字数统计"><a href="#字数统计" class="headerlink" title="字数统计"></a>字数统计</h3><p>安装插件：在你的博客根目录，打开 cmd 命令窗口执行 npm install hexo-wordcount –save。<br>开启配置：修改主题配置文件_config.butterfly.yml 中的 wordcount。</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">wordcount:</span><br><span class="line">  enable: true</span><br><span class="line">  post<span class="emphasis">_wordcount: true</span></span><br><span class="line"><span class="emphasis">  min2read: true</span></span><br><span class="line"><span class="emphasis">  total_</span>wordcount: true</span><br></pre></td></tr></table></figure><h3 id="统计访问人数-UV-和-PV"><a href="#统计访问人数-UV-和-PV" class="headerlink" title="统计访问人数 (UV 和 PV)"></a>统计访问人数 (UV 和 PV)</h3><p>详细信息请查看 <a href="https://busuanzi.ibruce.info/">busuanzi 官方网站</a>。</p><p>Butterfly很贴心地集成了不蒜子计数工具，可以统计网站的访问数据（人数，次数等）。只需要修改主题配置文件即可开启。</p><p>修改主题配置文件_config.butterfly.yml。</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">busuanzi:</span><br><span class="line">  site<span class="emphasis">_uv: true  # 本站总访客数</span></span><br><span class="line"><span class="emphasis">  site_</span>pv: true  # 本站总访问量 </span><br><span class="line">  page<span class="emphasis">_pv: true  # 本文总阅读量</span></span><br></pre></td></tr></table></figure><h2 id="美化-文章"><a href="#美化-文章" class="headerlink" title="美化-文章"></a>美化-文章</h2><h3 id="写文参数可选"><a href="#写文参数可选" class="headerlink" title="写文参数可选"></a>写文参数可选</h3><blockquote><p>（可为特定的文章配置）在文章md文件的头部设置</p></blockquote><p>主题会优先判断文章 Markdown 的 Front-matter 是否有配置，如有，则以 Front-matter 的配置为准。否则，以主题配置文件中的配置为准。</p><table><thead><tr><th>参数</th><th>解释</th><th>可取</th></tr></thead><tbody><tr><td>copyright</td><td>文章版权模块(默认为设置中 post_copyright 的 enable 配置)</td><td>true &#x2F; false</td></tr><tr><td>copyright_author</td><td>文章版权模块的<code>文章作者</code></td><td></td></tr><tr><td>copyright_author_href</td><td>文章版权模块的<code>文章作者</code>链接</td><td></td></tr><tr><td>copyright_url</td><td>文章版权模块的<code>文章链接</code></td><td></td></tr><tr><td>copyright_info</td><td>文章版权模块的<code>版权声明</code>文字</td><td></td></tr><tr><td>noticeOutdate</td><td>文章过期提醒 (默认为设置中 noticeOutdate 的 enable 配置)</td><td></td></tr><tr><td>toc</td><td>是否显示 TOC目录(默认为设置中 toc 的 enable 配置)</td><td>true &#x2F; false</td></tr><tr><td>toc_number</td><td>是否目录自动编号(默认为设置中 toc 的 number 配置)</td><td>true &#x2F; false</td></tr><tr><td>toc_style_simple</td><td>显示 toc 简洁模式(侧边栏只剩下toc)</td><td>true &#x2F; false</td></tr><tr><td>comments</td><td>显示页面评论模块</td><td>默认true</td></tr><tr><td>aside</td><td>显示侧边栏</td><td>默认true</td></tr><tr><td>cover</td><td>封面&#x2F;缩略图(如果没有设置 top_img,文章页顶部将显示缩略图)</td><td>false&#x2F;图片地址&#x2F;留空</td></tr><tr><td>top_img</td><td>页面顶部图片</td><td></td></tr><tr><td>description</td><td>页面描述</td><td></td></tr><tr><td>keywords</td><td>页面关键字</td><td></td></tr><tr><td>aplayer</td><td>在需要的页面加载 aplayer 的 js 和 css,请参考文章下面的<code>音乐</code>配置</td><td></td></tr><tr><td>random</td><td>配置友情链接是否随机排序</td><td>默认为 false</td></tr></tbody></table><h3 id="hexo上传查看不了图片（已解决）"><a href="#hexo上传查看不了图片（已解决）" class="headerlink" title="hexo上传查看不了图片（已解决）"></a>hexo上传查看不了图片（已解决）</h3><p>解决的痛点：markdown写文章可以直接粘本地图片，并上传到github时hexo的博客也能正常显示。避免开启post_asset_folder文件资源夹，这样只有有图片的博文会新建文件夹来存储博文的图片 。不用下载任何img插件，网上很多人的解决方法都说要安装如hexo-asset-img插件，完全不必。</p><p>KEYWORDS：如何在Hexo博客中插入本地图片；如何在Hexo博客中插入图片；Hexo搭建butterfly博客中图片无法显示</p><p><strong>解决方法</strong></p><p>解决的核心：在Typora粘图时设置图像粘到指定路径:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./../</span><br></pre></td></tr></table></figure><p>这样图片会直接存放在<strong>source</strong>文件夹下，如下面三张图：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250413144513945.png"></p><p>但是这样所有图片都存在source文件夹，不方便查找和管理，所以</p><p>我更喜欢用如下路径：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./../$&#123;filename&#125;</span><br></pre></td></tr></table></figure><p>操作：Typora菜单栏的【文件】，打开【偏好设置】，点击【图像】</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250413144119948.png" alt="Typora设置"></p><p>解决过程参考<a href="https://kkkika.github.io/2025/04/11/pic/">pic</a>文章</p><h3 id="md功能展示"><a href="#md功能展示" class="headerlink" title="md功能展示"></a>md功能展示</h3><blockquote><p>markdown不熟悉的功能效果展示</p></blockquote><p>正常          加粗**          <em>斜体</em>          <u>下划线</u>          <code>代码</code></p><p>$内联公式$          <del>删除线</del>          &#x3D;&#x3D;高亮&#x3D;&#x3D;          <!--注释--></p><p>公式块：<br>$$<br>x<br>$$<br>警告框之</p><blockquote><p>[!NOTE]</p><p>提醒内容</p></blockquote><blockquote><p>[!TIP]</p><p>建议内容</p></blockquote><blockquote><p>[!IMPORTANT]</p><p>重要内容</p></blockquote><blockquote><p>[!WARNING]</p><p>警告内容</p></blockquote><blockquote><p>[!CAUTION]</p><p>注意内容</p></blockquote><blockquote><p>引用</p></blockquote><hr><h3 id="hideToggle可折叠内容"><a href="#hideToggle可折叠内容" class="headerlink" title="hideToggle可折叠内容"></a>hideToggle可折叠内容</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideToggle 我是标题，点击可展开%&#125;</span><br><span class="line">这是折叠的内容/隐藏的内容</span><br><span class="line">（可以加代码块）</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><details class="toggle" ><summary class="toggle-button" style="">我是标题，点击可展开</summary><div class="toggle-content"><p>这是折叠的内容&#x2F;隐藏的内容</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sql</span>代码</span><br></pre></td></tr></table></figure></div></details><hr><h3 id="tabs分栏选项卡"><a href="#tabs分栏选项卡" class="headerlink" title="tabs分栏选项卡"></a>tabs分栏选项卡</h3><h4 id="使用语法"><a href="#使用语法" class="headerlink" title="使用语法"></a>使用语法</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% tabs 唯一名字, [默认索引] %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 标题1 @icon --&gt;</span><br><span class="line">内容 1</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 标题2 --&gt;</span><br><span class="line">内容 2</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><ul><li><p>唯一名字：给这组 tabs 当 HTML id 用，不能重复。</p></li><li><p>默认索引：默认 1 ；写 <code>-1</code> 表示默认全部收起。</p></li><li><p><code>@icon</code> 选填，FontAwesome 全类名，中间有无空格都行。</p></li><li><table><thead><tr><th align="left">写法</th><th align="left">页签最终显示</th></tr></thead><tbody><tr><td align="left"><code>&lt;!-- tab --&gt;</code></td><td align="left">唯一名字-1</td></tr><tr><td align="left"><code>&lt;!-- tab @fas fa-apple --&gt;</code></td><td align="left">仅图标</td></tr><tr><td align="left"><code>&lt;!-- tab macOS --&gt;</code></td><td align="left">macOS</td></tr><tr><td align="left"><code>&lt;!-- tab macOS @fas fa-apple --&gt;</code></td><td align="left">macOS加图标</td></tr></tbody></table></li></ul><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab macOS --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab macOS @fas fa-apple--&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>效果如下：</p><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">test1 1</button><button type="button" class="tab">macOS</button><button type="button" class="tab"><i class="fas fa-apple"></i>macOS</button></div><div class="tab-contents"><div class="tab-item-content active"><p><strong>This is Tab 1.</strong></p></div><div class="tab-item-content"><p><strong>This is Tab 2.</strong></p></div><div class="tab-item-content"><p><strong>This is Tab 3.</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><hr><p>【未解决】</p><p>我希望选项卡在Typora写文章也可以实现同步渲染，在 Typora 编辑模式中使用类似 Hexo-Next 主题的选项卡（Tabs）功能</p><p>下载Typora插件</p><p><a href="https://github.com/obgnail/typora_plugin">obgnail&#x2F;typora_plugin: Typora plugin. Feature enhancement tool | Typora 插件，功能增强工具</a></p><p><a href="https://www.cnblogs.com/PeterJXL/p/18350073">打造个性化Typora写作体验的必备插件 - peterjxl - 博客园</a></p><hr><h3 id="Label颜色高亮"><a href="#Label颜色高亮" class="headerlink" title="Label颜色高亮"></a>Label颜色高亮</h3><blockquote><p>我觉得好像用处不大，对我来说</p></blockquote><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% label 文本 颜色 %&#125;</span><br></pre></td></tr></table></figure><p>两个参数，颜色默认值是灰色。</p><p>示例：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">臣亮言：&#123;% label 先帝 %&#125;创业未半，而&#123;% label 中道崩殂 blue %&#125;。今天下三分，&#123;% label 益州疲敝 pink %&#125;，此诚&#123;% label 危急存亡之秋 red %&#125;也！然侍衞之臣，不懈于内；&#123;% label 忠志之士 purple %&#125;，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。</span><br><span class="line">宫中、府中，俱为一体；陟罚臧否，不宜异同。若有&#123;% label 作奸 orange %&#125;、&#123;% label 犯科 green %&#125;，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</span><br></pre></td></tr></table></figure><p>臣亮言：<mark class="hl-label default">先帝</mark>创业未半，而<mark class="hl-label blue">中道崩殂</mark>。今天下三分，<mark class="hl-label pink">益州疲敝</mark>，此诚<mark class="hl-label red">危急存亡之秋</mark>也！然侍衞之臣，不懈于内；<mark class="hl-label purple">忠志之士</mark>，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。<br>宫中、府中，俱为一体；陟罚臧否，不宜异同。若有<mark class="hl-label orange">作奸</mark>、<mark class="hl-label green">犯科</mark>，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</p><h3 id="代码换行设置异常（已解决）"><a href="#代码换行设置异常（已解决）" class="headerlink" title="代码换行设置异常（已解决）"></a>代码换行设置异常（已解决）</h3><p>实现代码块自动换行：</p><p>在_config.butterfly.yml配置文件中可以配置如下功能</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">true</span> <span class="comment">#代码自动换行，关闭滚动条</span></span><br></pre></td></tr></table></figure><p>同时将站点配置文件_config.yml的highlight设置为false</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>但是出现了如下异常：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911172343525.png" alt="数字异常叠加"></p><p>当 word_wrap 启用但 Hexo 的 highlight.line_number 为 false 时，不再通过伪元素渲染行号，避免换行时前置数字异常叠加</p><p>解决方法：</p><p>将 themes&#x2F;butterfly&#x2F;source&#x2F;css&#x2F;_highlight&#x2F;highlight&#x2F;index.styl 中自动生成行号的逻辑，改为Hexo 配置 highlight.line_number: false 时不显示：</p><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_highlight\highlight\index.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span></span><br><span class="line">  <span class="selector-tag">figure</span><span class="selector-class">.highlight</span></span><br><span class="line">    <span class="selector-class">.line</span></span><br><span class="line">      <span class="keyword">if</span> wordWrap &amp;&amp; <span class="variable">$highlight_line_numb</span></span><br><span class="line">        <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">          <span class="attribute">display</span>: inline-block</span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">6px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">          <span class="attribute">min-width</span>: <span class="number">30px</span></span><br><span class="line">          <span class="attribute">color</span>: <span class="built_in">var</span>(--hlnumber-color)</span><br><span class="line">          <span class="attribute">content</span>: <span class="built_in">counter</span>(line)</span><br><span class="line">          <span class="attribute">counter-increment</span>: line</span><br><span class="line">          <span class="attribute">text-align</span>: left</span><br></pre></td></tr></table></figure><p>将if wordWrap改为if wordWrap &amp;&amp; $highlight_line_numb。</p><p>刷新之后又没问题了，我不懂。。</p><p>最后是这样的：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250912100954585.png" alt="image-20250912100954585"></p><p>可以正常换行了，但是我认为字体不好看，进行调整：</p><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_highlight\highlight\index.styl</p><p>if wordWrap就不动了，然后调整参数</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span></span><br><span class="line">  <span class="selector-tag">figure</span><span class="selector-class">.highlight</span></span><br><span class="line">    <span class="selector-class">.line</span></span><br><span class="line">      <span class="keyword">if</span> wordWrap</span><br><span class="line">        <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">          <span class="attribute">display</span>: inline-block</span><br><span class="line">          <span class="attribute">color</span>: <span class="built_in">var</span>(--hlnumber-color)</span><br><span class="line">          <span class="attribute">content</span>: <span class="built_in">counter</span>(line)</span><br><span class="line">          <span class="attribute">counter-increment</span>: line</span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">          <span class="attribute">text-align</span>: right</span><br><span class="line">          <span class="attribute">min-width</span>: <span class="number">15px</span></span><br><span class="line">          <span class="attribute">font-family</span>: <span class="string">&quot;Consolas&quot;</span> <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>其中有这些参数是修改或增加的：</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="attribute">text-align</span>: right</span><br><span class="line"><span class="attribute">min-width</span>: <span class="number">15px</span></span><br><span class="line"><span class="attribute">font-family</span>: <span class="string">&quot;Consolas&quot;</span> <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>效果调整成.gutter pre的样子：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250912100602774.png" alt="跟上次上传的样式对比"></p><h2 id="美化-首页"><a href="#美化-首页" class="headerlink" title="美化-首页"></a>美化-首页</h2><h3 id="右侧悬浮栏"><a href="#右侧悬浮栏" class="headerlink" title="右侧悬浮栏"></a>右侧悬浮栏</h3><h4 id="悬浮栏按钮"><a href="#悬浮栏按钮" class="headerlink" title="悬浮栏按钮"></a>悬浮栏按钮</h4><p>_config.butterfly.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Choose: readmode,translate,darkmode,hideAside,toc,chat,comment</span></span><br><span class="line"><span class="comment"># Don&#x27;t repeat the same value</span></span><br><span class="line"><span class="attr">rightside_item_order:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Default: readmode,translate,darkmode,hideAside</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="string">readmode,hideAside</span></span><br><span class="line">  <span class="comment"># Default: toc,chat,comment</span></span><br><span class="line">  <span class="attr">show:</span> <span class="string">translate,darkmode,toc,chat,comment</span></span><br></pre></td></tr></table></figure><ul><li><p>可选：阅读模式，简繁转换，日夜切换，单栏和双栏切换，目录，聊天，评论</p></li><li><p>在 hide 里：按钮只在点开齿轮后出现（收纳&#x2F;隐藏到设置面板）。</p></li><li><p>在 show 里：按钮一直固定悬浮显示在右侧。</p></li><li><p>不要重复：同一个键不要同时放在 hide 和 show。</p></li></ul><h4 id="悬浮栏显示"><a href="#悬浮栏显示" class="headerlink" title="悬浮栏显示"></a>悬浮栏显示</h4><p>顶部时保持显示、向下滚动隐藏、向上滚动显示</p><ul><li>导航栏是顶部时保持显示、向下滚动隐藏、向上滚动显示，帮我把右侧悬浮栏也改为这样的形式</li></ul><p>Agent变更点：</p><ul><li>更新 themes&#x2F;butterfly&#x2F;source&#x2F;js&#x2F;main.js 中滚动处理逻辑：向下滚动时移除 rightside-show 以隐藏悬浮栏，向上滚动时添加 rightside-show 以显示，与导航栏一致。</li><li>把右侧悬浮栏在页面初始就显示，并在滚动到顶部时保持显示；当向下滚动时隐藏，向上滚动时显示。我会更新滚动分支中的 else 逻辑，并在刷新初始化时立即显示 #rightside。</li><li>themes&#x2F;butterfly&#x2F;source&#x2F;js&#x2F;main.js：在注册滚动监听后立刻调用一次 scrollTask()</li></ul><h3 id="butterfly主题文章顶部大图"><a href="#butterfly主题文章顶部大图" class="headerlink" title="butterfly主题文章顶部大图"></a>butterfly主题文章顶部大图</h3><p><a href="https://blog.captainz.cc/posts/hexo_butterfly_top_img.html">Hexo+Butterfly 主题一图流背景与顶部图修改 | Hyper Tech</a></p><p><a href="https://blog.csdn.net/weixin_74811095/article/details/147954567">butterfly主题魔改02：主题颜色、宽度设置、图片设置、遮罩效果_butterfly宽度-CSDN博客</a></p><h2 id="小美化"><a href="#小美化" class="headerlink" title="小美化"></a>小美化</h2><h4 id="文章图片大小限制"><a href="#文章图片大小限制" class="headerlink" title="文章图片大小限制"></a>文章图片大小限制</h4><blockquote><p>限制最大高度为250px</p><p>宽度改为auto</p><p>然后发现图片会过宽，就再加上限制最大宽度为720px</p></blockquote><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\post.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">img</span></span><br><span class="line">  <span class="attribute">display</span>: block</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="number">20px</span></span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">250px</span></span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">720px</span></span><br><span class="line">  <span class="attribute">width</span>: auto </span><br><span class="line">  <span class="attribute">transition</span>: filter <span class="number">375ms</span> ease-in .<span class="number">2s</span></span><br><span class="line">  <span class="built_in">addBorderRadius</span>()</span><br></pre></td></tr></table></figure><h4 id="文章底部标签颜色修改"><a href="#文章底部标签颜色修改" class="headerlink" title="文章底部标签颜色修改"></a>文章底部标签颜色修改</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\post.styl</p><p>将$light-blue改了</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#post</span></span><br><span class="line">  <span class="selector-class">.tag_share</span></span><br><span class="line">    <span class="selector-pseudo">&amp;:after</span></span><br><span class="line">      <span class="attribute">display</span>: block</span><br><span class="line">      <span class="attribute">clear</span>: both</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.post-meta</span></span><br><span class="line">      &amp;__tag-list</span><br><span class="line">        <span class="attribute">display</span>: inline-block</span><br><span class="line"></span><br><span class="line">      &amp;__tags</span><br><span class="line">        <span class="attribute">display</span>: inline-block</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">8px</span> <span class="number">8px</span> <span class="number">0</span></span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12px</span></span><br><span class="line">        <span class="attribute">width</span>: fit-content</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="variable">$light</span>-blue</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="variable">$light</span>-blue</span><br><span class="line">        <span class="attribute">font-size</span>: .<span class="number">85em</span></span><br><span class="line">        <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-in-out</span><br></pre></td></tr></table></figure><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250909152952527.png" alt="文章底部标签颜色"></p><h4 id="文章页头部的背景设置为透明"><a href="#文章页头部的背景设置为透明" class="headerlink" title="文章页头部的背景设置为透明"></a>文章页头部的背景设置为透明</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\head.styl</p><p>增加<code>background: transparent !important</code>将文章页头部 .post-bg 的背景强制设为透明，避免使用封面图作为背景</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// post</span></span><br><span class="line">&amp;<span class="selector-class">.post-bg</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span></span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>还要开启页头遮罩</p><p>_config.butterfly.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Add a mask to the header and footer # 页头页脚添加遮罩</span></span><br><span class="line"><span class="attr">mask:</span></span><br><span class="line">  <span class="attr">header:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911112109190.png" alt="文章页头部的背景"></p><hr><h4 id="半透明背景"><a href="#半透明背景" class="headerlink" title="半透明背景"></a>半透明背景</h4><p>效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250910171746704.png" alt="修改后"></p><p>修改前：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250910172011461.png" alt="修改前"></p><p>增加如下代码：</p><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\post.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 浅色模式：文章阅读区域背景改为半透明</span></span><br><span class="line"><span class="comment">// 仅在非暗色主题时生效，避免影响暗色模式视觉</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#post</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br></pre></td></tr></table></figure><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\aside.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 浅色模式：侧栏所有卡片统一半透明背景</span></span><br><span class="line"><span class="comment">// 说明：匹配包含 .card-widget 的全部卡片类型（recent-post/announcement/info 等）</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br></pre></td></tr></table></figure><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_page\homepage.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 浅色模式：侧栏所有卡片统一半透明背景</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#recent-posts</span> <span class="selector-class">.recent-post-item</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br></pre></td></tr></table></figure><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911094012471.png" alt="代码"></p><hr><h4 id="mark-bg参数"><a href="#mark-bg参数" class="headerlink" title="mark-bg参数"></a>mark-bg参数</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_global\index.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="attr">--mark-bg</span>: <span class="built_in">alpha</span>(<span class="variable">$dark</span>-black, .<span class="number">13</span>)</span><br></pre></td></tr></table></figure><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_mode\darkmode.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="attr">--mark-bg</span>: <span class="built_in">alpha</span>(<span class="variable">$dark</span>-black, .<span class="number">24</span>)</span><br></pre></td></tr></table></figure><p>浅色主题.3效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911161632715.png" alt="浅色主题.3效果"></p><p>浅色主题.13效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911142312799.png" alt="浅色主题.13效果"></p><p>深色主题.6效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911161839729.png" alt="深色主题.6效果"></p><p>深色主题.24效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911161731535.png" alt="深色主题.24效果"></p><hr><h4 id="右侧悬浮栏动态效果"><a href="#右侧悬浮栏动态效果" class="headerlink" title="右侧悬浮栏动态效果"></a>右侧悬浮栏动态效果</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\layout\includes\rightside.pug</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- const &#123; readmode, translate, darkmode, aside, chat &#125; = theme</span><br><span class="line">mixin rightsideItem(array)</span><br><span class="line">  each item in array</span><br><span class="line">    case item</span><br><span class="line">      when &#x27;readmode&#x27;</span><br><span class="line">        if globalPageType === &#x27;post&#x27; &amp;&amp; readmode</span><br><span class="line">          button#readmode(type=&quot;button&quot; title=_p(&#x27;rightside.readmode_title&#x27;))</span><br><span class="line">            i.fas.fa-book-open</span><br><span class="line">      when &#x27;translate&#x27;</span><br><span class="line">        if translate.enable</span><br><span class="line">          button#translateLink(type=&quot;button&quot; title=_p(&#x27;rightside.translate_title&#x27;))= translate.default</span><br><span class="line">      when &#x27;darkmode&#x27;</span><br><span class="line">        if darkmode.enable &amp;&amp; darkmode.button</span><br><span class="line">          button#darkmode(type=&quot;button&quot; title=_p(&#x27;rightside.night_mode_title&#x27;))</span><br><span class="line">            i.fas.fa-adjust.fa-flip</span><br><span class="line">      when &#x27;hideAside&#x27;</span><br><span class="line">        if aside.enable &amp;&amp; aside.button &amp;&amp; page.aside !== false</span><br><span class="line">          button#hide-aside-btn(type=&quot;button&quot; title=_p(&#x27;rightside.aside&#x27;))</span><br><span class="line">            i.fas.fa-arrows-alt-h</span><br><span class="line">      when &#x27;toc&#x27;</span><br><span class="line">        if showToc</span><br><span class="line">          button#mobile-toc-button.close(type=&quot;button&quot; title=_p(&quot;rightside.toc&quot;))</span><br><span class="line">            i.fas.fa-list-ul</span><br><span class="line">      when &#x27;chat&#x27;</span><br><span class="line">        if chat.rightside_button &amp;&amp; chat.use</span><br><span class="line">          button#chat-btn(type=&quot;button&quot; title=_p(&quot;rightside.chat&quot;) style=&quot;display:none&quot;)</span><br><span class="line">            i.fas.fa-message</span><br><span class="line">      when &#x27;comment&#x27;</span><br><span class="line">        if commentsJsLoad</span><br><span class="line">          a#to_comment(href=&quot;#post-comment&quot; title=_p(&quot;rightside.scroll_to_comment&quot;))</span><br><span class="line">            i.fas.fa-comments</span><br><span class="line"></span><br><span class="line">#rightside</span><br><span class="line">  - const &#123; enable, hide, show &#125; = theme.rightside_item_order</span><br><span class="line">  - const hideArray = enable ? hide &amp;&amp; hide.split(&#x27;,&#x27;) : [&#x27;readmode&#x27;,&#x27;translate&#x27;,&#x27;darkmode&#x27;,&#x27;hideAside&#x27;]</span><br><span class="line">  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;toc&#x27;,&#x27;chat&#x27;,&#x27;comment&#x27;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  #rightside-config-hide</span><br><span class="line">    if hideArray</span><br><span class="line">      +rightsideItem(hideArray)</span><br><span class="line">  #rightside-config-show</span><br><span class="line">    if enable</span><br><span class="line">      if hide</span><br><span class="line">        button#rightside-config(type=&quot;button&quot; title=_p(&quot;rightside.setting&quot;))</span><br><span class="line">          i.fas.fa-cog.fa-beat</span><br><span class="line">    else</span><br><span class="line">      if globalPageType === &#x27;post&#x27;</span><br><span class="line">        if (readmode || translate.enable || (darkmode.enable &amp;&amp; darkmode.button))</span><br><span class="line">          button#rightside-config(type=&quot;button&quot; title=_p(&quot;rightside.setting&quot;))</span><br><span class="line">            i.fas.fa-cog.fa-beat</span><br><span class="line">      else if translate.enable || (darkmode.enable &amp;&amp; darkmode.button)</span><br><span class="line">        button#rightside-config(type=&quot;button&quot; title=_p(&quot;rightside.setting&quot;))</span><br><span class="line">          i.fas.fa-cog.fa-beat  </span><br><span class="line"></span><br><span class="line">    if showArray</span><br><span class="line">      +rightsideItem(showArray)</span><br><span class="line"></span><br><span class="line">    button#go-up(type=&quot;button&quot; title=_p(&quot;rightside.back_to_top&quot;))</span><br><span class="line">      span.scroll-percent</span><br><span class="line">      i.fas.fa-arrow-up.fa-bounce</span><br><span class="line">    button#go-down(type=&quot;button&quot; title=_p(&quot;rightside.back_to_bottom&quot;))</span><br><span class="line">      i.fas.fa-arrow-down.fa-bounce</span><br></pre></td></tr></table></figure><ul><li>修改fas.fa-cog的.fa-spin为.fa-beat</li><li>增加fas.fa-arrow-up和fas.fa-arrow-down的.fa-bounce</li><li>增加fas.fa-adjust的.fa-flip</li></ul><hr><h2 id="博客加密插件-hexo-blog-encrypt"><a href="#博客加密插件-hexo-blog-encrypt" class="headerlink" title="博客加密插件 hexo-blog-encrypt"></a>博客加密插件 hexo-blog-encrypt</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-blog-encrypt</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn add hexo-blog-encrypt</span><br></pre></td></tr></table></figure><p>网速不好推荐使用</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cnpm install --save hexo-blog-encrypt</span><br></pre></td></tr></table></figure><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250924142228892.png" alt="成功安装了hexo-blog-encrypt插件"></p><h3 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h3><p>在hexo的_config.yml文件中添加如下代码：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 安全设置</span><br><span class="line">encrypt:</span><br><span class="line">  # 启用插件</span><br><span class="line">  enable: true</span><br><span class="line">  # 自定义加密相关设置</span><br><span class="line">  abstract: &quot;这里的内容加密了，需要密码哦。&quot;</span><br><span class="line">  message: &quot;请输入密码查看本文。&quot;</span><br><span class="line">  # 可以在这里设定特定标签对应的默认密码</span><br><span class="line">  tags:</span><br><span class="line">    - [name: &quot;encryptAsSecret&quot;, password: &quot;yoursecret&quot;]</span><br><span class="line">  # 错误消息设置</span><br><span class="line">  wrong_pass_message: &quot;密码错误，请重试。&quot;</span><br><span class="line">  wrong_hash_message: &quot;内容认证失败，但仍可尝试查看。&quot;</span><br><span class="line">  # 是否禁用日志记录</span><br><span class="line">  silent: false</span><br></pre></td></tr></table></figure><p>配置项说明：</p><ul><li>enable: 是否启用加密功能，设置为 true 启用。</li><li>abstract: 加密文章的摘要，显示在文章列表页。</li><li>message: 密码输入框上方的描述性文字。</li><li>tags: 标签配置，可以为不同标签设置不同的密码。</li><li>wrong_pass_message: 密码错误时的提示信息。</li><li>wrong_hash_message: 解密内容无法验证时的提示信息。</li></ul><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>在需要加密文章的头部添加如下设置：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: ###</span><br><span class="line">date: XXXX-XX-XX XX:XX:XX</span><br><span class="line">password: &quot;你的密码必须在引号里面&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><hr><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="一劳永逸"><a href="#一劳永逸" class="headerlink" title="一劳永逸"></a>一劳永逸</h3><p>（修改styl文件好像版本更新后又要重新改还是什么的，不太懂）</p><p>干脆全部写在index.styl文件，方便管理</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;css_prefix&#x27;</span>)</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;nib&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_third-party/normalize.min.css&#x27;</span></span><br><span class="line"><span class="comment">// project</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;var&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_global/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_highlight/highlight&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_layout/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_tags/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_mode/*&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// search</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_search/index&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================================================================================</span></span><br><span class="line"><span class="comment">// 确保图标正常显示</span></span><br><span class="line"><span class="comment">// ===========================================</span></span><br><span class="line"><span class="comment">// 全局：设置所有伪元素 :before 使用 FontAwesome 字体</span></span><br><span class="line">*<span class="selector-pseudo">:before</span></span><br><span class="line">  <span class="attribute">font-family</span>: FontAwesome <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================================================================================</span></span><br><span class="line"><span class="comment">// 浅色模式：统一半透明背景样式</span></span><br><span class="line"><span class="comment">// 仅在非暗色主题时生效</span></span><br><span class="line"><span class="comment">// ===========================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 文章阅读区域背景</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#post</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 侧栏所有卡片</span></span><br><span class="line"><span class="comment">// 说明：匹配包含 .card-widget 的全部卡片类型（recent-post/announcement/info 等）</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首页文章卡片</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#recent-posts</span> <span class="selector-class">.recent-post-item</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================================================================================</span></span><br><span class="line"><span class="comment">// 文章页头部背景设置</span></span><br><span class="line"><span class="comment">// 将文章页头部 .post-bg 的背景强制设为透明，避免使用封面图作为背景</span></span><br><span class="line"><span class="comment">// ===========================================</span></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.post-bg</span></span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>将特定样式设置写在index.styl文件，方便管理。并从原始文件中移除重复的样式代码</p><h3 id="其他美化思路"><a href="#其他美化思路" class="headerlink" title="其他美化思路"></a>其他美化思路</h3><ul><li>针对归档页面，分类页面，tags页面（标签云页面）关闭mask背景色遮罩并设置图片透明度。我想要的不是透明度而是边缘渐变透明，不要让图片分割感这么重</li></ul><h2 id="butterfly博客评论"><a href="#butterfly博客评论" class="headerlink" title="butterfly博客评论"></a>butterfly博客评论</h2><p>主题支持多种评论系统，你可以根据自己的喜好选择一种。你也可以选择双评论，只需要配置两个评论（第一个为默认显示）</p><p><a href="https://butterfly.js.org/posts/4aa8abbe/">Butterfly 文檔(三) 主題配置 | Butterfly</a>（<code>Twikoo</code> 是一个简洁、安全、无后端的静态网站评论系统，基于腾讯云开发。）</p><p>上面列出了好多种，最后我选择<code>Twikoo</code> 的Hugging Face：<a href="https://twikoo.js.org/quick-start.html">快速上手 | Twikoo 文档</a></p><p>只需要把获取到的 环境ID (envId) 填写到配置上去就行：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">twikoo:</span></span><br><span class="line">  <span class="attr">envId:</span>           <span class="comment"># 环境 ID</span></span><br><span class="line">  <span class="attr">region:</span>          <span class="comment"># 环境地域，默认为 ap-shanghai，如果您的环境地域不是上海，需传此参数</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span>   <span class="comment"># 是否显示文章阅读数</span></span><br><span class="line">  <span class="attr">option:</span>          <span class="comment"># 可选配置，开启 visitor 后，文章页的访问人数将改为 Twikoo 提供，而不是 不蒜子</span></span><br></pre></td></tr></table></figure><h3 id="Twikoo快速上手"><a href="#Twikoo快速上手" class="headerlink" title="Twikoo快速上手"></a>Twikoo快速上手</h3><p>Twikoo 分为云函数和前端两部分，若要在您的网站上集成 Twikoo，您需要同时部署云函数和前端，部署时请注意保持二者版本一致。</p><ul><li><a href="https://twikoo.js.org/backend.html">云函数部署</a> 有多种方式，请选择适合自己的部署平台。</li><li><a href="https://twikoo.js.org/frontend.html">前端部署</a> 有 2 种方式，如果您的网站主题支持 Twikoo，您只需在配置文件中指定 Twikoo 即可；如果您的网站主题不支持 Twikoo，您需要修改源码手动引入 Twikoo 的 js 文件并初始化。</li><li>若您已部署旧版本 Twikoo，请参考 <a href="https://twikoo.js.org/update.html">版本更新</a> 升级云函数和前端版本。</li></ul><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250905160123616.png" alt="云函数部署我选择"></p><h3 id="Hugging-Face-部署"><a href="#Hugging-Face-部署" class="headerlink" title="Hugging Face 部署"></a>Hugging Face 部署</h3><blockquote><p>注意：Hugging Face 部署的环境，由于默认的邮件端口被屏蔽，无法使用邮件功能。详见 <a href="https://github.com/twikoojs/twikoo/issues/638">twikoo&#x2F;issues&#x2F;638</a></p></blockquote><ol><li>申请 <a href="https://account.mongodb.com/account/register">MongoDB Atlas</a> 账号，获取 MongoDB 连接字符串。<a href="https://mongodb.ac.cn/docs/guides/atlas/account/">注册指南 - MongoDB 文档</a></li><li>申请 <a href="https://huggingface.co/join">Hugging Face</a> 账号</li><li>登录，点击 Spaces - Create new Space</li></ol><p><a href="https://twikoo.js.org/assets/hugging-1.qykHscdz.png"><img src="https://twikoo.js.org/assets/hugging-1.qykHscdz.png" alt="img"></a></p><ol><li>输入 Space name，Select the Space SDK 选择 Docker，Choose a Docker template 选择 Blank，Space hardware 选择 FREE，选择 Public，点击 Create Space</li></ol><p><a href="https://twikoo.js.org/assets/hugging-2.BZLt3AFG.png"><img src="https://twikoo.js.org/assets/hugging-2.BZLt3AFG.png" alt="img"></a></p><ol><li>进入刚刚创建的 Space，点击页面上方的 Settings，滚动到 Variables and secrets 部分，点击 New secret，Name 输入 <code>MONGODB_URI</code>，Value 输入前面记录的数据库连接字符串，点击 Save</li></ol><p><a href="https://twikoo.js.org/assets/hugging-3.BE7bV_x9.png"><img src="https://twikoo.js.org/assets/hugging-3.BE7bV_x9.png" alt="img"></a></p><ol><li>点击页面上方的 Files - Add file - Create a new file</li></ol><p><a href="https://twikoo.js.org/assets/hugging-4.IZDT8YRp.png"><img src="https://twikoo.js.org/assets/hugging-4.IZDT8YRp.png" alt="img"></a></p><ol><li>在 Name your file 中输入 <code>Dockerfile</code>，在 Edit 区域输入以下内容</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FROM imaegoo/twikoo</span><br><span class="line">ENV TWIKOO_PORT 7860</span><br><span class="line">EXPOSE 7860</span><br></pre></td></tr></table></figure><p><a href="https://twikoo.js.org/assets/hugging-5.Cw4bsoD7.png"><img src="https://twikoo.js.org/assets/hugging-5.Cw4bsoD7.png" alt="img"></a></p><ol><li>点击 Commit new file to main</li><li>点击右上角 Settings 右方的菜单（三个点）图标 - Embed this Space，Direct URL 下的内容（例如 <code>https://xxx-xxx.hf.space</code>）即为您的环境 id</li></ol><p><a href="https://twikoo.js.org/assets/hugging-6.CxsVPwFh.png"><img src="https://twikoo.js.org/assets/hugging-6.CxsVPwFh.png" alt="img"></a></p><h4 id="如果你需要自定义域名"><a href="#如果你需要自定义域名" class="headerlink" title="如果你需要自定义域名"></a>如果你需要自定义域名</h4><blockquote><p>自定义域名教程由 <a href="https://github.com/Hoshino-Yumetsuki">Hoshino-Yumetsuki</a> 提供</p><p>ps：除了 <code>CF_ZERO_TRUST_TOKEN</code> 这个环境变量以外，其他环境变量的配置方式与上一步相同</p></blockquote><ol><li>申请 Cloudflare Zero Trust，关于申请方式请自行查找</li></ol><p><a href="https://twikoo.js.org/assets/hugging-7.ey7RVDUh.png"><img src="https://twikoo.js.org/assets/hugging-7.ey7RVDUh.png" alt="img"></a></p><ol><li>添加一条隧道，连接方式选择 Cloudflared，名称任意</li></ol><p><a href="https://twikoo.js.org/assets/hugging-8.bn1zLPri.png"><img src="https://twikoo.js.org/assets/hugging-8.bn1zLPri.png" alt="img"></a></p><ol><li>添加一个 Public Hostname，回源选择 HTTP，端口选择 8080</li><li>Clone Twikoo 仓库，找到 <code>src\server\hf-space</code></li><li>去 Hugging Face 创建一个 Space，然后 Clone 下来，将 hf-space 文件夹内的所有内容复制进去</li><li>在 Hugging Face Space 的设置中添加一个环境变量，变量名 <code>CF_ZERO_TRUST_TOKEN</code>，值是 Tunnels 给的令牌（删掉 <code>cloudflared.exe service install</code>，只保留令牌部分）</li></ol><p><a href="https://twikoo.js.org/assets/hugging-9.BfxLMyMQ.png"><img src="https://twikoo.js.org/assets/hugging-9.BfxLMyMQ.png" alt="img"></a></p><ol><li>Push 到 Hugging Face Space 仓库</li></ol><h2 id="hexo使用Mermaid"><a href="#hexo使用Mermaid" class="headerlink" title="hexo使用Mermaid"></a>hexo使用Mermaid</h2><h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><p><a href="https://butterfly.js.org/categories/Docs%E6%96%87%E6%AA%94/">分類: Docs文檔 | Butterfly</a></p><p><a href="https://blog.csdn.net/mjh1667002013/article/details/129290903">【Hexo】Hexo搭建Butterfly主题并快速美化_hexo butterfly-CSDN博客</a></p><p><a href="https://nickxu.me/2022/02/20/Hexo-Butterfly-%E5%BB%BA%E7%AB%99%E6%8C%87%E5%8D%97%EF%BC%88%E4%BA%94%EF%BC%89%E6%97%A5%E5%B8%B8%E5%86%99%E4%BD%9C/">Hexo + Butterfly 建站指南（五）日常写作 | NX の 博客</a></p><p><a href="https://korgs.blog.csdn.net/article/details/131094362?spm=1001.2101.3001.6650.3&utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-3-131094362-blog-135929884.235%5Ev43%5Epc_blog_bottom_relevance_base8&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-3-131094362-blog-135929884.235%5Ev43%5Epc_blog_bottom_relevance_base8&utm_relevant_index=6">基于Hexo和Butterfly创建个人技术博客，(7) 配置butterfly主题搭建博客网站主体UI框架_hexo butterfly-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> blog </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
