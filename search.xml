<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>大文档</title>
      <link href="/2025/09/24/%E5%A4%A7%E6%96%87%E6%A1%A3/"/>
      <url>/2025/09/24/%E5%A4%A7%E6%96%87%E6%A1%A3/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重新输入" data-whm="认证失败，再试一试">  <script id="hbeData" type="hbeData" data-hmacdigest="dd96bf635eaebf28288328abd9fda4c2f632b01bbb37321d0dda9473cb137664">98b9bce3395e8307c58744c12688842404ba42d2a18bef45e12087b4ccf7cd90e8c3ea113f11461d5ac969984efae3051c1c9b37482d468e586b9cb1eafaac39512c545e09d497df294cbcf4536a30ae2f4fd558ab669484686befd09712cb660aac7b18f41a724314eefb078ec8917f2a27cc34b1879159bb6dfa328c3041b3ec62c91fb237841a9823f68a7c7bf64d982c0a46734e46b7fecbd288edaf7252a83ba39cadfca6a3b26c4c018bd5b4866fa1ae1f2d09ee99def5873aa721bec3d427531ff24562eba41c359a9a1118ca0f696925dbc7a4375fd4c281ca04c27e573336190948b82085729cad788e69823f2110ff8c9d9759b5be844287b71257537a1c5e6f03d98abe74e3c65355b67224d0f2ab48d832793d42bda5bba30eed37d8f4e0cefcf764225c8e7e86c7e44ccfc0befc4f65ab6f2581d385efe8e59574b401dd4434a8aa3f5e12be4a970e0fcd8bf22b71633d2f8b11d13780f3cdab5f07f16a14314adce884e163a6991cb1d88c7158f48002010e28bf245cbf9f3e917086495e5f81fb6c9283792acbefceee8590d1292b05cb0ae3893730080daa5320ff085fbe471e81e8b6060eac614d618838fbbb62a7d51ee0a558edf38568ee7b90f094220710cbb32d7ef7556d7548f52bf252be3ae67bf176323dda531bd14f3e954998f1e80229060aacbd90b0bc71b3d89fcc7115797fed6947ea03da41a3439a5d8cdffd2fb910d157f54ce002121bbd3abf791f052c589382dcafcd36b30734c30457c8af405bbed1d38485b8ea595af2602227d202806a9b05f5da14d4fce335b2a527b8ffa8b6b793a328df2397add56799b3404c651bcb19359b84617f290e7566d0b46bac8d7dce4671ded1f6f7a338b7626526562404ef18bc60ce43c2960e7e849592b76c66e71b293bb47761afd54e5fe490f925e8dbf27f36b045cf082c04bec52200f5f479a08d69601fc1888e7fd9c5f569045a28c1fec79b29aefd57e4b28a20e2675e39bbe3b211e487bc22931dc5437d5bcda5151f30a0718c34aaec5dfd97f1109dac372e97c0a2139f53569cbd265e0e5005f94665c23f419585efc15fb241afd37b7b0e446738aa4e305f5c7e3909c53f7cf4fb9b0da7836d1392923dc5d684d4730ddc865aae2aeab8ec48196010507103110b258d9d2a756f6d33150163a8ce64e3121227ee17f1a3c74ff314bc4420eb9e25f1b701638d5d412e0924e7eda0d48c746eadeffb7cc89f018caeb41c7b855eb84c70b3c5b017ccdc9f53c1c8473bef54d26c8a2a09630a7cd143eb82052ec3733c2402ec7f5dbfe59a9a751fc4fa3efdc8a18ba4e400753dcb4dd77fbc0ac4633c1f6105828308d7ce0989befa65a3af07d2ba5c13c696253fa577939740aa09a2b88e26826607562eaafeaedcf4c819bfd4aef92fb4947779e1cff39ebc1f6c77015f81160113c703f38f71f7961cb14e6b132de5cf40de9aa10ade65fe456b686a83fc11805ed83afde2052a9a347665e4440246c8f9c7ca9c24d15d8b5f906ef06dbab4ad6cb15e66b19a4d681dafe58b01b2b90912414366262c30c08d14e66d08a34c4753934607cc933ae1f5a7b5c9561eaf6d410b19e453828cd08d45e87889b20a69c69aa4605a99cac5d1ef707022c094688511b5693d3de4baa952ddb97672fe65274604aaab1a1023895ec899b52553e579fd426535a912fcb640a679baa3a82d444d279fcdcedce99b603a58d78628679ee26f058751e6910591b8f11fcce7f3852c5976cced5099dfdc66ad837f225485641769d2b6ce7b769802a9c16cf899fb6c72d7f70a0bdd580e059c7113778a4f9d1be1c4f8afd4c7c31cad17c463ab4bee53b31c75a0144d98c1a1152d8f9279f02759fecc6bce26e69a5c3487f9e1740dda81f58ef8ed433dcc5acc2d7e5b3a8a7ed751d29635fca43f72edad7cb989a802b735a820c04a09a09da4ae32286e45dabca818cb768c87dfc27d87e611e78acd5906097e32a7268aca2ebe9da4ef364a1fc2303e231a9cb1fdaaf71cb30322fdc54b3f1c7c59462c73c3a228a82485b93f858ef862f298e8ad4605dd678516165e73f9b5caa16d41cc1359d01f60c40786f97aa30c11e8e8a9dfc976c5fc386efef56e213ef053063e04ee2d1a4fb5f908acd3af33bfd351d512eefca3df9d185fa8e233d3e8d73a87a406e5dc55a9bb5ad9cdb0255d70568e517f5d491769fe7572b479e10b07a2e3a004628273d3d604ec174697dac48652110172998edf05b52dde6591c6b2bf651090a10b471461861f27043638d0a50faf4b4645599bb0d0ca21e9980baee319be7998c92b630e7673d65b2fa588360beee43bfe72e19e920c40a2406072269c8e49f71fecf4eddf6c26737e88444bf85ce046400e468d6416617477e517ca6d450ae8ea54a487f497a8fd61037c0b392f87cba0fe54da055c4da1af246ae81b07fde7ea0afed463890f7d4e37ac6a637914f8a51d6712fb9c563bb106f882410dec67f4ea57c7df8eb44b32d1676b8e861a65796a7380f53fd206e89ae8d7837658351ec1673f1dc7427e0bf57f553e7b36d6486fbe3ddfd0879e6fd138872ded934a66b17134ab0395808158f0047d7657c325aa7aeca68aba51b6fb9462f3356a470a82664eb1ed4f4dc6129da833f68fda0d4cb119094c16f6ec2f8d21135298aca1490025e74455f506c107bdbefb4df9cc6cb0b9f1136c2d134d42bf3e8dcc63492aae5eae291fea326efe10dc5876f5ceaf84cc0cff644c731ee929cc1eaeca9540cb9415aa860e57c935f06002f427f6340b2041403117ea0cc10d7ddc1d8e2f8f0b045573a72ef04a6a36706be1aa269b08fadce1e17e9315e755594eba92be3868866b41fb4408e296c0f9e2c0e098f53c35f123ea69716f9b595c2a1eaa764e45cdb676cc47d835e0e544274c60a8c6baef7f87cdc0765f9bf205c484982569baec9dd5cbdbf2627193bb350f86c18ffb3dd859f1a66bb6b55730ec0d37e828481176ebd04ee253ce11e9ed286ec0e3c887130bae8d0dcee27811c5cde470cca78ce77195a15a0944d62fef8003483af6b666e62a2248f231dff8ea37a72ff76a5e93224101673250ba381e07cc2e48a249a46fd42528e2a44ef9592bff9092b0c0e2aac6da5ae61a748d3b7acb8866e6b536f97a3397babd2dd1898c0537aea8402d5ba04b4d1ef0f7a40f209ff5a52cab834aca892e4d7aba07c1e8751e878d4cd656bd70f5844cc389d3145fbec9636a15aa8e0fdbdf0272cdc371108a9955c211f2463fc5643a952690498d3d392aaae9a8e6a38846eb948acaef519dd03256d36461e333775346c5603c11e74f21166f5c6d389950d6eca263b839344a2929981d3fbfa66f81b88675b8d47f92d6bbc86fe65166402e527a2f27258ff5f5035439467633668eb5e231c8df9d958a3b5853a1174a4d329725bd481162e54295276fc21fbb15d2520df78c6d710ca31d65296275e23bbd1ccd26ba792919e2eccb538b3d83a7eb9a64898e4b1f778e1786539c22967dcfd491962408fe130a931a9d6d2d87948eb8a38cba5ef73e0ae482a59fe64cdebc3643c3a2edc405e9cf001e101b02dfbfbdc9fabac770ca419bcead228c346d134a3c0a2010a11a7aa3d69625adad916001920ba9622f071fe4aeb05cd9702cf70737e262698559b52eda01c8d7f91f2e3c43839f2cf6c8920404b2967cb433f29f84971655b55fd57a66265bd13e3437f3bfc7f65a3cbe786853ec4baec6f7cba2195e797cf54546c22774778a948d03aceb7a14726922ea25bdbba7db765708fbf99ea1781c915fd06c947cd410bb452a199b21b57ca139b7ddbd181f80b1055326792f48475384f3c54a86736b4ab5504361e4d9cd9e4432a683b878f279677450fa7a60cf155f80dde49d316b0ae21a90a1d374cd6343d02759c8fc0f14e816fe45e9c226312ca5065dcd4129d5838be4c0152107682a2b8510b3b3535f5af3fa2c4ea9b4f59f4a87d76d05a34fc6642a5252bcd398b5c1f8aea4e1137dcb0670f02258338265eb9019c7a32d46f9691b319d1e92e8a7e591da18806ce09177a09928cfbb9d3e29baafaa0f7b2b99e1f161f5a3bfadf6b22a153f2ae03867554190dffaa917a1f0000c00f60011e77b1163d0b59a27005b12320c6e20ff83facb7494a356bd95a24b6f9ec5b8791bed771559e81d3cefad8ba6537e64ca86a023df45de58090f79090a11f450302bab3f1810465b8dfcf8cec44e0b9e76b02fc2785e31beeefdcc63bb10fbae8136239e8cfd2aa7e2ee1cfad2eaa9c44afe94c9a939e58e3c0af7d32b4e0a2d4d822bec7e87d331fe870ac8e5d6600a03809c448250cf5dbbe571d6704426398af89843321eed343e31af93d0d22c42add8520a0ccbe5bda93bd7177653e1a118ed2a8f7b403aafc64dcc30d2db8a21fd1da72717b7af9253a381780eaee8a0da5f6491fd444df2ce163da07df44bbd767938838125855697fda16db4ce361b62a2ea4e72de765b48de24b60e9c54cb8dfb3696afae7b65d125ef860bd82453248ad9c30ccd77b2bf8c7c62683f17b96bb3ee8cb98204608c4fa8bd0267e0221fda2d53e862c38d5df74d30a2db46e8c87665380326eb8c109fea1fc389731e531f13d50403e86b71bb5552d75e6af9265399937f73131afb55640f12346b377e18d58d832b460d340c55d3037bc7950de7de8958c1fe10189836dc2103517048585a76f805bd038d2ec245ad226bd08e5abe6de99776e86018c5625aea3ff1dfae8e3d017e2bcfa4bf4b790861c1a27e66521ee755941b36da5ad484bc0872ba8c5d3e2256aa6c2f724232a1e96dba4cfa7f8ac8115d3d44150730e68c8f4723bd5e1d61ec5b090d9868ea58f9fe752d1cc77c5ee33d568dc0a91898f210e6ff7a1d866335dc4e975865fe782d768daa1b96ad38aa64ab3228ad94eb5281ae81aea46505ebb2f66e886dfb54bec0441e3e15c711605db96a3e2f6cc4989cf0a353db4c25ebacc6acdccb0f0430f496d6a3bf6816488ef84a30848944bf405c6b7c36942b5134329db320200d0f041fec32fe16605f3d7d17e959896df36fb54468518aefc3b9d41d167e32eaa715476c7e5c1c12b18188e89447acbf702aedc0987d240548e8ebfed456b735c774afb3b1023d918e1f6da3ea89eee923c6f20a41677c86e7957e1602d1f54efb9d206949a54d3aabb489b1f403de7d56461b8a6725ffafdea4be75b0e94ffee391bdea2856fa66d21bf255d963ab56d10a7a8e62ebeb7fddef6dc7bcb64924d28653267ac99c0d45c5cbb799356bd897d46ee5bedb87701c25e73dd60b90a698895930cf903ecf82132c79b73dd6aa914404c419d8923e9f378c1e136e1d9220ec1ca0a434051ae5871dd00ec043d2fa70b1c9ecd439dc21be824ee24638db6ea948f3a17fd6acf557e57167878c7b985aa493aebacbc490bd9f92535e7cd6bf0763a37f7b6db91e3617ca6e5523a9b7530caef32d6c0f4de35a43884d7033bbe2cc02f861e6899b8fbe7132c3dcbfcebf9ec7b27ff17d52cd3775f763e001e54cae64c52d9f4ae0aeca09baa7323836f14614945086402a19faf6bc18608e97e6d18ac06aa400f1a6b9a8a9f044ce4a41f9e91a2d1aebddb277b9dce554ad46a4276a537a6588c731e46c2788d818a5b87a1045e376b19d0be105618b2a7f70ef6ca173af57c918f5751a8fc943c8bddeb5226bb85e40f959916b36000c07328bf5e89b271a7d9f980ce65f3ce8a609a7bff699bb6f8330d999fd4f0d044c3fc1f2d8c25be82e2740e0d3c1683cbb01276b2b1e8216d60cfc6a7627858e4f63c24c9094b08835d99c91fbde00884fae210312dd419de8d9f9b490c3243e8ab24af2378df4a5748edcd80557fc37ab92822a8973989e9f9f047cc66a61d00f9294b1d06ed53e0a8b25ebe1788eb0e1e8ac4d732ba2e2653739dad5fdaf81765346b47aa8bcdcacb41c4d9871453db1337b68e789ce3e37ae33fb9cbf137ed48eebb33db71d357311beeda27927932e96b5b53e9ed9a8bacba16aef090942fbfef0a75b0a68a27fa22b0f756d7b7e84044cb8a72643ad7ff651227ee7693afed9bd0c108c76b7d879cb0d75027e8eeff59829dd097b1d49be05fd4b1a0bf1d4257e91e19bfeaad3063edcb50eb01e261cb725a723fcf0689979780164d50a58ff11197954b8fa1208ffde6d10dd89c004efe5e16c61d9886453ebb20bec96ef48f170798c9810680f45b7f41ab71102a43e10f476b696da13df154fd2aad340eddf81e94b4a9601dc85269b4e71873b9d15124ffdfbd3076b2f87ab1ed53e8a7885c8aa3b6e3c2bea44e99c7e7978a3f93c94eb85315b023667f0fab51117dfa425e9ae571b57221f5f772f3c59134f06fca68301946f1eaefcf990928babb4a313c26ef57500e6e73c1b6db6790706b870eb9994e3dd2026c105620076d795fea906aabcfa4960d352b5b1859e828493696960faddf0d40e4ef1f1e20a5460bad84ead5060597267aaf2785c51fe9abd3506b0bd</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-blink">      <input class="hbe hbe-input-field hbe-input-field-blink" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-blink" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-blink" data-content="请输入密码">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>怎么缴税</title>
      <link href="/2025/09/24/%E6%80%8E%E4%B9%88%E7%BC%B4%E7%A8%8E/"/>
      <url>/2025/09/24/%E6%80%8E%E4%B9%88%E7%BC%B4%E7%A8%8E/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重新输入" data-whm="认证失败，再试一试">  <script id="hbeData" type="hbeData" data-hmacdigest="9447a4b0edd1015af8468e763fc605e0aaf818c709bec2eea60cec81e8a6a3b6">1f764dd9675bd4f300b7f0802d6ae563f10b22b1bb0bba190131755510e13bc25ce1bf613d513595bc2d56f1581516a1d658cfbeabf059e80ca7c34b86a3f37b409452c87c5bba9793afc1182770419af25d718f998cbbbb06599d0cd0e383e4d21044385992876c5d97809ee156b8f9b4f3c87eba743175193c980f3322d3db0ea26b96409a511c23fe2164ee97ceb21a026ea00393d0bc68221febe9d58f8b34ecabca21c79264da3f91ca79e2225ee582123d29474c8eed9717a24dc62a30166cd99fea6f64a0b15faf9b7e9442200fbfd3e1dc663280f604893f1e91c78d74121711c7dbc807a3f6c653274f139c66932bebcaff6633f5380096fd567eba9be108f43aebd2dab09f5a5ba41814b0b5a6337c9acce4f2c61f9c4adb9d8ac0d370ae08f05c6ca14363eda93e14fb5ea38c303a761a5a879efaebb83c4709c51bf45c4c370487a7c196709eb74a251e18a38dd169173f5463a8f3acbbb7f2548a57e0c2f771e400243b1ba532fe293effff2e57635d221f426637a94dc50dd9673f48329fbfff8477f7e6bca3d2a89313a22c2dc536683401e62bba0cc4d173dc34957056f9dcdb86ce582bbcb308adad36d2b61755655ad4b8814e1526ae6788ac164fe75bfeb6c1235a84002adf789f0d4925293a6ab2a129e2b562a59f90407bb49110dca36749f3b089cb9d682235f4ccce38f10bb4b7e16f9b8feb7a5785e1de9847adf7f062cfa64e329142bb0f25802b974fa2d89c75759ffdc08206cd3a5603b09f557374ec17a3e0fb1bac8bad0e57335e43ac05bc7507ad063dbac8c519a767b8d4ca6c849d225a0b08a3717218e15a7a01cfa9b963124eb5999449d0aa201d5f658e0fb6aa6e3caa6bbd4acf1fc8c58e7523d82492de0e96f2a4da8253a1933933eb3bc49b1ca87473ae985b5db1a68f141292c9dbbc745e0576186273235b1a4d0542f84bf845831fe65b3b306f849055b6e556cbff6e3bd6ef0ca581ec469d39253a0b012f4a05b45356448533ad63bdb359b8b18548176d9a54c8cd297dc77e919c6a6ab8c5acc1721901cfc7ba944dc94db3fd4707733c56a1c2f6a238aa7a575ac55f2b05fe5e721db39d6b94760308751a275c4979210fa4ad3bc3d8c22dbac9b7d1a1a3e46d66740404d9058109d03986510ac497a539225aa92f0375090cb2abeaf56871769261cdccdb0c14d065b983f496db669dd259e511bda929e184e3b3dff58971d3cdfb3e1d294a41086b8f76e44bf995a1999a6d6d755b01cf644733d3b38c2e328ced134d4c7b5e6fe2c6ca5de19c0add13f05989c419ccd5c7c712e35cebc1c3e036ae65a121becac5472fb90ac2290480364437e35072a51546ca17895d85d16b77bfd6f5676fd26612239d592e0819a007c8d47ee5481325651b74578961ab791b513726ba6e5fdb1e9308c283d6303cd2ff0aeacb087f84df5be88a27b3b3bda4d17f2cd4e8e0978b154273fd0a869ba98e3d427b4d4f311f071c4840613e731d83fd2bda549133428e078dafd7279e4880239f85f76354f31fe91bd5ca441ebe681e175e2a44e1fd68ae28429fb8841e6d4270384c213866ab7ec2332924c74d1c0982284b27f2e84d8e516ea21de4499be63ff19d28f0f90e2f7d2229eb4da76e263e4af54b12b00a03a61e56086c72885cf6c279c22e3dfe372b9ea46821218bf1684aea75a55bc529bafc51647db35c0eb39d488d44857082131c1ba4b6d13fc767f936173cfd45658452c2733e668e8ac57742d88b71200268242281aa40de3630fb0cc081aa840318614b6bf27bf7f8aafcdcdf121b72650f4cb7215cc28c025ee302bfac17af918cd9256f87a73ed13cc9db8f2b4285c8d4e8250b3f513c5c733bbad7b0104feee881ad1ceaf8ae3726513d828b95cbdad4871a39d8a0e3672e0f33b06ea7a4f0557b39c8bc6e0076cc0ace540fb163b1aef526289315a025dce7dca63e563b5bf4fb64dc38488bf36c4e6c0b1506c73615e03464b959019c8014e9e134d572f33b0ae77404ec1b5b5741794bc0ac4659e88f1f44d4f9308ed5fd3cb6be922f60d0ddd729bdc71b2ec8d21497b8b692aa278ab1f60362cf75aedd9f974cc99b7643487d1babd97ec9364680c4b6eb001d18b4bdd860bf7d4894f2f2eabb7da12f359ad0c378143806b1a287ef92cb7859393feb89af956bf2e703f886977e54e820e17edc7e806cbfdfc03fddf9f433f001c87090a1437c8bf8440a7cfd3a17be12c07ff5cb9ebefb04850f110a7f0ad3eaa7b1c587300f1470dff8d25b4786c57e01b51dbbf0cc409b38992de1d1147b636f630b260ad4fb59d38f16b26cd1590656482d927595eb0215d58f0f664398ae0a96129c42bba74cc937523324c4363aa4be32547890f20c5a2e57328fa7d122724507fedd0289e3a7c4c564e20bd37668341e7817f0e852d5185283c9d90ff01cac928e7b7a533ea2be0dc5608f4f158c65042466ec5358b536b169c204ac0b31783e0ea152deedd435a57abf1f551bc4c059634a36af128ffed4f11e850e0a7f493bd5a6d8ba9bd2d327cefc3526fec689a4eeff8cd88e669e937ae0df07b991a194b5350e6647783d0a1aa89829852f1b03d0bd9eaafd20499e862080368d5ca611e8069ce74a9cfbc4254fc5bfd5bf2847bda6ffa3923048ac75cd16e9e28c4322702019065466db14d7398fb643446a06e6a6ff7d8178762f0013e7fbdf0081d70d3944de915d05f5fe2d4a5b38d25888b008c0c6c48af70d9efcf3b64f77ba9038e3935420d54dc08e243df785cfed9dd77e4ac30211d8452e2c7a83667bf73e687c06a00d6606f6e744b61b1f23c5220989cc433d5fe6c300b9d4b5469620cd8a63c62da4672a3ed0a72f170ccb0b5d774e82598d02a25d313e90ab1af30a505ce76ec1bcda5e192e1075984fa859573c608c129253fd0a854976ceb258a1922230d1d5e893cbb0ec5b81a87b54d3889276647df4e98b25ccd150116886b60881f87fbc864bf1e9d4fd02746fc44b08354dd8e37da87edba419af6a512a0e544615ea9824189f463fa60ade1ffe0c4a1999b046c5429dba80cf599a209c5dc93c5486efe4476cced1542895f9dd4c452066978e8b91c898e1c19a7222902827b3824b4cbdc171d25456cb9d4350058c05a27d0cc8ee4feda6feaca4bef037ca8acf5a12c475be7ac248a5899e56f92a2f8e074a3bfd314a41b5fb0fa9292c25c91baa210feac908bc446e49699593c6789512b3a438940cfe7681364e836f0dd98d79a9113fd8df017ad9b7997c9a67199044dcc6884169779bbf592cb804eed93bb0f325b6235ca9792b0737c69a27aca15fa581a655377144d617c8d4d18e64ce876015199e8d7c4e797590b75ad1ceef5697e8a4b0ca10149897cc69ac9e29e4b10e27107b5a058ee32e24a277d36fe2ebf446ad76605b06d2960be9c50836c8c9e8f3965852ed1c2f85add2e5dd6036c9648067d7f6dd8d0d0df8ed9022cd23b8aaf7985092da433866c7e37dfafef082ed831bc7e564bec446c4a75860b0a73b25728c8971edf6ffa4049465c61faae00a3d330bfc7ce7fb5a83838985caa9cd63af52576b2339f4b8d0890c6256ce3b6f77e9512a36253f2fbd395b89e8dad970ae6051e44215065dba01e29236ac09af83298203b1c81e4a75b4ad1a95d3ebe010acf4014ace8bf76ad2ae337466e9de42515f526353f3829a9cc90d1a3fed986f0084c85df5c12d418bd12d7aa0b88776d572e8c6dd8b6f5fa230f012dfdf7c5df9a4c25088101f731c5950aa4a1fb89793aeb8a4f121724dfcf62b62abd8b66d6b356fba94b06a2ace9f89bd4552eba883424e454e690896d800e4db4b25e58fe4521d5e510db58d817ac5002b0401a2ee1295abce5774b0ed08dd88fda44e15c203a1a5aba8e8040118191c35ee820a5422421d3bf65fa02194999d5b8a91df15e66a44f6f742318667b24d1c3c6892a645cbd8d0ba0e872ca3ffe3aadc86c89140bcee7f26bff79a64c42dc0cd6f1e0a97119d5452db946e5f62ecf8102e0708889807c744766022db61af535fa8c908269cfe637523fdeedd298eb6cc2d14a8ba25ff9de20cb1223652e92a124eb2f886a828450a86dfb57a743595ffbb9af89939736bc9f3c85d9b9d25cc12d557f64751f050e429f9129e70c9dd69c38800282596dd7d4b74936cb5266cae9ce3d9009f69f14c2e6914284d8ddaf096ae04c598c8f51240bcd2af8315eaf8c0f47ff32c76007e97ddb8cb9174971fff830fa60b5f467b4eaf8b123f34043f6fc9ffd1fb65d2c2b5e28177337d4d1e0e80aa9d18ecc0244b41084bee12f1713568922b61b2f698bffa0a2788851155dc488505ebf9e1275fa64d04c3ddc99adc30a9856a2d0b6bca6b8951accceaaaa518d7a64b9e81a52678952eba4993910a66525a8a72416f34f100e13958426788ce1772c1c501860e298ab6ba050ca2a0384787ea6ffa6002dfea8d86806bdeb3783897cb2fc2ef09ead791675d9dac535f4dbe3c41fce84988ea00f80e27943c34d0656fe5a726afae7de2c273372be72a948cfdb5355e47cb04a91e2351e4c461d3971399ab8093cf2f1aaa259239f297511476fc2d4f59cf5cc99527b5d3f2ffbaf8638c05609387ddedb6ed6f17abaa6692d4edb7615829b7ca84f4cfa207eb41f8fd0dbd11713ad9dfd6850891c25b136c3c2b31637083d47308eecae08c6e1859840f9bcc17a8dee9e52d686bf7a642e011e8cf95e0522bb0c062352787f0aa06c96ed79b45f1f31a87a8843b1e1eb4fdea7f9acb1dfa5eb71cb70df65c80f6dc2cc001aad97040b0c5c1761ef31c799b17f52e2318ebe3918e2c18475936effed22f0b940b510111aca559495fef9474a7f3ebab6eb2057cba26c4b64056a2fbc92cebd02169c019f04683dab6d2bd71dcf47051d5d2d7637c603efd275c198851274fcf99798987588ae5a1e5cca2884117a3a73e735e9af2a50530ec90afba8418603faf924ddccb52a53581c3c8a815b718369340eeaf18796b1e825fe57b0f1e802d3464f8a59e6dc4c479b24994f0314679bbdb3190b2ff93c3ccab20119c7b05248b559796ee89601a2fadf3a93c0cdccb619f8da207a11f7060b7fcd34bca71a508c462a75aa045a0efbb74a8b696e8362861b24c1bfb0886468d4a93279ff4493111aed4c5cb11d5927dc56a520de696e656e9e77bcb371e5d69577c7acdbbe62c66d6036f477402eaef3c1e156ec7808c0966c17d8586bff9a0f3e11f4bc76548cb460850a27648016a00c39d1a07eab9105a2d6c4bfc72424b0cddb88b4e004ea1bc34d211bbc7c70c61f0ac767b04ea8b95f7ee3d17ea016d6e359e8c95b06fbb69c4566602700ac0c7d1f816ecaef80aea8fd4d0d2dc172ff587f542e2c1de6b9bb04d1ba3bcabb6a4c6580b4a06c725d058889f8c45b4fdc4d99bda44488d73f1b325cf6a69aa1df68901270a3fa907d91f0cbee663d6bfb2a1c03b79a163d72bdfd4b139140cdadd42956947ec7f1f9b201da93a057c21c5f6d0285651765046ee7a2c62594bcc45f55f8b92f6ba03b59b32123f80580d9e0e23e7715f96fcbae592bf149dce774151559a3bd133b2769f8288ebe08ce0b5a4dd10aba69ab44e23a8373e8ef11db907803aec312261bb43728f66a55f660b12622ec83bc22bd717e6bdd04215ca51da33dfebcc00c9dcce164c79f839a3cda851b093f6ca79304b7a76952f90739544dce77af639a4d50e1eeacd6906998ae53b80fe1d970262b56a087b66dd0f74413836f24c6535a3874ea14f59da5abb490b0d768d9832760b3a033173f911e7c42c44ef493537e080ff0c3ad4ac3a3cc295663e8d76a247c5ce987034d86c26549b2e88bf43430ade7738561b69abee39e1d1a9d5d2c12171f746911836a22e43cf542848f4b71543043eb62ab2117a1e642ad4f0a4f2299ed423692a7441c26a5907ab61310565837e7ab26aac8435cb276313b9e36b69bd5dff6d09ff7b9eb78330cc9e74185b2338162bb2e13f07eec4fe93128c09bac7edaaf70eee20582b5cd1b58954c2ec171d7988dff41dffb47ca9d482f0a57a7e243d5c22d6dd3d0542909b96246050561a08f60d378f26098b94e673f2c3fdba37e68e629b8b1123f5d50236300f193d8bfb21a0fbd51c47501e1f737b3225d28833b2112c855977656c06ede878d6ec7ec8017e1aabd35e6b212a83f9061853b2d7e727b7d7394e1e28012c87d0442c9efefc6f9a6de0a5a14272f4bcbb02514cf84971a10c2a7ff3d06f6506d83aafbb23eacfd4bc08ae0c179f0d7db8d46715da253d3f9641b28b4a37b874e1edd22b818917111167dfab90aaff7c0e020c5b630d16034a10f1927beb42063058efccc755eb6543727bbafcfe363ed899cf759382a2e437c412a7969ee9be073299761c9c52ef80757b08584c02757fac7226e00d95d935145a79b6966098bbaa2468c112d0ec75767cada00fdfa10de1a543409f3d9e5704334d8eca53cb4200d808b885eb1ee2d046661b8e54dfca2daa36759b929ba68f43e812147bf759325bf4a3285717c2c97a25a0fd60d08b9a3761607feb98cbc3fed03aa77249f8ceee108e9ac31e3784b62a8b5396903c85c4701b18cf0edb643242f629747dc8771c378e69d19822993a11789e6ee5d2d87dd8dbbf9b87d877553d3459bf9f030b46136c2cae6033dc67f4977c4d95313becdfeda2ba68007134202f9806c582386b3f185fa1b5685338c670fae69fb1d07b0f48b1c7ddac32faebe6c3874fea7284585cbbbe83952435b96fa90065159ec1892488da86b4519cc034f95945bb06a362ccd8c176ca16315dc75b5be4f6b96528ea25c76c993cb55aa621cb4f9aa7ab232d26738c6e7889116798033da6a11bee1b12cc7b6877de53329ccbc9a8d51e17514ee532ba72bd18d09735721456f5153e7d6d9b1875800e54f02dc66810c1a544fa2b932580b24f864e4993c4373758f504aa5796629a41848579e1ce61bdc6dc9422fedf3b5ffc17104910fd86107538975ef7dede807d8b0ede104f7da5ad39e27e630371dfd9c1ae03078e4bfee3b6828c222aa8586f5650f60dc994b5d3240c6d937db059061bfac7ccb026189cbfbd07b004a3b8b6b645dc0ee4a3fbf1cea1c2a0e7563608e26985f6cee65702363832af9c409fa6d7715fd1493c0c1677d6a15a90044d52c367b20f6ffd98669547e821eaeaee9f3808146f7c9ca056c9023456760340f9704953464f1e673c34c680d5ee22db21d68ea2fe41ae44671863377b6ae14593602fb1dcb02bd2fb70b107f454edbefb65aad8fdbdfcbe7d12a0dd8ce7b111fac1e5737becc46946d32716631633a570242c77bfe98618d18d0cb0ef7c8191a9b62e63dd71b6a9dbfca65256e1d8a5cc5c740eed5ab13c7681720a44c9e331d000c27bba5332626c918f98e0cbb75fb246f3b80028e03be8fd4513f595b2ef912556c48b8c53874fdf3c76976dbb68437a1da42444a4400bae1355a7300f97c1e2438f508936448176a708fd6bee930c5c9f7a760871ce0d33096355d7c8cfee8ec54e187f5dc364c8b77acfc1feb1aa77a5b49041cebe316166103779297757cac7b21b0428176575d983bcb9519d15e0c5695ca7ddda2f7e8929493145efcb3f100b9dd4d8bcbf15654baa3437ee38d7424221b97888159d0028dc2fcda99abe8a7a98ae3cf552c27c8b2f56e9059befc82f3fb45724b709882d4199f5dde44163c0a7221f22522dce006f4c51a2b5ec4d919b77b494e25518f0fc3c10ea67bf4cfada7fb40b2e45964f496395f2cfe1bc9d71dd35e4d590c4dfaaad574bb147d7705cb7787540688bb62d3baf81bb5a38bf488896ca68e87a977cb2e1dfd14896dcdfe6ba5cab12a716d89c0002ba8a57126d32e9c6ba195532d99fa742165a2527d4bb728fb2606ae5e9564366eb20a9e5b9b24d431f95082ec547d67edb00a4ea9971fd00cfb4f2e502c2d4d46981982198d113f01046c00a98e8684bc0590deb6e6a8382474d962e1a58b2c8cfe424e01f37f5dd66a4da26fffa6993dadf37f121fd94670506898eb39bebdfdb95ebe30107814b9ed950cba0de05976520d64828251dc1dbea6f432c5b80fec7b74669bb43a3bcbe40e417fa1dfd65c80b4907bd95c3eb6f667a92d53b6c9373801b69e0aa857bd7926d0b6aac1ec57b389aaf85c208be4f8e49dc268e58e8e307819f50bb0691593a99fa0546153f24a7ec506d7a3c07cb673a21c65fae68ab3bb3d944f2b9dec94a5dd1dde97f4d934cb10fd1508e339967c93a89e21e28abae89430e0d9baaf87d9d37bd216e47e37d76540abe5382dd262ac3eb197b321e9b10b65cbe2465c24148a20cdc48265253b042f5224421769359f395aebeb488b2bb3ac92eef4f4c0d6628108e77f69d1bdee2a4eb3d7d14a9477cfadf2acce365181524ebf66379b1fef9a0cedaa292404636b74290be1198a81df6b91eabf752f670c5bf64ced2da4591ae1851cc3bfd303b446c4ffc6e907af643d21db6aeb4f7b45d04d04c9eb7c33af4e3716f924e9823a45a7dd43da3913da8e8504d6bfb994c928990a6026c186ade34717d54e8935dbbe69648ebf5bb6d59e43d7d1cd8d2e63048b6582bc6c462b578d993957de0bba66c6f6ed18ac1ecc216953951d18f707da3adabd1ada6a7a9d1368198e87d1d289618a62d4a8b36a36fc09ca8dc423c33e009ab52762519449ed99d65824ce519bacf7c10445c770cd84cd249bfb26fa0226119e3e214224c8328c1ed17739b21a27ee7907f92a8c1ab3c56605166406490e2188d6c6d84fb7c21db0a237eefd3850d9e40890e80e340f750071cae6238a1b268c26f787055e930115eeb7908f91485f399b1d7c0de801187a3b8a03d1d98277d81f0c38a881a1dc0944481f3287a03e352536b54d3b4597a446df6621d0a1fe38dd6f841d0b90f9fed15f1a67a6bf3c9ef227fdca826dc72fbe5e54bb9c9f3b029cbc2cd5fbdb0646700aedcbcd41a4dd635c4c3d0bc4f58887ae86c2d147d8e0d69bf7ef5aa24ac46a2b4b6b2c762107d8967149116896d006efb741a8170d888b83afae2e27747f9fa593e12ccc9439d93d4bef41d20cd12945ce9d24facc1ebea0ca3c37662e90a7e40ae5117171c07223a302308ea4326931b1c850ac45976b0ae70a76be54df826b6e72710eaa3d50d28214f0d69aa4cc3d0882fc76817c9537a7f5ef6cb76ac72dd8d97c1d67ddd392790d47c97a1c196b652a1a550dfec29095554ee199529a3e82171923b7aaaa403b91756aef98e72920488975e15c89f81a681c2349a94d70d23d6e4bd8eddc61a438ee249d23e476d91190aa5d48dd4c443c131c0592dad0f09d7271afc605e89e5eb9aa6c6fb53219b01a8e07e7aaf6c76e1caf078d050933941c47f1cc3eabc1bb1e66333e7ecee2ec03ab4e4811b6fed587902b40ffc17a648ed2c38b39d9f8e336e417ad565cb7f39c6f4c78c4f22b087b21549ade3efa9a34b97c770c24e21018169f50c2752cfa4dec36cfec89ad6c32ad4a975e9fcff4f0aea3230e9437d6834b98336421739952c7bf2bcd7074d823a1a77e28b5e461271fcdc6bedd4cb288f6dc2a82c913c483a8fca1e09221161d82a3b3304485ddfcbbe109d7fb608774f0020d5fb197d993a3494ea8df162ff3aa3e589176179724dd9d7b5c433e49d548971c3e3133e8f4cee0adfe73ab9891da49622e2ba47e1ef54df4670c88d979832b2577c65c12f27864f87764ef83dac0795ff0d5372517c823f3a32ccc9787fadc61bdf8fe4a5e3f747801aa4cfe243da011c2c580866ed9a0116123ebe60a2105bc6c2996f552c52d6dddfe46cf3a37edc0fb588b7494fef1ac767cb86055c9db85b0d509b3c5354a3d90b7d4dbf9c3e646381fcfc9b0035e2ae985f1369c91ed56511f711d602c67ad0d8e810730bba9f990f6f976b404c6252a023592a69456e95b1b969f2c44285942f3f53882fd9b9b2d7e5de67e6b9de31d7013d29634aeabe50d5700896b56702452047bdb367ea5b2116ad350a934c7b2c9433a0ea35cb98d8dba608648cfacd28f9c56b3dd324606ac6f3f9aea57a005d470aad203390848f2a9c2d2d247113f109b99fc69188375ce4fdcf23f1a87bf0b0b2e5e417fe651d239e7726a7098e1306f44c477b0d27b8917b08bdc4ac6acbfc13e91a3b92379eea67c592a42b996fc6cbfd2c97a188157b7b58361cb33e57adbb643ac65fa74465af54d5f9b9eb6908b678c51984b47c389916b4edf5b38c382ab13e2d44395125f7d262aada54c781ba12458a1bd8e66b715776a451178eccca963d8d0c6f872f5381514547d493ca31a16528d37367db01975b51c1a5be16e9f2b0f55da30b10e58695e4d8ace44f2f8287f3ed9ed853dbf51c896db0291dfd5b69f9ef988f85b2fb0c3d2a5434ce096fb9ff081bfe00dc4ed36782b1bc2adeb0cb2fafe1ad97681ccb6b6a6bd9bb0d66f17d2454a724d4e3c1d661f693610178b121c0d993dff79f5de71c4c780ccab108dc68ff4385ddb8e549f1f86aeeef6d5bef907f54df565bd4e20c81da5177285f45aa7cd2bd7b9ec113b0ceda480092ea2c9cc303c0ab2b86731a7bbbab85668368f0b700f68eeefe1403f6dfd2ca5e7dc6f6d71ac49a825bd01b7689af503216e70a2baf9ac8f830cae4334734bfd455c43db637e61fa8fd8ad2d247d41b65aa12ceb0c46828726712a0b5a81d3b798d0048656babedc23525a3e7446fe0aabb1d9e2785f3f2da25ba3ecf88f8953ec9bccb82d15c05f5dbcb40819dc4329e781e8f0df1718c24a1a878cff1fda622fac96b083bef6b08c600e8b357a83c7f5f0f6aa0a4dc11ff271b88ab9f101a137cdf2145d28a59e2bc415f4f1f0be83f35363816f7f4d4f124206952cf6efe2b2f907df6488f92c1b4794d9ebe03e85e584afe72acb573f0c4b02abc3c7b9835bbe2f33a6909204f8a3079b82798bcb09954e10a10ac70ef30fe5c69dc3c29704d93abc564e9a87012c0f12d0c23456a3ba06407e04600dee22d769b6ec2ea055103b1f02e42ff8e1e579b7654bbfedd00c7ae9cb5ec38df8ce6eb1b0e5a46c4969d954c30d3ff86b0631dd9b4944c8c4398047003141e38670e78d1c19310d53fe10fcae4b496ee801b15a2c09ed34b748faf6182bd5a60542fd16532bb1e149eb42f993278b2f97375504b6d01eec9e4f5497cf3a2e962b766b06924451512c8c2b8161675d897a9529e6f7cf0e99b74a71b23df8144701ddf0d9e59636bef62ee0bb6a2e28f20e1e4ed51716c882bc2de25f22248021dc78e6e31c204b311fad1adfff12560fdb172338cc6ed77688b4db53999bd37d905d5564143edd38d720081924f961afa0cb2765d0168fc308a8be7d160e6bbb6d0dcb4fc38c481a4832118081eb5a8687aff891498d3905702c34405753134a6bd728eedcba4aec3ea35d19ddde309fdf5ecf2bb4a7cf6c0a4d934c163a2b7e524b784634a9267b4bafd28b3fcbd55fcbcbf224cdd6c37e4fff6518cbd98326657a49f8b91c28f587ffe7849bedcb7355577834ae7ed648fd2a3122fbcf92d4f839b0c137507f9b223c76ad155a8c86402f48d0a9c61e8921a9d5d9aa709abdc444aa09cda355e30203147f3781caf51efff4bf86e71ef86f189feeb19065188399bb03d911e87c23473caa8ceb95c8cff3dd9413f913874e61bdb958d468d33ce0901e9b3e42d04d7f06a99ff7e13f35c8305c8ce11ce75b92eb6e2ce1d768d90aec12a60b7043211f4a2afc2a8c8ca1d03db198a8c624405ab9eccafa1b38c78de682a201a05f25a63d3e6d6f79ff07ebd9646a8ad117de6397623dce6c9549252d79ec4630907371db51ccd81fd5fbd58f0f1b17e9ecaf6731c8142b369305e7b0974d6c54bbb95e210e315e41dd51ccc6554ef99eaff082c038e4530e8dfaa130ce8000a1be81f6f7c02bd86c9aeb1ccae2a6ba5353237a1419f20a66b56f58643c207e8008099c7ec2921cf4c026c68a1d247d0b2e81ff27b9265844a9489cd67f1968a199dbe9dc038a32012f6bed88cc63b897d58e6f2c695e97544b235a2a4ac25e8a87ba47249c61dc5da6e259a964a54b4ba7cd3f7cf2868d9960aa5caa1c3613cde566a16c38a943a3706bc2bd715fc87ec94a2e95fd73b3bede78e4ffac954af90d5a838a43adf1bc7407e044e26e3294c3a8c90e2cb30a557e460b905212dce7294880dc023d6734afab3a45027d1d6b9e00d8c3df52863258c7051657f3f5083eeb6578beacc74ddd41c69591d359f7bc0c6a3fa5582772f2d7b8804a7380a8ac13f5ea5a0c92e3e4357e778355cbe022762c3c57c5070a9f1461fe91613e5fd1e89b1679719dc84c41937dc1ba4c895a512cfcdc47542b5f2a7e85c87deb547ff54ae47d457b6d0eb692cc67283c7a10f0e5a99ea0f147fb304c43a073cd8ed277e70a1d43e5223ced1317c95c35ca6e9dbdb997f8a3a4514802f66b17a183d392181c2ee9d5eb2bef2ca6436c4e5ad9aaa800689fb32f4d6f424ffde483e0da78e05c54224c70b0ecf6cf83c7f96baa88850241967b3a3fdf21e8ade3cf572e2c39f77209d6747fa592fb9672849f6cb5189a8808efd17f1adc1a5e263638a411b1ec81e68f908a94b039d5cfd80a48f9b37b1a25dd379b7e1f2d4edaceeda328951c1512d691828efc5e70af4bf425d30405e40cbad93f723b2b48204b6f12d91715de09c15db68cc86e255356b850451afa2dc11dd2c4d767650e7a25b233df1a5cd828f9a8e6857e72588ef2074ccb9214656f286215e4f7059c6c3efc10b01e034f2051c29011377b498b57a17a6d9e3f4330ee8dac1e7edddabceac1ed05abf56445997eb05910a77b0cc2cde7118d5f2ecd94ebfb6a28bc849a28444e8998b0706fa7f1c86974bc363cc6de1339fc7e14ed88834332459a9f48d99b9e5690edc0f1bf3da23607b9212e1ee82d203ae1e4db73c2ea5de66ba5e8bd57066c900a8d49e75d6b817f68a6003bdda2c058adf472d4e3f981ed735fd820322aca843e86e9bfe5cefa15c876a453e6169df90378524d85b2903343b5feae1c29692a1772ff796f01c6479ae6b57d787795703e891fdefb2f6e796c2081136d7a60965ba2c91b46a0f49198a16d4719c9b567b1777b0a206ba007da34c1280f2dfb3a0ee9010d43e053d06501fa0615a17a34104dd1fb757762cf42c537f2b4bcea5bd9c75294fa9d937a08a9eb3959d47f450acf74a56502023f55d3d56265f05cdf79d2581cce9212391a43271ede3575726a56a5753c31ca0479a76a3b2ec1554daedbdec7b7508386f711b8776970cb72fbe47d14af279ab483b57f61493963c5d21d80125eb3abf2379cc1abc5d94b585ad1bbdcdbf4448ce37765067ccb6b7da1e88826751a2f685ae9aa36ee54d6ee16c86e5e199ba6bf9841279600d8d8e9c957c8c11d037d5fb3cd2221ec76aeee95b562292c0ee1f18d0f9e480d29b591b52e2b3c06657ee0280f942304dfd9f83dd7c5e89358e1f808169ae2585f22e8c9adf328389e9526113c130b352d0c5f8a5b01425a87930230c281e25635ee882e890d86005828badb8e5f34e1494b77db6a4c27df5cf8daeefe696c315d492d4f2d563722226f873a1397d62bba8f92898cad23de7900a0c443edf68f40d69b267ea85eb66a1841357b7e5def908099ef9046fd36d1becb8fde14327ebee7890ca1affa7d3e4624ccfa0d3bf652f6d29925c7f73bd6f1deb13decfee42ee1ce0688e0fac0bd933050cf59a79b6dbf54db787393e07fb05a56ef0a97b80842439c24e37f86904e21cdcb25d8c32eba068e364d3adf06ef2ea125796782b1810a4fe3ad00b2ec676a1e59a53be32dc8503d3cb41869dd6b0b453905ddcee6c283a547cd0799aca6a4413e8f1a836ce842816a9330b2d884603e1248ffe1550c7c5165b1e0b0d8eedfd6e318c1b6c4e1c800e0dbf63cc594777c390aceb4beaed49c9420d8f8eb9901802fe1f09c3b8cf78b1296c75dea7688b71c034c56c8f82b5804f9c43f94cc6c3fe554bb1232b287e6bdd8c6262ede2969ac09bfe4b1cc5f6b27c6fa5e2ab53e82d6e9567c694c638273dc223690d00c6e662098b6eff24786d097d816946de578e0969232a09bf51103f719e4d3e8901ac1814ca09a5ed9f8d813e1de1daddd65f90a2dc1f89a02141270442a8e15a0a46b026a593814cb90a2af3d082b91f4c2f4f2ed0df90f226f65327986f00f277643fc87f2eb88cfad06d214266e1b0b6a656dc1342ebf36935c282b891108ab8d42a7e20e238be8623226550980ca3ce7d4c774391945dd74b8e8523cdaaf4a3200b03c274ac46e854bd60bc355e5d04395c66ea94da99f7090d0146434ac196a817aebfd861bc763c188d18ef0ecbf8c2978d43adddb66f823f755ec637e9aab9f78b1ef455d33c239fac9df2e83d2a3a26c5d3c5c3627fbd5871a97eebdb052659cd41c46f622e8c7de50c25015e7c4121400d67f5d9e94e2d3ff79663b46eb1b1871eeb87b6d12d1fc94a131a7730726a24daa0b7573c995b079b7a5153bf1c9b8963ee2bab32591ec97cf682cb549deaa0c5f18eaf8478d2ab083c9eecce3ead1e8bc0708df6f7a056275c5c1a9a63961ecce8c152a78b25dd554ca3cf68b6887c9715cd332f8bfea165e1b1ee8b9c4b32a3b970fd3925d53de980c09ad6ea9461a2e8ba2443d6f64083b9c42a4341d09acca19dea9ad52f68499d0c818599d6c241a7ec763bf1b8ac886b94d5985fc45db486cd0f3823daf417f493b1acc5e955de066c367c3909e81ebffdadb4535784ca3ef3d76848d51702db2d7f7f0cb909b4f002aae3738c28696242bf7e869b74133e259872a2d9a00de2662884fb01140b0dd7aa0e4a28faa463a8e68a396b39914fd554f128e8396a77fdfd260330746164c176dd47696aedf51afb231346ac8677d97ef02b916796722dfc1cf1873ffd195edcb8d46930e708d3e1cfc4c581a1a482dc902a90dd7b324b110014deb365594440444a820bd90f65c08c135459785fcac51c1bcfd74241945f633c90d15a17e9eb0b4b2880444466f9b9bcccb9c1ebc58e3a58fd76c0ee177ae98606a904e3063ad78eee96fa39ff88e741c686daa0176b9d785c574b768c8ef5bfbb856a7ff1e49a70e1b3de385961c0158f0af47bea63dba050ccb0a6f0fb216295203ccf4e26e8c3a0c915b049b127fe979359d23317fd92f7c71c93e4ddcd9e19c70047b62f14eb55608d4518fdf5e439ea56af45a4f430f39f817bac30a575c5a44fbe8045096944a0368902141d7b0644b0f2006a404115f8f9a6934b4430aa78787f644a253d85d792d020f1e86fc0aa71fb9ab5047795a24610b27e83e3c72c9145e78eb12b8fa28ea330d0fe3a8ab6c99a42066e39643e59a323dbd25219b36d0b0ab01d7396256c622e9c720b6bb8a5b46e7b15b119b7b5767d841074ee9408c9cd53659d03d791561f396669eb63e3a82e6e53ac0bf96f9d565a2ee3f70ecdc60e32b95c89534906696659cb28b2767a8a6167b1c837fe2f7b603c99a951c85b6072d16400f70bbde9bd091c7e96c53c526428cafb35c4e49f0724e97d1b23f74ec59b899c0501d572402e310f86e7da83a6ea4c7d792fae4bb90f4057ebf74a30d4639133e94237904ba9ef61f84bfd1ea80fe030eb6821d5568bdc721a5e04602641b4309668f3adabd115daf65ee06e574269d58f36b92b4a5791ca35410a8b56578468517dc05a4a45533a058619e45c177136910e1b5fabb83e5a93d8dcb74bcdf7342ae32bc5fc684c9bdcfc0df0f599cb812bd37c0cdeb56600d2da957019a623cf8ee6099437eead6077601da7feaa7ae9398e20efd393cc3930e8d79076f4c507892ff45ba5a7e11d1ae90d8232eb3a489347861716152fcd3a3a678eeb7016e73e7401c0e4f59ce1d70d20217328e50c0309703ec2acdd4b5ec852ac30f9eb2737e631d05d1a3fa5bd866d6668d5e9bc261c15494cf8308beea94aff3c0f04a6f0ce53677afd762dc7b86b1cee140fe38ac1a5c9ee2f908c5eb3449d24f6edf835b7030e0327f163ddee36fde9b58521f19510814f35d6d09ddf20cf65bd9fe946f02099be931211058d834164832177048f1a42b2b7084eb93095bd3c84c8d1fb89eddc4070ef60b98cf74a3f25016efd4dd6b846de2623ae731137a26c45a3e71d4e4eed7a3f8fdc156ac718879b13c29fbdd14fc1656afeb4b531d0f8fcf31c3933a1b9884cb91f71c464e2bc7d8eb92f3b9483e4d73513d9ab010553a098128ed0a777aa61806b4fedf9ed797be311fa089cbb80866e106c9f2b28e3d8fac6a478653ddf56bc54de3b0c35db88e29eb75ad80d60b89e948940edb753053e232a6f44ef317b71a4d7fc57d523fa335e189378b9b4dc9d687deb82270c66e8c0cfa9b3ecbcf80244a9da210569f35b8504807169132edc916ecea9e0e23016af245bf23fe3236fe8ca35e3b76d838b6f15a7fb3d3440ba9b6d49c5fd5a0ce647292df809461d5a6ca80a89a2e536b9a064d41c653e26f70e1cea8290899e8a6a89dea36ae95aa34c2eb800821dba44d46d123ad00181d33bf387caf475ee6895c0a14b9721ad4ca6cc99947f774c1fd9cd6621265dd3492edb228fb10923c4acaa5183bb568d5caa66cc130a1b750b210c4b9c97efaf68e9c3c07099bc69af97a1477cee4001b434aa308c27451a4a52e9d6e8a5a978acfb9de44960fa73f2652d8ed67c45b0152aebfe3e749735efb95f89dca1b70aeb5d7b05c63fd49c3a9f8a84c31ce208cb1857b6a975da260de0c49eb47f4ae8a892926d5f71f52d95920225d59dd771de3b8d9c7c1b0ad27b48f12d9a8fe045050d4bd90ac8676eacc7e6d40717d154c7f9ca2d3ace2d3d1ab869b5117609bce5bd6bdcd9fe7e40db9588c2dc3dc00cc2ebf0ef7373c8836bb2ce8fa05f90169fd208d6207f6266b2e2fe77334fba18e390183c9375a6f73e0a2ccd1e1db06a09ba92c0063ffcf9c3720f300edd55c7b93c6ee859eb87ecd0e4c3aaf309f7c2d0a6b1071619214fb16b776cea0f47dfc2364c2e5ecc98450a99a8c3b12aea3a5ac0b428a761f038cdde1334fecd05ebc2d8291fc619d1992fed1892f27e4c0ded352e594057eef64533f96e1df537ea1456cb41c41b560efa0d095979f4161e662e41a25a5df5331a675e907d5a0cc25845ccb21e60616c2293810e4bdb3901af98edab41122ec3b69247c3b29b78a02324804312d6254b8fb0efb20b5a9ea21867a94a6c63f242622b8200b363c0312241bcded0542b0536dcd9614f7febf56e0912e724fa5afb5400cf5b984b680ac60ed3cc2fe25d045d2cd3fe17f4c8de8f6cf2d7c99205f7920fabb05c572720253e2e07feb5a2763fd6e2a3fc7665472617255b09fdd3cebc0bee7555f540480c92a1cf03768d4f2a0a6965e206c55004ee5849d8098f6e733aa40b357cb15b55171539587aeb3a64bcedbe59cb9109dd9d43aa6cbe15404a9d94f998644093cce5738b0ea476b6c65647fa7f170edf1308b453ab9851c97a93663a7a195b47936343fe0930eef7988ddff34bab2921246b76b79b197f07196a7818ca0ca4803251a9fd11f4df95436555a2eaf4e276a89c3652e0b7b7ca76c6135bae369db283b2a2c2deefb5677abb11c680224766062f016504968b21c27ee80fcfc2613cec35df7d3cbea9d84845c6f34d5ca25bafcb675d164b355eea10f2d32eb7141d6c24bd106a7be78e68aac406a70cf5ac71a2123787a0e585492ed709001a3056af669808f97fa9062b1fb71a89dce6c198e958531f1447f8347d36bed9f471e5c0f072ce68be81b4b67cd1b9893d5ba9631ab05fddafed9949c9602cd2a2c943c956cd40519784a5bd18327dbc43b66a84cbb399aef94c9d389d12922a2f4d1504c44f8c78d88fda57e8ec23c8679ccb7bd1624e3f58acdc7cae687a3e59d6d0031086ec7e1f77b08082913074ab7867951ff5b3931ae63c2b4fafa54c912c832357177a8b185641cddbbc14c4e665081ea13a0501288da88e5b056e0c66dbb5fd33df9f65b75924b8cc4d02fbbe54c2919d006db0175be30e67b496c097ad503779340325546c7d48cdafd8c980f93f30e64c32d74dd4fc18b9a00e04ab78725ba1a364ba245eed804ea5c11cb7a55ca1dd8042112c69ebcd7774b172445a87c8e8acc21ce71cf3fb9f32eb2290a1199f1bd88acaab996666e28be4dc99f04a13b98e07799def22c0296c68b435943ddf104231401c4db2ce7e21de3267d9d1c66797a44272bc19f460ab28fca2fe2abb74a5fb88662dd1b9d731ae613561829685de67fc6d56550c6397fcf8be47386d01d898766573ff51a0ee5365e4334e1f4f7de3491fa5ee49de16990c628c6f4cb690e5b4b2b0155ec93f4a75e3b819abfb2650863efecadf7aa989d087a04a3c5c304748d7020c11872985372567e1be324fefc00d11f23a73b34164ceadcf4c09ed92fed0b0fa07c041ab38840cd7cba768706d611ef04b6b0e41f6573a7a5f2ee5abea51e8d2dfdd28192818e3e765ecfefa3125d3cb0d8361c5b0c1b8daeb92270958d10a18f350a968d684c2fabd2517bcb22e1e6509446bab8099fad752aae467b261df18d530fba6886b6ac2a4f6034adf5071a49cf45da18e4e47d44518a5d8537fbe1b7bdf97e207dff2f8874a0a6b4a633fdf89ffab707a7e3a0ee3eda97aaeede91be62aef61ae91989302bb1691263bd6752df85e37802aa0e187c925f504854670c7c2575117e16b0b706d956119f3a19492bb6c785e348e030cd1b4b08eca10373bdf93a8b2d9807fa3152507514814582183b682356de8e7f47d399f1157d66820a19660b4f3030ec52009265191f26cdd394cb427d6b365e891ef79c434a15885397a889e4d4eaf6fd7eda23b276fafe65d912975bb9fdf25e1cdd965b2507cadde0c7cba453db52efc80b8f5734a999d32c9baa0fa5014932d9063c2b5f5f31219da5c98204ecd09f17ed0909ca7a799e7b3a6b94c890269aa923b26e2c310972ac49b785e05514420570817ab0270e74288e25d8af2c45b74193778f91ad34022a1da0aaadeeb9f9e3a512b388dbe7fb11d7c65714f2f69958081fee073a10e1d28b04ba6d21e6a102ff90e46d70d51b0a3ce6ac06c48bf59e39e4081e7235efc97f4df20e19db2643a3cb5abc248c4ef550db238aeaee3efaefd6e158511bbc0200bc9901a23e43eddf33f3b42cd83bbfe8d57bd63d0c115b42be6b57fa085e6cadcb81ecc92540d6c818abce20676e39b456ae0b9733cbaa41748458b1d563e867a4f5a589e1d32d8dbd0b78ebd638aca0198bb23d373ebb85d5a9ff936f758efe1cf58785575d328d3ff7f9830a671150d44348b2fe23809faaef99bbe2767f0efe4f6c83f407a0fba3a1b20d80a10707ff8cbbbb46e982f076425b745711df7f6c5f265ab657e8d551fbae57be0205270d7c9af7721f30abaddd73d913984ad249de348a7fdf84ff8e30b9e934c0cf996c26a02bde61d8a54f799f46828afa7e1d340287de12b2e3d3ce41d0b140421deff68925c6fa808a709bf0abda41e212655d080256f811c2adbba020ffb88f2989cf889850269592276a8043ef14fd19c604b8059b88d9e9987fc59bef91ae553986a623c20500e65455e63080e88e3dde08cc8d01a7b648fa9afb22b9b4bbefe17a226993d8225ae415e6a20afba13166c3d74eeb894685e00ce520e4428dde8ffd1bf1f2cf5c75429e570dd03ef5a83938934bcaa90defa4cd3aec7e2805c00f879d87c598d83d4a7b4be9f66b35574353f1813c29bb0af1a8214ed30be195b3ff6f9ad15089bc140074edc5b4a130eacea9c80c160df9ba64c5eb686a9cbb9c2ec01f54c3a30bcf90f5068b95dc17b016312d8c7909a2830db273211aaec127223eb1dd094591824a630b7c48efa05f8da4054350dffe55d4c3ee7c7e58ba8ad5d4f442017d740bc87afde0e97f5ed077f8b71457fc9d21d00c06f512b0a7ae81dd3b2065f4db3f6704ae854cc5b3be2214b6b9f5d27bff7cad9e34013cebbfebe60ed28a5fe74e91545fda42338dce7ca482fc8884a5982581c230375d88461315ef5e2850e1cefb6e4b559418eb523e7a4fffc065cd042181f52c54be9189a494b3c4b34c3fb0f39068d9d7cec2aa0549d29462f98e7ea0c632ca100fa1b7f300ddeec3f57bacf291122744abd8ae554f145ddc4a83e9a6cfd54982a186bf62f089b33a1a8e62336939ce45d219ff0f970486dbb887ea76ddf94bd5eec523a72d93598b31742759fb775a2b61f6022f574e0ed0b2dca91efcf042695c5378a140c060648d1e8b8df3a8ce8d6f636bc15c3f70e175699da8a058679841c8e06639df9b842b75dd9bae3c9d1fd925c69200e595c8356063d70d6a390f40df1d39050172dbffc480f81246f6077e10e17d8ed4f879ccc9e538d2d75c430d799bd14de50dba81985e3db469150fc121283e3a53c9600d5bfca94b1e9b4bf96dfaf947c2e632672347c5d35da00848d98dd6673dfce2c73009daf6bbf8e13057d7ed06cb7b3f7a12d531e3ab38fce9ed2b2e15a60137ac5c35e663634de40566b34411657c249c20b74869403fb71fbbea49eb6a2308ffbcac5c1c03a90addb3c619dae97c47de432ce172c62fef83ba6163e24c29efb86489c88aa892b0589e3e2073e780d3d027b9309bd4ce880abd3afdcb7936e1d7242e9aab561fae416cd3464f0a7e14253f5bc22eb377dae0ac7f9f56dd5ac6fb11e5371a33d10ca8a15bb9ace3dd567e69c10877004c058edc9ff06f6ecf7a8d06aa9d4b9074d3c725505a9a7f08ede69f0a9d5385ee7c3b07223983dcf9cd5883c12eb40ac24cb53f66317c1f4b5f9f642788bd4ae2e8787f96e1fbe8c1f9c275ff10424f1221e085dc0fdf8afb60b734b545e84c54e58baad2b1db36c5cb9552b70d6839559fe3757f2db1d14a60e2e982cf852717464ce345c3379ecd685aee3b6b6faa7aa4d7a083900e86e771741e00dfa7b4e6a177b44b85faacafe7b51f9bc3780853d48b5a014ed860e1ad676a835e13255099b04a8a075ad915dd5799e5d842609b391f9a9b80cfe9260a3f6b71de9a0fded325773f70d23c9e0983301e29a5aff0132abca98be21021c91748ae7d9e4d750d6b5b94135f60403422ea8086cc9eacd37a15c239e9d2fd101fcd4847de72693e74382fd07b3edfc38843edcacdf6ee4892c6017b7572429e176cd3898fbe6e099a27e3e0593b3562a793f4dea04900ddc57537ca566c33a6fdf16f4d7707728f4c144f72046496030ac9ddf55a879e8e0976cfe4f29863a9b0afa3441619678e479b85bbde680da46a50781a4a65a93ee6d171ef00620ac5e01f621386f7df226d6bcbc56ba7b52677c9d37301bd0a7ff64d5507a5098903607f1584b81725d346f240ff9e82b2cf6d053e1b7cba6344d7282b0909492f1493a8e392c9a0c687fafeee012cb6590a5156ab9e710921c005a6c2baca3d60ea4f2582cc32d143593dfe545c9db63851be12ef0eb12f8734851e043410451bbcb25907a5d9e43e5025fa82231cbfabc0c1873354cb6f1bfa9945d2c3225b985853fa4ac9afca93ce52f55f12ed9f57dc976ccb079043fd15148dc86da5cf7a14e69b7fe5d95bcd2205adb90a6544aae6aa886bab4fe20449e6305e512f9497e2a081a20d574385e62fd74baa913551ababb00506ebe76feef3d01378406cbbc1b0e466196d3c794e42eeea341bcbfdc13488ba7e957e480505ed5d567895df4fdc97e3983d4d5f9d2e8d490c693218bd8</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-blink">      <input class="hbe hbe-input-field hbe-input-field-blink" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-blink" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-blink" data-content="请输入密码">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SQL子查询</title>
      <link href="/2025/09/23/SQL%E5%AD%90%E6%9F%A5%E8%AF%A2/"/>
      <url>/2025/09/23/SQL%E5%AD%90%E6%9F%A5%E8%AF%A2/</url>
      
        <content type="html"><![CDATA[<ul><li>企业常用的子查询示例？</li><li>有哪些必须用子查询的情况，有哪些常见的改join&#x2F;with提高性能的例子？</li><li>Hash Join、Semi Join、宽表、FilterProject、SemiJoin 、HashBuilder这些词什么意思</li></ul><p>下面把“<strong>必须用子查询</strong>”和“<strong>可以改 JOIN &#x2F; WITH 提速</strong>”这两种场景一次性拆开讲透。</p><p>每条都给出 <strong>Trino（Presto）语法示例</strong>，并注明 <strong>为什么必须&#x2F;可以改写</strong></p><h3 id="一、4-种“必须用子查询”的场景"><a href="#一、4-种“必须用子查询”的场景" class="headerlink" title="一、4 种“必须用子查询”的场景"></a>一、4 种“<strong>必须</strong>用子查询”的场景</h3><p>（改写 JOIN 会<strong>语义错误</strong>或<strong>更慢</strong>）</p><table><thead><tr><th align="left">场景</th><th align="left">必须用子查询的原因</th><th align="left">Trino 示例</th></tr></thead><tbody><tr><td align="left">1. 聚合后回查原表（“找高于部门平均”）</td><td align="left">聚合值与明细行<strong>逐行比较</strong>，JOIN 先聚合再回查&#x3D;自己和自己连，只能用相关子查询或窗口函数</td><td align="left">SELECT * FROM employee e WHERE <code>salary &gt;</code> (SELECT <code>AVG(salary)</code> FROM employee WHERE dept&#x3D;e.dept)</td></tr><tr><td align="left">2. EXISTS &#x2F; NOT EXISTS</td><td align="left">语义是“<strong>有无匹配</strong>”，JOIN 会<strong>放大行数</strong>；NOT IN 对 NULL 敏感</td><td align="left">SELECT * FROM customer c WHERE NOT <code>EXISTS</code> (<code>SELECT 1</code> FROM orders o WHERE o.customer_id&#x3D;c.id)</td></tr><tr><td align="left">3. 行号&#x2F; Top-N 子查询（每组取最新 1 条）</td><td align="left">需要<strong>先排序再过滤</strong>，JOIN 写不出“每组”限制</td><td align="left">SELECT * FROM (SELECT *, row_number() OVER (PARTITION BY user_id ORDER BY login_dt DESC) rn FROM login_log) t <code>WHERE rn=1</code></td></tr><tr><td align="left">4. 测量数据质量（重复主键、空值率）</td><td align="left">只关心<strong>统计结果</strong>，不需要展开明细；JOIN 会强行拉明细</td><td align="left">SELECT order_id, COUNT() FROM orders GROUP BY order_id <code>HAVING COUNT()&gt;1</code></td></tr></tbody></table><h3 id="二、6-个“常见可改写”例子"><a href="#二、6-个“常见可改写”例子" class="headerlink" title="二、6 个“常见可改写”例子"></a>二、6 个“<strong>常见可改写</strong>”例子</h3><p>（子查询 → JOIN &#x2F; WITH，<strong>性能 2-10 倍</strong>提升）</p><h4 id="1-相关子查询-→-JOIN"><a href="#1-相关子查询-→-JOIN" class="headerlink" title="1. 相关子查询 → JOIN"></a>1. 相关子查询 → JOIN</h4><p><strong>原写法（慢）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> emp_id, emp_name,</span><br><span class="line">       (<span class="keyword">SELECT</span> dept_name <span class="keyword">FROM</span> department d <span class="keyword">WHERE</span> d.dept_id <span class="operator">=</span> e.dept_id) <span class="keyword">AS</span> dept_name</span><br><span class="line"><span class="keyword">FROM</span> employee e;</span><br></pre></td></tr></table></figure><p><strong>改写（快）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.emp_id, e.emp_name, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employee e</span><br><span class="line"><span class="keyword">JOIN</span> department d <span class="keyword">ON</span> d.dept_id <span class="operator">=</span> e.dept_id;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：把 <strong>每行一次索引回表</strong> 改成 <strong>一次 Hash Join</strong>。</p><hr><h4 id="2-相关聚合子查询-→-WITH-JOIN"><a href="#2-相关聚合子查询-→-WITH-JOIN" class="headerlink" title="2. 相关聚合子查询 → WITH + JOIN"></a>2. 相关聚合子查询 → WITH + JOIN</h4><p><strong>原写法（O(N²)）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> emp_id, salary,</span><br><span class="line">       salary <span class="operator">-</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> e.dept_id) <span class="keyword">AS</span> diff</span><br><span class="line"><span class="keyword">FROM</span> employee e;</span><br></pre></td></tr></table></figure><p><strong>改写（O(N)）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WITH</span> dept_avg <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> dept_id, <span class="built_in">AVG</span>(salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line">    <span class="keyword">FROM</span> employee</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> dept_id</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> e.emp_id, e.salary, e.salary <span class="operator">-</span> d.avg_salary <span class="keyword">AS</span> diff</span><br><span class="line"><span class="keyword">FROM</span> employee e</span><br><span class="line"><span class="keyword">JOIN</span> dept_avg d <span class="keyword">ON</span> d.dept_id <span class="operator">=</span> e.dept_id;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：聚合只算一次，复用结果。</p><hr><h4 id="3-IN-子查询-→-Semi-Join"><a href="#3-IN-子查询-→-Semi-Join" class="headerlink" title="3. IN (子查询) → Semi Join"></a>3. IN (子查询) → Semi Join</h4><p><strong>原写法</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> customer</span><br><span class="line"><span class="keyword">WHERE</span> customer_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> customer_id <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> order_amt <span class="operator">&gt;</span> <span class="number">10000</span>);</span><br></pre></td></tr></table></figure><p><strong>改写（Trino 自动做，也可显式写）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> c.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> customer c</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> orders o <span class="keyword">WHERE</span> o.customer_id <span class="operator">=</span> c.customer_id <span class="keyword">AND</span> o.order_amt <span class="operator">&gt;</span> <span class="number">10000</span>);</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：Semi Join 可在 <strong>Hash Build 阶段</strong>直接过滤，<strong>不放大右表</strong>。</p><hr><h4 id="4-子查询当“临时宽表”-→-WITH-展开后多次复用"><a href="#4-子查询当“临时宽表”-→-WITH-展开后多次复用" class="headerlink" title="4. 子查询当“临时宽表” → WITH 展开后多次复用"></a>4. 子查询当“临时宽表” → WITH 展开后多次复用</h4><p><strong>场景</strong>：同一张中间结果要被<strong>选两次</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WITH</span> high_val_customer <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> customer_id, <span class="built_in">SUM</span>(order_amt) <span class="keyword">AS</span> total</span><br><span class="line">    <span class="keyword">FROM</span> orders</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> customer_id</span><br><span class="line">    <span class="keyword">HAVING</span> <span class="built_in">SUM</span>(order_amt) <span class="operator">&gt;</span> <span class="number">100000</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> h.customer_id, h.total, a.address</span><br><span class="line"><span class="keyword">FROM</span> high_val_customer h</span><br><span class="line"><span class="keyword">JOIN</span> address a <span class="keyword">ON</span> a.customer_id <span class="operator">=</span> h.customer_id;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：只扫描一次 <code>orders</code>，<strong>CTE 结果默认物化</strong>（Trino 358+ 支持 <strong>CTE Reuse</strong>）。</p><hr><h4 id="5-多层嵌套子查询-→-一步-JOIN"><a href="#5-多层嵌套子查询-→-一步-JOIN" class="headerlink" title="5. 多层嵌套子查询 → 一步 JOIN"></a>5. 多层嵌套子查询 → 一步 JOIN</h4><p><strong>原写法</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> sku s</span><br><span class="line"><span class="keyword">WHERE</span> category_id <span class="operator">=</span> (<span class="keyword">SELECT</span> category_id <span class="keyword">FROM</span> category <span class="keyword">WHERE</span> category_name <span class="operator">=</span> <span class="string">&#x27;手机&#x27;</span>)</span><br><span class="line">  <span class="keyword">AND</span> brand_id    <span class="operator">=</span> (<span class="keyword">SELECT</span> brand_id   <span class="keyword">FROM</span> brand    <span class="keyword">WHERE</span> brand_name    <span class="operator">=</span> <span class="string">&#x27;华为&#x27;</span>);</span><br></pre></td></tr></table></figure><p><strong>改写</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> sku s</span><br><span class="line"><span class="keyword">JOIN</span> category c <span class="keyword">ON</span> c.category_id <span class="operator">=</span> s.category_id <span class="keyword">AND</span> c.category_name <span class="operator">=</span> <span class="string">&#x27;手机&#x27;</span></span><br><span class="line"><span class="keyword">JOIN</span> brand    b <span class="keyword">ON</span> b.brand_id    <span class="operator">=</span> s.brand_id    <span class="keyword">AND</span> b.brand_name    <span class="operator">=</span> <span class="string">&#x27;华为&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：两次相关子查询 → <strong>一次多表 Hash Join</strong>，且可以利用 <strong>复合索引</strong>。</p><hr><h4 id="6-子查询里再子查询-→-扁平化-JOIN-窗口函数"><a href="#6-子查询里再子查询-→-扁平化-JOIN-窗口函数" class="headerlink" title="6. 子查询里再子查询 → 扁平化 JOIN + 窗口函数"></a>6. 子查询里再子查询 → 扁平化 JOIN + 窗口函数</h4><p><strong>原写法</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="operator">*</span>, (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> orders o <span class="keyword">WHERE</span> o.customer_id <span class="operator">=</span> c.customer_id) <span class="keyword">AS</span> cnt</span><br><span class="line">    <span class="keyword">FROM</span> customer c</span><br><span class="line">) t</span><br><span class="line"><span class="keyword">WHERE</span> cnt <span class="operator">&gt;=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p><strong>改写</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> c.<span class="operator">*</span>, t.cnt</span><br><span class="line"><span class="keyword">FROM</span> customer c</span><br><span class="line"><span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> customer_id, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> cnt <span class="keyword">FROM</span> orders <span class="keyword">GROUP</span> <span class="keyword">BY</span> customer_id) t</span><br><span class="line">  <span class="keyword">ON</span> t.customer_id <span class="operator">=</span> c.customer_id</span><br><span class="line"><span class="keyword">WHERE</span> t.cnt <span class="operator">&gt;=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：把 <strong>相关子查询</strong> 变成 <strong>非相关聚合</strong>，再 <strong>Hash Join</strong>。</p><h3 id="三、1-张决策表，10-秒判断“能不能改”"><a href="#三、1-张决策表，10-秒判断“能不能改”" class="headerlink" title="三、1 张决策表，10 秒判断“能不能改”"></a>三、1 张决策表，10 秒判断“能不能改”</h3><table><thead><tr><th align="left">检查项</th><th align="left">子查询必须保留</th><th align="left">可改写 JOIN&#x2F;WITH</th></tr></thead><tbody><tr><td align="left">是否 EXISTS &#x2F; NOT EXISTS</td><td align="left">✅</td><td align="left">❌</td></tr><tr><td align="left">是否“聚合后回查明细”</td><td align="left">✅（或改窗口）</td><td align="left">❌</td></tr><tr><td align="left">是否“每组 Top-N”</td><td align="left">✅（需窗口）</td><td align="left">❌</td></tr><tr><td align="left">是否只拿聚合指标</td><td align="left">❌</td><td align="left">✅（先 WITH 聚合）</td></tr><tr><td align="left">是否相关子查询且<strong>无聚合</strong></td><td align="left">❌</td><td align="left">✅（直接 JOIN）</td></tr><tr><td align="left">是否 IN (子查询)</td><td align="left">❌</td><td align="left">✅（Semi Join）</td></tr></tbody></table><h3 id="四、小结口诀"><a href="#四、小结口诀" class="headerlink" title="四、小结口诀"></a>四、小结口诀</h3><blockquote><p><strong>“聚合回查、存在性、Top-N 必须子查；其余一律拉出来做 JOIN&#x2F;WITH。”</strong></p></blockquote><p>拿不准执行计划时，<strong>EXPLAIN (TYPE DISTRIBUTED)</strong> 看有没有 <strong>FilterProject+SemiJoin</strong> 或 <strong>HashBuilder</strong> 即可。</p><h3 id="高频黑话"><a href="#高频黑话" class="headerlink" title="高频黑话"></a>高频黑话</h3><ol><li>Hash Join（哈希连接）</li></ol><ul><li><p><strong>定义</strong>：把两表里<strong>连接键</strong>先算成哈希表，再一次性“对号入座”做等值匹配。</p></li><li><p><strong>类比</strong>：老师拿两张名单，先给 A 班每人发一个“学号-座位号”小纸条（建哈希表），再让 B 班学生按纸条找座位，<strong>O(1) 定位</strong>。</p></li><li><p><strong>Trino 计划里</strong>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">└─ InnerJoin[hash = (user_id)]  </span><br><span class="line">   ├─ Scan[user_id, …]  ←  Build 端（通常选小表）  </span><br><span class="line">   └─ Scan[user_id, …]  ←  Probe 端</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>Semi Join（半连接）</li></ol><ul><li><p><strong>定义</strong>：只关心<strong>左表记录是否在右表存在匹配</strong>，<strong>不返回右表列</strong>，也<strong>不去重左表</strong>。</p></li><li><p><strong>类比</strong>：安检门只看你是否在“黑名单”里，<strong>查到就拦下</strong>，不会把黑名单详细信息打印出来。</p></li><li><p><strong>Trino 自动把</strong> <code>EXISTS / IN (子查询)</code> <strong>改写成</strong> <code>SemiJoin</code>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">└─ SemiJoin[hash = (user_id)]  </span><br><span class="line">   ├─ Scan…  ← 左表（旅客）  </span><br><span class="line">   └─ Scan…  ← 右表（黑名单）</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li>HashBuilder（哈希建造者）</li></ol><ul><li><strong>定义</strong>：Trino 执行计划里的一个<strong>运行时算子</strong>，负责把 Build 端数据<strong>全部读进内存</strong>并建成哈希表。</li><li><strong>类比</strong>：安检人员先把黑名单<strong>一次性录入扫描枪</strong>（HashBuilder），后面每过来一个旅客就<strong>扫一下枪</strong>（Probe）。</li><li><strong>计划关键字</strong>：<code>HashBuilder[hash = (key)]</code> 常出现在 <code>SemiJoin</code> 或 <code>HashJoin</code> 的<strong>右分支</strong>。</li></ul><ol start="4"><li>FilterProject（过滤+投影）</li></ol><ul><li><p><strong>定义</strong>：Trino 里最轻量的算子，<strong>先过滤行</strong>（Filter）<strong>再裁剪列</strong>（Project），无 I&#x2F;O 开销。</p></li><li><p><strong>类比</strong>：超市收银台：先把你购物车里的<strong>过期商品扔掉</strong>（Filter），再把<strong>不需要的小票副联撕掉</strong>（Project）。</p></li><li><p><strong>计划示例</strong>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">└─ FilterProject[predicate = (status = &#x27;PAID&#x27;)]  </span><br><span class="line">   └─ Scan…</span><br></pre></td></tr></table></figure></li></ul><ol start="5"><li>宽表（Wide Table）</li></ol><ul><li><strong>定义</strong>：把<strong>多张维度表字段冗余到一张事实表</strong>里，减少 Join，牺牲存储换查询速度。</li><li><strong>类比</strong>：原本要点 5 份外卖（5 张表 Join），现在直接买一份“全家桶”（宽表），<strong>一口吃到所有菜</strong>。</li><li><strong>在 Trino 里</strong>：宽表通常以 <strong>Hive&#x2F;Iceberg Parquet&#x2F;ORC</strong> 形式存在，<strong>列式存储 + 分区</strong>，配合 <strong>列裁剪</strong> 扫描极快。</li></ul><ol start="6"><li>总结</li></ol><table><thead><tr><th>术语</th><th>口诀</th></tr></thead><tbody><tr><td>Hash Join</td><td>小表先变哈希，大表逐行探。</td></tr><tr><td>Semi Join</td><td>只问“有没有”，不拿右表数据。</td></tr><tr><td>HashBuilder</td><td>造哈希表的阶段，看右支。</td></tr><tr><td>FilterProject</td><td>先过滤行，再裁剪列。</td></tr><tr><td>宽表</td><td>把字段先拼好，省掉 Join。</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> SQL </tag>
            
            <tag> Trino </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL窗口函数速查表</title>
      <link href="/2025/09/23/SQL%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0%E9%80%9F%E6%9F%A5%E8%A1%A8/"/>
      <url>/2025/09/23/SQL%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0%E9%80%9F%E6%9F%A5%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="一、排名与分布分析类（核心用：给数据-“排位置、看占比”）"><a href="#一、排名与分布分析类（核心用：给数据-“排位置、看占比”）" class="headerlink" title="一、排名与分布分析类（核心用：给数据 “排位置、看占比”）"></a>一、排名与分布分析类（核心用：给数据 “排位置、看占比”）</h3><p>专门用于确定数据在整体 &#x2F; 分区中的相对位置、排名顺序或分布比例，是最常用的窗口函数类型。</p><ol><li><strong>ROW_NUMBER()</strong>：给分区内每行贴唯一连续序号，同值也不重复（如 “给每天的订单按时间排 1、2、3 号”）。</li><li><strong>RANK()</strong>：按排序值排名，同值同名次，后续名次跳号（如 “成绩并列第 1，下一名直接第 3”）。</li><li><strong>DENSE_RANK()</strong>：按排序值排名，同值同名次，后续名次不跳号（如 “成绩并列第 1，下一名仍第 2”）。</li><li><strong>PERCENT_RANK()</strong>：返回相对百分位排名（公式：(名次 - 1)&#x2F;(总行数 - 1)），范围 0~1，体现 “比多少数据好 &#x2F; 差”。</li><li><strong>CUME_DIST()</strong>：返回 “≤当前值的行数 &#x2F; 总行数”，范围 0~1，体现 “当前值及以下数据的占比”。</li><li><strong>NTILE(n)</strong>：将分区数据均匀分成 n 个 “桶”，返回每行所属桶号（如 “把员工绩效分成 3 组，标 1&#x2F;2&#x2F;3 桶”）。</li></ol><h3 id="二、相邻数据取值类（核心用：“跨行取数”，比当前行前-后-特定位置的值）"><a href="#二、相邻数据取值类（核心用：“跨行取数”，比当前行前-后-特定位置的值）" class="headerlink" title="二、相邻数据取值类（核心用：“跨行取数”，比当前行前 &#x2F; 后 &#x2F; 特定位置的值）"></a>二、相邻数据取值类（核心用：“跨行取数”，比当前行前 &#x2F; 后 &#x2F; 特定位置的值）</h3><p>专门用于获取分区内 “非当前行” 的数据，无需手动关联表，直接跨行提取目标位置的值。</p><ol><li><strong>LAG(expr [,offset [,default]])</strong>：取当前行 “往上数 offset 行” 的 expr 值，无对应行返回 default（如 “取前 1 天的销售额，无则返回 0”）。</li><li><strong>LEAD(expr [,offset [,default]])</strong>：取当前行 “往下数 offset 行” 的 expr 值，无对应行返回 default（如 “取后 1 天的销售额，无则返回 0”）。</li><li><strong>FIRST_VALUE(expr)</strong>：取分区内按排序规则的 “第一行” expr 值（如 “取店铺本月第一天的销售额”）。</li><li><strong>LAST_VALUE(expr)</strong>：取分区内 “到当前行为止” 的最后一行 expr 值（需注意窗口框架，默认到当前行，非全分区）。</li><li><strong>NTH_VALUE(expr, n)</strong>：取分区内排序后的 “第 n 行” expr 值，无第 n 行则返回 NULL（如 “取店铺本月第 2 天的销售额”）。</li></ol><h3 id="三、窗口聚合计算类（核心用：“累计-整体统计”，在分区内做聚合，不压缩行数）"><a href="#三、窗口聚合计算类（核心用：“累计-整体统计”，在分区内做聚合，不压缩行数）" class="headerlink" title="三、窗口聚合计算类（核心用：“累计 &#x2F; 整体统计”，在分区内做聚合，不压缩行数）"></a>三、窗口聚合计算类（核心用：“累计 &#x2F; 整体统计”，在分区内做聚合，不压缩行数）</h3><p>将普通聚合函数（SUM&#x2F;AVG 等）改造为窗口模式，不合并行，每行都能显示聚合结果（累计或全分区）。</p><h4 id="1-基础累计-局部聚合（支持按顺序累计，默认-“从第一行到当前行”）"><a href="#1-基础累计-局部聚合（支持按顺序累计，默认-“从第一行到当前行”）" class="headerlink" title="1. 基础累计 &#x2F; 局部聚合（支持按顺序累计，默认 “从第一行到当前行”）"></a>1. 基础累计 &#x2F; 局部聚合（支持按顺序累计，默认 “从第一行到当前行”）</h4><ul><li><strong>SUM(expr)</strong>：计算分区内到当前行的 expr 累计和（如 “按日期累计店铺销售额”）。</li><li><strong>AVG(expr)</strong>：计算分区内到当前行的 expr 累计平均值（如 “按日期累计店铺日均销售额”）。</li><li><strong>COUNT(expr)</strong>：统计分区内到当前行的非 NULL 行数（如 “按日期累计店铺营业天数”）。</li><li><strong>MIN(expr)</strong>：取分区内到当前行的 expr 最小值（如 “按日期记录店铺截至当天的最低销售额”）。</li><li><strong>MAX(expr)</strong>：取分区内到当前行的 expr 最大值（如 “按日期记录店铺截至当天的最高销售额”）。</li></ul><h4 id="2-全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）"><a href="#2-全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）" class="headerlink" title="2. 全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）"></a>2. 全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）</h4><ul><li><strong>STDDEV_POP(expr)</strong>：计算分区内 expr 的 “总体标准差”（用全部数据计算，分母为总行数）。</li><li><strong>STDDEV_SAMP(expr)</strong>：计算分区内 expr 的 “样本标准差”（用样本数据计算，分母为总行数 - 1）。</li><li><strong>VAR_POP(expr)</strong>：计算分区内 expr 的 “总体方差”（总体标准差的平方）。</li><li><strong>VAR_SAMP(expr)</strong>：计算分区内 expr 的 “样本方差”（样本标准差的平方）。</li></ul><h3 id="四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）"><a href="#四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）" class="headerlink" title="四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）"></a>四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）</h3><p>专门用于分析分区内两个变量（如 “销售额” 与 “日期”、“广告投入” 与 “销量”）的关联程度或回归规律。</p><ol><li><p><strong>COVAR_POP(y, x)</strong>：计算 y 和 x 的 “总体协方差”，体现两变量的整体联动方向（正 &#x2F; 负相关趋势）。</p></li><li><p><strong>COVAR_SAMP(y, x)</strong>：计算 y 和 x 的 “样本协方差”，基于样本数据体现两变量的联动方向。</p></li><li><p><strong>CORR(y, x)</strong>：计算 y 和 x 的 “皮尔逊相关系数”，范围 - 1~1，直接体现关联强度（1 &#x3D; 完全正相关，-1 &#x3D; 完全负相关）。</p></li><li><p>REGR_* 系列</p><p>：一次线性回归专用函数，如：</p><ul><li><strong>REGR_SLOPE(y, x)</strong>：计算 y 对 x 的回归斜率（如 “销售额随日期变化的每日增长幅度”）。</li><li><strong>REGR_INTERCEPT(y, x)</strong>：计算回归截距（如 “回归公式的初始值”）。</li><li><strong>REGR_R2(y, x)</strong>：计算决定系数 R²，体现回归模型的拟合优度（越接近 1 拟合越好）。</li><li><strong>REGR_COUNT(y, x)</strong>：统计 y 和 x 均非空的行数（回归分析的有效数据量）</li></ul></li></ol><h3 id="五、窗口函数常见错误与避坑指南"><a href="#五、窗口函数常见错误与避坑指南" class="headerlink" title="五、窗口函数常见错误与避坑指南"></a>五、窗口函数常见错误与避坑指南</h3><p>窗口函数功能强大但细节复杂，实际使用中容易因理解框架范围、分区逻辑或排序规则导致结果不符合预期。以下是最常见的错误类型及解决方案：</p><h4 id="1-LAST-VALUE-结果不符合预期（最容易踩的坑）"><a href="#1-LAST-VALUE-结果不符合预期（最容易踩的坑）" class="headerlink" title="1.LAST_VALUE() 结果不符合预期（最容易踩的坑）"></a>1.<code>LAST_VALUE()</code> 结果不符合预期（最容易踩的坑）</h4><p><strong>错误表现：</strong></p><p>使用 <code>LAST_VALUE()</code> 时，返回的不是分区内最后一行的值，而是当前行或靠前位置的值。</p><p><strong>错误原因：</strong></p><p>窗口函数默认框架是 <code>RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW</code>（从第一行到当前行），而非全分区。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想取全分区最后一行，却返回当前行及之前的最后一行</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">LAST_VALUE</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> last_sales</span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><p><strong>解决方案：</strong></p><p>显式指定全分区框架 <code>ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING</code>：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">LAST_VALUE</span>(sales) <span class="keyword">OVER</span> (</span><br><span class="line">    <span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop </span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span></span><br><span class="line">    <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">  ) <span class="keyword">AS</span> last_sales  <span class="comment">-- 正确返回分区内最后一行</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="二、遗漏-PARTITION-BY-导致全局计算"><a href="#二、遗漏-PARTITION-BY-导致全局计算" class="headerlink" title="二、遗漏 PARTITION BY 导致全局计算"></a>二、遗漏 <code>PARTITION BY</code> 导致全局计算</h2><h3 id="错误表现："><a href="#错误表现：" class="headerlink" title="错误表现："></a>错误表现：</h3><p>希望按分组（如店铺）单独计算窗口函数，结果却变成了所有数据的全局计算。</p><h3 id="错误原因："><a href="#错误原因：" class="headerlink" title="错误原因："></a>错误原因：</h3><p>忘记添加 <code>PARTITION BY</code>，函数默认对全表数据进行计算。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想按店铺计算累计销售额，却计算了所有店铺的总和</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> running_sum  <span class="comment">-- 缺少 PARTITION BY shop</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h3><p>明确添加 <code>PARTITION BY</code> 定义分组：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> running_sum  <span class="comment">-- 正确按店铺分组</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="三、ORDER-BY-排序方向错误影响结果"><a href="#三、ORDER-BY-排序方向错误影响结果" class="headerlink" title="三、ORDER BY 排序方向错误影响结果"></a>三、<code>ORDER BY</code> 排序方向错误影响结果</h2><h3 id="错误表现：-1"><a href="#错误表现：-1" class="headerlink" title="错误表现："></a>错误表现：</h3><p><code>PERCENT_RANK()</code>&#x2F;<code>CUME_DIST()</code> 等排名函数的值与预期相反（如最大值的百分比反而大）。</p><h3 id="错误原因：-1"><a href="#错误原因：-1" class="headerlink" title="错误原因："></a>错误原因：</h3><p>排序方向与分析目标不符。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想让销售额越高，PERCENT_RANK() 越小，却用了升序</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, sales,</span><br><span class="line">  <span class="built_in">PERCENT_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">ASC</span>) <span class="keyword">AS</span> pct_rnk  <span class="comment">-- 升序导致最大值的百分比为1</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-1"><a href="#解决方案：-1" class="headerlink" title="解决方案："></a>解决方案：</h3><p>根据业务目标选择排序方向（通常分析 “头部数据” 用 <code>DESC</code>）：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, sales,</span><br><span class="line">  <span class="built_in">PERCENT_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">DESC</span>) <span class="keyword">AS</span> pct_rnk  <span class="comment">-- 降序让最大值的百分比为0</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="四、RANK-与-DENSE-RANK-混淆导致排名错误"><a href="#四、RANK-与-DENSE-RANK-混淆导致排名错误" class="headerlink" title="四、RANK() 与 DENSE_RANK() 混淆导致排名错误"></a>四、<code>RANK()</code> 与 <code>DENSE_RANK()</code> 混淆导致排名错误</h2><h3 id="错误表现：-2"><a href="#错误表现：-2" class="headerlink" title="错误表现："></a>错误表现：</h3><p>需要连续排名时用了 <code>RANK()</code>（出现跳号），或需要保留名次空位时用了 <code>DENSE_RANK()</code>（连续编号）。</p><h3 id="错误示例："><a href="#错误示例：" class="headerlink" title="错误示例："></a>错误示例：</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 若想统计“第2名”包含并列情况但不跳号，却用了 RANK()</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  sales,</span><br><span class="line">  <span class="built_in">RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">DESC</span>) <span class="keyword">AS</span> rnk  <span class="comment">-- 若前2名并列，下一名会是3（跳号）</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-2"><a href="#解决方案：-2" class="headerlink" title="解决方案："></a>解决方案：</h3><ul><li>需跳号（如比赛排名，允许第 1 名并列后直接第 3 名）→ 用 <code>RANK()</code></li><li>需连续（如筛选前 3 名，包含并列且不跳号）→ 用 <code>DENSE_RANK()</code></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  sales,</span><br><span class="line">  <span class="built_in">DENSE_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">DESC</span>) <span class="keyword">AS</span> dense_rnk  <span class="comment">-- 并列第1后，下一名是2（不跳号）</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="五、窗口聚合函数的-“累计”-与-“全量”-混淆"><a href="#五、窗口聚合函数的-“累计”-与-“全量”-混淆" class="headerlink" title="五、窗口聚合函数的 “累计” 与 “全量” 混淆"></a>五、窗口聚合函数的 “累计” 与 “全量” 混淆</h2><h3 id="错误表现：-3"><a href="#错误表现：-3" class="headerlink" title="错误表现："></a>错误表现：</h3><p>使用 <code>SUM()</code>&#x2F;<code>AVG()</code> 时，希望得到全分区的总量，却返回了累计值。</p><h3 id="错误原因：-2"><a href="#错误原因：-2" class="headerlink" title="错误原因："></a>错误原因：</h3><p><code>ORDER BY</code> 会触发 “累计计算”（从第一行到当前行），省略 <code>ORDER BY</code> 则返回全分区聚合结果。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想获取店铺总销售额，却因加了 ORDER BY 变成累计值</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> total_sales  <span class="comment">-- 累计值，非总量</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-3"><a href="#解决方案：-3" class="headerlink" title="解决方案："></a>解决方案：</h3><ul><li>需累计值 → 保留 <code>ORDER BY</code>（默认从第一行到当前行）</li><li>需全分区总量 → 省略 <code>ORDER BY</code></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop) <span class="keyword">AS</span> total_sales  <span class="comment">-- 正确返回店铺总销售额</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="六、LAG-LEAD-越界处理缺失"><a href="#六、LAG-LEAD-越界处理缺失" class="headerlink" title="六、LAG()&#x2F;LEAD() 越界处理缺失"></a>六、<code>LAG()</code>&#x2F;<code>LEAD()</code> 越界处理缺失</h2><h3 id="错误表现：-4"><a href="#错误表现：-4" class="headerlink" title="错误表现："></a>错误表现：</h3><p>第一行用 <code>LAG()</code> 或最后一行用 <code>LEAD()</code> 时，返回 <code>NULL</code> 导致后续计算错误。</p><h3 id="错误原因：-3"><a href="#错误原因：-3" class="headerlink" title="错误原因："></a>错误原因：</h3><p>未指定越界时的默认值，函数默认返回 <code>NULL</code>。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：第一行的 LAG() 返回 NULL，可能导致计算失败</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  sales <span class="operator">-</span> <span class="built_in">LAG</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> diff  <span class="comment">-- 第一行 diff 为 NULL</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-4"><a href="#解决方案：-4" class="headerlink" title="解决方案："></a>解决方案：</h3><p>显式指定 <code>default</code> 参数（如 0 或其他合理值）：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  sales <span class="operator">-</span> <span class="built_in">LAG</span>(sales, <span class="number">1</span>, <span class="number">0</span>) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> diff  <span class="comment">-- 越界返回0</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="七、NTILE-n-数据分配不均时的误解"><a href="#七、NTILE-n-数据分配不均时的误解" class="headerlink" title="七、NTILE(n) 数据分配不均时的误解"></a>七、<code>NTILE(n)</code> 数据分配不均时的误解</h2><h3 id="错误表现：-5"><a href="#错误表现：-5" class="headerlink" title="错误表现："></a>错误表现：</h3><p>期望 <code>NTILE(n)</code> 严格均分数据，实际某些桶的行数多 1（如 7 行数据分 3 桶，结果为 3、2、2）。</p><h3 id="错误原因：-4"><a href="#错误原因：-4" class="headerlink" title="错误原因："></a>错误原因：</h3><p><code>NTILE(n)</code> 会优先向前几个桶分配多余的行（总行数不能被 n 整除时），保证分配尽可能均匀而非绝对均分。</p><h3 id="解决方案：-5"><a href="#解决方案：-5" class="headerlink" title="解决方案："></a>解决方案：</h3><ul><li>接受合理偏差（函数设计如此）</li><li>若需严格均分，可先过滤数据使总行数为 n 的倍数，或自定义逻辑：</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 替代方案：用 ROW_NUMBER() 手动分配，确保前m个桶多1行</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  <span class="operator">*</span>,</span><br><span class="line">  (<span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales) <span class="operator">-</span> <span class="number">1</span>) <span class="operator">%</span> <span class="number">3</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">AS</span> custom_ntile</span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="避坑总结：3-个核心检查点"><a href="#避坑总结：3-个核心检查点" class="headerlink" title="避坑总结：3 个核心检查点"></a>避坑总结：3 个核心检查点</h2><ol><li><strong>框架范围</strong>：<code>LAST_VALUE()</code> 必须显式指定全分区框架，其他函数注意默认框架是否符合需求。</li><li><strong>分区与排序</strong>：是否遗漏 <code>PARTITION BY</code>（导致全局计算），<code>ORDER BY</code> 方向是否与业务目标一致。</li><li><strong>边界处理</strong>：<code>LAG()</code>&#x2F;<code>LEAD()</code> 显式指定默认值，<code>RANK()</code> 与 <code>DENSE_RANK()</code> 根据排名规则选择。</li></ol>]]></content>
      
      
      <categories>
          
          <category> 技术速查 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown常用</title>
      <link href="/2025/04/12/Markdown%E5%B8%B8%E7%94%A8/"/>
      <url>/2025/04/12/Markdown%E5%B8%B8%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Markdown中使用表格</p><p>Markdown中使用表格</p><p>博客文章 Front-matter的Markdown使用</p><p>如果有文章（例如：转载文章）不需要显示版权，可以在文章 Front-matter 单独设置</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">copyright:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>从Butterfly3.0.0开始，支持对单独文章设置版权信息，可以在文章 Front-matter 单独设置</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">copyright<span class="emphasis">_author: xxxx</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href: https://xxxxxx.com</span></span><br><span class="line"><span class="emphasis">copyright_</span>url: https://xxxxxx.com</span><br><span class="line">copyright<span class="emphasis">_info: 此文章版权归 xxxxx 所有，如有转载，请注明来自原作者</span></span><br></pre></td></tr></table></figure><h2 id="Markdown中使用Mermaid画图"><a href="#Markdown中使用Mermaid画图" class="headerlink" title="Markdown中使用Mermaid画图"></a>Markdown中使用Mermaid画图</h2><p>可以绘制流程图、序列图、饼图、甘特图和类图等图形。</p><h3 id="Mermaid代码的语法"><a href="#Mermaid代码的语法" class="headerlink" title="Mermaid代码的语法"></a><strong>Mermaid代码的语法</strong></h3><p>Mermaid代码通常放在一个代码块中，代码块的语法如下：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="code">```mermaid</span></span><br><span class="line"><span class="code">[Mermaid代码]</span></span><br><span class="line"><span class="code">```</span></span><br></pre></td></tr></table></figure><p>使用方法：在 Markdown 中，敲击三个后写下mermaid回车即可。</p><p>展示如下图：</p><p><img src="/./../Markdown%E5%B8%B8%E7%94%A8/image-20250904101750820.png" alt="展示图"></p><h3 id="流程图graph-TD"><a href="#流程图graph-TD" class="headerlink" title="流程图graph TD"></a>流程图graph TD</h3><p>流程图用于展示流程步骤和关系，支持多种布局方向。</p><p><strong>语法说明</strong>：</p><ul><li><code>graph [方向]</code>：定义图表方向（<code>LR</code> 左右，<code>TB</code> 上下，<code>RL</code> 右左，<code>BT</code> 下上）</li><li>节点表示：<code>id[文本]</code>（矩形）、<code>id(文本)</code>（圆角矩形）、<code>id&#123;文本&#125;</code>（菱形）等</li><li>连接线：<code>--&gt;</code>（实线箭头）、<code>---</code>（实线无箭头）、<code>-.-&gt;</code>（虚线箭头）等，可添加标签（<code>--&gt;|标签|</code>）</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">graph TD    A[开始] --&gt; B&#123;是或否&#125;    B --&gt;|是| C[执行任务]    B --&gt;|否| D[结束]    C --&gt; D</code></pre><h3 id="序列图sequenceDiagram"><a href="#序列图sequenceDiagram" class="headerlink" title="序列图sequenceDiagram"></a>序列图sequenceDiagram</h3><p>展示对象之间的交互时序，常用于系统交互流程。</p><p><strong>语法说明</strong>：</p><ul><li><code>participant 参与者</code>：定义参与对象</li><li>消息传递：<code>A-&gt;B: 消息内容</code>（实线箭头）、<code>A--&gt;B: 消息内容</code>（虚线箭头，如返回）</li><li>激活状态：<code>activate A</code>（激活对象，显示生命线）、<code>deactivate A</code>（取消激活）</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">sequenceDiagram    participant A    participant B    A-&gt;&gt;B: 发送消息    B-&gt;&gt;A: 回复消息</code></pre><h3 id="饼图Pie"><a href="#饼图Pie" class="headerlink" title="饼图Pie"></a>饼图Pie</h3><p>展示数据占比关系。</p><p><strong>语法说明</strong>：</p><ul><li><code>pie</code> 开头</li><li><code>title 标题</code></li><li><code>标签: 数值</code> 定义各部分</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">pie    title 网站用户来源    &quot;直接访问&quot; : 30    &quot;搜索引擎&quot; : 50    &quot;外部链接&quot; : 15    &quot;其他&quot; : 5</code></pre><h3 id="甘特图gantt"><a href="#甘特图gantt" class="headerlink" title="甘特图gantt"></a>甘特图gantt</h3><p>用于项目进度规划，展示任务时间安排。</p><p><strong>语法说明</strong>：</p><ul><li><code>dateFormat</code>：日期格式（如 <code>YYYY-MM-DD</code>）</li><li><code>section 模块名</code>：分组任务</li><li>任务格式：<code>任务名 : 状态, 任务ID, 开始日期, 结束日期</code>（状态可选 <code>done</code>&#x2F;<code>active</code> 等）</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">gantt    dateFormat  YYYY-MM-DD    section 现有任务    已完成任务           :done,    des1, 2025-01-06,2025-01-08    进行中任务           :active,  des2, 2025-01-09, 3d    待办任务             :         des3, after des2, 5d    section 新增任务    新任务1              :         des4, after des3, 5d    新任务2              :         des5, after des4, 5d</code></pre><h1 id="使用-Markdown-编写文档用什么软件"><a href="#使用-Markdown-编写文档用什么软件" class="headerlink" title="使用 Markdown 编写文档用什么软件"></a>使用 Markdown 编写文档用什么软件</h1><ol><li><p>Typora<br> 核心优势：所见即所得（WYSIWYG）界面，实时渲染 Markdown 语法，支持表格、代码块、数学公式（LaTeX）、任务列表等。<br> 导出能力：直接导出为 PDF、HTML、Word、ePub 等格式，适合生成报告或电子书。<br> 价格：买断制 89 元人民币，支持 Windows&#x2F;macOS&#x2F;Linux。<br> 适用场景：个人写作、技术文档、学术论文。</p></li><li><p>VS Code + 插件<br> 核心优势：代码编辑器的强大扩展性，通过插件支持 Markdown 语法高亮、实时预览、TOC 生成。<br> 插件：<br> Markdown All in One：快捷键和格式转换工具。<br> Markdown PDF：一键导出 PDF（需安装 LaTeX 环境）。<br> 适用场景：开发者、技术文档撰写者。<br> 缺点：不能通过剪切板粘图，需要手动上传图片。这是我特别常用的一个功能，所以需要一个更好的软件。</p></li><li><p>MarkText<br> 核心优势：开源免费，支持实时预览、多主题切换（如 Material Dark）、三种编辑模式（源码 &#x2F; 打字机 &#x2F; 专注）。<br> 特色功能：直接粘贴图片到文档，支持数学公式（KaTeX）和 Mermaid 图表。<br> 导出能力：导出 HTML 和 PDF，适合轻量级文档。<br> 适用场景：学生、自由职业者、开源项目贡献者。<br> 缺点：现在好像没人维护了，最新版本还是v0.17.1。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> Typora </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github常用</title>
      <link href="/2025/04/11/Github%E5%B8%B8%E7%94%A8/"/>
      <url>/2025/04/11/Github%E5%B8%B8%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<hr><h1 id="Git命令"><a href="#Git命令" class="headerlink" title="Git命令"></a>Git命令</h1><h2 id="专业名词（黑话）"><a href="#专业名词（黑话）" class="headerlink" title="专业名词（黑话）"></a>专业名词（黑话）</h2><ol><li><p><strong>Git 工作流</strong></p><pre><code class="highlight mermaid">graph LR    A[关联工作区] -- git add --&gt; B[暂存区]    B -- git commit --&gt; C[本地仓库]    C -- git push --&gt; E[远程仓库]</code></pre></li><li><p><strong>工作区文件</strong>：本地文件夹的文件。<br>在 Git 版本控制中，<strong>工作区文件</strong>指的是你在本地电脑上直接编辑、修改的项目文件，也就是你能在操作系统的文件夹里看到的那些文件（比如文档、代码、图片等）。</p><p>简单说，工作区（Working Directory）就是你克隆或创建项目后，在本地电脑上存放项目文件的那个文件夹，而这个文件夹里的所有文件（包括子文件夹里的文件）都可以称为 “工作区文件”。</p></li><li><p><strong>暂存区：</strong><br>在 Git 版本控制中，<strong>暂存区（Staging Area）</strong> 是一个介于「工作区」和「本地仓库」之间的临时存储区域，也被称为「索引（Index）」。它的核心作用是：<strong>临时存放你想要提交到本地仓库的修改</strong>，让你可以先 “预览” 哪些修改会被纳入下一次提交，再统一提交到仓库</p><p><strong>为什么需要暂存区？</strong></p><p>想象一个场景：你同时修改了项目中的 3 个文件（A、B、C），但其中只有 A 和 B 的修改是完整的，C 的修改还没完成。这时候你想先提交 A 和 B 的修改，而暂时忽略 C—— 暂存区就是用来解决这个问题的：你可以先把 A 和 B 放入暂存区，然后只提交暂存区的内容，C 仍然留在工作区继续修改。</p></li><li><p><strong>工作区文件的状态：</strong></p><ol><li><strong>未跟踪（Untracked）</strong>：新创建的文件，还没被 Git 记录（Git 不知道它的存在）；</li><li>已跟踪（Tracked）：已被 Git 记录的文件，包括：<ul><li>未修改（Unmodified）：和 Git 最后一次记录的版本一致；</li><li>已修改（Modified）：被编辑过，但还没存入暂存区；</li><li>已暂存（Staged）：修改后被添加到暂存区（通过 <code>git add</code> 命令），等待提交到本地仓库。</li></ul></li></ol></li><li><p>**子模块：**嵌套仓库<br>在 Git 中，<strong>子模块（Submodule）</strong> 是一种特殊功能，用于在一个 Git 仓库（称为 “主项目”）中嵌入另一个独立的 Git 仓库（称为 “子模块项目”），同时保持两个仓库的独立性。</p></li><li><p>done</p></li></ol><h2 id="Git-版本控制工具中常用的命令"><a href="#Git-版本控制工具中常用的命令" class="headerlink" title="Git 版本控制工具中常用的命令"></a>Git 版本控制工具中常用的命令</h2><h3 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a><code>git clone</code></h3><p>：“下载” 远程项目到本地；</p><p><strong>作用</strong>：从远程仓库（比如 GitHub、GitLab 等）复制一个完整的项目到本地电脑。<br>它会将远程仓库的所有文件、分支、提交历史等完整下载到本地，并自动创建一个与远程仓库同名的文件夹，同时初始化本地 Git 仓库，关联到远程仓库。</p><p><strong>示例</strong>：</p><p>克隆远程仓库到当前目录（生成与仓库同名的文件夹）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 示例：克隆 GitHub 上的仓库</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/Kkkika/Kkkika.github.io.git</span><br></pre></td></tr></table></figure><ul><li><p><strong>自定义文件夹名称</strong>（不使用仓库默认名称）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;远程仓库地址&gt; &lt;本地目录名&gt;</span><br><span class="line"><span class="comment"># 示例：克隆到名为 &quot;my-project&quot; 的文件夹</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/Kkkika/Kkkika.github.io.git my-project</span><br></pre></td></tr></table></figure></li><li><p><strong>只克隆指定分支</strong>（默认克隆所有分支，此参数可节省时间）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b &lt;分支名&gt; --single-branch &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 示例：只克隆远程的 dev 分支</span></span><br><span class="line">git <span class="built_in">clone</span> -b dev --single-branch https://github.com/username/repo-name.git</span><br></pre></td></tr></table></figure></li><li><p><strong>浅克隆</strong>（只获取最近的 N 次提交，适合大型仓库，加快克隆速度）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth &lt;次数&gt; &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 示例：只获取最近 10 次提交</span></span><br><span class="line">git <span class="built_in">clone</span> --depth 10 https://github.com/username/repo-name.git</span><br></pre></td></tr></table></figure></li><li><p><strong>克隆时包含子模块</strong>（如果项目包含子模块，需用此参数才能完整克隆）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 若已克隆但子模块未下载，可补拉：git submodule update --init --recursive</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a><code>git branch</code></h3><p>：“管理” 本地分支（查看、创建、删除）；</p><p><strong>作用</strong>：用于管理本地分支（分支可以理解为项目的 “并行开发线”，方便多人协作或功能隔离）。</p><p>常用用法：</p><h4 id="1-查看分支"><a href="#1-查看分支" class="headerlink" title="1. 查看分支"></a>1. 查看分支</h4><ul><li><p>不带参数：查看本地所有分支（当前分支前有 <code>*</code> 标记）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure></li><li><p>查看本地 + 远程所有分支（远程分支以 <code>remotes/origin/</code> 开头）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure></li><li><p>查看远程分支（仅远程，不包含本地）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -r</span><br></pre></td></tr></table></figure></li><li><p>查看分支关联的远程分支（多人协作时常用，确认本地分支对应哪个远程分支）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -vv</span><br><span class="line"><span class="comment"># 输出示例：* main  a1b2c3d [origin/main] 提交说明</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="2-创建分支"><a href="#2-创建分支" class="headerlink" title="2. 创建分支"></a>2. 创建分支</h4><ul><li><p>基于当前分支创建新分支（创建后仍在当前分支，需手动切换）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch &lt;新分支名&gt;</span><br><span class="line"><span class="comment"># 示例：基于当前分支创建 feature/payment 分支</span></span><br><span class="line">git branch feature/payment</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-删除分支"><a href="#3-删除分支" class="headerlink" title="3. 删除分支"></a>3. 删除分支</h4><ul><li><p>删除本地分支（需确保分支已合并，否则会提示错误）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -d &lt;分支名&gt;</span><br><span class="line"><span class="comment"># 示例：删除已合并的 old-branch</span></span><br><span class="line">git branch -d old-branch</span><br></pre></td></tr></table></figure></li><li><p>强制删除未合并的分支（危险！未合并的修改会丢失）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -D &lt;分支名&gt;</span><br><span class="line"><span class="comment"># 示例：强制删除未合并的 test-branch</span></span><br><span class="line">git branch -D test-branch</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-重命名分支"><a href="#4-重命名分支" class="headerlink" title="4. 重命名分支"></a>4. 重命名分支</h4><ul><li><p>重命名当前所在分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -m &lt;新分支名&gt;</span><br><span class="line"><span class="comment"># 示例：将当前分支重命名为 bugfix/login</span></span><br><span class="line">git branch -m bugfix/login</span><br></pre></td></tr></table></figure></li><li><p>重命名指定分支（无需切换到该分支）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -m &lt;旧分支名&gt; &lt;新分支名&gt;</span><br><span class="line"><span class="comment"># 示例：将 feature/old 重命名为 feature/new</span></span><br><span class="line">git branch -m feature/old feature/new</span><br></pre></td></tr></table></figure></li><li><p>带分支名：创建新分支（但不会自动切换到新分支）。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch feature-login  <span class="comment"># 创建名为 feature-login 的新分支</span></span><br></pre></td></tr></table></figure></li><li><p><code>-d</code> 参数：删除指定分支（删除前需确保该分支的修改已合并，否则用 <code>-D</code> 强制删除）。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -d old-branch  <span class="comment"># 删除 old-branch 分支</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a><code>git checkout</code></h3><p>：“切换” 分支或 “恢复” 文件。</p><p><strong>作用</strong>：主要用于 “切换分支” 或 “恢复工作区文件”（Git 2.23+ 后推荐用 <code>git switch</code> 切换分支，功能更清晰，但 <code>checkout</code> 仍广泛使用）。</p><p>常用用法：</p><ul><li><p>切换到已存在的分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout dev  <span class="comment"># 切换到 dev 分支</span></span><br></pre></td></tr></table></figure></li><li><p>创建并立即切换到新分支（相当于 <code>git branch 新分支名</code> + <code>git checkout 新分支名</code> 的简写）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b dev  <span class="comment"># 创建并切换到 dev 分支</span></span><br></pre></td></tr></table></figure></li><li><p>恢复工作区的某个文件到最近一次提交的状态（丢弃本地修改）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -- README.md  <span class="comment"># 把 README.md 恢复到最近提交的版本</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="GitHub中clone指定Commits"><a href="#GitHub中clone指定Commits" class="headerlink" title="GitHub中clone指定Commits"></a>GitHub中clone指定Commits</h1><p>（Github中怎么找回历史版本；GitHub历史版本恢复指南；GitHub中下载指定版本；Github查看项目的历史版本，并实现版本的回滚）</p><blockquote><p>假设：我想下载<a href="https://github.com/Kkkika/Kkkika.github.io">Kkkika&#x2F;Kkkika.github.io</a>仓库master分支的第一次提交</p></blockquote><p>首先进入仓库后，点击【Commits】<strong>获取历史版本的提交哈希值</strong></p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250912102842935.png" alt="image-20250912102842935"></p><p>时间拉到最前，找到第一次提交，点击【复制】按钮</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250912103044962.png" alt="image-20250912103044962"></p><h3 id="克隆后创建新分支"><a href="#克隆后创建新分支" class="headerlink" title="克隆后创建新分支"></a>克隆后创建新分支</h3><p>如果你想在特定提交的基础上进行一些修改或实验，最好创建一个新分支。</p><p>新建一个文件夹来存放代码，注意路径不要有中文：</p><p>C:\Code\githubclone</p><p>然后打开cmd</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\Code\githubclone</span><br></pre></td></tr></table></figure><ol><li><p><strong>克隆仓库并进入目录</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Kkkika/Kkkika.github.io.git</span><br><span class="line"><span class="built_in">cd</span> Kkkika.github.io</span><br></pre></td></tr></table></figure></li><li><p><strong>基于特定提交创建并切换到一个新分支</strong>：这可以避免“分离头指针”状态。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch my-new-branch cc09550ac7db24e987f6f2130da2ee1564191b12</span><br><span class="line">git checkout my-new-branch</span><br></pre></td></tr></table></figure><p>或者更简洁地用一条命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b my-new-branch cc09550ac7db24e987f6f2130da2ee1564191b12</span><br></pre></td></tr></table></figure><p>这样，你就在一个名为 <code>my-new-branch</code> 的分支上工作，这个分支的起点就是你指定的那个提交。</p></li></ol><h3 id="浅克隆（如果只想快速获取）"><a href="#浅克隆（如果只想快速获取）" class="headerlink" title="浅克隆（如果只想快速获取）"></a>浅克隆（如果只想快速获取）</h3><p>如果你只关心最新的一部分提交，或者仓库很大想加快克隆速度，可以考虑浅克隆。</p><ol><li><p><strong>浅克隆仓库</strong>（例如只克隆最近 10 个提交）：</p><p>bash</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth 10 https://github.com/Kkkika/Kkkika.github.io.git</span><br><span class="line"><span class="built_in">cd</span> Kkkika.github.io</span><br></pre></td></tr></table></figure><p><code>--depth 10</code> 参数表示只克隆最近10次提交的历史。你需要确保你想要的提交（<code>cc09550...</code>）在这最近的10次提交之内。</p></li><li><p><strong>然后切换到你想要的提交</strong>：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout cc09550ac7db24e987f6f2130da2ee1564191b12</span><br></pre></td></tr></table></figure></li></ol><h3 id="重要提示"><a href="#重要提示" class="headerlink" title="重要提示"></a>重要提示</h3><ul><li><strong>关于 <code>-b</code> 参数</strong>：<code>-b</code> 在 <code>git clone</code> 中用于指定分支或标签，不能直接用于提交哈希5。</li><li><strong>“分离头指针”状态</strong>：直接 <code>git checkout &lt;commit-hash&gt;</code> 会进入此状态。在此状态下进行更改并提交后，如果不创建分支指向这些新提交，它们可能会被 Git 的垃圾回收机制清除10。如果计划基于该提交进行修改，请务必创建新分支。</li><li><strong>获取正确的提交哈希</strong>：确保你复制的提交哈希是正确的且存在于远程仓库中。你可以通过 GitHub 网站的提交历史页面来查看和确认提交哈希。</li></ul><h3 id="如何选择方法？"><a href="#如何选择方法？" class="headerlink" title="如何选择方法？"></a>如何选择方法？</h3><p>为了更清晰地选择，可以参考下面的流程：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout</span><br></pre></td></tr></table></figure><pre><code class="highlight mermaid">graph LR    A[需求：克隆特定提交] --&gt; B&#123;完整历史？&#125;    B -- 是 --&gt; C[克隆仓库&lt;br&gt;checkout 提交]    B -- 否 --&gt; D[浅克隆&lt;br&gt;checkout 提交]    C --&gt; E&#123;需修改？&#125;    D --&gt; F&#123;需修改？&#125;    E -- 是 --&gt; G[创建分支]    E -- 否 --&gt; H[分离头指针]    F -- 是 --&gt; G    F -- 否 --&gt; H</code></pre><h3 id="可能遇到的问题"><a href="#可能遇到的问题" class="headerlink" title="可能遇到的问题"></a>可能遇到的问题</h3><ol><li>网络问题<ol><li><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250919152150671.png" alt="image-20250919152150671"></li><li>关闭梯子</li><li>打开加速器</li></ol></li><li></li></ol><h1 id="Gitee"><a href="#Gitee" class="headerlink" title="Gitee"></a>Gitee</h1><h3 id="新建仓库"><a href="#新建仓库" class="headerlink" title="新建仓库"></a>新建仓库</h3><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909092345765.png" alt="示例"></p><p>上传到仓库的文件夹需要命名为blog：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909092433077.png" alt="上传到仓库的文件夹"></p><h3 id="git推送"><a href="#git推送" class="headerlink" title="git推送"></a>git推送</h3><p>将本地内容首次推送到空的 Git 远程仓库，需按顺序执行以下命令流程。以下是完整操作步骤及注意事项：</p><ol><li><p><strong>初始化本地仓库</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><ul><li>在项目根目录执行，生成隐藏的.git文件夹</li></ul></li><li><p><strong>添加文件并提交</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .              <span class="comment"># 添加所有文件到暂存区</span></span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span>  <span class="comment"># 提交到本地仓库</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span></span><br></pre></td></tr></table></figure><ul><li>必须至少有一次提交，否则推送会失败（Git 不允许推送空分支）。</li></ul></li><li><p><strong>关联远程仓库</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote add origin &lt;远程仓库URL&gt;</span><br></pre></td></tr></table></figure><ul><li><p>验证关联：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p> 查看 URL 是否正确。</p></li></ul></li><li><p><strong>首次推送并设置上游分支</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><ul><li><p>分支名为 master</p></li><li><p>-u（或–set-upstream）参数：</p><ul><li><p>建立本地分支与远程分支的追踪关系。</p></li><li><p>后续推送只需</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;写上描述&quot;</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p> 无需指定分支。</p></li></ul></li></ul></li></ol><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>在任何IDE的终端或者cmd中运行命令行都可以</p><p>在Cursor中打开终端：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909093433821.png" alt="在Cursor中打开终端"></p><p>确保路径最后的文件夹和仓库同名：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909093610035.png" alt="仓库名是blog文件夹名是blog"></p><p>所有用到的命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span></span><br><span class="line">git remote add origin https://gitee.com/kika00/blog.git</span><br><span class="line">git remote -v</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><p>成功推送：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909102559411.png" alt="成功推送"></p><p>后续推送用到的三个命令：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250910091241450.png" alt="改完 → git add -A → git commit -m &quot;说人话&quot; → git push"></p>]]></content>
      
      
      <categories>
          
          <category> 常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> Gitee </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pic</title>
      <link href="/2025/04/11/pic/"/>
      <url>/2025/04/11/pic/</url>
      
        <content type="html"><![CDATA[<p>文章路径：C:\Code\KikaBlog\blog\source_posts</p><p>（疑问：为什么source和_posts之间的斜杠显示的时候会被隐藏？）</p><h2 id="1-【-】"><a href="#1-【-】" class="headerlink" title="1 【.&#x2F;】"></a>1 【.&#x2F;】</h2><p>【typora可 博客不可】</p><p>实际路径在C:\Code\KikaBlog\blog\source_posts</p><p><img src="/./test1.png" alt=".&#x2F;test1.png"></p><p>但是如果我复制图片到C:\Code\KikaBlog\blog\source的时候，博客上就可以正常显示，而图片路径还是.&#x2F;</p><p><img src="/./../pic/test1-2.png" alt=".&#x2F;..&#x2F;pic&#x2F;test1-2.png"></p><p>也就是说把图片放在C:\Code\KikaBlog\blog\source上用路径.&#x2F;和.&#x2F;..&#x2F;是等价的；还有就是_posts文件夹是进不去的，这个文件夹只能放.md</p><h2 id="2【-】"><a href="#2【-】" class="headerlink" title="2【.&#x2F;..&#x2F;】"></a>2【.&#x2F;..&#x2F;】</h2><p>【都可！typora可 博客可】</p><p>实际路径在C:\Code\KikaBlog\blog\source</p><p><img src="/./../test2.png" alt=".&#x2F;..&#x2F;test2.png"></p><p>缺点：图片文件挤在同一个文件夹，不方便管理</p><h2 id="3【-filename-】"><a href="#3【-filename-】" class="headerlink" title="3【.&#x2F;${filename}】"></a>3【.&#x2F;${filename}】</h2><p>【typora可 博客不可】</p><p>实际路径在C:\Code\KikaBlog\blog\source_posts\pic</p><p><img src="/./pic/test3.png" alt=".&#x2F;pic&#x2F;test3.png"></p><p>为什么不行？这样管理分类最有秩序了，在_posts中搜索文章名，还可以直接搜到文章存放图片的文件夹。啊啊啊啊</p><h2 id="4【-filename-】"><a href="#4【-filename-】" class="headerlink" title="4【.&#x2F;..&#x2F;${filename}】"></a>4【.&#x2F;..&#x2F;${filename}】</h2><p>【都可！typora可 博客可】</p><p>实际路径在C:\Code\KikaBlog\blog\source\pic</p><p><img src="/./../pic/test4.png" alt=".&#x2F;..&#x2F;pic&#x2F;test4.png"></p><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>第2种和第4种在Typora写文章时可以看到图片，并且GitHub搭建的博客网站上也能正常显示图片。</p><p>第2种是把图片统一放在博客文件夹下的source里；</p><p>第4种则在source文件夹中创建一个与文章名同名的文件夹存放图片，个人更喜欢第4种存放方式。</p>]]></content>
      
      
      <categories>
          
          <category> blog </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo搭建Butterfly主题记录</title>
      <link href="/2024/09/04/Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
      <url>/2024/09/04/Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h2 id="Hexo常用命令"><a href="#Hexo常用命令" class="headerlink" title="Hexo常用命令"></a>Hexo常用命令</h2><p>生成主题静态文件：</p><p>等价于hexo generate</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><p>启动本地服务：</p><p>等价于hexo server</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在博客根目录下执行以下命令，创建一篇新文章：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">&quot;我的第一篇文章&quot;</span></span><br></pre></td></tr></table></figure><p>部署到GitHub：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>清除缓存</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure><h2 id="美化-常用链接"><a href="#美化-常用链接" class="headerlink" title="美化-常用链接"></a>美化-常用链接</h2><p>图标：</p><p><a href="https://fontawesome.com/v6/icons?o=r#packs">Version 6 Icons | Font Awesome</a></p><p>注意：<em>带pro的是付费版</em></p><h2 id="美化-需要下载插件的"><a href="#美化-需要下载插件的" class="headerlink" title="美化-需要下载插件的"></a>美化-需要下载插件的</h2><h3 id="本地搜索"><a href="#本地搜索" class="headerlink" title="本地搜索"></a>本地搜索</h3><p>1.安装搜索插件</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>2.配置_config.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#本地搜索开启</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>3.主题配置文件 _config.butterfly.yml：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">input_placeholder:</span> <span class="string">Search</span> <span class="string">for</span> <span class="string">Posts</span></span><br><span class="line">    <span class="attr">hits_empty:</span> <span class="string">&quot;We didn&#x27;t find any results for the search: $&#123;query&#125;&quot;</span> <span class="comment"># 如果没有查到内容相关内容显示</span></span><br></pre></td></tr></table></figure><h3 id="字数统计"><a href="#字数统计" class="headerlink" title="字数统计"></a>字数统计</h3><p>安装插件：在你的博客根目录，打开 cmd 命令窗口执行 npm install hexo-wordcount –save。<br>开启配置：修改主题配置文件_config.butterfly.yml 中的 wordcount。</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">wordcount:</span><br><span class="line">  enable: true</span><br><span class="line">  post<span class="emphasis">_wordcount: true</span></span><br><span class="line"><span class="emphasis">  min2read: true</span></span><br><span class="line"><span class="emphasis">  total_</span>wordcount: true</span><br></pre></td></tr></table></figure><h3 id="统计访问人数-UV-和-PV"><a href="#统计访问人数-UV-和-PV" class="headerlink" title="统计访问人数 (UV 和 PV)"></a>统计访问人数 (UV 和 PV)</h3><p>详细信息请查看 <a href="https://busuanzi.ibruce.info/">busuanzi 官方网站</a>。</p><p>Butterfly很贴心地集成了不蒜子计数工具，可以统计网站的访问数据（人数，次数等）。只需要修改主题配置文件即可开启。</p><p>修改主题配置文件_config.butterfly.yml。</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">busuanzi:</span><br><span class="line">  site<span class="emphasis">_uv: true  # 本站总访客数</span></span><br><span class="line"><span class="emphasis">  site_</span>pv: true  # 本站总访问量 </span><br><span class="line">  page<span class="emphasis">_pv: true  # 本文总阅读量</span></span><br></pre></td></tr></table></figure><h2 id="美化-文章"><a href="#美化-文章" class="headerlink" title="美化-文章"></a>美化-文章</h2><h3 id="写文参数可选"><a href="#写文参数可选" class="headerlink" title="写文参数可选"></a>写文参数可选</h3><blockquote><p>（可为特定的文章配置）在文章md文件的头部设置</p></blockquote><p>主题会优先判断文章 Markdown 的 Front-matter 是否有配置，如有，则以 Front-matter 的配置为准。否则，以主题配置文件中的配置为准。</p><table><thead><tr><th>参数</th><th>解释</th><th>可取</th></tr></thead><tbody><tr><td>copyright</td><td>文章版权模块(默认为设置中 post_copyright 的 enable 配置)</td><td>true &#x2F; false</td></tr><tr><td>copyright_author</td><td>文章版权模块的<code>文章作者</code></td><td></td></tr><tr><td>copyright_author_href</td><td>文章版权模块的<code>文章作者</code>链接</td><td></td></tr><tr><td>copyright_url</td><td>文章版权模块的<code>文章链接</code></td><td></td></tr><tr><td>copyright_info</td><td>文章版权模块的<code>版权声明</code>文字</td><td></td></tr><tr><td>noticeOutdate</td><td>文章过期提醒 (默认为设置中 noticeOutdate 的 enable 配置)</td><td></td></tr><tr><td>toc</td><td>是否显示 TOC目录(默认为设置中 toc 的 enable 配置)</td><td>true &#x2F; false</td></tr><tr><td>toc_number</td><td>是否目录自动编号(默认为设置中 toc 的 number 配置)</td><td>true &#x2F; false</td></tr><tr><td>toc_style_simple</td><td>显示 toc 简洁模式(侧边栏只剩下toc)</td><td>true &#x2F; false</td></tr><tr><td>comments</td><td>显示页面评论模块</td><td>默认true</td></tr><tr><td>aside</td><td>显示侧边栏</td><td>默认true</td></tr><tr><td>cover</td><td>封面&#x2F;缩略图(如果没有设置 top_img,文章页顶部将显示缩略图)</td><td>false&#x2F;图片地址&#x2F;留空</td></tr><tr><td>top_img</td><td>页面顶部图片</td><td></td></tr><tr><td>description</td><td>页面描述</td><td></td></tr><tr><td>keywords</td><td>页面关键字</td><td></td></tr><tr><td>aplayer</td><td>在需要的页面加载 aplayer 的 js 和 css,请参考文章下面的<code>音乐</code>配置</td><td></td></tr><tr><td>random</td><td>配置友情链接是否随机排序</td><td>默认为 false</td></tr></tbody></table><h3 id="hexo上传查看不了图片（已解决）"><a href="#hexo上传查看不了图片（已解决）" class="headerlink" title="hexo上传查看不了图片（已解决）"></a>hexo上传查看不了图片（已解决）</h3><p>解决的痛点：markdown写文章可以直接粘本地图片，并上传到github时hexo的博客也能正常显示。避免开启post_asset_folder文件资源夹，这样只有有图片的博文会新建文件夹来存储博文的图片 。不用下载任何img插件，网上很多人的解决方法都说要安装如hexo-asset-img插件，完全不必。</p><p>KEYWORDS：如何在Hexo博客中插入本地图片；如何在Hexo博客中插入图片；Hexo搭建butterfly博客中图片无法显示</p><p><strong>解决方法</strong></p><p>解决的核心：在Typora粘图时设置图像粘到指定路径:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./../</span><br></pre></td></tr></table></figure><p>这样图片会直接存放在<strong>source</strong>文件夹下，如下面三张图：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250413144513945.png"></p><p>但是这样所有图片都存在source文件夹，不方便查找和管理，所以</p><p>我更喜欢用如下路径：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./../$&#123;filename&#125;</span><br></pre></td></tr></table></figure><p>操作：Typora菜单栏的【文件】，打开【偏好设置】，点击【图像】</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250413144119948.png" alt="Typora设置"></p><p>解决过程参考<a href="https://kkkika.github.io/2025/04/11/pic/">pic</a>文章</p><h3 id="md功能展示"><a href="#md功能展示" class="headerlink" title="md功能展示"></a>md功能展示</h3><blockquote><p>markdown不熟悉的功能效果展示</p></blockquote><p>正常          加粗**          <em>斜体</em>          <u>下划线</u>          <code>代码</code></p><p>$内联公式$          <del>删除线</del>          &#x3D;&#x3D;高亮&#x3D;&#x3D;          <!--注释--></p><p>公式块：<br>$$<br>x<br>$$<br>警告框之</p><blockquote><p>[!NOTE]</p><p>提醒内容</p></blockquote><blockquote><p>[!TIP]</p><p>建议内容</p></blockquote><blockquote><p>[!IMPORTANT]</p><p>重要内容</p></blockquote><blockquote><p>[!WARNING]</p><p>警告内容</p></blockquote><blockquote><p>[!CAUTION]</p><p>注意内容</p></blockquote><blockquote><p>引用</p></blockquote><hr><h3 id="hideToggle可折叠内容"><a href="#hideToggle可折叠内容" class="headerlink" title="hideToggle可折叠内容"></a>hideToggle可折叠内容</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideToggle 我是标题，点击可展开%&#125;</span><br><span class="line">这是折叠的内容/隐藏的内容</span><br><span class="line">（可以加代码块）</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><details class="toggle" ><summary class="toggle-button" style="">我是标题，点击可展开</summary><div class="toggle-content"><p>这是折叠的内容&#x2F;隐藏的内容</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sql</span>代码</span><br></pre></td></tr></table></figure></div></details><hr><h3 id="tabs分栏选项卡"><a href="#tabs分栏选项卡" class="headerlink" title="tabs分栏选项卡"></a>tabs分栏选项卡</h3><h4 id="使用语法"><a href="#使用语法" class="headerlink" title="使用语法"></a>使用语法</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% tabs 唯一名字, [默认索引] %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 标题1 @icon --&gt;</span><br><span class="line">内容 1</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 标题2 --&gt;</span><br><span class="line">内容 2</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><ul><li><p>唯一名字：给这组 tabs 当 HTML id 用，不能重复。</p></li><li><p>默认索引：默认 1 ；写 <code>-1</code> 表示默认全部收起。</p></li><li><p><code>@icon</code> 选填，FontAwesome 全类名，中间有无空格都行。</p></li><li><table><thead><tr><th align="left">写法</th><th align="left">页签最终显示</th></tr></thead><tbody><tr><td align="left"><code>&lt;!-- tab --&gt;</code></td><td align="left">唯一名字-1</td></tr><tr><td align="left"><code>&lt;!-- tab @fas fa-apple --&gt;</code></td><td align="left">仅图标</td></tr><tr><td align="left"><code>&lt;!-- tab macOS --&gt;</code></td><td align="left">macOS</td></tr><tr><td align="left"><code>&lt;!-- tab macOS @fas fa-apple --&gt;</code></td><td align="left">macOS加图标</td></tr></tbody></table></li></ul><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab macOS --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab macOS @fas fa-apple--&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>效果如下：</p><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">test1 1</button><button type="button" class="tab">macOS</button><button type="button" class="tab"><i class="fas fa-apple"></i>macOS</button></div><div class="tab-contents"><div class="tab-item-content active"><p><strong>This is Tab 1.</strong></p></div><div class="tab-item-content"><p><strong>This is Tab 2.</strong></p></div><div class="tab-item-content"><p><strong>This is Tab 3.</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><hr><p>【未解决】</p><p>我希望选项卡在Typora写文章也可以实现同步渲染，在 Typora 编辑模式中使用类似 Hexo-Next 主题的选项卡（Tabs）功能</p><p>下载Typora插件</p><p><a href="https://github.com/obgnail/typora_plugin">obgnail&#x2F;typora_plugin: Typora plugin. Feature enhancement tool | Typora 插件，功能增强工具</a></p><p><a href="https://www.cnblogs.com/PeterJXL/p/18350073">打造个性化Typora写作体验的必备插件 - peterjxl - 博客园</a></p><hr><h3 id="Label颜色高亮"><a href="#Label颜色高亮" class="headerlink" title="Label颜色高亮"></a>Label颜色高亮</h3><blockquote><p>我觉得好像用处不大，对我来说</p></blockquote><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% label 文本 颜色 %&#125;</span><br></pre></td></tr></table></figure><p>两个参数，颜色默认值是灰色。</p><p>示例：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">臣亮言：&#123;% label 先帝 %&#125;创业未半，而&#123;% label 中道崩殂 blue %&#125;。今天下三分，&#123;% label 益州疲敝 pink %&#125;，此诚&#123;% label 危急存亡之秋 red %&#125;也！然侍衞之臣，不懈于内；&#123;% label 忠志之士 purple %&#125;，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。</span><br><span class="line">宫中、府中，俱为一体；陟罚臧否，不宜异同。若有&#123;% label 作奸 orange %&#125;、&#123;% label 犯科 green %&#125;，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</span><br></pre></td></tr></table></figure><p>臣亮言：<mark class="hl-label default">先帝</mark>创业未半，而<mark class="hl-label blue">中道崩殂</mark>。今天下三分，<mark class="hl-label pink">益州疲敝</mark>，此诚<mark class="hl-label red">危急存亡之秋</mark>也！然侍衞之臣，不懈于内；<mark class="hl-label purple">忠志之士</mark>，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。<br>宫中、府中，俱为一体；陟罚臧否，不宜异同。若有<mark class="hl-label orange">作奸</mark>、<mark class="hl-label green">犯科</mark>，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</p><h3 id="代码换行设置异常（已解决）"><a href="#代码换行设置异常（已解决）" class="headerlink" title="代码换行设置异常（已解决）"></a>代码换行设置异常（已解决）</h3><p>实现代码块自动换行：</p><p>在_config.butterfly.yml配置文件中可以配置如下功能</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">true</span> <span class="comment">#代码自动换行，关闭滚动条</span></span><br></pre></td></tr></table></figure><p>同时将站点配置文件_config.yml的highlight设置为false</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>但是出现了如下异常：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911172343525.png" alt="数字异常叠加"></p><p>当 word_wrap 启用但 Hexo 的 highlight.line_number 为 false 时，不再通过伪元素渲染行号，避免换行时前置数字异常叠加</p><p>解决方法：</p><p>将 themes&#x2F;butterfly&#x2F;source&#x2F;css&#x2F;_highlight&#x2F;highlight&#x2F;index.styl 中自动生成行号的逻辑，改为Hexo 配置 highlight.line_number: false 时不显示：</p><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_highlight\highlight\index.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span></span><br><span class="line">  <span class="selector-tag">figure</span><span class="selector-class">.highlight</span></span><br><span class="line">    <span class="selector-class">.line</span></span><br><span class="line">      <span class="keyword">if</span> wordWrap &amp;&amp; <span class="variable">$highlight_line_numb</span></span><br><span class="line">        <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">          <span class="attribute">display</span>: inline-block</span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">6px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">          <span class="attribute">min-width</span>: <span class="number">30px</span></span><br><span class="line">          <span class="attribute">color</span>: <span class="built_in">var</span>(--hlnumber-color)</span><br><span class="line">          <span class="attribute">content</span>: <span class="built_in">counter</span>(line)</span><br><span class="line">          <span class="attribute">counter-increment</span>: line</span><br><span class="line">          <span class="attribute">text-align</span>: left</span><br></pre></td></tr></table></figure><p>将if wordWrap改为if wordWrap &amp;&amp; $highlight_line_numb。</p><p>刷新之后又没问题了，我不懂。。</p><p>最后是这样的：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250912100954585.png" alt="image-20250912100954585"></p><p>可以正常换行了，但是我认为字体不好看，进行调整：</p><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_highlight\highlight\index.styl</p><p>if wordWrap就不动了，然后调整参数</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span></span><br><span class="line">  <span class="selector-tag">figure</span><span class="selector-class">.highlight</span></span><br><span class="line">    <span class="selector-class">.line</span></span><br><span class="line">      <span class="keyword">if</span> wordWrap</span><br><span class="line">        <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">          <span class="attribute">display</span>: inline-block</span><br><span class="line">          <span class="attribute">color</span>: <span class="built_in">var</span>(--hlnumber-color)</span><br><span class="line">          <span class="attribute">content</span>: <span class="built_in">counter</span>(line)</span><br><span class="line">          <span class="attribute">counter-increment</span>: line</span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">          <span class="attribute">text-align</span>: right</span><br><span class="line">          <span class="attribute">min-width</span>: <span class="number">15px</span></span><br><span class="line">          <span class="attribute">font-family</span>: <span class="string">&quot;Consolas&quot;</span> <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>其中有这些参数是修改或增加的：</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="attribute">text-align</span>: right</span><br><span class="line"><span class="attribute">min-width</span>: <span class="number">15px</span></span><br><span class="line"><span class="attribute">font-family</span>: <span class="string">&quot;Consolas&quot;</span> <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>效果调整成.gutter pre的样子：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250912100602774.png" alt="跟上次上传的样式对比"></p><h2 id="美化-首页"><a href="#美化-首页" class="headerlink" title="美化-首页"></a>美化-首页</h2><h3 id="右侧悬浮栏"><a href="#右侧悬浮栏" class="headerlink" title="右侧悬浮栏"></a>右侧悬浮栏</h3><h4 id="悬浮栏按钮"><a href="#悬浮栏按钮" class="headerlink" title="悬浮栏按钮"></a>悬浮栏按钮</h4><p>_config.butterfly.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Choose: readmode,translate,darkmode,hideAside,toc,chat,comment</span></span><br><span class="line"><span class="comment"># Don&#x27;t repeat the same value</span></span><br><span class="line"><span class="attr">rightside_item_order:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Default: readmode,translate,darkmode,hideAside</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="string">readmode,hideAside</span></span><br><span class="line">  <span class="comment"># Default: toc,chat,comment</span></span><br><span class="line">  <span class="attr">show:</span> <span class="string">translate,darkmode,toc,chat,comment</span></span><br></pre></td></tr></table></figure><ul><li><p>可选：阅读模式，简繁转换，日夜切换，单栏和双栏切换，目录，聊天，评论</p></li><li><p>在 hide 里：按钮只在点开齿轮后出现（收纳&#x2F;隐藏到设置面板）。</p></li><li><p>在 show 里：按钮一直固定悬浮显示在右侧。</p></li><li><p>不要重复：同一个键不要同时放在 hide 和 show。</p></li></ul><h4 id="悬浮栏显示"><a href="#悬浮栏显示" class="headerlink" title="悬浮栏显示"></a>悬浮栏显示</h4><p>顶部时保持显示、向下滚动隐藏、向上滚动显示</p><ul><li>导航栏是顶部时保持显示、向下滚动隐藏、向上滚动显示，帮我把右侧悬浮栏也改为这样的形式</li></ul><p>Agent变更点：</p><ul><li>更新 themes&#x2F;butterfly&#x2F;source&#x2F;js&#x2F;main.js 中滚动处理逻辑：向下滚动时移除 rightside-show 以隐藏悬浮栏，向上滚动时添加 rightside-show 以显示，与导航栏一致。</li><li>把右侧悬浮栏在页面初始就显示，并在滚动到顶部时保持显示；当向下滚动时隐藏，向上滚动时显示。我会更新滚动分支中的 else 逻辑，并在刷新初始化时立即显示 #rightside。</li><li>themes&#x2F;butterfly&#x2F;source&#x2F;js&#x2F;main.js：在注册滚动监听后立刻调用一次 scrollTask()</li></ul><h3 id="butterfly主题文章顶部大图"><a href="#butterfly主题文章顶部大图" class="headerlink" title="butterfly主题文章顶部大图"></a>butterfly主题文章顶部大图</h3><p><a href="https://blog.captainz.cc/posts/hexo_butterfly_top_img.html">Hexo+Butterfly 主题一图流背景与顶部图修改 | Hyper Tech</a></p><p><a href="https://blog.csdn.net/weixin_74811095/article/details/147954567">butterfly主题魔改02：主题颜色、宽度设置、图片设置、遮罩效果_butterfly宽度-CSDN博客</a></p><h2 id="小美化"><a href="#小美化" class="headerlink" title="小美化"></a>小美化</h2><h4 id="文章图片大小限制"><a href="#文章图片大小限制" class="headerlink" title="文章图片大小限制"></a>文章图片大小限制</h4><blockquote><p>限制最大高度为250px</p><p>宽度改为auto</p><p>然后发现图片会过宽，就再加上限制最大宽度为720px</p></blockquote><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\post.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">img</span></span><br><span class="line">  <span class="attribute">display</span>: block</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="number">20px</span></span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">250px</span></span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">720px</span></span><br><span class="line">  <span class="attribute">width</span>: auto </span><br><span class="line">  <span class="attribute">transition</span>: filter <span class="number">375ms</span> ease-in .<span class="number">2s</span></span><br><span class="line">  <span class="built_in">addBorderRadius</span>()</span><br></pre></td></tr></table></figure><h4 id="文章底部标签颜色修改"><a href="#文章底部标签颜色修改" class="headerlink" title="文章底部标签颜色修改"></a>文章底部标签颜色修改</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\post.styl</p><p>将$light-blue改了</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#post</span></span><br><span class="line">  <span class="selector-class">.tag_share</span></span><br><span class="line">    <span class="selector-pseudo">&amp;:after</span></span><br><span class="line">      <span class="attribute">display</span>: block</span><br><span class="line">      <span class="attribute">clear</span>: both</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.post-meta</span></span><br><span class="line">      &amp;__tag-list</span><br><span class="line">        <span class="attribute">display</span>: inline-block</span><br><span class="line"></span><br><span class="line">      &amp;__tags</span><br><span class="line">        <span class="attribute">display</span>: inline-block</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">8px</span> <span class="number">8px</span> <span class="number">0</span></span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12px</span></span><br><span class="line">        <span class="attribute">width</span>: fit-content</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="variable">$light</span>-blue</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="variable">$light</span>-blue</span><br><span class="line">        <span class="attribute">font-size</span>: .<span class="number">85em</span></span><br><span class="line">        <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-in-out</span><br></pre></td></tr></table></figure><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250909152952527.png" alt="文章底部标签颜色"></p><h4 id="文章页头部的背景设置为透明"><a href="#文章页头部的背景设置为透明" class="headerlink" title="文章页头部的背景设置为透明"></a>文章页头部的背景设置为透明</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\head.styl</p><p>增加<code>background: transparent !important</code>将文章页头部 .post-bg 的背景强制设为透明，避免使用封面图作为背景</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// post</span></span><br><span class="line">&amp;<span class="selector-class">.post-bg</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span></span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>还要开启页头遮罩</p><p>_config.butterfly.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Add a mask to the header and footer # 页头页脚添加遮罩</span></span><br><span class="line"><span class="attr">mask:</span></span><br><span class="line">  <span class="attr">header:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911112109190.png" alt="文章页头部的背景"></p><hr><h4 id="半透明背景"><a href="#半透明背景" class="headerlink" title="半透明背景"></a>半透明背景</h4><p>效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250910171746704.png" alt="修改后"></p><p>修改前：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250910172011461.png" alt="修改前"></p><p>增加如下代码：</p><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\post.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 浅色模式：文章阅读区域背景改为半透明</span></span><br><span class="line"><span class="comment">// 仅在非暗色主题时生效，避免影响暗色模式视觉</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#post</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br></pre></td></tr></table></figure><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\aside.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 浅色模式：侧栏所有卡片统一半透明背景</span></span><br><span class="line"><span class="comment">// 说明：匹配包含 .card-widget 的全部卡片类型（recent-post/announcement/info 等）</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br></pre></td></tr></table></figure><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_page\homepage.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 浅色模式：侧栏所有卡片统一半透明背景</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#recent-posts</span> <span class="selector-class">.recent-post-item</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br></pre></td></tr></table></figure><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911094012471.png" alt="代码"></p><hr><h4 id="mark-bg参数"><a href="#mark-bg参数" class="headerlink" title="mark-bg参数"></a>mark-bg参数</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_global\index.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="attr">--mark-bg</span>: <span class="built_in">alpha</span>(<span class="variable">$dark</span>-black, .<span class="number">13</span>)</span><br></pre></td></tr></table></figure><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_mode\darkmode.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="attr">--mark-bg</span>: <span class="built_in">alpha</span>(<span class="variable">$dark</span>-black, .<span class="number">24</span>)</span><br></pre></td></tr></table></figure><p>浅色主题.3效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911161632715.png" alt="浅色主题.3效果"></p><p>浅色主题.13效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911142312799.png" alt="浅色主题.13效果"></p><p>深色主题.6效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911161839729.png" alt="深色主题.6效果"></p><p>深色主题.24效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911161731535.png" alt="深色主题.24效果"></p><hr><h4 id="右侧悬浮栏动态效果"><a href="#右侧悬浮栏动态效果" class="headerlink" title="右侧悬浮栏动态效果"></a>右侧悬浮栏动态效果</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\layout\includes\rightside.pug</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- const &#123; readmode, translate, darkmode, aside, chat &#125; = theme</span><br><span class="line">mixin rightsideItem(array)</span><br><span class="line">  each item in array</span><br><span class="line">    case item</span><br><span class="line">      when &#x27;readmode&#x27;</span><br><span class="line">        if globalPageType === &#x27;post&#x27; &amp;&amp; readmode</span><br><span class="line">          button#readmode(type=&quot;button&quot; title=_p(&#x27;rightside.readmode_title&#x27;))</span><br><span class="line">            i.fas.fa-book-open</span><br><span class="line">      when &#x27;translate&#x27;</span><br><span class="line">        if translate.enable</span><br><span class="line">          button#translateLink(type=&quot;button&quot; title=_p(&#x27;rightside.translate_title&#x27;))= translate.default</span><br><span class="line">      when &#x27;darkmode&#x27;</span><br><span class="line">        if darkmode.enable &amp;&amp; darkmode.button</span><br><span class="line">          button#darkmode(type=&quot;button&quot; title=_p(&#x27;rightside.night_mode_title&#x27;))</span><br><span class="line">            i.fas.fa-adjust.fa-flip</span><br><span class="line">      when &#x27;hideAside&#x27;</span><br><span class="line">        if aside.enable &amp;&amp; aside.button &amp;&amp; page.aside !== false</span><br><span class="line">          button#hide-aside-btn(type=&quot;button&quot; title=_p(&#x27;rightside.aside&#x27;))</span><br><span class="line">            i.fas.fa-arrows-alt-h</span><br><span class="line">      when &#x27;toc&#x27;</span><br><span class="line">        if showToc</span><br><span class="line">          button#mobile-toc-button.close(type=&quot;button&quot; title=_p(&quot;rightside.toc&quot;))</span><br><span class="line">            i.fas.fa-list-ul</span><br><span class="line">      when &#x27;chat&#x27;</span><br><span class="line">        if chat.rightside_button &amp;&amp; chat.use</span><br><span class="line">          button#chat-btn(type=&quot;button&quot; title=_p(&quot;rightside.chat&quot;) style=&quot;display:none&quot;)</span><br><span class="line">            i.fas.fa-message</span><br><span class="line">      when &#x27;comment&#x27;</span><br><span class="line">        if commentsJsLoad</span><br><span class="line">          a#to_comment(href=&quot;#post-comment&quot; title=_p(&quot;rightside.scroll_to_comment&quot;))</span><br><span class="line">            i.fas.fa-comments</span><br><span class="line"></span><br><span class="line">#rightside</span><br><span class="line">  - const &#123; enable, hide, show &#125; = theme.rightside_item_order</span><br><span class="line">  - const hideArray = enable ? hide &amp;&amp; hide.split(&#x27;,&#x27;) : [&#x27;readmode&#x27;,&#x27;translate&#x27;,&#x27;darkmode&#x27;,&#x27;hideAside&#x27;]</span><br><span class="line">  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;toc&#x27;,&#x27;chat&#x27;,&#x27;comment&#x27;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  #rightside-config-hide</span><br><span class="line">    if hideArray</span><br><span class="line">      +rightsideItem(hideArray)</span><br><span class="line">  #rightside-config-show</span><br><span class="line">    if enable</span><br><span class="line">      if hide</span><br><span class="line">        button#rightside-config(type=&quot;button&quot; title=_p(&quot;rightside.setting&quot;))</span><br><span class="line">          i.fas.fa-cog.fa-beat</span><br><span class="line">    else</span><br><span class="line">      if globalPageType === &#x27;post&#x27;</span><br><span class="line">        if (readmode || translate.enable || (darkmode.enable &amp;&amp; darkmode.button))</span><br><span class="line">          button#rightside-config(type=&quot;button&quot; title=_p(&quot;rightside.setting&quot;))</span><br><span class="line">            i.fas.fa-cog.fa-beat</span><br><span class="line">      else if translate.enable || (darkmode.enable &amp;&amp; darkmode.button)</span><br><span class="line">        button#rightside-config(type=&quot;button&quot; title=_p(&quot;rightside.setting&quot;))</span><br><span class="line">          i.fas.fa-cog.fa-beat  </span><br><span class="line"></span><br><span class="line">    if showArray</span><br><span class="line">      +rightsideItem(showArray)</span><br><span class="line"></span><br><span class="line">    button#go-up(type=&quot;button&quot; title=_p(&quot;rightside.back_to_top&quot;))</span><br><span class="line">      span.scroll-percent</span><br><span class="line">      i.fas.fa-arrow-up.fa-bounce</span><br><span class="line">    button#go-down(type=&quot;button&quot; title=_p(&quot;rightside.back_to_bottom&quot;))</span><br><span class="line">      i.fas.fa-arrow-down.fa-bounce</span><br></pre></td></tr></table></figure><ul><li>修改fas.fa-cog的.fa-spin为.fa-beat</li><li>增加fas.fa-arrow-up和fas.fa-arrow-down的.fa-bounce</li><li>增加fas.fa-adjust的.fa-flip</li></ul><hr><h2 id="博客加密插件-hexo-blog-encrypt"><a href="#博客加密插件-hexo-blog-encrypt" class="headerlink" title="博客加密插件 hexo-blog-encrypt"></a>博客加密插件 hexo-blog-encrypt</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-blog-encrypt</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn add hexo-blog-encrypt</span><br></pre></td></tr></table></figure><p>网速不好推荐使用</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cnpm install --save hexo-blog-encrypt</span><br></pre></td></tr></table></figure><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250924142228892.png" alt="成功安装了hexo-blog-encrypt插件"></p><h3 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h3><p>在hexo的_config.yml文件中添加如下代码：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 安全设置</span><br><span class="line">encrypt:</span><br><span class="line">  # 启用插件</span><br><span class="line">  enable: true</span><br><span class="line">  abstract: &quot;本文内容加密了，需要密码哦&quot;</span><br><span class="line">  message: &quot;请输入密码&quot;</span><br><span class="line">  # 错误消息设置</span><br><span class="line">  wrong_pass_message: &quot;密码错误，请重新输入&quot;</span><br><span class="line">  wrong_hash_message: &quot;认证失败，再试一试&quot;</span><br><span class="line">  # 加密算法（默认 AES，可选 RSA）</span><br><span class="line">  algorithm: &quot;aes&quot;</span><br><span class="line">  # 记住密码（默认 7 天，单位：天）</span><br><span class="line">  expire: 1</span><br><span class="line">  # 是否禁用日志记录</span><br><span class="line">  silent: false</span><br><span class="line">  # 主题样式可选 default、blink、shrink、flip、up、surge、wave、xray</span><br><span class="line">  theme: blink</span><br></pre></td></tr></table></figure><p>配置项说明：</p><ul><li>enable: 是否启用加密功能，设置为 true 启用。</li><li>abstract: 加密文章的摘要，显示在文章列表页。</li><li>message: 密码输入框的描述性文字。</li><li>wrong_pass_message: 密码错误时的提示信息。</li><li>wrong_hash_message: 解密内容无法验证时的提示信息。</li></ul><p>主题配色修改：在C:\Code\KikaBlog\blog\themes\butterfly\source\css\index.styl添加如下代码</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// hexo-blog-encrypt插件主题修改</span></span><br><span class="line"><span class="selector-class">.hbe-input-field-blink</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d89f68</span> <span class="meta">!important</span></span><br><span class="line"><span class="selector-class">.hbe-input-field-blink</span><span class="selector-pseudo">:focus</span></span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#d89f68</span> <span class="meta">!important</span></span><br><span class="line"><span class="selector-class">.hbe-input-label-content-blink</span><span class="selector-pseudo">::after</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#c97d3a</span> <span class="meta">!important</span></span><br><span class="line"><span class="selector-class">.hbe-input-field</span></span><br><span class="line">  <span class="attribute">margin</span> <span class="number">6px</span> <span class="meta">!important</span></span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>在需要加密文章的头部添加如下设置：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: ###</span><br><span class="line">date: XXXX-XX-XX XX:XX:XX</span><br><span class="line">password: &quot;你的密码必须在引号里面&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><hr><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="一劳永逸"><a href="#一劳永逸" class="headerlink" title="一劳永逸"></a>一劳永逸</h3><p>（修改styl文件好像版本更新后又要重新改还是什么的，不太懂）</p><p>干脆全部写在index.styl文件，方便管理</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;css_prefix&#x27;</span>)</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;nib&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_third-party/normalize.min.css&#x27;</span></span><br><span class="line"><span class="comment">// project</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;var&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_global/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_highlight/highlight&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_layout/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_tags/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_mode/*&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// search</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_search/index&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================================================================================</span></span><br><span class="line"><span class="comment">// 确保图标正常显示</span></span><br><span class="line"><span class="comment">// ===========================================</span></span><br><span class="line"><span class="comment">// 全局：设置所有伪元素 :before 使用 FontAwesome 字体</span></span><br><span class="line">*<span class="selector-pseudo">:before</span></span><br><span class="line">  <span class="attribute">font-family</span>: FontAwesome <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================================================================================</span></span><br><span class="line"><span class="comment">// 浅色模式：统一半透明背景样式</span></span><br><span class="line"><span class="comment">// 仅在非暗色主题时生效</span></span><br><span class="line"><span class="comment">// ===========================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 文章阅读区域背景</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#post</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 侧栏所有卡片</span></span><br><span class="line"><span class="comment">// 说明：匹配包含 .card-widget 的全部卡片类型（recent-post/announcement/info 等）</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首页文章卡片</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#recent-posts</span> <span class="selector-class">.recent-post-item</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================================================================================</span></span><br><span class="line"><span class="comment">// 文章页头部背景设置</span></span><br><span class="line"><span class="comment">// 将文章页头部 .post-bg 的背景强制设为透明，避免使用封面图作为背景</span></span><br><span class="line"><span class="comment">// ===========================================</span></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.post-bg</span></span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>将特定样式设置写在index.styl文件，方便管理。并从原始文件中移除重复的样式代码</p><h3 id="其他美化思路"><a href="#其他美化思路" class="headerlink" title="其他美化思路"></a>其他美化思路</h3><ul><li>针对归档页面，分类页面，tags页面（标签云页面）关闭mask背景色遮罩并设置图片透明度。我想要的不是透明度而是边缘渐变透明，不要让图片分割感这么重</li></ul><h2 id="butterfly博客评论"><a href="#butterfly博客评论" class="headerlink" title="butterfly博客评论"></a>butterfly博客评论</h2><p>主题支持多种评论系统，你可以根据自己的喜好选择一种。你也可以选择双评论，只需要配置两个评论（第一个为默认显示）</p><p><a href="https://butterfly.js.org/posts/4aa8abbe/">Butterfly 文檔(三) 主題配置 | Butterfly</a>（<code>Twikoo</code> 是一个简洁、安全、无后端的静态网站评论系统，基于腾讯云开发。）</p><p>上面列出了好多种，最后我选择<code>Twikoo</code> 的Hugging Face：<a href="https://twikoo.js.org/quick-start.html">快速上手 | Twikoo 文档</a></p><p>只需要把获取到的 环境ID (envId) 填写到配置上去就行：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">twikoo:</span></span><br><span class="line">  <span class="attr">envId:</span>           <span class="comment"># 环境 ID</span></span><br><span class="line">  <span class="attr">region:</span>          <span class="comment"># 环境地域，默认为 ap-shanghai，如果您的环境地域不是上海，需传此参数</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span>   <span class="comment"># 是否显示文章阅读数</span></span><br><span class="line">  <span class="attr">option:</span>          <span class="comment"># 可选配置，开启 visitor 后，文章页的访问人数将改为 Twikoo 提供，而不是 不蒜子</span></span><br></pre></td></tr></table></figure><h3 id="Twikoo快速上手"><a href="#Twikoo快速上手" class="headerlink" title="Twikoo快速上手"></a>Twikoo快速上手</h3><p>Twikoo 分为云函数和前端两部分，若要在您的网站上集成 Twikoo，您需要同时部署云函数和前端，部署时请注意保持二者版本一致。</p><ul><li><a href="https://twikoo.js.org/backend.html">云函数部署</a> 有多种方式，请选择适合自己的部署平台。</li><li><a href="https://twikoo.js.org/frontend.html">前端部署</a> 有 2 种方式，如果您的网站主题支持 Twikoo，您只需在配置文件中指定 Twikoo 即可；如果您的网站主题不支持 Twikoo，您需要修改源码手动引入 Twikoo 的 js 文件并初始化。</li><li>若您已部署旧版本 Twikoo，请参考 <a href="https://twikoo.js.org/update.html">版本更新</a> 升级云函数和前端版本。</li></ul><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250905160123616.png" alt="云函数部署我选择"></p><h3 id="Hugging-Face-部署"><a href="#Hugging-Face-部署" class="headerlink" title="Hugging Face 部署"></a>Hugging Face 部署</h3><blockquote><p>注意：Hugging Face 部署的环境，由于默认的邮件端口被屏蔽，无法使用邮件功能。详见 <a href="https://github.com/twikoojs/twikoo/issues/638">twikoo&#x2F;issues&#x2F;638</a></p></blockquote><ol><li>申请 <a href="https://account.mongodb.com/account/register">MongoDB Atlas</a> 账号，获取 MongoDB 连接字符串。<a href="https://mongodb.ac.cn/docs/guides/atlas/account/">注册指南 - MongoDB 文档</a></li><li>申请 <a href="https://huggingface.co/join">Hugging Face</a> 账号</li><li>登录，点击 Spaces - Create new Space</li></ol><p><a href="https://twikoo.js.org/assets/hugging-1.qykHscdz.png"><img src="https://twikoo.js.org/assets/hugging-1.qykHscdz.png" alt="img"></a></p><ol><li>输入 Space name，Select the Space SDK 选择 Docker，Choose a Docker template 选择 Blank，Space hardware 选择 FREE，选择 Public，点击 Create Space</li></ol><p><a href="https://twikoo.js.org/assets/hugging-2.BZLt3AFG.png"><img src="https://twikoo.js.org/assets/hugging-2.BZLt3AFG.png" alt="img"></a></p><ol><li>进入刚刚创建的 Space，点击页面上方的 Settings，滚动到 Variables and secrets 部分，点击 New secret，Name 输入 <code>MONGODB_URI</code>，Value 输入前面记录的数据库连接字符串，点击 Save</li></ol><p><a href="https://twikoo.js.org/assets/hugging-3.BE7bV_x9.png"><img src="https://twikoo.js.org/assets/hugging-3.BE7bV_x9.png" alt="img"></a></p><ol><li>点击页面上方的 Files - Add file - Create a new file</li></ol><p><a href="https://twikoo.js.org/assets/hugging-4.IZDT8YRp.png"><img src="https://twikoo.js.org/assets/hugging-4.IZDT8YRp.png" alt="img"></a></p><ol><li>在 Name your file 中输入 <code>Dockerfile</code>，在 Edit 区域输入以下内容</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FROM imaegoo/twikoo</span><br><span class="line">ENV TWIKOO_PORT 7860</span><br><span class="line">EXPOSE 7860</span><br></pre></td></tr></table></figure><p><a href="https://twikoo.js.org/assets/hugging-5.Cw4bsoD7.png"><img src="https://twikoo.js.org/assets/hugging-5.Cw4bsoD7.png" alt="img"></a></p><ol><li>点击 Commit new file to main</li><li>点击右上角 Settings 右方的菜单（三个点）图标 - Embed this Space，Direct URL 下的内容（例如 <code>https://xxx-xxx.hf.space</code>）即为您的环境 id</li></ol><p><a href="https://twikoo.js.org/assets/hugging-6.CxsVPwFh.png"><img src="https://twikoo.js.org/assets/hugging-6.CxsVPwFh.png" alt="img"></a></p><h4 id="如果你需要自定义域名"><a href="#如果你需要自定义域名" class="headerlink" title="如果你需要自定义域名"></a>如果你需要自定义域名</h4><blockquote><p>自定义域名教程由 <a href="https://github.com/Hoshino-Yumetsuki">Hoshino-Yumetsuki</a> 提供</p><p>ps：除了 <code>CF_ZERO_TRUST_TOKEN</code> 这个环境变量以外，其他环境变量的配置方式与上一步相同</p></blockquote><ol><li>申请 Cloudflare Zero Trust，关于申请方式请自行查找</li></ol><p><a href="https://twikoo.js.org/assets/hugging-7.ey7RVDUh.png"><img src="https://twikoo.js.org/assets/hugging-7.ey7RVDUh.png" alt="img"></a></p><ol><li>添加一条隧道，连接方式选择 Cloudflared，名称任意</li></ol><p><a href="https://twikoo.js.org/assets/hugging-8.bn1zLPri.png"><img src="https://twikoo.js.org/assets/hugging-8.bn1zLPri.png" alt="img"></a></p><ol><li>添加一个 Public Hostname，回源选择 HTTP，端口选择 8080</li><li>Clone Twikoo 仓库，找到 <code>src\server\hf-space</code></li><li>去 Hugging Face 创建一个 Space，然后 Clone 下来，将 hf-space 文件夹内的所有内容复制进去</li><li>在 Hugging Face Space 的设置中添加一个环境变量，变量名 <code>CF_ZERO_TRUST_TOKEN</code>，值是 Tunnels 给的令牌（删掉 <code>cloudflared.exe service install</code>，只保留令牌部分）</li></ol><p><a href="https://twikoo.js.org/assets/hugging-9.BfxLMyMQ.png"><img src="https://twikoo.js.org/assets/hugging-9.BfxLMyMQ.png" alt="img"></a></p><ol><li>Push 到 Hugging Face Space 仓库</li></ol><h2 id="hexo使用Mermaid"><a href="#hexo使用Mermaid" class="headerlink" title="hexo使用Mermaid"></a>hexo使用Mermaid</h2><h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><p><a href="https://butterfly.js.org/categories/Docs%E6%96%87%E6%AA%94/">分類: Docs文檔 | Butterfly</a></p><p><a href="https://blog.csdn.net/mjh1667002013/article/details/129290903">【Hexo】Hexo搭建Butterfly主题并快速美化_hexo butterfly-CSDN博客</a></p><p><a href="https://nickxu.me/2022/02/20/Hexo-Butterfly-%E5%BB%BA%E7%AB%99%E6%8C%87%E5%8D%97%EF%BC%88%E4%BA%94%EF%BC%89%E6%97%A5%E5%B8%B8%E5%86%99%E4%BD%9C/">Hexo + Butterfly 建站指南（五）日常写作 | NX の 博客</a></p><p><a href="https://korgs.blog.csdn.net/article/details/131094362?spm=1001.2101.3001.6650.3&utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-3-131094362-blog-135929884.235%5Ev43%5Epc_blog_bottom_relevance_base8&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-3-131094362-blog-135929884.235%5Ev43%5Epc_blog_bottom_relevance_base8&utm_relevant_index=6">基于Hexo和Butterfly创建个人技术博客，(7) 配置butterfly主题搭建博客网站主体UI框架_hexo butterfly-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> blog </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
