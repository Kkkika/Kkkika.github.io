<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>跟着大佬学数分2</title>
      <link href="/2025/10/27/%E8%B7%9F%E7%9D%80%E5%A4%A7%E4%BD%AC%E5%AD%A6%E6%95%B0%E5%88%862/"/>
      <url>/2025/10/27/%E8%B7%9F%E7%9D%80%E5%A4%A7%E4%BD%AC%E5%AD%A6%E6%95%B0%E5%88%862/</url>
      
        <content type="html"><![CDATA[<h1 id="南冥野马"><a href="#南冥野马" class="headerlink" title="南冥野马"></a>南冥野马</h1><h2 id="常见的面试题有哪些呢？"><a href="#常见的面试题有哪些呢？" class="headerlink" title="常见的面试题有哪些呢？"></a>常见的面试题有哪些呢？</h2><h3 id="一、指标体系题："><a href="#一、指标体系题：" class="headerlink" title="一、指标体系题："></a>一、指标体系题：</h3><p>1、大促发红包，比如双11活动我们通过红包去吸引用户下单，想要去衡量红包发放的效果，应该去考虑哪些方面的指标？</p><h3 id="二、异动定位题："><a href="#二、异动定位题：" class="headerlink" title="二、异动定位题："></a>二、异动定位题：</h3><p>2、假如我们从监控看板中看到某个广告渠道的次留率比之前正常范围下降了5pt（假设平常是30%），你会从哪些角度分析原因？<br>3、拼多多：DAU下滑且GMV下滑，但DAU下滑幅度更大，要如何分析？<br>4、抖音电商：GMV周同比下跌20%，请问应该如何定位原因？</p><h3 id="三、思维分析题："><a href="#三、思维分析题：" class="headerlink" title="三、思维分析题："></a>三、思维分析题：</h3><p>5、关于AB实验，我们有时会做实验反转，什么是实验反转？实验反转的用途是什么？什么场景下需要实验反转？<br>6、一个季度或一年过后，如何评估这些AB实验全量之后的实际效果对大盘的影响，简单相加会高很多，但实际大盘没有那么显著的变化？<br>7、业务同学想做社交转化，首先最核心的是促进家族转化（几个用户行为一个家族），重点挖掘出用户为何会加入家族，圈出用户在加入家族之前的行为，但如何归因哪些关键行为比较合理呢？<br>8、关于用户增长Push，Push能带来DAU的提升，但也会对用户造成影响（如关闭Push率、卸载率等），数据分析师怎么去衡量利益和损失之间的ROI平衡？</p><p>首先，我们需要判断数据统计是否存在异常，不重复讲了。</p><p>然后观察GMV的公式（DAU×付费率×up值），并理解DAU对营收的滞后效应。在成熟产品中，低活跃度用户的流失通常会导致付费率和up值提高。因此，在这种情况下，我们应通过分析付费转化率以及用户分层（新用户、低活、中低活、中活、高活、高活用户，回流用户等）来确定下滑的具体人群及其对GMV的影响。我们需要探索是否存在长期下滑趋势，并找出可能的拐点，考虑与发版时间、节假日、季节规律、端内重大功能上线或营销节点是否匹配。同时，结合用户反馈寻找问题突破口。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>跟着大佬练数分</title>
      <link href="/2025/10/24/%E8%B7%9F%E7%9D%80%E5%A4%A7%E4%BD%AC%E7%BB%83%E6%95%B0%E5%88%86/"/>
      <url>/2025/10/24/%E8%B7%9F%E7%9D%80%E5%A4%A7%E4%BD%AC%E7%BB%83%E6%95%B0%E5%88%86/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重新输入" data-whm="认证失败，再试一试">  <script id="hbeData" type="hbeData" data-hmacdigest="de79d7ef7be9201240ca75bc0bb00d5640fc4d7e9a0c8d8b1e5e203bf3305e5f">491ef5b2997eeb8d4e37569befa3eb2a07fe088cbca9d34fec386a4d22357745f40449b64094afedb04828ac534d3e9a519b29ddefefae25a828afca743f58529a31dc19fe63c1c7f27915bdbee0d2b5fa11a7c310b1c137fda88b4e6e4b616a45a7b9a2a3344bd87313c3122a27b682d355ad243a8e8f61df526e81a4a2a789c21c7dbf64ab028a6f343b4de6838035201e8983cd36f7ed7840dd78f715b95ed4b2c9e831619cafbfafaadc38862df106aca55ae68ff9134b39de276e091eed3b660f3812b27818db1f683f297bfce754c43cc98a9392640e53969b32f5610a3ba1dedad7d1dfce7d1a15e1c71defe1a770af1415089cf9366da69308a498f68d9f5109e885d8303ec823806b901894dbdf2b4efd630fddd5a10fc6c7ea58c0ecf42be0407349a45317b6b5bdad8b57f20c334e1d6d8624508d596f2142e45eb16f7cd6ba248636c262b539acc5d17589495620029ea1863c71c9a02e9568a6b4f65b9bbe1fb715551105f0af88285abd0f887c7239ded411a0a41a2ff38b2d4fa82672ac9aa4ad92feb5f9c899f93ffb337ac04f0cdfed92c8760cae929cff189f6a020c8539b7394c576c020c010797f8e5ba3c679c8cde187006e9ba982575547d9ebf71051b8bde967f244360b509ab19aa083467d65788dc5307b2ef7405a21f468db66c8d29c4d13894390d5489dcada74339fe60937855c01bf66fec10415e61f26535ec76c262d18735bb9d0efe36dd0e5d416210b61ac26c7317e5787427d4117d79bd485e43c921c2f4e2ea6ce4b6d9d9e3b4aa6d26ab9dc1fa8ea24b355ea1b9d7700e5e3c703e0249fbb723e6d344d0bd7fe08a92fb263bacc4f728fa415c5dcef627a04271ad573dc6c71e47c6171007624258ef18c7cc614e94ccf4f3f712834626739814143b09e0f3189a610bf88748e4cf7f7ef6ca369ec43f33d621da94d95f16a4edcc35b7842e769da13f0d19d3695136b8304f1ba40dd107c12a6dc9c3f431fb06a5200e84d2bca2708039c04627bd07fc3768ec5296afe10d955b56c96eb9c69543ab2be18c5e23b5e81b221f7c508b7848a7148fe14e970ee9a6f5244e2b22dad7de9061d5a10c3fa339a6952aba4a90098abc5c52028f6e0c1d66cbf7f0948c3dc16a435891ca3e2955cea7c80723b4fda752e0e57b0129a085f595d84b33b2ebb2f7f1182df8b6714e41f94ff7a3983940847acbea67a7a5f44465c996eeb98314dfe1775601618ddd49bbe4ac51b6ef144e7359cc408949042138bf5239bef427aa71a2021980274458be8d9ef2436eecde5229cdec628fce431d892b5cf3c81c4dd31ff773cb10b6a19835ec87325d3b680fb215575102cf43655d18aec9b639f1e77fd5f79e9e52c11a9d2b469453c0848e47a2a66e58e0204d2a09cf638eea0739360460095272b88836b700df4dadac7e332283f251f8f2073a88655409e7ac1d4049c6902f687f9dcd09b060ffcb53e9e0c7b2437aca9d7d4ffc2284c2f0158157c95355a612744a2cdb766be83d089e027f9d9b9bedda5732cf2967429a3c81f7cd253097cc3bf3d37168ba9369a03d2a5249e835075456dd0761abad85c076c2a4c4efb078f9a1854ee35beedf2ad2ab377ed9b8977b6a25bb77843ef814aef6fe757a09e7ca727579c30efff73c8d24317142b6c20d3b94db749187e5a9f3be0000c9e10ae593b3457ce11684644456fa41258238f512e522518b5f38af507d718497c73a8ae6c460912483cf62785a35e399d28c45f0265cf128ac5eb4cd65187bdec39c9acc5596bb2f6bbc4177940cd17fc002b15e7bb76c0c3a9fa6806e6561d0b5cc096d2d36dc4522fa515a2e3061e3495182aafafb743945132336dd57bbf9fa5224794533759598c980208e027f1aacc561fadc8523e7e05e04740bd61338fce81e685ab8db1cdfe9006d95aaa20f0b74ff727e08080aa9fc9a1a4c47f4dfabc8412288a6f3eff0b0b46fefaa15e15af4e8e08cf17938845689ed84184cc0b320e20cf7c1f7f6f6894bd022cdf64a893cce602396f979fec51f056e323e505d769443b43576b5e5ad0790b707406c1eb053c5a38a6a49e57fa17f1ce7780a0ae6ccef2272a3fddb61e7eae0c8ef4e63f2e6a41c8b9abaf23545f47e9732b9fd3414ca36e87ce3d99c03c98adeb10b9f84401009447d2c32ed4f79d870f43d8728d666a2fee0527a98f5fb68d296aff90631a8de842a9cfc2792100cb883437317e18abcad7bd825c31f78cdf57a6d925dd857c62470f2209c4fdf121d8cd4b81637ca986bd6a934382bdb06e2c5a3a44d71007d3fb5ff50b408648b26ddcae2d85dec07436e4ae05fe0a3d840b224f059db072a83529a45d424b1149ef7f136f08f10f41bc3c08768a698261cc5e294bb1ec5432312695bf44ed00e7d063cf5a3ef11722a07ffce350c7878d9c77bd48ce1b4507196bfa945125ae2365fa888d4799f3bf24643c2455b5924bf281c7bf98c8ed7980f8e273cf5a97de9d30cdc1a441547e544a7375578099257fc96454b94e86143215343b03abd692a4beac5e5bf929278edb28a37eac8365f1c04652678e50d8112e59c7d0170d1d2f041482dd8c9a073b3a53a4d3d17550e41469916f4b65e1c9a850b9a8a93e55a9fd7e657c0eac95baa504d77740dcb0b44a28f9265f040f2c0243cd7f8fe9fbecb27803f27f1c4377a78a96b37876c43a2ce05067f7cd971de200aad611322149f421eb2f999f70af61f8d6bd3381f6a2e6b7d4e41d8b562714960a3148940383e8954e147b0437e5f90db2cf97d10b0abe14084a27e6672393258a6cf70159059a56e5b4d48006ebb9562685852d589942d4779d91dbac09434825063a70c806fccae2f07e199ea4f8daf030d79867bb7d080cf0716aece644af8f8a3898f6add344e862f48cf9a1dcd43819bd7130eabf4d86c5081a3a244b9c63e4140d937d8914158e9b4986244f233fe7079e0a860481e7c0e42b30cba46f43e72c899108f0f916ca225cf6c4eb9f98402e2a779792f6b6f7c9433e5104b6cccb258885176e6c5005f3615fdffa8b0711c15d6beb1eacf4a035fde116ed386ecd99d48733d20a166396ee9a101c2029220e7228fce1a5a08780245134a6bfc0c9ad95598e82e7d749833e4e7575fa92d1549cadd134c1d597adf5709bcf6233673e34c52855638d49cc89129aae8add126ffaf55d0419fdf4ef9adb239bf8464ff425006a4e05dd29c80e608860962c2ac15aaa07593fd215286e164bbdb811524e84e8df3c56f5a5aa71e7c14407c2b47e9fab2dc0a67d939037baa056feb95300a7724426d6227bd5d03f57bbf629f1f21909334971875e89027c276a5eb68f50d91afdaee43eca957ea838fee798188a2d7d91927f2827cb469eb13f3499d78d504d71c67261e48f2d18538eadd90266d5b70d0febe3cceae7e39656a229e0dbe49c2f13c93ce8278db4e8c561503fd454a158c07f6056096a7bdeb3c0b3c89ce541e60b976ca8251902e0e4969b8ae75804433b6c97d9e01bc5c2387d8cba3ec63a35f677b078cc27ddd19880ed3314f68ada8e7248ab4079396ec20b51c189a07e381149fc9cd4f4aefabfb955831fc657020e6da63fec37cae2e199e0abff1bc3eba4ce3956857feb1bd64a8f6520cbe8f07a4917b102302ad81f3e55bad0da5af40d2d5ed437a2fca7d377261cb57d8c4ea2180d2d2a95a78421d136ca543a26d3c85d4e03f0f7a68937a4f1265b4bb2217f904b4b4d78101acc51b29609313f95986ad9fb8e91fa6ad2c227ce7eab02ad670ab388c85793709aa37e43ecf7262b2d565b04f35a7976c8635bb72ad8001bc9389218355454c8c412d40a412eb730ad2af362c5acd976e85c057c8b8449aba921bf14304dd5120bd7b992636ec4d4a91195dc50ee1bf04dda782738bccf0bddc5bdddeffb3241a549771cf8bcdb42d29830b9e8a8fd07e4349158cb93f75a05b5081121adc56b82b36aac9e6f95732549e5ed95431fe941a3796f11b3763ca2ca2b047d1a80b0e326ca4e4046fd0925f02b7bc56547383b6c5a0b444b59b12ea4612b250841503d1a8e54fb0878b971336e1dff326ebfa25a4696f4d15e1106d86564593059c18bad35fde830c1e201fcf28ee2bd22d5773c1f656cc0c2ccf14bc28cb2c4f60c21f4d1e6b788094a3bcab1d6e0953598d1645f59ccd81afef7310638fa6b5127e9afc504cff86343b1b3fa3cd3b372589cdd4464eee3fab575c115defa2174e203a64c214a3621b786459bb103bb76e3242f34a454f1f425d1a29361fa9debfdfb3eb94e9d2c511d71583b84c274bd5ddeb6094063e05622aa3cde4edd43fe3427b1ef0013daff4237ed2a8780cc3c97519ce8d34098450ee76645f4e3fe73b848cd496510c3fd66e65bd7cb39ded5f8cbdae92635845a1ed70f31315cf55612b8c3c8837bcbfa4ad5dba0894da744c2f8e7203aceabb30c4ce726216d756d2d5d023aa0995b0cbbbf2592f82fff2370bc173b86e097fa3fbd9966255f52e931a015e003033ffac43f60a6ecb3b576d4e54f2a7ac602228d4af6fef48e2e46a881710541cc769adfb662e90468515ea2bb496caf4fa319874dbc43d220e22b5c92afcab37162808065fe4279c313e08108b4b8057b2e8528790932fb103a9e0aaee64364a7417009aea7e56bdd4121124363cdf5ead672ded559f31e259e9ac083cc7391233d1c1e4a33e477814c60e63bd8a7761fb8ef28a93497d89517b40304ff7714ac4c80420ac7afc4b2835151422655fb245f4a81fd07fcc2c6cf5fff9ac54d840b263abbbcda93015884df708e2a098c0f4f03e7966f9a2851d6d14e0a360ef60b61eeaf10ca12f5813dae8d267d037753b2dad9fd6123107fde644de73a2f8ef1ebd30f8fb1617dc6c470353062db5b01cdcbccf122af2e23e85afef4e2e4d6535cb8e366e1a029bf1b2ff7b30dbc6846e60d027d97a933bd3a39365e716ddb6087f49c331dec374adaefc5f65bdb98a295d9ccee8a90f79a23b6354c0dd90e7a8dc8659914759682ff0cf1be09fc363f6a7b9592ceaea1f617af00122f703cd526290908139a9ae72acd64bba0e7b27b3a4d3ef79ca025b145fce459dfba6db5cd85101206e9fd7e5e4501d295c3466d48d97216726fe9ab95dc3fd5a6cf683abe61d6cb49da7229da71cb258b0010d28f971be6aa8faf2d3105eb47d23754599efc2aa42ef4fdf9f2ea65903b5f4731c275991ac62e5eecb7dfe25f4e061c09dc28ede150be47c3e155a43730b76b8b81a3cd58daad0f6477aef75de66ec5ae6f70b0bd477acf92025857cd2422754eef356ec38f9fe1973f4b8122597c88d9ae6c6990cb991fdc9b99ee9c32038fb67b2724ffcf49741a8f5a80a762bead016c18fbf3cbdca8a14a1eb35d80851068a8cf006bcb18303810602f4e2b94e4624459597b3fafa6955241b7f47246346b5fa8053bb10bc2c3b78fe19f7b08b61ea5cb210651427b89b319210bbfa7db14d6fbd03eb6429d89139034524d3cd51b8b2d8a4e6b3eee8339638c63b702faa455c94ac76e289271382b0390865ba5b1e6a45895f9d58854cbfd19d4a1152b90ee8012c80d05626f67390d4e6ac65a5bec2055cfbb414857dd8809829647829360689ee191c1c65a411375ff16e0d32b9536d5afa67f7b3540355df09c8c9a765b875d2f32ef3c9fc1d1bf526813f8e5364688bdaf7a1e0694e0a6996fc673b598685da77f0ce49cbffceb4a81c929dab3edace087d59897575f3f6e8ac81e18a2e4f76c2262c5aa31a3401bd1b70298a5a41f89eb590af9477d1630822bea91b81d7d20fe0538d38c18645e7bfc055ef4da36d76dd65f3379c02c834db557e52a3b5d1a103a58520ea21b3c3c048bf3d5ba045135a331e05f544b264785f7d24e3fe659aec84b784fb57146befc5032be0735540f0f57247aab43cb77dba4f79cf04ae7127c54b8e626019f2d62676d7559254aef36bf5ae5d048b10ffb53b0a8ac6e711f2490ed816090e8053e2688b2bcdf166f93c8890f24b6f5b2089f0e816719cc1eac1d5a74923c498cc68d9da05e4426a5e62414fb2838a8a828219d63a2dfeb1686c77584f371848109b4743a911aabf92334e5dc43e5077e17db90c0edc0851540bd650a2a6ba80a621e24ec7f83a04c9698b73218d8a656d59086bdb8705d84b992202ba816ac03ea54d14e7ae635edcd479265e31b7a0417ee34203ea41e7690e0ca81efaaee8b2add5ebadaeac8769aa0e32c742b8d3a5a0c828d534f73b4fb8b3909a4aedc87d32a0dba489e5d5bdcf2135d8fe3694716a279e5ac740937aa001f03cc0ff7ccc6e7fd8d9d963bdb19bf74c0997d11a7c2bf4025fa44167576e13b47a616ca49682eef055ae895e8230d8fee3b022c4d136ab0ce48b04d0fdbda6f0f613545ad1c240be66b1ecd7f089043d0380986b175f8fe11cac7a9b4811aabd97820803a14ea6c5c647d97eeaa7b2fb965676ba6c6b6de649868e175b442cb7246b6155bbd878760e516423b68eed0dfdd0802f59a7832f7209a979f07a47b9f5ca16dca39ac227cc5b7c55ea04d721f9401bfdb29f8f1573d681bb1816958a7b78799ae386b2867c69090511050c198b699ab41de28e8ee6a141b5064a7a8f01697d38302a8b4c9b4e80bdbd16a04d6285e945b13c55464b845918da11610dc5f24cdf080d0d659d44bf24c82ce597dfd3b2fcba1011f44fbea5d3576e58595dcdffab91084dbca8860dd779f6683ce23f9537d84a4c7ffa36f1d92d05e85ebf501095fb191cb2a70f77a298f69f24679d31035e9d72c3a25a9ad05e6d16ccdc5bbab8d4d912a10c577c7c61c20f0018b1e0f4ed670dd6d58cfa5d4e5e986243514ea659491ebb308bd3dc2bad600b9db95d1c560c52007225df9c304ac8b906c19aceb535dc325e87524f0b2bcc7ab1dfd8b9239404616ca50b5d2c915c6914b3e027dd966213018dc81f688cdb33c3ebbbf6980369d7cf40c6240c71ed17af843a6273350b2e772e74eed63ecb12ffa1ca2354475d5625a327e50e6a3a1016d6345ccacafdb99f48ed8d14e590d824066288a3ca3bde645de2954f6f1b1fed2907641b2b6dfc954d872d91fd4d97dbed59ba9e1827434b4050cdbd412bf8879ad45a850e759b91a74075af4bc0146a11af3b3926c9b66f17bef1b82d93eb302235da27bbe98150382e261cac99a49f501f28302c336e63e5574b6b2db2358d92d45a3213a4324057841f813e6902ad7ef1f1bdfd10b29f8c5030f1961193fe39509d816571a546bb4fc8c7702f6ffe735214fccfbba5d0410dc82e5a8874a7bdf1b1a545a07dcd682a4284a688186d627f971ffa63b63ff00c8b8399474f02818ad7e9f43682e0c0a192f3f3c8896a2ae7767eeb72e9f2ee8aa555804e9835e097bc5581b3deeb90b02e3a1a5363fd54254c223b3b2ff2c8c4be18a2261a389ef5609f17163fb74ef716dd2c9815cb43ac2319a3081aaa26fcd6a504b5adaa64da04e96cec2985b97b8dee7332dd10020ad9582f4a5924efd43c4cfb28f2e3c07f840193751822cf881b405081d3a832d313a76274d5457722d1a8f3010fe14363821066c11a7a8cdb107eea8fbfec5d1150ed27a15c23228e93d03ed39ae8d3cd6aeda636ec7e40806e50442a85db440b8380b667d41a3d19f134715bfa3db164f28dc8c839607a88168c4c3facaf25683e12b43558c2cc0423aac8a834fd5bb4722b7d6f239b9ce65fe5e0c625ea9d0a1fda523c6449c4fb13db495f208777107c563043567964c71e613d54093809b365370889408e952ca71cd7224e437bc72089b76e6ad6d3787b6aff2a97d74f4faba43e1b409cfeade3bc01753b2fd682de3430866fee50370a477cac40404b5af7cc7077f046aab0cae3ae561019ccb252a6db3596452c67ec3b72f48b2502264b06dcaef6bb020db7a003363edebfb48c9d01f20a94ee8643710c24b5c544934b55c7ebb5e9a9f0abd4d49a6bfad34d1d3159c3d823e8358f13b84e464e29bc1017c685de09435753cbcdf7ee39244d3733dec248b2662fa3970852ad040452468a7c122e43beb779622ae8381e45dd15625521d54b7416f1213e76fb423955e4cd22da2dc8040a935a085c7425f2b5c98bff5c905000fdc126d960b61370e90c374e1ca18b69fc3707749be208b3d90a5c4380998f62aa919e59b6c5f3b3f9c4368620318243fd7ff2b483070146b9946ae0f7fbd114be0bcc40da8449919339ab28da9bd14376c96577a020b46aea2fe3d74107fceb80f2a2809b358d4444c01b1622bcf87c6be586905752309c60f37bd61495802694b7f8c580e0109c4d344bb0eb11da8bd7099b8338637dc64d1a39d2e475bb2bbe5ecc30fd3423a09099adaf6cc384ef166f78ca74be5d5d3ae1d9d66175864948e88319542102733b9d4b6c19fc677945058879a9a4c501ec335d9f01cf05b3c5441e608bac045a6503e79b293a9ddedbf406f780a1593a0bf5943b158c5dd930d57fefb7a1e5bbbb6ccd7fbd1c657abbcc2a7c06dc93ecaee34e9c3de2ffb10e916d5a5e3c770d15b0207472affb51905050f055da2f97f7277e0f0c42127661f4add0fffab851205b1c707a3ec60569e014ef0f559713ab399fed440e108490ee940b22334b6c39d55c552d75ec5f9bc35d453d44cef3fe1a1be0ec8f155302b228a5dc684e7e4b000be1856085aa7706ac4f086c95860d03a98bcccabe6a62066c3e6319e7c21211171da138bea6842cd5f40abf32edfd81a8c096ef52338461690e11b22944524c5409467b89b4b07fdd6793bf6cc2691675badfa4ce7fbc8f408c666fe06b968c7352c006360a50e12e206a393c9976a6e8f57ce79de8b840c7f002d75057b5b4b4a92d0e19d328609ee1e68e7ef839933e91436074b00db98f70edaf03d07c220625ab18f3a4eb12efe7b534ead601da72d91faa95670b6794e9e2639e0c3d4106ba1af8f89a32239a9ab628545c20491e27e95ad79def8abdc5be7c7f864b3ae814ceeb8e2bfef27a8b2ad1d3af21d99623e505cbb5478205821b38ca1d52103f31a1f2a3ca018d156b222cc894545dd0c7bf377d52e96ec3e4ec498bc3ddc10d448c1aeb69ca5cb269a8199144092c70dfd54145e4b33889bb34935630fbd36ed5ed86c9be93becf6fd93641f502d3b607e1f44b5cf41527b182d8bbdd37751dcbb2eae24f36b81fed4675155c7262bd5b28d61d816f84e1566f23027b092047d9ef87d7b5cbffc391d0ab02321986705a479bf7a4072f91e69682d4406e3966112d1f49fb449319c20e2e6748a47bbd8def0f8e2c28d0f5e1566718a40b49c79c7a65b5a06e7b8ab3c479e22e92ccc51afb09ce17a477b1239c917683f00f0aaa653ab5824ac168e77840792124e9e149feed2d7380a85ae33e7a015443b8828bf03039b290612c4f268d11644ed75bd27382cbf753f0ab57dda69c803ed4090c6d42757153e0937b6a897c879ed092112b0b7418d07cfa286bc55f913e1b3bf9a6df9b81d4ce6bcb43881ccf9b9d0662de3722647bef430eb1e92b627891215c362dbde3ef26ef8b11caa212055042bf1ebb36ed541ac27375f9d8b0c4114f58046af9a3a26bb5c5de326d97aae8baa9879bbacb9ebf01fbae4e9fab200c1f28713af40ae756a8776726bbc5fba9aa713ad2b50a704226143f0dc017929a005bafc20e75e0165c9a9090cc7242faf78ea8e126697d7b774bad56d4744ea1de2c8d9c2aab84a99379f7adb71d768e36a7559508d92fc58f1f37a7fe39ef78c61f47f8d5cb417796a9e241b08922a2987963fdf5fc26bc98a42ede818d55c21e95c197f4ce9c5825f3a9e36300ee88c9a4cf4ca16df466852975b5ebcc8f1c4405482399a00596890f3e8a86c8e3cd4c160a796f9e479941b879727490bd3f165f8f5c69b38193a32dc7074edc11f2a06a65070ed49d2f105c8ee54c5cabb1a226f0a2b1abf32c218947949f34df2ed34e940754df4c0fe3e2a0a5aa971eae8865219ffc37c8c60e89ed6356fe481d6750a2f6e93ad4640930a5290dbbe2828605589e8ae78d9e21ebe74f97ed584e4ae9f6b9f8b7620892f7b85c1a6f1d7e815283a724810a03d887ab6d66e9d9d4c1b101f0402a7f45317262e31e91fabc0e8eb76282d76e959dc70ff9a0e7ab81b1ad7f7f888adf7c4baf130c2e724c7d0b51a865dd88ea9c70ca06a3e7fab31927298e17b391f742be1c878a705767e13aee39e1a9af6c3cf73712be00740d5e966e18de101880800e5b6a3fb3c51708ad08078fb5baea8a17aba03176fb5ed01132763fa41d27a1e7eb05eebd678d02e6d13915c65a6c2dd0d57718e90f56a4798922788eb39035d9d9ca822d5da4b85f65c1b44022f52ef960fdca37c517c21550b6d0cffee2712719c3240b645c1675b9bca86493b87f24155fc52a4d6bfbcc98cba17a21c1e9544b0b7828498417f357a87395f63823c85e153e4c3d27b88300c0f4ce91ff8c837c3f040f956e6b950070e7035a5a927773a55dadf9a6ed71be0a9520bb314136d6af3254da07659935606082648751c4d002e018d74bab57b82119cef8cbf61ae6aad15af805bd85a10f6ab267a3432e974c6fdbe5d130b6e023e8ea56d5a870a25c33217265b4e6a9d95e839b18a5ab4847625eae092ab24873b602c88d4694fa1fba006e72faf755d2c10b6948fe2987c76abb83f0951ca64aaaf3f1982ab88867fce5a2a5ab70d54b4647c76bc051c11c45c3938a4d160a58e3d66e19fe36649294bea325f1faa8fd3f0e696443f503b137562a1fcdc6f345c296b576b90e406b2300333a253e1e77039bc41573c95759970fafd9b8c7cd3a350d3a59543f1390d4b91110589f31c10bb9343d05e9ef67ecd8261b47ca92facaa97bead1f33a46a2a215de01fe09693a69ced68a8ad8e5ebdc6f3bc00f9a3ba62744565c9727cdf474af4197e2efc1dc3b3aefb1da391ae4cda7878fd26c18772e808c635bbb95ef5872060fba69a335aa0f0e6cbcb19cfeb9723f5cccf05b6b999b2305b265f1b8a88624bbb171fd742de34409eac0944f17e6241bbb3dcd500350a88ed0de1b548ceb07124c34e8a7f7cf397b32583aad994e264920aebc83767ecb7b2ec4fa267981312c76f9ad51aca2f4f98199954fe1097d3d54f47b9bb895ae9c6d91c5f1eee4085732cf182abcec51be664c2c4d51ac52221fb13d6ab89ae9f56ae7466a015900d388324b5e3217afe66ca026b599be1d5f78a057a9ec89a2e6d27d0b84e50f496084f12316143d963176f34be4e54abb9192fba20ba8b17c00c78873abc55eaed1aef2bfb6385607b8c1c7836ccf8d466220bc1f8747fbc71fef45e262824222a44f1a497c6bb9e0a806763db0f991eac7f0ef29e4a33e544209f0ae50f56009f58057cc1be08fedfec5776b3cdfe7ad12b7cbb211af18b0bcbe343ae4814df3a6fe02413ea1d05f7f45f1106a79b32ef4ee918cc6684a63386b4c6877121718d0d3d365155d47cc1c5707f09df894c99cd88f73e697615d4d94c0fef8def3d83b528924112f5d6a52318da064b432224b19424c50438419a781a2cec83f94aefb6f9ac1aaec77d7f32c27dd6cac36bbcdad571cf63f4a0f1f4f14750fb6e3d67b68fb6c1b639e4526784dc1f648e6e1fc440cfd8d6d1a82ec0b59405d9b9241008a59be20a4c612f15c41640dcf64034d0a4798fc90b4f57ea792b98e086ef26c4ddb34b13c10abbd8fadaa08030a9848d7c2f1d6e43a74360cbe2a53b81d7d006b2776fa9f0b077759bd621350d6391dda726ba69d73bb42915e8111b3afe652cddc601b0526c44f821b0863ef7da2f187a07e1159d8c0641abba02b831357273bcb169728e47d59ca7e2658cf2b72e5c608acc3c35ac4db006844827229021d550e6261cae94e0535126b64591307e92d0f5b38f2ece236aeece033e04d56deb9ff31b93598087e3a4a3d7e5fcb1b804fd61f1d6226748c89257c61c4607b0580949d92dcf8db7ee650e1ec7144f5e33cbf301f310bd1734a4dfc13d59006e8668454c70d75bd1f0ba6044012ac1af4263e70a2f356b7779a572945ede955c9f601138ef79c00bc939c4954f532ae1124479fab999ac98e8efe08f383be1d7cc335ea443058c9ff5dc40db58c75ec540d7f5fda1ab0f6eed8828c90ff046eb800e687918320f5d33ad2cb28c83c46eeae3a456c94a0953c1f72e745a4a2799ff149876943f75b207b096c970dbc14d29aae2b69eb7450ab39758f3d42ef7013ee9ebfef4fb81e15c37265f45fc8ac1e0814257d5300cfcfc5d02acfc887f9089f534a2c07abc8d933b3e38c3538999b799b48a3af429bb4d3a413804259a984a90d4e2c22f82d4733b0240b084d84bc9075fceb50ea49e71d6c7b8f0082460e8a633e9da9419e846cbc09b5dc4bc853c266b00dfc1ec7e367e25ca62339cf72a2a126885b3cbac86deba4ee510e0985d64e3e6d4e06abf7e3768a6935fa2a3484d5838bc1dc249566c5cc836ce79665dfab4d54ab3fea23ee103245f4d91db977906bf0c714d4f0c9724523aa1d616a86d452c290f234938c9c1b44ae5330194bd9569fc7fded337e2ade88e3901a495fdf8d829f2febb4564515ceaef1e5129f1f65da712db0ac1b8d1e4199bd5e17200ddc6d9b42ca19691316eaae35c68f6eec3b372695040cfaf022e56f9b0ba11296b34f6c1cfc8637f6c3004dda57ff819282150828e41a3566381bb2c55db505e980f004264a3cd6dabfda5011702402fd409a09556d7acbc45f95b528ac6263113e8f031b27e119d8b4ed9e4176ffc48a94d8679f13c1abee1ee95ad418141a91287fca9279cef31c3acb36c1232badef64f788a850f4cd33db81b6cff83ac11d1ba9f908d52ed666de5605e1c538c5c0a2f3639ee8a72fecdf98a9a5dab14d7dc94e80662618fcd356706b6b5f3f072d0442d6bfca5cbcf5a997a351a1415b8b3dad8a2c7ff66a7a9f9ec273eff518d037d319a1fa6f69e6b25416cb0d325844b91f04d65acb21fedcbeb4067ef63b06cab949df03a1ad47e6bc27c63150d42dfae915f9a00d0afacf8d21bd0c7808473e8a57e9cd1a0140a6aef4dc2451bb99f4808329ebbf0387e47b239c679688505ace751c52b38096a7f5d78b55e63251712dec98f9e16ddcf7262453fefae8d1dc4e66ffae320c4dc3d55eaf9c41368e33fe5ac3e136ffa74913518da940f7f344f97c1378f6d4f1271b3e0f5cfb4d34268ee84c536230f1f78a42d20c8419f8323899273bee5907d6321ffaf47053b762c9d806d17e21c6844ee64c3d36fd4dfd55e26a298eca96319e1cd01e232360d87996a9080e9bf31ffb1ccfd3c7ee541fc126508fea40f817d66faac7f8b6c1c0e8058edd9b6bb9f51d20b6bfce070893c8ba64ad8a89c582e4ba1e7bfd8b99da9cdf4704d1b3ac045ec6baa4f183a517de8305114e5a606c4d11e29ff6882e29c7c320fd52a8929a44edc0041377fc7be702bbbfc62bdeb49c802d2f1cab881639fa51f65cab46728d22bd2abb37d339f66b019193907dbdff06b16706cec675b44710d625daba663ca3ebb1c1fb2b0829a14fcf22a59d8103c98fc68ce85ee6af0ef79f31041150cb31dce7d74f7ba9c9ac28d97226e9bb499cf27e367a6d81a879128a50ffafcd51f69c70d172bdc6c2dce4de709a98ec7ad45ec032644269062347d2f03889bc107414dce2b3b79f9799c3eb4522e1ce450603d904ce42c3f0280bbdeed56905687e1af1acbfce67a7e362e4e436b8e6ef8a64dfff733a01d16dfd7cc53e09dc066550f6a2e0045388f76f5369fbe0ca82aba93609d386fc72d306f89e49174b5041b723965b856b0a4faf48edb90abaad520ab7197525ba80ce4ffa8b82fcfe83d3e45448b7532f66c398f7c0a5e7fd0a4fdf16cce8a12a7a7fb10df8d8114942a54f4c92e2184fd1033fd487f27f2a112e91df83b2b90be625c633a8a3a647d1c8e61ba0e4e4596fbf0c48402322f781e150ac581007c3af5780010a26df931d6a45e3eb24b5a2ca8b77d1a16610c547fa3d366d6118d7b49ebae63c52404378172276334f43ebc5f5dec75133241e7b52e9a2939d5a94821503e2b5797fde0658b5600b43756cfbb6026ce7d5f018312406c26a946fe72a47242ff0150e076c3f12e7d658f0e68e1e253811772b90472427c57f81973ac8b633a80fc6ad6db6e3a6aac1d46d0d2de9a369b7408faae97bf7cb7ca1241edc9434f8fc909c066b4bea17194e6d9f38659ffa86114f4284838dfba7562384a302439bd62d2128b2716632849c34cfa875dfd96a7dba8e203a0ebcf1aeb7c756c692eaf6582a49a8d196f2f4be8106ed01743df4158d724c416426a58838f318ebabfaf51d69798ce31f58aea54b58cfce2dcc80f67031b63ffaf74d96f795297fd1293f2a818c8abab71df52e1dab311a46867a0122bbdd5c2010a81e46929440b462fec5758992d83a190d315d9508c6d18fd1198411277a04f3b478de2379528ccf177dd3c61f18d6296e2190a797c2d3c4a5ee6a7a7be815beef74c5789e099fad4f29abc54775f1894345ea0ea17e541274de6d3191945a3ddf39c26a049b92a1c3fefd673119f75b94f336ed695566ac4210582de08c6382f881f387c1db4ad7c86d978f1e93373fa467588732474700f9b697bb5e1fcffd9f8415c93e2f7e54a400d610228af2512ca5606b7677091bbe67d07fc911ff912676a2c7f9ebd37c46f397f0e031241993b6b44abc56272d51136a2e6b65859c03eb0e6287287e439d70abf8d0ead4e070d82dc80a195001cff7fc306ca4f6974efd9bd4823aa8c62bd6df89ff6455ce51194f675a625d72fdca4a6c402b2ac0986940c2fb5e5d1ff4e6cdb3dc1bd1057115fc6ee6b59243b007254592c97abacf136dcac3aebc8ed5cc0f8586d7d2a6bd29ea26e08ffdcc802ae33b1ccebad8aa8f5a9fee447ee8f51aea592c6c66258c3b6f9ca7b9658c7204af1e5665f02c294f6583d6675b654a41e1a6e2d2f81025561c752568c915277ca5730ac5612b402115ad59b7a2c7a28108d2a868b7747d9816a202b7eefc276c5fc8241b113c2d8cebbbe2bfb09c811b4e3f6e534a8d1f23c3d0a9954f733406435474265979e2ce0d785ce505d2e1a229ec809fca4b0b451727170f5aecaf34fa921e5c9646a1a711a9ef038cf0d88f74f6c5d04037f1447747b31b01c3390d543735ce693abe7ec1d3a942fe80f647c6fec396ea2d2b8117db310a37e3b096e2ec735b51fa0a182f69a1e3033bed57526799361e51732a777f6da74dba37216c59a27834c85e194a3422a39f0f269d45dc327e35db0449490866c5205734e3d4ab387eb7be61aa9377be3a7584d978247f67153767d6599cc9a4bffb7410b1919a27fc2bf8167fa74f8b8c398d7fa4355e32a99fc5941c8905e5eccf02a269836382f762b6ce28290eec36e748161a7f30e6e61195420e08d6ef3d59777e5e13fa7d1f27fe953ae194fe17e3ee88e8d733f7911e95e3eb7c9666a0d3ee573ef56bb016c7a8a19bd79dd1616e468d241e061f7d81dc97d5f8cf9db5afcdacda1e246dda78f08a1de623cba262b2ad6e4051b9435b75aecb1018763b08505991f0e0b487ddb400802f48f68f6d3e6165e91bf2b11f9070e5eb154d15c458313d88d62c4545e0ebeaa3fe7786cca86a315c22650cd67d0c1a5ed9ddedac80ac09ccab196f4fd8189d426c9b715d7271806dda583c43de1427e00bf9448e17dad93c50dbf280100d1cb476fbd9d271fddc253ab301e2330f3108dacd62185c2c7b16f3aee3039f41df6bab8a666bc790c496d92079ba5a5bab882f02976859d3637b6a4320bf7a174eee18141f55289a20cec0ad733be7338ce23aff23ce7fd4b35d29d2716f7a9ad2a57b2901d0cba9e6fb207cd0bb4bf76be4a19009374c58db99f1c14474bc4518f9eb352cc16e72ceda305dd18ff8479ec4bac3a4324caccab63cd9270e3f3211fa5b751240873b38cf1fc5fce79cd4e8832c0af13890c67e03bd6196d369095fc13f413561bb12a2296dd57841462a62b5da8deaaad4c4f7688fd49681eddb31e97514d7c77f422639e803621530273eeac198e97eacb4e4e96448345f7333ce058402a37d63f930fca83d8617ac3b048a9cebf522b85a0b95fbd92920dbe6fd2a804bddfd4fca4ee340198cf4ee46cbb06c2c27beee4c5765478d82751655a59d71b00734ec917f992554f07ebedf9aee08c514d67e8d0bcba267a1b7ca5581ff5d2c356aed5b49c45e2237c64428ea5a0a3154b7a4300a8a68f31779ed48994fad1b7395ec2bd3e8495d131d1396f90206123a18e04f1e6804bc04f63b0462c2f0f8de20d7ac727a65ec362e016d7b6a60c7f249a6fa83f0b915c92cceca2b7895e2a951ec37117439d71642b55de2bcf961fdf48b462bf63bffcd80a372c85d4b750c0c24c8409f2ae8c6829433d1b8a347b60a0bcb845b724a669567ad24a9c37d6b6daad4710e2b84d7b7563fffde14344002f62b4abe311b98afa618eda0863cc446efbc07e28db98eaf5d26d26cf848821e5900ae30ea515ecba99e4409cd2e0a29b5f6c4901672d592146deebc130fe3e0d7a04eb228276b15fe2f7fa83b2e23fb5777779534d87829f4a036334ae4d735b4cd410b875552d5f41478fcac587e323c75c07fc9b109e65ebbe04b5ef51bf0bacc79a7291fdb914bed8cc7b04d4e0585614fa845acd47613e6f32b0580125bd00ce1be501e4409bb2d5295954b196cebac40955ebcf25e5ce9850c446184d89532456c4fb6dd97b9df2a94fbe88e01f8a057ec6189bf9765cea27bf717fd59b1f961adb85b9abeba8bf65a89298246ebdf5278c0828d305154cba914b629f4a3962ffd896293f7fdb54d3539d0d03824b5729110ba9265f63ca279f129ca872301020342429dead2692ca924ad1a008f69afd1f505966b5c9771c3b92bae9e0422fe0bcf311a74ab9425f9b8e15931b8591be7afc2f1ad70f6c70a80f9011032691d1108765dc2e152c1bd4d9f576fb8610820ce3de3860a68f5bbcc24cdca5fd9b01d6bd3b947459ca44f593092a7f3568953a4e3626c5f191edf2b54544f01e4b15aacd7e2d388e78a558a41bd619b04990d6dcf613d7f587699ead61af690950e91a34f35c2b1980b82f3fbb5f686aad84820c3d079e967101770f8026786f3d0d1acaf6c5ea10b0e56d41738963e19d099c6c80d242ca578d451c4344ba8fc9ec8202caa74cdc26e5fce976228e7aadfd8ef9bb6fa70cb0989a365dda27082bd17cafe464b77c5b7f6f3aed495b45bedd795136328512c0576e699bc42721129e504708e803f552d9f7b787a03144fc3ae4290ab51850d16c8de4297b4fd8bf1a72f82cfef482791ad95d6d38784eeedc8debcda4c96c8288cce2c91228b2ffc27294978cf6ff59e8b56bd2e0e7fdc20f7d05e95c73e551c3fdd63ed4fa576baa114c3ccad09915ca040114f0e510eeb3c5dafca1670a0fbdbc106ec3a56eda99072d75395d118fdb1237129a62f0a16bdf3a1f0bf49e9b31dc6e9784ea1e827001e4397e541207e228ea09d1047017eb63027a504844ca174e597f561f34f3a237e547727ab79f886184ef3b47b070b99389737456e332e2565fdca74443bb9f55d9f5670669229b75d9910b9f913e149886456598f40b3697ad8eb6a73578a629e27c83d82a73e9cbb736bfcc486bc4f4aa52c0668547db3300aae37a4cd6520e4a7da304b9f27ab063d7a68b7170a25ff0e803f94bbd02f8a0d89c771566c4e66ee2e5602664eb3f3ff0c036f3d52c92079805d0c5f4dbe990a0cfc86eb6553731a1d500bea96d3ab76b203ee22d87bf6ee94dd30bcbb29f5aa5890731166cdf9f1dd58bb4600414a24f71505b0470fe1a9fa4a3eae76074b96a8d7aadc4093639244f0e095839068312afd829463b8598ac950843d349573cb33a4d0bd25ecb9d4b73014cfed4eb6f61d270c3bc24ffad828eec9514f2cd42717a6be49901824be12ece6dbb1153b87f3992257351f4f12f4378253d376b32905f88edbe13be5338fe8f50ca470fb20e4071cb281f4125274c1abcaf9ca376bf326c36e71b5c1c51853112e8958e3dd27a42edd6485db08342bc5b48795b2380e11a7c7d68bf8cff1fc8da85d90f6fe02b7bfc08cccd0c083f1ec0595ebedd5133c7f29e0c7bddd7fc8814e84380794778054f2636f04cc7f67c7ddb220238190aa0d859d290c9ded3749b6f5d6a74d26fb04cfca1528f9771a2d456326eca0908e99f907917987bd6646a7851b9b0b9c22eb573c246f9813587cea7fc82642d5aec48d48f297e5cd7cbba3c11363cd8a861028e012aa739b44b93350eb21da1a8940acb99cf87cd0f267ad1e4b3b2716777e9714f53e3deceed80eeb441381f4ac25ab7cd7622f13bf8763a40a12648fa9e7e5344c528b9fde86593e61acc17939480d02dfd85e09bbd4c8f22601dbacce5c1ee03a12544663371d9a16c0231caa75c9965c504d1e203d963746ade00920b063d58accddbad7bcb5032858cd7c21b92131c5e8882d341323de2d59b52a0eeb45b0d87379e39cb49f97441b1537633e37eeb4051a8bdc16154970b6e18c770e4577a3fc66705da643ca5b1a23cc00c86bb7898a91b276b77d30a72786b452255c1d3c5d277513488a2c08ced7ac779284b0b0c6c9fd79a6f7a3147884fe79e5ed31b15044b64d62aeca485256c580540e62602169906224e0eb044c778adb83759cb59a94439d95d81a2bece4a7ced3048ac522b3bf65b17a1689d456ed34f3f03947bf7cdde05d1583c3a1ac0ecddd2e1055c4c4861631a5a3963870cf476d818d18570961786684fc7b52bdf55755758df2c31defcf3ad749f2b3cb368f2e69e604bf1c9aa66cd57c1bc702343a05291a2542cb2c50a4fe87073bc6c3fa73ff8d797574783cf30efeaa85085b1218476029619e6616fe8134c1a4e7f4fe70ca5666ff8c6fe4220b3b4a604bb83d16023bc815eafa95962f77b4f98ae4245938e659ae64237d27fa9d191b0ed774aae1167c05cbae61119f9f66ace8f0ce5cd7d5d5d713aa3ce5c4798226b24281ebe65ab94132309827f8e1a61016814053c34af723a69dfadb1950e872dc5884e567a01a9cd92ea40b8b448b6b547770cc97e657aafc26550c48f2a162e2b4fa7aa1ee7035e92e494ff7aa3cd17c1ad3d067534acb2ff983b3bad0a426d197528449662543232420f26c76480faf89b0605c0ed87ab157e72185a36c90265918c6d0177ccb025e8c9b5ead165723e31439a5038636ba9950929ce11d7783d12a686f1fffab633685cbaf56e8078da14759929630588e000a72c02c7a7acaf41eccb1d0261e78efcf78b549ba9b3432cf117719c1fb5ad44665ff5142d582c64bce26dcfd83aab5422c769180ffd7f55ea593ada70607c746776571511bc8816f7ed2fbd56b665dd9f0b9b9a380ea54a625845b9d9eb55834418d001ba421e0014903ea6a40a3ca1d84f32a723bb5d5e9668bbc7a818b07ad70af724fb1b90ecf876cc8fc5a42577be3fd91a14f2abdf5d1d0dac6afa4e0f514ef1abac6a19a93833b4902254711dbe5edb4e7f4ae4251ec70fca8e1ee97c092c627ad1115cfaf19ebfa8f3b513cc8d7b19df70a40c17730d9d60a8fd75282fcfe80e368edeaa9065b45991a2fec1df8a164c919659033752f92088acf5f86a0768f0deb3c2c9734d05ab44ed1a06bb642a1679678ac4e4e3d8e8cd35d017bdc5a3244aed9fbee0782782fcc77d22f825b7165f60efafe5936d81709437a5701e9595c37504fa282226715ce6e13e56e934c6e343c5c724fe74a61308456e4b3b5d56433bf767f9dc7c1194d5c8adc22a4ef98bc6442c52ece722e2d66606431ce7a73e1574390cd2a42b5e5e9b509edf08855b3e7855b0d53d52d2f1672bb618e37e36664d8d57a1c94d6e7cd3f969c203ce3a7b718a69184764655c21b95da104cb3941e0174f6b79a61356651f97fb496f58de08be72f22f91db6f653a4be8ee25b468141ec0f43f9ce4a5507b9ada977401d553a8f9e0baf1c92844cbabf0e16b7ba813f48a167c4f652cb5bc66ea3a16dcc2be25d2d21866d0c1980aad8525e08c87a2b75e102f937248b801441913c64a7c26d5e514d59bdcce91be65187b354be8538041cad4d81e42ae0b0fc1dfb77078ed0e392847cfde648752b903d619fc6773aa7eeba30f8e34602eef5457006333b9fc74abe716c172e87f5842f89c5b76b682898404b96789e01d050b2553a67f4c9278e585d59bf891747ff37724412c7591d9162fd3bf617258a00ca7e3e99da0376b07b5ce4b19e42b255bd66ebc9338891d50c996b6dcd887553a24ed84270d8d45d9e43fa507716d5bfb389da25d671e5337d9bd4f3402fea9cbfc2a2f4b5ccd5836b7a02b79f888668349d27f29af1dc31e718142bcafc8e46f9ceaf2043676b4515ddd284d0ba7e1bfea2e910108ea10b077497967ed92a974e57cb4621a810728ead5e63b77d2cdc0469bba02ea11a4228d4672ff9d169cd6ff1eafc32e6c3b01fde17d8dc0da1fde98b069b3132d5172673e0c4b504434ec34f3909f23494b247a2d81b33ef6cc3993b2d1104ffa6a485d5191947070fdbbf7ea534c86f0628255060953aa3acb9a712fce12c17ffd43e12d35d8a43ea34fd638d7ccd08787933c6d0ce0d217110a27cf465afb11d7c56b00d213247ff26b0334e076203bf4f69b838520d4c319c25f8bd02529d7215797fde453d3e514e1fe846f8a032038f154c00fee862772b7bf9308ae971646708e2fde2692c87a5c0cf22994487236284e94451260aa47021c43bca0989c0bba5e249686b560373456eb31fba628236caa7b6e4b762909d9361309b1643c9caa180141b8cf4de16bd445f0b4bf49be9e88e0044578e813a289fba86c2fa461d8980cd0687237edda3fd81d12903a531ec1d44422206852a8d09b012ed1f6221af945a9d568dd7a03266cf6ea106731476500b55873e4c94fb7b52ad5083cb98c19fa9d464302d8da3c738ef03cb918a7652b1eb6eaf4a0236fcb461b5214f2585e199ce400021f2b9d04a4814c6846704e7f93a1759f4ab9e80c74084d6b8b509499f8e495f270b07a54f4810adf04e7607e87815daac261fc7cc7005b946a7bb10318ec7991d870cd9a195dbc727421f6598923efed7dba1b75c254f0381479e3fd967c2dd539a1e89f6ecc2a2c30195020e62cbd60f398f6e835927fef4e72586dc31435ed1c238ca2896efecb4045f2a331f71dbfc30dd28eabfb733b508b3218598df90dcf5145139a85a5745510fc5e8bb36ebd119ce69c577fe9765c1ed793f5e6821279d9ac785e726563096fd5b9c737656470921ae6458c323d4abbd2ff1a548b644d2bcfd4b535924d860dd8f08b2723711efc874dba9b68c7a1b9590e6c55a1875d44f3112b6b9c2e561c485e84debda2146167f892a6fb491d2c873e3d90f69be236fcd361381d4ac21fa6432321968993ffa128316e0ba9653e3dae4f7beb33c544f333f35990ed065cc0c2bfae2de48a405f34baec2d902b8aa5819064bf5567ac1506c29c44da4a5c8eee1f61078f73a9bc7d0d2910cf02a05a545f0126398587409fbf7fa2941abfbe722d007284accd01a897b8fb4b8534120c0f96a7bb3f88952d3348e50a54d6164fa3b567ebacd46f787b6780b319b32cc7d65119c0b445ac6ec3a7196172035915448dae98b097682e50159887d1768e67226078f37672ca41841466d67e9d5cb59fd335de9ae79be20effac863f93434ca73f403a71be0adb20b388f12e3102e9506f5494013f0f36fb4a3844dc1f3f00e6ecd6f912ad239142dc89eddeeed3dfc5bf76fd94974cf82682a1b9cc593bd459eea9358ed402385a394058e72617cb6cf7e2124e5f7645f88440b5aa0ed4bf23308abdb2df33a3b5131364d908c340074046d009778dbfb7bb1123565810bff2ab0ed1e3fdaf32e6a96d999b35019817c4a1de5e616e75d94dfed5b174b3ae1cb484d77b14fe06cc794555cf9413851c79a14bd7c8d16c63620e7ec1e406044ed148adf2dacaceadee3b4f860cc0819bc7ebb85a920b72a470494642b40793fbc5526f2fdbbba047818f3e0e4de27aa79379f2dfb4dba4bfab41e1a358c417b1d7223b7c595f5f68cb605d52b68d19ea7a4d32f33ef75f8f70d0d6eca0a6eb2cfd596a522d9a391ee0f1e7989953122c540f7aaffb0d95cade769e4849f45447c44cebf90ee98324dcf9329331d11432602c6703d9f41585413b5cea70e663e0aa2d0e4155677f9223f826cc9663ff87b8638dfcb824662656d220d8637bffbf39e8fa9ffb0be8539870959de62c053a91476b40db59cb42f6bcbc742a09b2c20c3500334c5bcc5e358c4d3d57c7d758aade7baa0f6162bcede6e45c637c1e4bb71622a5a77c3901791bebab268f5595230e628adcea2adffcdba4de195f151f3843f735ca50238c2a2510bca15cf99a65db8057527a0899b835b51d64760911c8c59c0aa3e9b28f87edb35e10a64c93fc988f620aa7c448cca267aa947f54f8daa3b52af6147ef3fb29a67b28973352d6a9f3a9e686fcf37ce8af17a4268501feb2fecad6fbba091d5ce2f6d025c19ec2b135b17ceb142ff95ba14d0877f94a1cc36577b87bf2e1936052405f204018187331d097764a158329007f7e5db5fba40d256f785a419ec1c26981f5735e7284d55ffd7d24eb44411f95a2d319027b458743f711291612eb34e37fecee908ef68f49c48c9406c8b851645b39f71c74282b5688149e216262e14d2b62df722de9df50f838f8053c34148d82ce1068ccb17dca6cabfae994913f21d13916e0bf68238412887c7db4a814a209be16a1efdaad076da61916d3bf3bd29284a9523de75cfa6a8fba3ce79d41682d008f370714c0c12c3ee7003b571da11e33b7c2f5069ea2a5a80160c1a115011d0bfda9a135843dc0a16f1c7ceaab8dd8b8239a5639d8959422439e721b35495fb2c1f391f0f70ca292604f473f85ae17993b6e9326567c2efb51c6cd606a27a709ef5f520289f6c7e33953d4855b374e834aa75f29585024198e21965bd838c61880f51ef7e527e1857fadcc3af103b8a2b4b7c8269374f7a909ade252c7b679cfa3dcc2b113a92313226e39758749143291bbcedae75c2b009ae338f548a95067524e0e2ac39a388cfaaa8dbb6e6d9fdadb85d9589e80b138f91652ced74485753a4f3000b07609502c81f7e3a9c72275f045825f75611e6820d051867371bd6aa37a796b80bf9dd59e3a4e08de9d813c5a66e4ae359c61713dedcb966e8231b431328a0fcd1fcc8a302603fc4be49a20034f14aef278efa6993dea42be594ea393f62e4b85285568adb494d006bc767a863b0bed9530a98819475ecc203dc896a4eabaa1a74d4f442be2f8f5c3e569bd396c19145043fa511bdfb86047f84b50e9860430d308179afaf3e8368f79c0b5f28bd260786a02084c4a8c7018af16e89c79ec6aafb04bc1ee493f68f614f5af7fb64b52ca8ba6172cc4814c89eac0f79139df82a26b5bba84751170b6d73e6b93023680534d097b101e432bfcb4c0d8e01442e5c5dd8da5179cda66a2bffcadb9f7ab446fe128b8e6bdcf798d39d73410e1024f53d0514f0680c3b51ec8626548aa5741c5deabfbbb3481bd9ccc9e12fbc67bdb3b783ba8299ee43556c03c19856ef71051679bee024eb71ae1448d5a42146568461107df8a54074b429f16272b3478d29489509300add7a34c168271f77a00cf924f7b3f6ace5a6a7a7b44d7cdb525b5aa1bde25c2941fefa0a484f91ec084aa2f538606aa44bb0e174fdede9bd678c97be5487a16e81fc9effe94d9525106bb88ac308242567e45b81791ca3c94aa0416b926bcd80466fc89f5087615e46ab5eb321aa73cbab59c66601af0a480eee51b4c14295566a18e66bb87bec628ce941f321562afe320ee131ea661eea330ff6c00b9648352a9d7035909f63dd6eb3508b005f0e9c91ab78f498cbd0eff3e33275cd7898616242a1cf00f5ea1dc9b0eadab6d4a4094789e3515c0456b5b72800369110a20b5e5b9dfb0025892a578b8673e6cedda8ce1a2a06e7c492cc365c95ab58bd85fa88b02065de9c70b68f1f42dfdc087409b0d2536dd97a63804d28059b801b42d736509b3dd108072602086410c5d3a789e6f0e1b9ed364559e0170fe8901c104aa23830bac854d7c09d103c1c639bf510133d244f0df584959a395e1d8161a33d6c7c8829d8123536195a08f700b54c5f28111481b9ee0b94ce92a0b102de8b9ee0394a810119746cd015e61582095f60633e07887f3fa8a9d52e96aac5aa5ae2e629478b02feb24fd058b8944e93336c25c9b093953ea1b39de8258a46028de65ec30cfcb502ff9d2dc2d64c79ae9b70b100fea806d360430bc20474b1bae4320aba8417508bd7fa4af41cdc452f454d8fa4da11b4aef44730ddc83ad0ba02438d9e6c3e57c79175ce2befe5a771dd3164445d8c322edcad563b03f47387e9ac3e78de8d48671965b56fcd7af01e12a295f5ae1eb8df1cf22e981ef22a877459c84c80dac4d71bace5331d8f00fd381ff53a6586647c55b4fa93bd46a495cef7f14a0ef113482308027d83b3631695810b4332957f01fe95c728fae1e4e901920b8b8531f774ab67d04ebb1ea8b82be5367f67dcb1577ae652d06d74257f910e53ebd10db934d03d946ba73e545f8c5578ca2600741402ef8f1c60ed8908249249d66b38b57cd4d0be3e54c19fbecd86e01cac18fd65e70096492e1fc32eddd4e618b70270cd30cc07b1bd53906ceca6eb0f620006c8574594f8374e52d0024c786b60e70211ddff06385c99fd92d0e73218ffc344d254d273eef55d4f4b4d2f24037b12a1f8d27c7d6eafa68ce40cbc9ce0527b2f9e862230d3cee2fdfc47e2f40f99dc98e55df85f7b47f55a59c5c40e68cf122ceef9f92066b5d705b19c919a60d4b84f03e59515d27c645cec8ebc2d717fb0abecaa097808ec4bcb36a89abb5ec43d45429ec3798891c29889ba959de55c89968892ba0ada58be79d9cb0af6a12ed95e8cb2bca482bdd579e67551d4be48434853d111a5062e82bd63ba723c116fb9135d1f3c167699160afee01bb6f3f28cacb9ed43d4697beef85f04e15edd2bd3b7e06f381c5b2f350dd34b4f1e188ef98837e9a3f6201795775365a4cabfde020bf5a0b752c1ff1b07dc2bad3b907825fb5d2447944b3d5bb80d63216c93114f8d8cec97c7c49caa3423fbca3a2708ea8bc36c384fef8b850f15e3e91bad54f28cd7168773eb25ff7957f2348de662ffc8ec9e7f7688b28908b60d62df6950c72054f54be4ec24188012ddd8c669214c18684f617a67fae42f3d522f967e9b0af06b7c04dd76434abe8ce52cc151ddaf75fa811d43ca623634be9f432e4e84c73d6ee02272f4c0c9c4498c138776bbed365a84cf9ea129b46c858e95799db44a314987b61b65f62db40663405a3cb4f593bbea09cffa5165e7ed318406ce5661478c72ce879d845a3f08c717f44a8bf4f465935478467e0d0b4ce30224267425a19a4e44025986d7a5fa2ec0e88eb6a035894b2c9881ca6cb620a966ac62639d1b922f3143db4515308317fa1fb5ebe38c10a312e7b8b2c918aca71c3c71d47ddc199378e7623c7fce0e141c3c55b03efb28547aa2101bcaa258cb17e2a0ac6ab70961c9f2fff8321bae35badb5f1aab24f7c924c010dadc1e5ce778f12f8335b5b7eaf97da62c1d5364ff53d039055ffa8d8503b1c18de4b56309600bef2a29cab20f6d301c84853c8683eae354bc53ae9eaa12e219bab5e5d2fd6aea690769bcbb0505213b58df6baf554f146f45bcd6562ae42d83d5b1f8256ea620e828797e3a9f3917207b2259ab8970a1c76b75b8d80241de43f7afd2c922d1039af16f6269781965426c76d6d5b05e643ec496ad88fcb5e14a0e222516ba0349be4bfdb0939186fbf6d5772a5f396be19e2fc91bdb03bfa0e7b1741b798d3089b4e8162d4dafb0938e9f91543ac9dcde1b996dec08e2dfb3cece7deaf079269316b12f3bd1c2ef9615e58f8d459e95c2c470be38eb83ea0fa6f8402eb00fcc4e756a987afdccc38bc7b7de067d770873487f7e7687d53d2431ea74a5e56e84d48c61a2fe0d719533c478fdee7971ed2ee7984af827c704f36995308ad02104068a4b645b742c53386c3b95c66f2d0aa49474f47dc67c23a97390c425467210f3b7507a8af39bc0f0cd28263dd40d4c1a4622a6955c63ab07fbea634dec79201e1649b11f120e908aa446d860dde4e4b66f46806589270ad2bdac7bf7eff1c2cf854eb36268550951a408c83768ec24faf2336a23c4b9ecd039be28160389cb6cb33f3f615a65f37a141f40bd66646ed7285ad021d88297c39aa12e24d9b3122c1e450e244748d781951a96179feba744912562b213a3633eb2d28698bb8057407398a605d2c34c294df4d21696877bdf3e2c5f6b19e5a30958565c6f695eae62e15ac1a8249a7b5f1ca09d09779db1bd6f642b913cfc45793dd45550c4656700b5e48526ad34b3032457c6e2bd7eeeaa7ab557f971ac0604b8cbbe310ab59b5c94fda5a1583ac51e4b6dcdd2c14a29f27fb24a53a79a97e86bcdccfb11a5bcabe7e3c1b3e12b6ab95296719b7c91dbc8eb903ac99f56165710176203e560c900ba314d0d963208fda2a9d2873bb83eb1fd154bc3f2f96197530f4dc8fd7085d86a390e18f749f6735ce877517b74aeb96876a93c7f3aa03bcf1f140d10606d77e9ac0ba3da6d236ef03e9bb278480b8460ab9a2e22538c5b13b71f7c4c04283ad2a604774aeaa16cf5420cab749e1b4a950ce1ce8f87cb4934b576f183e63ebba1aceeab0b72f59fc16eccaa0a0c950a3ec77b3f7ecff82b04619155002467fa9d232eac4242990d111c56b309f8e248fc924b9bb798677af6e8f0ced25320e930ca00691b53a40f1f685f019e91c69f5698c5e48a3c5cd2149f51c7e5d8d1e949c44a74a27f3191285527d5d88eea696307d3eb4dfaa153d872ee39e08336e1aae09eb68c2f0283866c2dfb4e02d91356a2c08d9867cee252ee341989d60d3cf5ab9b059554a6ccbf443cdd64c26729577ab2bf704d672f58a69f37ebb969829303a7a7c4bbf88a2a99d3fd9e12d999fbfad932362a5ed644ba10c512b3d7a4c45161d75358ec63020d3c11d146971d520fccde8bb9d7ec812293f88f60f56e062e5e8ca8946f8b2f779ce3643c4bff9945e2ad1cb18496e3fd5acd838c8a9b4f3c2c43ecdb1d2905d8b6973a6564d6696a4c8dc6c4d950ca1a6ddd512eb9b819ad42f83f9c772363ccfee4967eddbb256790f0602d778450a1501adab9ebe331841740de0554f54535086d834406da348fa869e141c898c8c7b86c7bf95dbd7502166223f78fd10f7ce20c1fb4c8a9fe36d06e1b1833624cd2bb032bcc838ffb7419a847f14163e4529358482d9838993bf2090a478a926eac997a98fb1a5233a89973305a58e873f024d83992e0e0e679162a6bbe193d265f7e5f85d639da5175a5d08c9fc07a8ba524c9793e57516e0fc58d7b73757fb43a0ed0ad0a07cebaad9e814a8e54357090494c6cabf3368f8824ccd03c7d181aaa096146c2132a90de3ebebe51e13843315cdaaa4b9305dfb5287fb5c78d430c6314b5fbddfbd53f8a5f8ec53c388e33e2d0c762d9f72de127fb696487457c5c9a7bc9e89d63f7a46e8b88ef2ef1aecac8aed0fa4254aa2714a915b25a69cb4c6c48e9307762f7b941063a8cab96a8462355296d120d02d1106b34bfc9cb43eeeb8dc3d23ff7d7d6591dc2951687cdac099970089f8960367592bdb1067b6db4569dec7c7dae8e84e8af97fb750e9c7abf245dca100484a146ef782e8cf0e143d10c030e77cac3d1e55957372e9754bb7e1220c858eb9f7be5becdb97536e988cdd33036f0801495c4ab76b70480e2a06fa1af007a1325eacd685f96295d6f8407057b738893ac62b0ebfee350122f37e0770895c9c301879e8df77e9e43fde59030247eaaba3bb0da829b469332e761b154abb374d320f67da131c5980784bd2dd9c29a6ac0f0b56f3f67c09030dfbcc1b7ca04fb7889df9468e4ffd85a34cd617daa10f047ba74ee6daeb7eab209f1bfd29041c28f701f0755fa90e476da681588ba08e7e934e1ea9ac1c19182d1a44a34fc30e7450f30c3c90259ccd0bd9341057a4e300b0c9b4502c51af4355600feee56de7869ef7e4ebfd38ddb184e2585cde2390924a192ba8795d98e60c4ae5d85b4a77595b1cf372dd133c30521aa6b0bdc4bc7a05b720896ee260a18ac968e0ceb46bfbae48d4fcdf8913426d625856055eecd761d64dad312ad28100d6d923fd4d1bbf3170628aabc608674b074750afd46ae89fe2bd4ade48d2bf2c2336e15f96e4f5fa9fd428289bb504ec7f0f303efc9aa3ddf8c57a07bba709c5be8787cd0795400be0505251f79939c56b49b2bbdd373f9258df5f390220577765088b260590649ebe3ab1d013e88e87f217df4082a2d228f63ba493fb1ca1b22370a4d05b3c77703fc551dd5d7db2519481d57a74d805103958716ae1b84be0bc3f35a292715c52f61ea6d496ad84f2e23feee7540b33291255f62478871f857276c84409225258d8086ff24ebce512ffae497c13bc434ce9936a23c024e6e1b9c8260db6baf05f8efd7d1a77b53a0250d7a000ee95b940e13424ef46ba9a31c4ee566e08948c3041495894d3deaf852120f47e8702fe4958a6803e1dc1163b70454d0f87c8b5e8ceaab44d6a6f3b545391436ac9c66af9d217536bcce1e7eebc18e188d6fa4cddaa7e5fd3e76a960bab530eb3e070d608c7f9c672de326abd9f08f703aefee0a8e5eee483a87772303b841bea9161dfeee32156e8e558f5eb24e8a87bb48f4cda29a0663cc0909b4f0e1d4d114cb94e99f369cb17090901777651aa78dbd247425fc3045db01988ad431c1bb4b1539ec896767e8339ed148beec234f6e0a9f21ff05a99a8d7743f8db7beee77e4e801f26e972aa731922d2dc80e778eebdc83aba828000cfe384525d296ccd0e19eb237f1b087884d4d03f04e2db1af93cf5dd093506870534d3e8a245b5700402da7d86ed7c724c73cecef4b8f8e2deeb5b36c409c4ee2cd5623da43e7f1e478b6591f6dc0652697561928839890fa265c35dd680d1973efd317e1be1b41c9c6313ebc7b2159038d5a6f7a7a3a8b1df601454eedccfcc8b5794074a757215106871b2d308052e02facd5bbe2cbaa3549d1871dfbad7376e3d84e332808cac5d87e785a8789047eb39738c7998b4c8f7dbdd968f851c523983fc90dd393fa94b4bc7e289a771d8a73ee18352a983a10f7bbbe6e5079f3fc2121d446c1b741f7e64a0f57c2ec6823c48e92a9c2444c4024dfd18a009b7e442d6250508546c57d278853820a9e84f689479b48e34c3c46c9e8e2c4e36681235edf5aae8f3393bfc5d89e2d2f93209bc0f53249aef69d141b722350a25b7f098ea4ef4155ccdbdecb4094a572bdd98d5be06a77ea0db1cde55671916de8e0fdc6276701806b3449adb089ecf17fb374100e16c15c1e21e8ddc8aac04916e3c30a2d18b5999cf917995bb4e776341ad1da4c843006529b6c682fefaa1d05b0ab6e39fded995f8723271024baa8925947a7dcce83440919ad01b5bee77557b74b1d30bda7314a16d072106bf0e97ade6d5b5f4c7cc2c718b81df463b262129937e5b8badfb6a3ce35df2c21a9ab8c6176dcce031f2547b54b61ef31387cb7ff12f525ce3581b6197249e8c3043323067ed36a24435a5547b9631dc01b7517f8ae5f433acebb053e74c2387ee96bc64adeaa1e42c8c8eb019ed0ef9417ba5544836a780977c745463865b5001b6c7b029f9cb5aad8e384a4d1c002f2ee8a265fcb7d93d354d7d44594e68cfd4b5e53b8cb6ec9d7389f829ca333e269750be1ef5b3c6305a91d2b3f74d1a8da69d144d8b3dfc0675bd300c90cf87b6f0c43622a7312255887c5b357740543e947892db7054cdc8a57c708da55990fa50d98f64e685c190b976cf3c02fd1758278ee6c61c4821e1f29dc657c6ad2340bb7192508307f15608a3daa88c758a6102b4faefe0543f0f4eaaadeff8fb24bb0d8d83891acdb4914dec566d3d108e67ee7e64770576ed4d7c07f203450a2d419336a353e8ccfbc81c55f67f41fa1b86444956f05ab7a303e53391b74f083188fb4bbc2088beff935906c2a0eb94dee66aa41ed52b38df17c24b1efa11f072debc0c01f1d5e814234cff120be8e84b21c38979bd2bbb3430b16a0f27392e5e1d87d129087995e70f78584465847d1a9dddabdb3af8a29d932b7bb6b8e79f91bd00e74638f12d1e4154e00983b8228f19e66bded89b7460a4a2ece6fc9741edab2c796afc158787f88aaff7ed3456419d2fa3a562edf7383248502a07caab60f452f377bb6ed60ca16386bc21194f0512be226f98ab6cf186bc842d6591b8e5eaba8b795f3c5b7c5952eb02d6d4b2cf9a21fbb36964913d37686d75325e2a32677287d9285e9586d0c037261d3766ecf7378ed45144410168ba5d70bee9ae9809e747a04613994330ca8b2d99894647446d42dddf936cf300e6fbf4d209b49df73bf983406fcd283c1fb102961b1cbc407a52c98600709f31420db8bab8800956e03c756053a516189d9150886a49b01c998c32d438fdf080b8ea7103e1f91515ffd20326e3b155ee4a9571f04bac5370188f5c259e5673830c67c746be9c85e636b7a82ccb2d01923268405b2d49d3ac4f921021586390f2aa75cf1a3add8e89b559b752eda28e9f9f6760f53f5608e9e8ad62b36d55ef4564ed9978815b4d8d20968523d508bd84071cecf8e4480bc80e8c2a61a1e39ed727b0179b4f022aea3f6fd60dbf7cd692124cf8aa25a27049a7e927f558c2ad71b7244a5d93f61900b53c8292cf95e2cce430b6bd5c86f3e9f4cc212632f23ed39788550a4e4134991209b76d482542951099db4bca1e638ae70eb4f062345ffbcb6bdda676b72a66844031a6fc90214bca05472e6f60dc4f0c369ea4901358b76a60464ba1cf332a6d8d36f314e2f29b7432deb2bffe67c006121390c4701e36b2f969d6df4fa17a6c8601fe6c615480254c69f794835320baf470a42244bcd105943a9c404caf0ecf058adaee0a2ff96dd966868867942caa9394bb87468b159ca5e321f4fd8450f379c1ec56cc942c1dae77f1d2e36e1240e1fdd8bec644080f1b140c10d1a4d647f49a6dad4ce2766e782b9ea96e42c5f5b3d020345883a354b3c8dc8c2b06a0573016ccb067200e439bf2995f16597477a73000b1d7e3f50a6acb5a071603e4d37478eee3319935effa57be8da5a5aabfeb2a7897cae4a1e348c7109744d5f39071b89b81169fca60c8709c3c8fa31710cc855a7ab4b80acc097fdab0a962ef8625ad063c726715a28926b26b541a20f04410e57d12e58c602677f406caf0da7c815469f35d896b1e89a77e5e614b1f4ee3609e2c324d059063fe968aae999a5fd0899bc0ce46d3c9d35dcf4c237bea696f9d326db4a136eae9698b1feaf66e691323061dedf51e50427fa147c42e6f628e677d559a8289b42e3f1a08a1c61e560d1ce42635b38eaccbc6a93837f20c088064a0d3798046eed585f086492bed201c1ed4a886e607097d1e9e4b45b494646a13cc10bbc8ea7afafe4589f48ae8a87ecdaf68113f6f609eeae9de15e271dfc3f23d0be88e233b1f1e9b55f6c7a52a521fbff6ef791ac7592136e78b8b9875642a05a88b2e912581c74dbfd3d6e4cc8c1ed756c3812f4bb2d429aa0cda0733810e85536e17ced36f539f7837eea0b60e4995a8dbf80a1677f2f52832ae50096870706ab7a9976b8f10559aaed774092c53fb929c00d0657ace7f73200801a91896a26db465ec154098838a8b72ef9a66d6008c982844c279eabda02039046aae113718405ec9dd8c4f2be3051426728f9a6034ec783a225f2c01a4bc414c7d3f3f594f307211f7a6438399f2a8774c1bd45427dc4f6cc62409ade2dccb7290e7af301da4b3108ab8ebe7efe5f8b7ad3092a9eab25a097f03bbdf26cb90482f0505287a69fad04f6e72acf3a8c0dd8dd5211e9ec40e024182ec5c6c1bc0dda9df3a7f0ad67284de295306252c0cfefbdfb9bb8cd3a45071043f0feb4bf778203444558e5dd86bd0f37776aac0b51d5f73fa6addf033a2dbe9c2a8ce339ab0e1b0e9ddc786044941c968c6e97b2db72e299b4f55e30c98d8a5aba0bc7cca3251fd6a8e507b497f912fef99f814d174891d58e7bfdc34f9a2fdef6babf7e19698581d119bbf00dfe2a04aa4734a33d626198999560a14670e1b8cb9079ed44105567fbe3df580dd327c714295ec8cb8b0ba0c674a39b157ef761830cf3909edc9e8e05821aff252fafd7d4ebf4c5ee4b47a9599dfe1c53d244a4da7e73e6709a29e20aa3d0b45562d965a296476224eb35af0fb0e392c5ae7ee343e179b68909c0c8b40fd3be08362694861686fa2f6159f616a7cde6408090e3e401155a4af3adaabbf4f10df6144851eea0b7a7a2d24fc55455aea2776b07f0a870d77d2a23c98b8e582a2eeade45935707abcc2e50851f17b495d409564cf5ca07fc5e7bc9e76c8aa8f0f6aa813faaf012fef86ecce7a573358c280b59e45f7cf8fb3d5416ca92247c6d173500e3bafc3bbee110732158c2ebf4ad3484598ff3332bbb5744a425dd601ecd17ceb51be5f7b17ec4cc3df4bbed0a0438764ebde40a846a1d8e081cc224c47c4d744a2b63f383b61f70e63d4d4e8dc827734c8a78c71fcc411b04bae43b43aae6bffe897f0d62c20a57349a88cc57e48e5fd861f1328d8a3d9096f1dd9fb5b69a6d9d5a081422f5e8fe37819d7c351b58196a9bd4ca90d43ef7256f346112f76961df6aa5843b376f1d29b5a32c14d20eb37e98548ba796475059ae4b22672098bcbd37022f17e9711a3f439d70926f26095f9c806434fb4ca8acd524cda1fbda3de7de676e6d8a810069d81e986b16525674b6b96e891f6fdcb8b9e785929d86e27da8f45f1ee963d596213ee2705db874fb63a50f075e251bac557713a91b3774f4b34f5456d6c0b0bbf72f66abd6015a9a9ca0c10ebd1ba1c5f63f104c085e008613016eb52bea85bb7a39bed50923968a1b3fcb8e16583ce108e65661bbd42fec6afcc6a223dae89ada5d6ea115352cb4bc5c54c146d35c7ef34ebba90f44eca9ca1d701339cbff9c87fd0a0bce35aecc8ab65ee521d6450a2695b2ab6848f6ab9bc7b2c889ea8c530ea32906065e74296588d8feff7f55aaececbf71935266977b7802ec4778188bbbee70dcc2a2efd9014149e4141ef8ced41e7efb10f2191d707ec610d9554c9eac96fa8a86caec1e9e64dd40465df47d5d9caa5760908fe65eb98360a0648be9c7d37b431a1a32865f78d6cd64d71cf88f7a4bf795b4a3e3ccd0f057a80ddf926595d06ab2f6243ed252e0ab2daab2e5dc3454dc2bb7327e5b0fa9cfc2311a6aeae563e2f3409ea18c29329e42ce8a79d7a07daa77bff0a5f803add854d1e3e16c50c271b25b49528a8f3be0deb63657f9563d2db54b8d9e9093e58d8a075f1c70fb4b9edc045b595b2ef3818223046015359ed35bb219ed41efcf33b8a9122fa7b161d2e67398b6d51514a1e1c50302e8f559d5e5bb497c0061b4a9357d895586c21572fa351fcb31159411e435e5b84dd277fbb5e9f2e17a8fcd171e41c35c8c5319c30dce0700d7836d4997594350a83415b943b31cd93384d42793f9c02c98192a3b66b7eed35ecc0c530683593b47217901d32b45772868b8ea7eb1b02ff69c59ad95a1b9630b2bbc08d017c53196cc25ec9d7ef559989c0f2409d31a65d7aca5070ede8bc253f43aae9e0df5f7f41dfb0c8eb1c543891e686b83a05d3108be6afe86c2a341cdab779b749ddaaec212f75c79459812d3086de95e6c4d9a0acd7650dd0d7a1ffbf5504dd720eeac8347b714a9159694ddc53415a4df674c7bfe18494513594778c3d60c75a60b537b69d59daeffb3d2727ad85393d15158ccfd67931b5f76ed613309b51b9a7128fd026c8e8d35157df917183c984b17de02006ad9ebc30dd8a914f45849d6f38af23d24a41371a4f94a99d03baf9727d7e849fc12d041b3ec8727f8d752c0b5fe044cb790e54cbaf38ff48e57e6e55221a2cbb206d0904cd53953dfc85f29823d5676b9aad607b611c667c6659aa372242e82c84e78bacd6319a1871f645af1ff8f2e555f58e62c511ec2c7ed984ec89972bf9ab551442fa7faa3cb2c0bf43c766c8b6f3be06f2bd91537e4d2cf95d72f84ae67be622d32ba2074448d8ccb9918f61ddbac677849f667d6e73f90bd45970c952358528f222c60cb03ce6b51872e6a058afbd9842ef742f4ba9a24cca46576504f5c6f45178715477b0620d4b9e7aa351891831f9a47ef50f296d7e77cd9ed0bd698ba250f2161fdb4d2fabdc3f15114f450f01f0cc59a14963b225206325688b5315a98d3f75de3b6af2d2cdb0085b907f84474cec1bc706610ffa8c4694de0b3571c662792c417b6013a7080bff863a4a8a0ea7a4b698e121193de8cc8020fdf61e1d084ce0cf555ee9201daeba6daa7ea0e140276aa594c69e64aba876ff398890782071f1f977e48fff3459be175a4792bdab16d0e16ea63b42d89f5e3079b51c2f8202cbbca8504e6561e10e774cc091bc290288e9e974cd71e22eba840a644b1fbbdfa2a8f6221fed1793216fc1fa4dd7326f6120bb0f5b4f595277b7aa4236f6f12403b98b65cfaec02f3a78b8e0d324983450647a972503011b68bd9f569728c9aeeb68d98cbc6d5b7f4299edbffadca4b2c4932f9993b3c37243cba864b304f23b4fc21ab917f7a206d71e28ac2673cc86b7959013e68e48efe1af3efe98eebc6d5431d45492f7f78ea9ffb9ad991cd180f77aa72b2c586a9b1c41529e558912c6f8959dfc0970df47f37dc098c75d4695857435759fa98a59440e4542e0065a1cfc39172a05668026433062a2b2e7f68d1a03789b7a97a011857f1f0b46bb0378e281dcdab894ff7e181f8d44fedef185931edc3eaadfb6c825906774efe9c86151323fdc09ecaefb49da6385a73fbb5494783df00c17c9d6636f352758dd6eb9430ec12c5d77c54fe6cebf860c42906d05838c860eed24f33cc14c1f0f459f3df75c8f32cf92b6b2127b22a2fb11cca3a42f0c6f63b52e23cfc771c7ccb8558a08651f8833f2fbcf83564e0dad6f6cace4044f318cb85a24f083972d27f6475dc5c856e10c16d40fd66b8b667537cfd51a992f2ada81ac796f7537dc70f2c7c76fe57b0cd2f61ca6db7a48e2ecab5cd48fa04a82906330264a82d8185784aeb0597b45acf9ba5f86cbd5a8ee99a767cbce055bc5930104deff16a74f2e27c53be9d6c699816b3f4df8078048ed59f4b9ce25229f95c621137abb76a3d53fdb93b4752732d99a3f4c8fc77d7df34d0f1f009c1f7660bf55735a3832085d4df779e0577274603bafe1f4f61c08696f157736d1ff8f367b688d00b5d4f4c728da290182e776e2ec659591e0a2c173ef71f3d99d8407e25aa1b9768acffea1d07dbaba7ef8061cdb4a3f3f90267fb8a2dd1f7e0f1a6cd6b73c4bb06f07f3c7c0f00c877679038fa20442c0c8a867dacb975375e3f38d4dcfeadc74988611755b9ca4677d34a8ba5ca1bc9808170d40df0439f617779541ebbf35fba5cdd00f91faf8c03e5c48f10dedb5132df59b9cf6282ab0f30e00f12f15573b5a27419e4164ed757d22ac474c3d59a10720cfb817a918bddd511fad7bb12e30d5b9d7692a7c811094bbdcf0079a7d60ba6734e439a858a728e6297bb7ac454f1903ffba378057ef801481b3a99c54a8926497b8adbf6259f3586913d293cec0dee63edba5c828b915c4490f3a12c4e1e299b2273b8a636b89d4389992122a777ca0e7f733fd5d0ff9b977e02bb596c8bc36947efdbdf47f1c760d7f8128c6ed4d552056f8a04b68762ad9d9821673e8d0e6701bb42a2b0bdc214cae84175b37a5b1d8cd1ad37d6bb6b73f8e30b75203c0754726f5e983b7c4930d8f4cd7204313993d74ae7630b36006f154abbdab0b6d91130185574e9b0686ac9a2a8dfb22c65d222dd8ac01496e54150bc1f1b6d5ec18152ce2333d03dfb25f37115490b286f3f2a8951b2a11daabbe689aaa6af8b6c2bab924fbc078ae52c17fc73b9669ce9f10bc70d9158606aa25ec531d5bef45c62488d68f72f76b7827a39a9182b1475d7be83babc5923971030a4eb0eb7bbc7b9987e26c494d0fa33e8f9a34e2cb0ef975615209f50d1b47b336d2ed45592a2b8203004799c8986a9d47b928de139785957e287aac893a8ac280dcbd44ccffba23f3725fcc55972f8c1c924ebe9db66cbf6c710eaa40c0c18eaba50c8dbb84fdc164f065287441e9e3c4516b1c7a6eef80cfa2012f150047660888d698a82619b9ed982f4be952904cc5d89ba6f807ad5453020636021f06cd193a153b58c9ae4adab529217cc065d5c028d5511493bc9be20f38883e3d9bda7cc0d5bd29ac41102a391a11b15d6ec1cbfee1266846aecdb319692daba9dbe10bc4628c20f6e4f6a84e633a7eb82cb9d7f280058f34a57e73f7082fdf814af606b47be6d9bd44b9cc600e4624c0fb4b96f6454572542cf1cd9caae42448d3f3230bae96d166f31ea9f7705f05449de199f82ebbb8d0df8b57f0426eecddf0bd217476c0414464a476ac114c25eb7eeff8d1b27cceb266c5ef6132b06b6c32747345ea9342ee759e1b5b791b84e8d217b519f607fe630e0449df6615c7ff4e38e3e2deb189eec3fac0a72ba356aadf8d08b6c42d00996720352b3ce8503ee4c8836893afb0a6a7a0e5fb0e1fe15748cda9a71352ce82c5c91a948c3a7ce21c9b1600dc09ed9e096a9743767d0c24a60fdc463bf7b2290ee09c3393bf380d1cd4cafc3dfe17beb53654fc000dcf90b649b0415a3c18134242f700ce525fdf06820914c409750500fd31a1bc23679a18035c93388cef4a923fb07a9d75bfd36062a6b61ccce69bbec83907bd4682c92563a68c3dc4ae2c60c6954a4782320d38761ba20984c2387781614613e5cc9ca98d5046a71c69c376f31c5cb0fdf1578ebdbebbd26b55b51f7b504ae74465d15816d2a7c32644e136c1960150383987064a9b318970c9dc819f3a66c24448f8dc45547b5f9326a29db1cd8c21545bf0a82f655caacc926b8e014f53437cc07beb298094e214ead40ba74c6ca028e29388cd334342a98cdcd770b4cf41af2da1726fb9a3006999baf147f9b78f6cbe86399f3299f0f54af04f620f329ad8069da94dfc1a8a612d8f2aeb1b61506d1bd4370d22ac3bb3c127f92cd84533d30056f38980020064e0b7f73103863208708c45fef2022cf08d9d1520857481d817ab9076013dc80291d6d6320f17fdae02e0d51c7ff1bd96cefe3c0a9881ab0bf1de9c40a26a2e5719a87725631583e8635b3fc3db9535248b1ab85eef4b7a0594fa2d415e01c2a16f98f86546c297556ff3afc400f811aac656bfc71c068bcf2256b4ae277283106adfff84d0e9f66a6fee52d97624df840a1982646dbb959ded3874945e11865f06c3742e590f47b962718d1c9290ccaaf994a4cf593235bd31cae146b36f89d751744a00ffccb0b459b160bda201a89b482046c60333240ef736f1bd79a0399a7ea6eadf61dbf87807a384e2d485c275a2c54dc49c336c9eee33788427da9e4a09ff81a5b50dffcd438eb33630814125e5297cbcf40c1f5237255fd53c686016ce02f297e775dec58f296f4843f141f48ab74e92ed3e110ab5f813c82938abe094da33756d27b29d3e1c562ae5287886f0644c28d567d1270a109432328f95c6b1c1f1fccd85d0f9c8b98b7d37c712eb17b0ee92c254942ece791c22befa52a43a979f82a65756aded918608ee6894bf1213ecea65a814f51242c72ee125c28574ce26385349c8b0e01f474fdfc9a54de69b6ea557fb84a599db25dffaadb1efe0c46c8fed9c9f537bf34735e4bac660e6b915cb70f1a9ee4163dd9d90044ad0394b7baee78638d158a37e5e2139ebc806ab00ecf974f3610d90d407a135dda215db5b2f4164a9f5d47c0303e43bafe4d572bae8c4608148fc9d89a095e48804edf48371cc8d754390dcfd8836b8920a1ae8e99386efe5c4935a1de59b73a249a22a9e0e35422beb0626a132885eda0e1cbdfcbc30825f0f30b5c87e6c5d2078a3b6a65d6545802dfd86f5639d237504415291164ea5466fd165fb297c12c6966e9ac5f6008eaef933a4a4e3736066156510fb99169417152deae17af7aed2fdaaeda6a65330c50192ac0c8c153c1471e56d30b8ffe66c1e220357427f0d0cea63b7d9b79353d09ffd303b92203f73c9574cf42b09d1cea35b6f29734039f8aa938281b0e0e13d5b91a3d0edbbfa5a75ca499fd2717c2bc8cc89d38ddcdd26eac0f12b39a55493049aba4505f39b928139540c14984b5894778ad68896d9f6d3495f8088eeb483d98a04209e6e7fef4ce26872e6171839dbd5217baaf7a2787e8bcb379004522f6a166369f9fba6e452c6a9a48ea7dea7303834b79ade4de6af73305086db2652d968286242437bc5d876e79b4845d78aa69d1fb08bf492fec4a44dc4deab253c37c4e0bce03563df8ca2269993562e7634f9ab6ef55dd62da1a4801038fd41481dfe1fdcc9caa34972bb55a8e6a480fb1c1456acba8d37e5905f8ebb71e35d22dc6e4d6ef4a5568ce18f266437e52590a4007c58fc4b2a1b729514b0e5a00bea72b13875dd20b7ff9c802fb72540671e6806111b7e0da128f26def7278fa5e7476b740e6d52fa56c4f88d8aa19b4de3c108503e5d01d12caf7f9f365b325ce17be9c8027d69a6f27bcea6be227c4e46d156718447e0a0ee6852591e11aee6979025a0d8285bfd846971081ffd552765809378cf7a1c1d5ea74d1f1757679cbf9f467deb5635e840d20911d24a6fc5c328cdb04886bbcbc83f16d56bc63e209f7a400e62715787b96fce3fedec95bb1c93593815f4f1ca81488dc12f7cac54df388a89b488273054eeed4638c8a500c95d8435ab49059aa74c826559c8ebab880c8b39d2dd02d878db414d90f46e290088d7f05594371df90ca80b468d8b97918c3ab89979f0f42bb60bd7c7519f4c1c1c082c49b25a3e7c214b12cea8706b58909a6e6b46afcf4fd8e1ff6cb58fb6ab29eb87e3aca47d36229d294d459a440b24da05e3cf22589aa1d0a36246381ae72a09b30edac1570192127f4e9090384b71eb0711d4ede0315a64f32ccba146255f4810f4c125de32794e547c272b113f224727a33cb21afd677d207f913e95bd9d0665a7e3490be9450056c0aeca4e75603c784b106b48ba7183cb8d8d2d225318dc979b6a7af6fccf774180e3b93b38364bf2d9da480164a6820cb620109d8af50d4aaf11e0e0d0e50ab6c3c1d6c4e5c6fb11233311cc3077d32b8d3bd8c8c0c9a9b4b1e06b5b781007bca00c0247342c1fcb63de14ffeebc420f30e02961757b1cfe0daf4f2e371f673d729b236239d23dd8a35136318575b3af06eb83e927505c48390498cc99949e264561f10eadb52f462cd28bc59dff541d6772b27690f30cd89c03643f96a66d1485f1160595ba5760d16263ad1c146e179f55e4437e8a8d9c736d45a519ab0642083d77dab9d8a4a086efc1182135c437cca69ad9aadd514884e29445efcaf56f51a5f9e1573a46bd63c5a0295f2d94bed3c8b40a05d18fadb643bc4851da46c719d4f767ba83339f5c0b7ccccb617e18d3fb1063c104941c993e05a941b689e1aa89a915175d7ac69682d8409879bec3e9896ce0b5e7c59f26f35c16240b31140b98018f71f3cf95a043ccb11c70cb9d252d945cdde5d68cc5965deb02f8888d5e5000d9a12b9ad5698e2fc2242c54084d419a6fb8bbe4bc9a5825ecaf1100c4c397840f8b84257dba840d243b32c9b2437603595b1bd36421b9b1eb093ca523dec8a1a232b374502d8bd5b9cb7d61017f431ae946498919146e6af16c62e8a3fafef1a3c06611f3de23b228b4055f05d825e1b793766a41b0496665f199ad556a25bef5f303d61f320ba3ee68010413fcb76c03ae45ef131828c0cd86a24903a46f90a60fa046fb5fdce1a0020cc675bdc7f68003251941a928b861b9735f243b011593a183f50ab1c441cc5654a20f01fe34806d554e7871bbe6269a2bcb4d10b31044a1d52b12ae51ec3e75b0c80b0a8773452a51bcde52f38782f234fc843cc9de320bd0ad890d37cd17dae6a9132f8a9999bfa43f65e7c9ed934fb552f45762cffb73a0f99d495aeaebba7563fef889d1034ef42d4a1d3e58b185f5a468f45a86293cf570494418d8a32bb431c6636e120029603282b64a1e2630f2da510fa86cea462826dba3c6cae8edcdfcf7c76350fb0d2cf113ad27d58c9c7513111731cb187b59083b34826f8743be47919107cbb97fa382d1f1d05f365eece28faa00a3db2e1a72034b6ad966e86036e814d6da27796ce7262a6954612c368bb5de6b095d3649613efbcb7257cc981a4354cbfadcb5be949ae8cde134b1a95b9e169eb65df8e463360cc1a3044ce950b8155990f907ef71c9e7cf4960409d20a29462b680b91f6843c78db51c506bc52df6402ed1731da45d7f61dfe6a4f5563029c3105229c6c9b37d3a3132b977692e1ae5a1c333644c60ed12885457048f9b2e2b10aff5d7134e54ba500826c165f14bd</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-blink">      <input class="hbe hbe-input-field hbe-input-field-blink" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-blink" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-blink" data-content="请输入密码">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>AB实验</title>
      <link href="/2025/10/22/AB%E5%AE%9E%E9%AA%8C/"/>
      <url>/2025/10/22/AB%E5%AE%9E%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重新输入" data-whm="认证失败，再试一试">  <script id="hbeData" type="hbeData" data-hmacdigest="daf9e9b2920689d64caee7e1772c557875113115697bea18f622f85265fdd3a4">98b9bce3395e8307c58744c126888424fa170c71ed8831ec79865b50b8840fd0c805355e21026a42711caca2b5265c1308f3e392c123d62db61338dd5eb21d69d89364a49816a4e8ea9df02df06ab85222195b08f26e9e3fea7943a3399d1108a3140c3da717c45e2cbd29069248b945e494a2331bfdae4643d031923831c19795a57e6d52b5a0ac4733f380468ec109cf19bc529acb3ccb6b43f269ebe5bf00df41277e37821e1cf437b086c6faab5f3a9e5bfd7d2af2e3f39d5e6f031d4b7c47b4b3cdd7bfb878faa798f79e7015752f60cdd562e2602da0f97699c96458c617e8a338f53908f0ffaf43ed915b92e168b8e1de2b5b22375c1c074f68561c83eb2f2b5a2f6c6106caf2fce6582789b2a584958e579727a25b5b2e0a6c3433ece1f8d12dfb42f455bb9e5b54db845dd979e5c4f6c529c7a706fc1ba0fd69130d270b46995b6e54e44348a3368858f6ba70295b501eae5463532f16fc3eab732372a65d645a9f68b40c270955c631348263d33b9ec74bb512ea6a38792a84f1b5a1fe733f623bdd382c94b318776695c7599388d855b3d7f97fed1d791c64b2d30a779ed63fa33e57b95580efc2d5b9fde44ba104d26a2279956d9b037657ce9bd50acedcfdcd00d234e4e0849bef8804175bbd42c6854020157ef79f3c018cd65835321cc6ccebfd2fedf5e9861678a7dce97f0012cb926235f8865036a186d125324d4359d4436bd4b2400539b0c107cc147ecfdc025be1c0669a42e5848a1618551a57f3e8aa89b58e68e195369d8292830f1f7f50d2044829db6296394e7328cd6b5b04b151a0ddf911e52069a3ab576898e3660fea137100cc40ec3310f351e9f07f28679f8ee1eeb8134bfafc995f95886268b2114b61e26e3eef2d8abdfe218035f256f1cc894d88e6afbb210f17c7bb1139c42ac52748042f8337c963e2e5ce99775712ca94eb8c0c8f973ba37e2e4e9f523a846c71f6781b05e941148c3137eb11b475a0f9844e77839447fa947247c7aea2f47481e6d6ac320312443f1f24637980f47da7c8ac2dd4eba0f799a20ca5a3e7579958de8fdbf7083369c159106d3e5cda24b0655984f93447e291788f554324050058cc2fd776b48858e172bcca06c41c1875a9ab350bedfb7b59a7979472a1fef463e7eaebf90009e0</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-blink">      <input class="hbe hbe-input-field hbe-input-field-blink" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-blink" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-blink" data-content="请输入密码">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> ABtest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL窗口函数</title>
      <link href="/2025/10/21/SQL%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0/"/>
      <url>/2025/10/21/SQL%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<ul><li>SQL 窗口函数 有多少</li><li>列出最常用模板加示例</li><li>先 PARTITION → 再 ORDER → 最后 ROWS&#x2F;RANGE 详细讲解</li><li>详细拆解每一步的含义、作用、执行顺序，以及它们如何共同决定窗口函数的计算结果。</li></ul><p>🍋窗口函数 &#x3D; 聚合函数 + 保留明细行</p><p>在 SQL 中，窗口函数允许我们对<strong>查询结果集中的每一行</strong>，基于其“窗口”（即一组相关行）进行计算，而<strong>不会将多行聚合成一行</strong>（区别于 GROUP BY）。</p><p>这三个部分（partition、order、rows&#x2F;range）共同定义了一个“窗口”——即：对当前行而言，哪些其他行会被纳入计算范围。</p><h1 id="一句话核心"><a href="#一句话核心" class="headerlink" title="一句话核心"></a>一句话核心</h1><p>一句话：先分组（<code>partition by</code>），再排序（<code>order by</code>），最后定窗口（<code>rows/range</code>），函数只在窗口内算。</p><blockquote><p><code>over</code> 是窗口函数的标志，它定义了函数作用的“窗口范围”。</p></blockquote><ol><li>partition：先分组，各算各的。<em>类似 GROUP BY，但不下沉行</em></li><li>order：组内排队，定先后。  </li><li>rows&#x2F;range：再框定“当前行±几行”参与计算。</li></ol><h2 id="rows-range的语法："><a href="#rows-range的语法：" class="headerlink" title="rows&#x2F;range的语法："></a>rows&#x2F;range的语法：</h2><p><code>rows</code> 按“物理行”框范围，<code>range</code> 按“字段值”框范围，写法都是</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">rows</span><span class="operator">/</span><span class="keyword">range</span> <span class="keyword">between</span> 边界<span class="number">1</span> <span class="keyword">and</span> 边界<span class="number">2</span></span><br></pre></td></tr></table></figure><p>起点&#x2F;终点四选一：</p><ul><li><code>unbounded preceding</code>  分区头</li><li><code>n preceding</code>          前 n 行&#x2F;值</li><li><code>current row</code>          当前行&#x2F;值</li><li><code>n following</code>          后 n 行&#x2F;值</li><li><code>unbounded following</code>  分区尾</li></ul><p>示例：</p><ol><li><p>前两行</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">rows</span> <span class="keyword">between</span> <span class="number">1</span> preceding <span class="keyword">and</span> <span class="keyword">current</span> <span class="type">row</span></span><br></pre></td></tr></table></figure></li><li><p>分区的所有行</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">rows</span> <span class="keyword">between</span> unbounded preceding <span class="keyword">and</span> unbounded following</span><br></pre></td></tr></table></figure></li><li><p>日期往前推一个月</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="type">date</span>,sales,<span class="built_in">sum</span>(sales) <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> <span class="type">date</span></span><br><span class="line"><span class="keyword">range</span> <span class="keyword">between</span> <span class="type">interval</span> <span class="string">&#x27;1 month&#x27;</span> preceding <span class="keyword">and</span> <span class="keyword">current</span> <span class="type">row</span>) <span class="keyword">as</span> month_cum</span><br><span class="line"><span class="keyword">from</span> sales_data</span><br></pre></td></tr></table></figure></li></ol><ul><li><code>range between interval &#39;1 month&#39; preceding and current row</code></li><li>把日期值落在当前日期往前推 1 个月到当前日期之间的所有行都圈进来。物理行数不固定，只要日期差在 1 个月内就算，哪怕同一日期有 100 行也全部收进窗口。如现在是9.25，前100行刚好是9.1，前200行刚好是8.25，前201行刚好是8.24，那就取前200行</li></ul><h1 id="窗口函数的函数"><a href="#窗口函数的函数" class="headerlink" title="窗口函数的函数"></a>窗口函数的函数</h1><ul><li>列出sql窗口函数的所有函数，每个函数用一句话讲清楚它的用途<ul><li>列出 SQL 标准中定义的 全部窗口函数（Window Function），每个函数用一句话概括其核心用途</li><li>给出基于我提供的 5 行样例数据，把 24 个窗口函数全部跑一遍的完整 SQL 与查询结果。为了节省篇幅，所有函数放在一条 SELECT 里，按上面罗列顺序依次命名别名。</li></ul></li><li>写得不够清晰，用起来不够<ul><li>给出一份“直接能抄、一眼能懂”的速查表。 左边是“我此刻想干什么”，右边是“该用哪个窗口函数、怎么写、注意什么”。 所有例子都基于同一张表</li></ul></li><li>没懂&#x2F;什么意思<ul><li>rows 按“物理行”框范围，range 按“字段值”框范围没懂</li><li>ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING什么意思</li><li>没懂</li><li>还是没懂，拆解语法</li><li>我不会用，教我</li></ul></li><li>给出具体示例</li></ul><h2 id="排序类"><a href="#排序类" class="headerlink" title="排序类"></a>排序类</h2><ol><li>row_number()<br>连续唯一序号（1,2,3,4）</li><li>rank()<br>每一行按排序值<strong>赋予名次</strong>，同值同秩，后续名次会跳号。<br>同值同秩：并列时排名相同，后续序号跳过（1,2,2,4）</li><li>dense_rank()<br>同 rank()，但同值同秩后不跳号，名次连续。<br>并列时排名相同，序号连续（1,2,2,3）</li><li>ntile(n)<br>将数据有序地平均分配到指定数量（n）的桶中，并返回所属桶号。</li></ol><p><strong>示例：</strong><code>shop店铺，date日期，sales销售额</code></p><table><thead><tr><th>shop</th><th>date</th><th>sales</th><th>rn</th><th>rnk</th><th>d_rnk</th><th>ntile3</th></tr></thead><tbody><tr><td>A店</td><td>2025&#x2F;9&#x2F;1</td><td>100</td><td>1</td><td>7</td><td>6</td><td>3</td></tr><tr><td>A店</td><td>2025&#x2F;9&#x2F;2</td><td>200</td><td>2</td><td>5</td><td>4</td><td>2</td></tr><tr><td>A店</td><td>2025&#x2F;9&#x2F;3</td><td>300</td><td>3</td><td>3</td><td>2</td><td>1</td></tr><tr><td>A店</td><td>2025&#x2F;9&#x2F;4</td><td>400</td><td>4</td><td>1</td><td>1</td><td>1</td></tr><tr><td>B店</td><td>2025&#x2F;9&#x2F;1</td><td>150</td><td>1</td><td>6</td><td>5</td><td>3</td></tr><tr><td>B店</td><td>2025&#x2F;9&#x2F;2</td><td>250</td><td>2</td><td>4</td><td>3</td><td>2</td></tr><tr><td>B店</td><td>2025&#x2F;9&#x2F;3</td><td>400</td><td>3</td><td>1</td><td>1</td><td>1</td></tr></tbody></table><h2 id="取值类（偏移窗口函数）"><a href="#取值类（偏移窗口函数）" class="headerlink" title="取值类（偏移窗口函数）"></a>取值类（偏移窗口函数）</h2><p><strong>速查：</strong></p><ul><li><code>lag</code> 往前看，<code>lead</code> 往后看，<code>first_value</code> 队头，<code>last_value</code> 队尾（可到当前行），<code>nth_value</code> 第 n 个。</li></ul><ol><li>lag(expr, n) 获取当前行之前<strong>第n行</strong>的数据</li><li>lesd(expr, n) 获取当前行之后<strong>第n行</strong>的数据</li><li>first_value(expr) 返回<strong>窗口</strong>内第一行的数据</li><li>first_value(expr) 返回<strong>窗口</strong>内第一行的数据</li><li>nth_value(expr, n) 返回<strong>窗口</strong>内第n行的数据</li></ol><blockquote><p>expr &#x3D; expression，就是“任何能算出一个值的式子”——列名、常量、函数、加减乘除、case when … 都算。</p></blockquote><p><strong>示例：</strong><code>shop店铺，date日期，sales销售额</code></p><table><thead><tr><th>shop</th><th>date</th><th>sales</th><th>lag1</th><th>lead1</th><th>first_val</th><th>last_val</th><th>nth2</th></tr></thead><tbody><tr><td>A店</td><td>2025&#x2F;9&#x2F;1</td><td>100</td><td>null</td><td>200</td><td><strong>100</strong></td><td>400</td><td>200</td></tr><tr><td>A店</td><td>2025&#x2F;9&#x2F;2</td><td>200</td><td>100</td><td>300</td><td><strong>100</strong></td><td>400</td><td>200</td></tr><tr><td>A店</td><td>2025&#x2F;9&#x2F;3</td><td>300</td><td>200</td><td>400</td><td><strong>100</strong></td><td>400</td><td>200</td></tr><tr><td>A店</td><td>2025&#x2F;9&#x2F;4</td><td>400</td><td>300</td><td>null</td><td><strong>100</strong></td><td>400</td><td>200</td></tr><tr><td>B店</td><td>2025&#x2F;9&#x2F;1</td><td>150</td><td>null</td><td>250</td><td>150</td><td>400</td><td><strong>250</strong></td></tr><tr><td>B店</td><td>2025&#x2F;9&#x2F;2</td><td>250</td><td>150</td><td>400</td><td>150</td><td>400</td><td><strong>250</strong></td></tr><tr><td>B店</td><td>2025&#x2F;9&#x2F;3</td><td>400</td><td>250</td><td>null</td><td>150</td><td>400</td><td><strong>250</strong></td></tr></tbody></table><ul><li>以下均按shop分区，按date升序<ul><li><code>lag1</code> ＝ 上一行 sales；首行为 null。</li><li><code>lead1</code> ＝ 下一行 sales；末行为 null。</li><li><code>first_val</code> ＝ 该店第一行 sales（恒 100&#x2F;150）。</li><li><code>last_val</code> ＝ 该店最后一行 sales（400），因为手动把 frame 拉到整个分区。</li><li><code>nth2</code> ＝ 该店第二行 sales（200&#x2F;250）。</li></ul></li><li><code>last_value(sales)    over(partition by shop order by date rows between unbounded preceding and unbounded following) as last_val</code>是不是冗余了<ul><li>默认不写 frame 时，<code>last_value</code> 的窗口是 <code>range between unbounded preceding and current row</code> → 只能看到“第一行 → 当前行”，最后一行根本还没出现，因此这句 frame 非冗余，是必需。</li><li>Frame?<br>frame &#x3D; 窗口帧，就是“在分区内再圈一个小范围”的那一段定义</li></ul></li></ul><h2 id="聚合类（作为窗口函数使用）"><a href="#聚合类（作为窗口函数使用）" class="headerlink" title="聚合类（作为窗口函数使用）"></a>聚合类（作为窗口函数使用）</h2><blockquote><p>把 GROUP BY 的聚合结果“摊平”到每一行，还能让它只累加当前行之前、或前后 N 行，而不是一次性全算完。</p></blockquote><ol><li>sum(expr) 计算分区内（或框架内）expr 的累计和。</li><li>avg(expr) 计算分区内（或框架内）expr 的累计平均值。</li><li>count(expr) 统计分区内（或框架内）非 NULL 行数。</li><li>min(expr) 取分区内（或框架内）到当前行的最小值。</li><li>max(expr) 取分区内（或框架内）到当前行的最大值。</li></ol><p><strong>示例：</strong><code>shop店铺，date日期，sales销售额</code></p><table><thead><tr><th>shop</th><th>date</th><th>sales</th><th>run_sum</th><th>run_avg</th><th>run_cnt</th><th>run_min</th><th>run_max</th></tr></thead><tbody><tr><td>A店</td><td>2025&#x2F;9&#x2F;1</td><td>100</td><td>100</td><td>100</td><td>1</td><td>100</td><td>100</td></tr><tr><td>A店</td><td>2025&#x2F;9&#x2F;2</td><td>200</td><td>300</td><td>150</td><td>2</td><td>100</td><td>200</td></tr><tr><td>A店</td><td>2025&#x2F;9&#x2F;3</td><td>300</td><td>600</td><td>200</td><td>3</td><td>100</td><td>300</td></tr><tr><td>A店</td><td>2025&#x2F;9&#x2F;4</td><td>400</td><td>1000</td><td>250</td><td>4</td><td>100</td><td>400</td></tr><tr><td>B店</td><td>2025&#x2F;9&#x2F;1</td><td>150</td><td>150</td><td>150</td><td>1</td><td>150</td><td>150</td></tr><tr><td>B店</td><td>2025&#x2F;9&#x2F;2</td><td>250</td><td>400</td><td>200</td><td>2</td><td>150</td><td>250</td></tr><tr><td>B店</td><td>2025&#x2F;9&#x2F;3</td><td>400</td><td>800</td><td>266.7</td><td>3</td><td>150</td><td>400</td></tr><tr><td>B店</td><td>2025&#x2F;9&#x2F;4</td><td>null</td><td>800</td><td>266.7</td><td>3</td><td>150</td><td>400</td></tr></tbody></table><p>把这一批结果一眼看懂：</p><ul><li>带 <code>ORDER BY</code> 的那 5 个（run_*）。<br>默认窗口 &#x3D; 从分区第一行累加到当前行，所以值逐行变大（或保持），就是“店铺内到当天的累计和&#x2F;均值&#x2F;行数&#x2F;最小&#x2F;最大”。</li></ul><h2 id="统计类"><a href="#统计类" class="headerlink" title="统计类"></a>统计类</h2><ol><li>percent_rank() 计算当前行的相对排名（百分比），取值 0～1。公式为：(rank - 1) &#x2F; (总行数 - 1)</li><li>cume_dist() 计算当前行的累积分布（小于等于当前值的行数占总行数的比例）</li><li>stddev_pop(expr) 计算分区内总体标准差。 衡量数据相对于平均数的离散程度。适用于分析完整总体（而非样本）的波动性</li><li>stddev_samp(expr) 计算分区内样本标准差。 当数据是总体中的一个样本时，使用此函数可得到对总体标准差的无偏估计</li><li>var_pop(expr) 计算分区内总体方差。 标准差的平方，同样反映数据离散程度，但单位是原数据的平方</li><li>var_samp(expr) 计算分区内样本方差。 分母为n-1，是对总体方差的无偏估计。常用于抽样数据</li><li>covar_pop(y, x) 计算分区内两变量的总体协方差。 衡量两个变量的总体协同变化趋势。值为正表示正相关，为负表示负相关</li><li>covar_samp(y, x) 计算分区内两变量的样本协方差。 基于样本数据对总体协方差进行无偏估计</li><li>corr(y, x) 计算分区内两变量的皮尔逊相关系数。 衡量两个变量间的线性相关程度，返回值介于-1（完全负相关）和1（完全正相关）之间，结果已标准化，不受数据原始尺度影响</li><li>regr_*（系列） 用于执行<strong>线性回归分析</strong>。如 regr_slope(斜率)、regr_intercept(截距)、regr_r2(决定系数)等</li></ol><ul><li><strong>PERCENT_RANK()和CUME_DIST()这两个函数，销售额大的数值大还是小？日常使用，用降序还是升序？</strong><ul><li>降序（最常用，看头部好数据）：<ul><li>销售额越高 → 两个函数的值越小（最高销售额对应 PERCENT_RANK&#x3D;0、CUME_DIST&#x3D;1 &#x2F; 总行数）</li><li>解读直觉：值越小 &#x3D; 表现越好（比如 PERCENT_RANK&#x3D;0.1 → 比 90% 的对象好；CUME_DIST&#x3D;0.2 → 高价值数据占 20%）</li></ul></li><li>升序（仅用在看尾部差数据）：<ul><li>销售额越低 → 两个函数的值越小（最低销售额对应 PERCENT_RANK&#x3D;0、CUME_DIST&#x3D;1 &#x2F; 总行数）</li><li>解读直觉：值越小 &#x3D; 表现越差（比如 PERCENT_RANK&#x3D;0.1 → 比 90% 的对象差；CUME_DIST&#x3D;0.3 → 低价值数据占 30%）</li></ul></li></ul></li><li>把这一批结果一眼看懂：<ul><li>不带 <code>ORDER BY</code> 的那 7 个（stddev_pop 及以后）。<br> 窗口 &#x3D; 整个店铺，所以每行拿到的结果一模一样，相当于把 group by 的聚合值“摊平”到每一行。</li></ul></li><li>特殊写法<ul><li><code>COVAR_POP(sales, sales)</code> 退化成总体方差，结果与 <code>VAR_POP(sales)</code> 相同。</li><li><code>CORR(sales, sales)</code> 恒为 1（自己跟自己完全相关）。</li><li><code>REGR_SLOPE(sales, date_epoch)</code> 给出销售额随时间增长的日均斜率（销售额&#x2F;天），正数表示上涨，负数表示下降。</li></ul></li></ul><h2 id="上面示例的代码"><a href="#上面示例的代码" class="headerlink" title="上面示例的代码"></a>上面示例的代码</h2><h3 id="PostgreSQL语法"><a href="#PostgreSQL语法" class="headerlink" title="PostgreSQL语法"></a>PostgreSQL语法</h3><p>原始数据：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-01&#x27;</span>,<span class="number">100</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-02&#x27;</span>,<span class="number">200</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-03&#x27;</span>,<span class="number">300</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-01&#x27;</span>,<span class="number">150</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-02&#x27;</span>,<span class="number">250</span>);</span><br></pre></td></tr></table></figure><p>加了同样销售额400的数据：</p><ol><li><p>排序类+取值类</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create table</span> t(shop text, dt <span class="type">date</span>, sales <span class="type">int</span>);</span><br><span class="line"><span class="keyword">insert into</span> t <span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-01&#x27;</span>,<span class="number">100</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-02&#x27;</span>,<span class="number">200</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-03&#x27;</span>,<span class="number">300</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-04&#x27;</span>,<span class="number">400</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-01&#x27;</span>,<span class="number">150</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-02&#x27;</span>,<span class="number">250</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-03&#x27;</span>,<span class="number">400</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    shop,dt,sales</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 排序类 */</span></span><br><span class="line">    ,<span class="built_in">row_number</span>()         <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> rn</span><br><span class="line">    ,<span class="built_in">rank</span>()               <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> sales <span class="keyword">DESC</span>) <span class="keyword">as</span> rnk</span><br><span class="line">    ,<span class="built_in">dense_rank</span>()         <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> sales <span class="keyword">DESC</span>) <span class="keyword">as</span> d_rnk</span><br><span class="line">    ,<span class="built_in">ntile</span>(<span class="number">3</span>)             <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> sales <span class="keyword">DESC</span>) <span class="keyword">as</span> ntile3</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 取值类 */</span></span><br><span class="line">    ,<span class="built_in">lag</span>(sales,<span class="number">1</span>)         <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> lag1</span><br><span class="line">    ,<span class="built_in">lead</span>(sales,<span class="number">1</span>)        <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> lead1</span><br><span class="line">    ,<span class="built_in">first_value</span>(sales)   <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> first_val</span><br><span class="line">    ,<span class="built_in">last_value</span>(sales)    <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt <span class="keyword">rows</span> <span class="keyword">between</span> unbounded preceding <span class="keyword">and</span> unbounded following) <span class="keyword">as</span> last_val</span><br><span class="line">    ,<span class="built_in">nth_value</span>(sales,<span class="number">2</span>)   <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt <span class="keyword">rows</span> <span class="keyword">between</span> unbounded preceding <span class="keyword">and</span> unbounded following) <span class="keyword">as</span> nth2</span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span>(</span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span>,<span class="built_in">extract</span>(epoch <span class="keyword">from</span> dt) <span class="keyword">as</span> date_epoch   <span class="comment">-- 把日期转数值，方便回归</span></span><br><span class="line">    <span class="keyword">from</span> t</span><br><span class="line">) <span class="keyword">as</span> x</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> shop, dt;</span><br></pre></td></tr></table></figure></li><li><p>聚合类</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create table</span> t(shop text, dt <span class="type">date</span>, sales <span class="type">int</span>);</span><br><span class="line"><span class="keyword">insert into</span> t <span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-01&#x27;</span>,<span class="number">100</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-02&#x27;</span>,<span class="number">200</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-03&#x27;</span>,<span class="number">300</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-04&#x27;</span>,<span class="number">400</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-01&#x27;</span>,<span class="number">150</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-02&#x27;</span>,<span class="number">250</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-03&#x27;</span>,<span class="number">400</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-04&#x27;</span>,<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    shop,dt,sales</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 聚合类 */</span></span><br><span class="line">    ,<span class="built_in">sum</span>(sales)           <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> run_sum</span><br><span class="line">    ,round(<span class="built_in">avg</span>(sales)     <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt), <span class="number">1</span>) <span class="keyword">as</span> run_avg</span><br><span class="line">    ,<span class="built_in">count</span>(sales)         <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> run_cnt</span><br><span class="line">    ,<span class="built_in">min</span>(sales)           <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> run_min</span><br><span class="line">    ,<span class="built_in">max</span>(sales)           <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> run_max</span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span>(</span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span>,<span class="built_in">extract</span>(epoch <span class="keyword">from</span> dt) <span class="keyword">as</span> date_epoch   <span class="comment">-- 把日期转数值，方便回归</span></span><br><span class="line">    <span class="keyword">from</span> t</span><br><span class="line">) <span class="keyword">as</span> x</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> shop, dt;</span><br></pre></td></tr></table></figure></li><li><p>统计类</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create table</span> t(shop text, dt <span class="type">date</span>, sales <span class="type">int</span>);</span><br><span class="line"><span class="keyword">insert into</span> t <span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-01&#x27;</span>,<span class="number">100</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-02&#x27;</span>,<span class="number">200</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-03&#x27;</span>,<span class="number">300</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-04&#x27;</span>,<span class="number">400</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-01&#x27;</span>,<span class="number">150</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-02&#x27;</span>,<span class="number">250</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-03&#x27;</span>,<span class="number">400</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    shop,dt,sales</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 统计类 */</span></span><br><span class="line">    ,<span class="built_in">percent_rank</span>()       <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> sales <span class="keyword">DESC</span>) <span class="keyword">as</span> pct_rnk</span><br><span class="line">    ,<span class="built_in">cume_dist</span>()         <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> sales) <span class="keyword">as</span> cume_dist</span><br><span class="line">    ,<span class="built_in">stddev_pop</span>(sales)   <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop) <span class="keyword">as</span> stddev_pop</span><br><span class="line">    ,<span class="built_in">stddev_samp</span>(sales)  <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop) <span class="keyword">as</span> stddev_samp</span><br><span class="line">    ,<span class="built_in">var_pop</span>(sales)      <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop) <span class="keyword">as</span> var_pop</span><br><span class="line">    ,<span class="built_in">var_samp</span>(sales)     <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop) <span class="keyword">as</span> var_samp</span><br><span class="line">    ,<span class="built_in">corr</span>(sales, date_epoch) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop) <span class="keyword">as</span> corr_coef</span><br><span class="line">    ,<span class="built_in">covar_pop</span>(sales, date_epoch) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop) <span class="keyword">as</span> covar_pop</span><br><span class="line">    ,<span class="built_in">covar_samp</span>(sales, date_epoch) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop) <span class="keyword">as</span> covar_samp</span><br><span class="line">    ,<span class="built_in">regr_slope</span>(sales, date_epoch) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop) <span class="keyword">as</span> regr_slope</span><br><span class="line">    ,<span class="built_in">regr_intercept</span>(sales, date_epoch) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop) <span class="keyword">as</span> regr_intercept</span><br><span class="line">    ,<span class="built_in">regr_r2</span>(sales, date_epoch) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop) <span class="keyword">as</span> regr_r2</span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span>(</span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span>,<span class="built_in">extract</span>(epoch <span class="keyword">from</span> dt) <span class="keyword">as</span> date_epoch   <span class="comment">-- 把日期转数值，方便回归</span></span><br><span class="line">    <span class="keyword">from</span> t</span><br><span class="line">) <span class="keyword">as</span> x</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> shop, dt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="trino语法"><a href="#trino语法" class="headerlink" title="trino语法"></a>trino语法</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t;</span><br><span class="line"><span class="keyword">create table</span> t(shop <span class="type">varchar</span>, dt <span class="type">varchar</span>, sales <span class="type">integer</span>);</span><br><span class="line"><span class="keyword">insert into</span> t <span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-01&#x27;</span>,<span class="number">100</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-02&#x27;</span>,<span class="number">200</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-03&#x27;</span>,<span class="number">300</span>),</span><br><span class="line">(<span class="string">&#x27;A店&#x27;</span>,<span class="string">&#x27;2025-09-04&#x27;</span>,<span class="number">400</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-01&#x27;</span>,<span class="number">150</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-02&#x27;</span>,<span class="number">250</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-03&#x27;</span>,<span class="number">400</span>),</span><br><span class="line">(<span class="string">&#x27;B店&#x27;</span>,<span class="string">&#x27;2025-09-04&#x27;</span>,<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    shop,dt,sales</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 聚合类 */</span></span><br><span class="line">    ,<span class="built_in">sum</span>(sales)           <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> run_sum</span><br><span class="line">    ,round(<span class="built_in">avg</span>(sales)     <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt), <span class="number">1</span>) <span class="keyword">as</span> run_avg</span><br><span class="line">    ,<span class="built_in">count</span>(sales)         <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> run_cnt</span><br><span class="line">    ,<span class="built_in">min</span>(sales)           <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> run_min</span><br><span class="line">    ,<span class="built_in">max</span>(sales)           <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> shop <span class="keyword">order</span> <span class="keyword">by</span> dt) <span class="keyword">as</span> run_max</span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span>(</span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span>,to_unixtime(<span class="built_in">cast</span>(dt <span class="keyword">as</span> <span class="type">timestamp</span> <span class="keyword">with</span> <span class="type">time</span> zone)) <span class="keyword">as</span> date_epoch  <span class="comment">-- 把日期转数值，方便回归</span></span><br><span class="line">    <span class="keyword">from</span> t</span><br><span class="line">) <span class="keyword">as</span> x</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> shop, dt;</span><br></pre></td></tr></table></figure><h1 id="最常用模板"><a href="#最常用模板" class="headerlink" title="最常用模板"></a>最常用模板</h1><ol><li><p>累计值</p><ol><li>sum()</li></ol></li><li><p>分组累计（按店铺）</p><ol><li>sum()、partition by</li></ol></li><li><p>移动平均（近2行）</p><ol><li>对每个店，算最近两天平均销售额</li><li>avg()、partition by、row 1 preceding</li><li>历史平均销售额rows between unbounded preceding and 1 preceding</li></ol></li><li><p>环比（上一日）</p><ol><li>lag()先取出上一日数据</li><li>两个字段名的英文来源如下：<ol><li>prev_sales prev 是 <em>previous</em>（之前的）的缩写，sales 即“销售额”，合起来表示“上一条销售额”。</li><li>delta 源自希腊字母 Δ（delta），在数学&#x2F;编程里习惯用它表示“差值、变化量”，这里即“销售额的变化量”。</li></ol></li></ol></li><li><p>排名&#x2F;去重（每组只留第一行&#x2F;取最新的记录&#x2F;取TOP-N）</p><ol><li>row_number()、partition by、DESC</li></ol></li><li><p>一次性定义多个窗口（省代码）</p><ol><li>over w</li><li>window w as (partition by shop order by dt)</li></ol></li><li><p>范围窗口（近 1 个月）</p><ol><li><p>range between interval ‘1 month’ preceding and current row</p></li><li><p>INTERVAL ‘1 month’怎么算的</p><ol><li><p>加减一个月先找“同号日”，没有就拉回到目标月最后一天；范围窗口以此算出 闭区间 边界。</p></li><li><pre><code class="language-SQL">SELECT date &#39;2025-01-30&#39; + INTERVAL &#39;1 month&#39;;  -- 2025-02-28（2025 非闰年）SELECT date &#39;2024-01-30&#39; + INTERVAL &#39;1 month&#39;;  -- 2024-02-29（闰年）SELECT date &#39;2025-03-31&#39; - INTERVAL &#39;1 month&#39;;  -- 2025-02-28date/timestamp时间戳同理，时分秒保留SELECT timestamp &#39;2025-01-30 23:59:59&#39; + INTERVAL &#39;1 month&#39;;-- 2025-02-28 23:59:59</code></pre></li></ol></li></ol></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> SQL </tag>
            
            <tag> Postgres </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>快速精通SQL</title>
      <link href="/2025/10/20/%E5%BF%AB%E9%80%9F%E7%B2%BE%E9%80%9ASQL/"/>
      <url>/2025/10/20/%E5%BF%AB%E9%80%9F%E7%B2%BE%E9%80%9ASQL/</url>
      
        <content type="html"><![CDATA[<h1 id="重点知识"><a href="#重点知识" class="headerlink" title="重点知识"></a>重点知识</h1><h2 id="SQL执行顺序："><a href="#SQL执行顺序：" class="headerlink" title="SQL执行顺序："></a>SQL执行顺序：</h2><p>1.<code>FROM</code> &amp; <code>JOIN</code> → 2. <code>WHERE</code> → 3. <code>GROUP BY</code> → 4. <code>HAVING</code> → 5. <code>SELECT</code> → 6. <code>ORDER BY</code></p><ul><li><strong>FROM 和 JOIN</strong>：首先确定要从哪些表中获取数据</li><li><strong>WHERE</strong>：对FROM和JOIN返回的行进行过滤</li><li><strong>GROUP BY</strong>：将过滤后的行分组</li><li><strong>HAVING</strong>：对分组后的结果进行过滤</li><li><strong>SELECT</strong>：选择要返回的列（包括计算和别名）</li><li><strong>DISTINCT</strong>：去除重复的行</li><li><strong>ORDER BY</strong>：对结果进行排序</li><li><strong>LIMIT&#x2F;OFFSET&#x2F;TOP</strong>：限制返回的行数</li></ul><h1 id="SQL基础"><a href="#SQL基础" class="headerlink" title="SQL基础"></a>SQL基础</h1><h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><ol><li>查询：<ul><li>Select；Where；Distinct；And；Or</li></ul></li><li>建表、删表、分区：<ul><li>Create table；Drop table；Insert into；Partition by</li></ul></li><li>表连接：<ul><li>常用四类join操作：</li><li>[inner] join；Left join；Right join；Full join</li></ul></li><li>函数：<ul><li>聚合函数；日期函数；数字类函数；字符类函数</li></ul></li><li>嵌套、分组、排序：<ul><li>双重where；Group by；Order by</li></ul></li><li>SQL三范式&amp;注意事项：<ol><li>三范式<ol><li>保证每列的原子性</li><li>每列均与主键相关</li><li>每列均与主键直接相关</li></ol></li><li>注意事项<ol><li>小表拼大表</li><li>先过滤再拼表</li><li>避免过度嵌套</li></ol></li></ol></li></ol><h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><p>Select 列名称 from 表名称 where 列 运算符 表名称</p><p>运算符：&#x3D;, &gt;, &lt;, &gt;&#x3D;, &lt;&#x3D;, <strong>&lt;&gt;, !&#x3D;</strong>, between, like, <strong>in, %, is</strong> <strong>null, is not null</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> edw_cdm.dim_trx_loan <span class="keyword">where</span> dt <span class="keyword">in</span> (‘<span class="number">2021</span><span class="number">-02</span><span class="number">-28</span>’,’<span class="number">2021</span><span class="number">-03</span><span class="number">-31</span>’); <span class="comment">--取月末数据</span></span><br><span class="line"><span class="comment">-- dt&lt;=&#x27;2025-09-30&#x27; and cast(dt as date)=last_day_of_month(cast(dt as date))</span></span><br></pre></td></tr></table></figure><ol><li>比较运算符（直接比）</li></ol><ul><li>适用：数值、日期、字符串的等于 &#x2F; 不等于 &#x2F; 大小比较。</li><li>关键符号：<code>=</code>（等于）、<code>&gt;</code>&#x2F;<code>&lt;</code>（大于 &#x2F; 小于）、<code>&gt;=</code>&#x2F;<code>&lt;=</code>（大于等于 &#x2F; 小于等于）、<code>&lt;&gt;</code>&#x2F;<code>!=</code>（不等于）。</li></ul><ol><li>范围运算符（圈范围）</li></ol><ul><li><code>between ... and</code>：取连续范围（含边界），如 “score between 80 and 90”。</li><li><code>in (值1,值2)</code>：取离散值列表，如 “address in (‘ 北京 ‘,’ 上海 ‘)”；加<code>no</code>t则排除。</li></ul><ol><li>模糊匹配（查部分）</li></ol><ul><li>仅用于字符串，需搭配<code>%</code>（任意字符）或<code>_</code>（单个字符）。</li><li>示例：<code>name like &#39;张%&#39;</code>（姓张）、<code>name like &#39;%晓%&#39;</code>（含 “晓” 字）。</li></ul><ol><li>空值判断（判空值）</li></ol><ul><li>不能用<code>=</code>，必须用<code>is null</code>（为空）或<code>is not null</code>（不为空），如 “address is null”。</li></ul><ol><li>组合逻辑（多条件）</li></ol><ul><li>用<code>and</code>（同时满足）或<code>or</code>（满足一个）组合条件，如 “age&gt;18 AND score&gt;80”。</li></ul><h3 id="建表、删表、分区"><a href="#建表、删表、分区" class="headerlink" title="建表、删表、分区"></a>建表、删表、分区</h3><p>create table 表名称 (列名称1 数据类型, 列名称2 数据类型, 列名称3 数据类型…)</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create table</span> sql_grammar_cust_base</span><br><span class="line">    (cust_id  string  comment  ‘客户号’，<span class="comment">--comment 为添加注释</span></span><br><span class="line">     fst_crd_cls_dt    string  comment  ‘首次授信日期’，</span><br><span class="line">     fst_crd_base_lvl_busiclass  string  comment ‘首次授信业务基础维度’) </span><br><span class="line">partitioned <span class="keyword">by</span> (dt  string  comment ’日期’)；</span><br></pre></td></tr></table></figure><p><code>partitioned by</code><strong>注：分区可以存储更多的数据，并优化查询效率，写代码时注意限制分区字段</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> aaa_tmp;</span><br><span class="line"><span class="keyword">create table</span> aaa_tmp <span class="keyword">as</span></span><br></pre></td></tr></table></figure><h4 id="分区和非分区的区别"><a href="#分区和非分区的区别" class="headerlink" title="分区和非分区的区别"></a>分区和非分区的区别</h4><p>逻辑上没有区别，主要区别在于<strong>物理存储</strong>上， hive表的数据以文件形式存储，分区表按照分区列的值分别存储，<strong>一个分区对应一个目录</strong>，非分区表只有一个目录。</p><p>分区的目的是为了提高查询效率和回溯历史状态，具体表现为：</p><ul><li><strong>提高查询效率</strong>。如果没有分区，每次全表扫描，对于数据量大的表查询效率低下，分区表通过限制分区，只需扫描部分分区数据，大大提高查询效率。</li><li><strong>回溯历史状态</strong>。Hive分区表大部分通过增量+全量的方式更新，如果当天的数据出错，可以通过前一天的分区快速修复；通过记录月末快照分区，可以回溯历史状态，可用于分析和定位问题。</li></ul><blockquote><p>100个球，10种颜色，各有10个，编号1-10</p><ul><li>非分区表：所有球装在一个大袋子里</li><li>分区表：每种颜色的球分别装在对应颜色的小袋子里，然后再装到大袋子里</li></ul><p>需求：找出白色3号球</p><ul><li>非分区表：全表扫描，从100个球中找出白色3号球</li><li>分区表：局部扫描，从白</li><li>色小袋子里找，从10个球中找出白色3号球</li></ul></blockquote><h3 id="表连接"><a href="#表连接" class="headerlink" title="表连接"></a>表连接</h3><p><img src="/./../%E5%BF%AB%E9%80%9F%E7%B2%BE%E9%80%9ASQL/70a34cbd-ad2b-4eae-8a7b-31d8da835f79.png" alt="SQL JOINS"></p><p>✅ <strong>总结记忆口诀</strong>：</p><table><thead><tr><th>join 类型</th><th>返回结果</th></tr></thead><tbody><tr><td>inner join</td><td>两表交集</td></tr><tr><td>left join</td><td>左表全量 + 右表匹配</td></tr><tr><td>right join</td><td>右表全量 + 左表匹配</td></tr><tr><td>full outer join</td><td>两表并集（含所有记录）</td></tr><tr><td>left&#x2F;right join + where null</td><td>仅返回左&#x2F;右表独有的记录</td></tr><tr><td>full outer join + where null</td><td>仅返回两表中不匹配的记录（对称差）</td></tr></tbody></table><p>📌 <strong>提示</strong>：</p><ul><li>实际使用中，<code>inner join</code> 最常用。</li><li><code>left join</code> 常用于“主表 + 关联表”的场景（如订单 + 用户信息）。</li><li><code>left join ... where b.key is null</code>（左外连接排除内连接）也常用。</li><li><code>full outer join</code> 在某些分析场景有用，但性能开销较大。</li><li>使用 <code>where ... is null</code> 是筛选“无匹配记录”的关键技巧。</li></ul><p><strong>图中涉及的 JOIN 类型：</strong></p><ol><li><p><strong>left join（左连接）</strong></p><ul><li><p><strong>图示</strong>：红色区域包括 <code>A</code> 的全部 + <code>A ∩ B</code></p></li><li><pre><code class="language-SQL">select &lt;select_list&gt; from table a left join table b on a.key = b.key<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - **含义**：返回左表（tablea）的所有记录，以及右表（tableb）中匹配的记录。如果右表无匹配，则对应字段为 `null`。</span><br><span class="line"></span><br><span class="line">2. **inner join（内连接）**</span><br><span class="line"></span><br><span class="line">   - **图示**：仅红色区域为 `A ∩ B`（交集）</span><br><span class="line"></span><br><span class="line">   - ```SQL</span><br><span class="line">     select &lt;select_list&gt; from table a inner join table b on a.key = b.key</span><br></pre></td></tr></table></figure></code></pre></li><li><p><strong>含义</strong>：只返回两个表中<strong>键值匹配</strong>的记录，即交集部分。</p></li></ul></li><li><p><strong>right join（右连接）</strong></p><ul><li><p><strong>图示</strong>：红色区域包括 <code>B</code> 的全部 + <code>A ∩ B</code></p></li><li><pre><code class="language-SQL">select &lt;select_list&gt; from table a right join table b on a.key = b.key<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - **含义**：返回右表（tableb）的所有记录，以及左表（tablea）中匹配的记录。如果左表无匹配，则对应字段为 `null`。</span><br><span class="line"></span><br><span class="line">4. **left join ... where b.key is** **null（左外连接排除内连接）**</span><br><span class="line"></span><br><span class="line">   - **图示**：红色区域仅为 `A - (A ∩ B)`（左表独有部分）</span><br><span class="line"></span><br><span class="line">   - ```SQL</span><br><span class="line">     select &lt;select_list&gt;from table a left join table b on a.key = b.key</span><br><span class="line">     where b.key is null</span><br></pre></td></tr></table></figure></code></pre></li><li><p><strong>含义</strong>：返回左表中<strong>没有在右表中找到匹配</strong>的记录，常用于查找“孤儿记录”。</p></li></ul></li><li><p><strong>full outer join（全外连接）</strong></p><ul><li><p><strong>图示</strong>：红色区域为 <code>A ∪ B</code>（并集），即两个表的所有记录</p></li><li><pre><code class="language-SQL">select &lt;select_list&gt;from table a full outer join table b on a.key = b.key<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - **含义**：返回两个表中的所有记录。</span><br><span class="line"></span><br><span class="line">   - 若某一侧无匹配，则该侧对应字段为 `null`。</span><br><span class="line"></span><br><span class="line">6. **full outer join ... where a.key is** **null** **or b.key is null（全外连接排除内连接）**</span><br><span class="line"></span><br><span class="line">   - **图示**：红色区域为 `(A - B) ∪ (B - A)`（对称差集）</span><br><span class="line"></span><br><span class="line">   - ```SQL</span><br><span class="line">     select &lt;select_list&gt; from table a full outer join table b on a.key = b.key</span><br><span class="line">     where a.key is null or b.key is null</span><br></pre></td></tr></table></figure></code></pre></li><li><p><strong>含义</strong>：返回<strong>仅在一个表中存在</strong>的记录，即两个表中不匹配的部分。</p></li></ul></li></ol><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><table><thead><tr><th>聚合函数</th><th>日期函数</th></tr></thead><tbody><tr><td>求和<code>sum()</code> <br />求均值<code>avg()</code> <br />计数<code>count()</code> <br />求最大值<code>max()</code> <br />求最小值<code>min()</code> <br /><strong>注意：null值不包含在计算中</strong> <br />例：人均VS有贷人均是否响应</td><td>返回日期加上指定天数的结果：<code>date_add(date, n)</code> <br />返回日期加上指定月的结果：<code>add_months(date, n)</code> <br />返回两个日期的差：<code>datediff(date1, date2)</code>(备注date1-date2) <br />返回两个日期的月份差：<code>months_between(date1, date2)</code> <br />返回这个月末的日期：<strong><code>last_day(date)</code></strong> <br />例：分区表限制<code>dt=last_day(&#39;2025-04-19&#39;)</code></td></tr></tbody></table><table><thead><tr><th>数字类函数</th><th>字符类函数</th></tr></thead><tbody><tr><td>求绝对值<code>abs()</code><br />向上取整<code>ceil(n)</code><br />向下取整<code>floor(n)</code><br />四舍五入<code>round(n, len)</code><br />求指数值<code>exp(n)</code><br />求对数值<code>log(n)</code><br />求正弦值<code>sin(n)</code><br />求余弦值<code>cos(n)</code></td><td>求长度<code>length(n)</code><br /><strong>字符串截取<code>substr(s, start, [length])&lt;br /&gt;</code></strong><br />字符串拼接<code>concat(s1, s2)&lt;br /&gt;</code><br />字符串替换<code>replace(S1, s1, S2)&lt;br /&gt;</code><br />切割函数<code>split_part(s,delimiter,field)</code><br />split_part(字段，分隔符，<strong>子串位置（从1开始计数）</strong>)</td></tr></tbody></table><h3 id="嵌套、分组、排序"><a href="#嵌套、分组、排序" class="headerlink" title="嵌套、分组、排序"></a>嵌套、分组、排序</h3><ol><li><p>嵌套</p><p>select * from sql_grammar_cust_base where cust_id in  (select cust_id from sql_grammar_lon_base);  –不加t</p><p>Select * from (select cust_id from sql_grammar_lon_base) t;  –加t</p><ul><li>在 PB 级场景下，建议直接用<code>JOIN</code>替代<code>IN</code>子查询，效率更稳定</li><li>在 SQL 中，<code>JOIN</code>（默认指<code>INNER JOIN</code>，内连接）</li></ul><p>详细解析：</p><ul><li>第一个查询（<code>IN</code>子查询，不加别名）</li></ul><p>特点：</p><p> <code>IN</code>子查询不需要别名，因为它作为值列表直接参与条件判断。</p><p> 数据库会自动处理子查询结果与外部条件的关联。</p><ul><li>第二个查询（派生表子查询，必须加别名）</li></ul><p>特点：</p><ul><li>该临时表必须指定别名（这里是 <code>t</code>），否则会报语法错误。</li><li>派生表（Derived Table）是完整的临时结果集，必须通过别名引用。</li><li>常用于复杂查询中的中间步骤。</li></ul></li><li><p>分组</p><p>group by</p><p>与聚合函数搭配使用</p><p>聚合函数（如 <code>SUM</code>, <code>AVG</code>, <code>COUNT</code>, <code>MAX</code>, <code>MIN</code>）</p></li><li><p>排序</p></li></ol><p>Select 列 from 表 order by 列 asc&#x2F;desc</p><ul><li><p>select * from (select cust_id, lvl1_bus_cls_nm, row_number() over(partition by  lvl1_bus_cls_nm <strong>order by rand()</strong> ) rn from sql_grammar_cust_base_lon) t where (lvl1_bus_cls_nm&#x3D;‘招行’ and rn&lt;&#x3D;10000) or (lvl1_bus_cls_nm&#x3D;‘好期贷生活号’  and rn&lt;&#x3D;20000); –总客群3w人，招行1w人，生活号2w人</p></li><li><p>详解：</p></li><li><p>按客群随机抽样（招行1w人，生活号2w人，共3w人</p><ul><li><p>随机函数差异：</p><ul><li>MySQL：<code>order by rand()</code></li><li>PostgreSQL：<code>order by random()</code></li><li>SQL Server：<code>order by newid()</code>（生成随机GUID排序）</li><li>Oracle：<code>order by dbms_random.value()</code></li></ul></li><li><p>潜在问题：</p><ul><li><code>ORDER BY RAND()</code> 在大数据量时性能极差（需全表扫描并排序）。</li></ul></li><li><p>性能优化：</p><ul><li><p><code>rand()</code> 在大数据量表中效率低（需全表扫描并生成随机数），可先缩小范围再抽样</p></li><li><pre><code class="language-sql">select * from (  select     cust_id    ,lvl1_bus_cls_nm    ,row_number() over(partition by lvl1_bus_cls_nm order by rand()) rn  -- 按客群分组，随机排序编号  from sql_grammar_cust_base_lon) t where   (lvl1_bus_cls_nm = &#39;招行&#39; and rn &lt;= 10000) or  -- 招行客群取前1w人  (lvl1_bus_cls_nm = &#39;好期贷生活号&#39; and rn &lt;= 20000);  -- 生活号客群取前2w人<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">| SQL功能        | 核心函数/语法                               | 典型场景                     |</span><br><span class="line">| -------------- | ------------------------------------------- | ---------------------------- |</span><br><span class="line">| 按条件随机抽样 | Order by rand() + row_number() + where 筛选 | 客群分层抽样、AB测试样本选取 |</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 三范式</span><br><span class="line"></span><br><span class="line">&#123;% tabs 3fs %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 确保每列的原子式 --&gt;</span><br><span class="line"></span><br><span class="line">每列/每个属性都是不可再分的原子单元/数据单元</span><br><span class="line"></span><br><span class="line">比如：地址这个字段应该被拆分成省份、城市、街道…</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 确保表中的每列与主键相关 --&gt;</span><br><span class="line"></span><br><span class="line">在一个数据库表中，一个表中只能保存一种数据</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 确保表中的每列与主键直接相关 --&gt;</span><br><span class="line"></span><br><span class="line">在一个数据表中，每列应该与主键直接相关，而不是间接相关</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line">注：hive使用的是一种类SQL语言，没有所谓的主键，也不需要满足的标准的SQL三范式，但是在语法上与SQL基本一致</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 注意事项</span><br><span class="line"></span><br><span class="line">| **小表拼大表**   | 我们常用的Left join是从右表找左索引的，左表小的话搜索次数少，效率高 |</span><br><span class="line">| ---------------- | ------------------------------------------------------------ |</span><br><span class="line">| **先过滤再拼表** | 拼表之前先加where限制，筛选出符合条件的子表，减少每个阶段的数据量 |</span><br><span class="line">| **避免过多嵌套** | 避免一段代码嵌套太多逻辑，多使用中间表来完成                 |</span><br><span class="line"></span><br><span class="line">&#123;% tabs 1 %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 小表拼大表 --&gt;</span><br><span class="line"></span><br><span class="line">**我们常用的Left join是从右表找左索引的，左表小的话搜索次数少，效率高**</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 先过滤再拼表 --&gt;</span><br><span class="line"></span><br><span class="line">**拼表之前先加where限制，筛选出符合条件的子表，减少每个阶段的数据量**</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 避免过多嵌套--&gt;</span><br><span class="line"></span><br><span class="line">**避免一段代码嵌套太多逻辑，多使用中间表来完成**</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## SQL的规范与优化</span><br><span class="line"></span><br><span class="line">### 常见的SQL不规范类型</span><br><span class="line"></span><br><span class="line">1. 全量分区表没有加分区限制</span><br><span class="line"></span><br><span class="line">   - `where`限制dt，避免不必要的全分区扫描，养成限制分区的好习惯；避免无意义字段的返回，可以有效提升查询效率。</span><br><span class="line">   - `udf.getmaxpar` 通常是一个自定义函数（UDF，User-Defined Function），从命名推测其功能可能是 “获取某个参数（Parameter）的最大值”</span><br><span class="line">   - 避免 `SELECT *`：只查需要的列</span><br><span class="line"></span><br><span class="line">2. 笛卡尔积相关</span><br><span class="line"></span><br><span class="line">   - 多表关联时漏写部分关联条件（无 ON 条件）</span><br><span class="line">   - **规范写法**：明确每两张表之间的关联关系，确保关联条件逻辑正确，必要时通过业务主键（如 user_id、order_id）关联。</span><br><span class="line">   - 笛卡尔积关联的数据量是N*M，尽量避免使用笛卡尔积关联</span><br><span class="line"></span><br><span class="line">3. 索引列 / 分区列上使用函数</span><br><span class="line"></span><br><span class="line">   - **不规范表现**：</span><br><span class="line">     - 数据库：`SELECT * FROM user WHERE SUBSTR(phone, 1, 3) = &#x27;138&#x27;;`（phone 为索引列，使用了 SUBSTR 函数）</span><br><span class="line">     - 数仓：`SELECT * FROM dwd_order_di WHERE DATE_FORMAT(dt, &#x27;yyyy-MM&#x27;) = &#x27;2024-01&#x27;;`（dt 为分区列，使用了 DATE_FORMAT 函数）</span><br><span class="line">   - **核心影响**：数据库无法使用 phone 列的索引，数仓无法下推分区过滤，均会触发全表 / 全分区扫描。</span><br><span class="line">   - **规范写法**：**将函数逻辑转移到等号右侧**：</span><br><span class="line">     - 数据库：`SELECT * FROM user WHERE phone LIKE &#x27;138%&#x27;;`</span><br><span class="line">     - 数仓：`SELECT * FROM dwd_order_di WHERE dt BETWEEN &#x27;20240101&#x27; AND &#x27;20240131&#x27;;`</span><br><span class="line"></span><br><span class="line">4. 隐式类型转换</span><br><span class="line"></span><br><span class="line">   - **不规范表现**：`SELECT * FROM order WHERE order_id = 123456;`（order_id 实际为 VARCHAR 类型，传入了数值 123456）</span><br><span class="line">   - **核心影响**：数据库会对每一行的 order_id 进行`CAST(order_id AS INT)`转换，导致索引失效，触发全表扫描。</span><br><span class="line">   - **规范写法**：确保传入的参数类型与表字段类型一致，如 `WHERE order_id = &#x27;123456&#x27;;`</span><br><span class="line"></span><br><span class="line">5. 相关子查询</span><br><span class="line"></span><br><span class="line">   - **外层每一行都触发一次****子查询**</span><br><span class="line"></span><br><span class="line">     - `SELECT a.user_id, (SELECT b.name FROM user b WHERE b.id = a.user_id) AS user_name FROM order a;`</span><br><span class="line"></span><br><span class="line">   - **核心影响**：若外层表有 100 万行，子查询会执行 100 万次，性能极低，相当于 “循环嵌套查询”。</span><br><span class="line"></span><br><span class="line">   - **用 JOIN 替代相关子查询**，将多次查询转为一次关联查询：</span><br><span class="line"></span><br><span class="line">   - ```sql</span><br><span class="line">     select a.user_id, b.name as user_name </span><br><span class="line">     from order a </span><br><span class="line">     left join user b on a.user_id = b.id;</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul></li></ul><h3 id="SQL优化的技巧"><a href="#SQL优化的技巧" class="headerlink" title="SQL优化的技巧"></a>SQL优化的技巧</h3><h4 id="分区限制"><a href="#分区限制" class="headerlink" title="分区限制"></a>分区限制</h4><p>增量分区表添加分区限制，减少扫描的数据量</p><h4 id="先过滤再关联"><a href="#先过滤再关联" class="headerlink" title="先过滤再关联"></a>先过滤再关联</h4><p>核心优化逻辑：减少参与关联的数据集大小，避免大表直接关联导致的性能损耗。</p><p>优化前：</p><p>先关联两张大表，关联后才用where筛选条件，导致关联的数据量极大</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> dt, <span class="built_in">count</span>(<span class="keyword">distinct</span> usr_id) <span class="keyword">as</span> num</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line"><span class="comment">-- 先关联两张大表</span></span><br><span class="line">  <span class="keyword">select</span> a.dt, a.usr_id, a.apl_chnl_cd, a.apl_dt, b.apl_cust_typ</span><br><span class="line">  <span class="keyword">from</span> edw.cdm.dwd_cas_apl_aprv_di a</span><br><span class="line">  <span class="keyword">join</span> edw.cdm.dwd_cas_apl_aprv_tag_di b <span class="keyword">on</span> a.apl_nbr <span class="operator">=</span> b.apl_nbr</span><br><span class="line">) c</span><br><span class="line"><span class="comment">-- 关联后才筛选条件，导致关联的数据量极大</span></span><br><span class="line"><span class="keyword">where</span> dt <span class="operator">=</span> <span class="string">&#x27;2020-11-01&#x27;</span></span><br><span class="line"><span class="keyword">and</span> apl_chnl_cd <span class="operator">=</span> <span class="string">&#x27;0APP&#x27;</span></span><br><span class="line"><span class="keyword">and</span> apl_cust_typ <span class="operator">=</span> <span class="string">&#x27;CRT_CUST_FIRST&#x27;</span></span><br><span class="line"><span class="keyword">and</span> apl_dt <span class="operator">&gt;</span> <span class="string">&#x27;1900-01-01&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> dt;</span><br></pre></td></tr></table></figure><p>方案1：关联时直接添加过滤条件</p><p>在on时就筛选</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> a.dt, <span class="built_in">count</span>(<span class="keyword">distinct</span> a.usr_id) <span class="keyword">as</span> num</span><br><span class="line"><span class="keyword">from</span> edw_cdm.dwd_cas_apl_aprv_di a</span><br><span class="line"><span class="keyword">join</span> edw_cdm.dwd_cas_apl_aprv_tag_di b</span><br><span class="line"><span class="keyword">on</span> a.apl_nbr <span class="operator">=</span> b.apl_nbr</span><br><span class="line"><span class="keyword">and</span> b.apl_cust_typ <span class="operator">=</span> <span class="string">&#x27;CRT_CUST_FIRST&#x27;</span><span class="comment">-- 右表过滤条件提前到 on 子句</span></span><br><span class="line"><span class="comment">-- 左表过滤条件放在 where 中（或 on 中，视关联类型而定）</span></span><br><span class="line"><span class="keyword">where</span> a.dt <span class="operator">=</span> <span class="string">&#x27;2020-11-01&#x27;</span></span><br><span class="line"><span class="keyword">and</span> a.apl_chnl_cd <span class="operator">=</span> <span class="string">&#x27;0APP&#x27;</span></span><br><span class="line"><span class="keyword">and</span> a.apl_dt <span class="operator">&gt;</span> <span class="string">&#x27;1900-01-01&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.dt;</span><br></pre></td></tr></table></figure><p>方案2：子查询先过滤单表，再关联（效率更优）</p><p>先分别where筛选需要的数据，再join关联表</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> a.dt, <span class="built_in">count</span>(<span class="keyword">distinct</span> a.usr_id) <span class="keyword">as</span> num</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">  <span class="comment">-- 子查询 1：先过滤左表 a，只保留需要的行</span></span><br><span class="line">  <span class="keyword">select</span> dt, usr_id, apl_nbr</span><br><span class="line">  <span class="keyword">from</span> edw_cdm.dwd_cas_apl_aprv_di</span><br><span class="line">  <span class="keyword">where</span> dt <span class="operator">=</span> <span class="string">&#x27;2020-11-01&#x27;</span></span><br><span class="line">  <span class="keyword">and</span> apl_chnl_cd <span class="operator">=</span> <span class="string">&#x27;0APP&#x27;</span></span><br><span class="line">  <span class="keyword">and</span> apl_dt <span class="operator">&gt;</span> <span class="string">&#x27;1900-01-01&#x27;</span></span><br><span class="line">) a</span><br><span class="line"><span class="keyword">join</span> (</span><br><span class="line">  <span class="comment">-- 子查询 2：先过滤右表 b，只保留需要的行</span></span><br><span class="line">  <span class="keyword">select</span> apl_nbr</span><br><span class="line">  <span class="keyword">from</span> edw_cdm.dwd_cas_apl_aprv_tag_di</span><br><span class="line">  <span class="keyword">where</span> apl_cust_typ <span class="operator">=</span> <span class="string">&#x27;CRT_CUST_FIRST&#x27;</span></span><br><span class="line">) b <span class="keyword">on</span> a.apl_nbr <span class="operator">=</span> b.apl_nbr <span class="comment">-- 小数据集关联，效率高</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.dt;</span><br></pre></td></tr></table></figure><h4 id="先过滤再使用复杂函数"><a href="#先过滤再使用复杂函数" class="headerlink" title="先过滤再使用复杂函数"></a>先过滤再使用复杂函数</h4><p>优化前：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> usr_id, pvc</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">    user_no <span class="keyword">as</span> usr_id</span><br><span class="line">    ,get_json_object(cust_info, <span class="string">&#x27;$.merchantAddress&#x27;</span>) <span class="keyword">as</span> pvc  <span class="comment">-- 复杂 JSON 解析函数</span></span><br><span class="line">    ,<span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> user_no <span class="keyword">order</span> <span class="keyword">by</span> create_datetime <span class="keyword">desc</span>) <span class="keyword">as</span> rn  <span class="comment">-- 窗口函数</span></span><br><span class="line">    <span class="keyword">from</span> edw_ods.cas_trx_cst_ext_provide_info</span><br><span class="line">) t1</span><br><span class="line"><span class="keyword">where</span> rn <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>优化后：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  usr_id,</span><br><span class="line">  get_json_object(cust_info, <span class="string">&#x27;$.merchantAddress&#x27;</span>) <span class="keyword">as</span> pvc <span class="comment">-- 仅对过滤后的数据执行 JSON 解析</span></span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">  <span class="keyword">select</span></span><br><span class="line">    user_no <span class="keyword">as</span> usr_id</span><br><span class="line">    ,cust_info <span class="comment">-- 仅保留原始字段，不提前解析 JSON</span></span><br><span class="line">    ,<span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> user_no <span class="keyword">order</span> <span class="keyword">by</span> create_datetime <span class="keyword">desc</span>) <span class="keyword">as</span> rn</span><br><span class="line">  <span class="keyword">from</span> edw_ods.cas_trx_cst_ext_provide_info</span><br><span class="line">) t1</span><br><span class="line"><span class="keyword">where</span> rn<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure><h4 id="提前过滤null"><a href="#提前过滤null" class="headerlink" title="提前过滤null"></a>提前过滤null</h4><ul><li>JOIN倾斜-大表关联大表</li></ul><p>两个大表关联，如果关联字段包含大量无效值（NULL、空值等）或有大量重复数据，关联之后会导致数据倾斜，数据倾斜的特征是脚本执行过程中长时间卡在99%。</p><ul><li>倾斜值为无效值（NULL，空串等），如果无效值不需要，则直接过滤。</li></ul><p>优化前：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 申请基表和申请标签表分别有几千万笔案件的客户号为空</span></span><br><span class="line"><span class="keyword">select</span> xxx <span class="keyword">from</span> edw_cdm.dwd_cas_apl_aprv_di a <span class="keyword">join</span> edw_cdm.dwd_cas_apl_aprv_tag_di b <span class="keyword">on</span> a.cust_id<span class="operator">=</span>b.cust_id;</span><br></pre></td></tr></table></figure><p>优化后：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 过滤无效值</span></span><br><span class="line"><span class="keyword">select</span> xxx </span><br><span class="line"><span class="keyword">from</span>(<span class="keyword">select</span> apl_nbr,cust_id <span class="keyword">from</span> edw_cdm.dwd_cas_apl_aprv_di <span class="keyword">where</span> cust_id<span class="operator">&lt;&gt;</span><span class="string">&#x27;&#x27;</span>) a</span><br><span class="line"><span class="keyword">join</span>(<span class="keyword">select</span> apl_nbr,cust_id <span class="keyword">from</span> edw_cdm.dwd_cas_apl_aprv_tag_di <span class="keyword">where</span> cust_id<span class="operator">&lt;&gt;</span><span class="string">&#x27;&#x27;</span>) b <span class="keyword">on</span> a.cust_id<span class="operator">=</span>b.cust_id;</span><br></pre></td></tr></table></figure><ul><li>倾斜值为无效值（NULL，空串等），如果无效值需要保留，则先对无效值进行随机处理。</li></ul><h4 id="用group-by去重"><a href="#用group-by去重" class="headerlink" title="用group by去重"></a>用<code>group by</code>去重</h4><ul><li>Reduce倾斜-<code>distinct</code></li><li>用<code>group by</code>替代<code>distinct</code>去重</li></ul><p><code>distinct</code>会导致最后只有一个reducer，而<code>group by</code>会分发到不同的reducer上。考虑用<code>group by</code>代替。</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 优化前  用时276s</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> cust_id) <span class="keyword">as</span> num </span><br><span class="line"><span class="keyword">from</span> edw_cdm.dwd_cas_apl_aprv_di <span class="keyword">where</span> rsl_flg<span class="operator">=</span><span class="string">&#x27;Y&#x27;</span>;</span><br><span class="line"><span class="comment">-- 优化后 用时93s</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">as</span> num</span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> cust_id <span class="keyword">from</span> edw_cdm.dwd_cas_apl_aprv_di <span class="keyword">where</span> rsl_flg<span class="operator">=</span><span class="string">&#x27;Y&#x27;</span> <span class="keyword">group</span> <span class="keyword">by</span> cust_id) t1;</span><br></pre></td></tr></table></figure><hr><h1 id="刷7大类型SQL题"><a href="#刷7大类型SQL题" class="headerlink" title="刷7大类型SQL题"></a>刷7大类型SQL题</h1><blockquote><p>题型基本覆盖面试90%的问题！</p></blockquote><ul><li>排序类问题（普通排序，组内排序）</li><li>TOPN 问题</li><li>用户留存、复购率、完播率等计算复合指标问题</li><li>新用户数、用户间隔连续登录天数、最长连续登陆问题</li><li>偏移类求和求平均问题（lag, lead函数）</li><li>行列互转问题</li><li>中位数问题<ul><li>每个问题的相关的函数和语法有哪些，有没有哪些问题这7类没总结的</li><li>对 7 大类型 SQL 面试题，结合 PostgreSQL 语法给出典型例题及答案</li><li>对 7 大类型 SQL 面试题，结合 PostgreSQL 和trino语法分别给出典型例题及答案，用最少的表和字段完成所有示例，关键字用小写，示例要解释语法的使用和用到的函数</li><li>PostgreSQL 和trino语法分别给出答案，关键字用小写</li></ul></li></ul><h2 id="排序类问题（普通排序，组内排序）"><a href="#排序类问题（普通排序，组内排序）" class="headerlink" title="排序类问题（普通排序，组内排序）"></a>排序类问题（普通排序，组内排序）</h2><p><strong>普通排序</strong>：使用<code>order by</code>对查询结果进行排序。<br><strong>组内排序</strong>：使用窗口函数<code>row_number()</code>, <code>rank()</code>, <code>dense_rank()</code>等，在分组内进行排序。<br>配合 <code>PARTITION BY</code>进行分组，<code>ORDER BY</code>在组内排序</p><ul><li>排序函数：row_number(), rank(), dense_rank(), tnile()</li><li>ASC&#x2F;DESC</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> region <span class="keyword">order</span> <span class="keyword">by</span> dt)  <span class="comment">-- 连续不重复排名   </span></span><br><span class="line"><span class="built_in">rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> region <span class="keyword">order</span> <span class="keyword">by</span> sales)       <span class="comment">-- 并列排名会跳过后续名次</span></span><br><span class="line"><span class="built_in">dense_rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> region <span class="keyword">order</span> <span class="keyword">by</span> sales) <span class="comment">-- 并列排名不跳名次</span></span><br><span class="line"><span class="built_in">ntile</span>(n) <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> sales)                       <span class="comment">-- 分组排名</span></span><br></pre></td></tr></table></figure><ul><li><code>ROW_NUMBER()</code>: 连续唯一序号（1,2,3,4）</li><li><code>RANK()</code>: 并列时排名相同，后续序号跳过（1,2,2,4）</li><li><code>DENSE_RANK()</code>: 并列时排名相同，序号连续（1,2,2,3）</li><li><code>NTILE()</code>: 分桶，常用于五分位、十分位等</li></ul><p><strong>例题</strong>：有表1（<code>region</code>地区，<code>dt</code>日期，<code>sales</code>销售额），按地区分组，给每天的销售额按降序排组内名次（允许并列，不跳号）。</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> region</span><br></pre></td></tr></table></figure><h2 id="TOPN-问题"><a href="#TOPN-问题" class="headerlink" title="TOPN 问题"></a>TOPN 问题</h2><p>使用窗口函数或子查询来获取每个组内前N条记录。</p><ul><li>使用<code>row_number()</code>配合where条件</li><li>或者使用<code>limit()</code>（在MySQL&#x2F;PostgreSQL）或TOP（在SQL Server）等</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 使用窗口函数</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line">,<span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> region <span class="keyword">order</span> <span class="keyword">by</span> <span class="type">date</span> <span class="keyword">DESC</span>) <span class="keyword">as</span> rn</span><br><span class="line"><span class="keyword">from</span> table1</span><br><span class="line">)t</span><br><span class="line"><span class="keyword">where</span> rn<span class="operator">&lt;=</span><span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用LIMIT（简单场景）</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table1</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="type">date</span> <span class="keyword">DESC</span></span><br><span class="line">limit <span class="number">3</span>;</span><br></pre></td></tr></table></figure><ol><li><p>全局TOPN<br>语法：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,<span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> 排序列 <span class="keyword">DESC</span>) <span class="keyword">as</span> rn</span><br><span class="line">    <span class="keyword">from</span> 表名</span><br><span class="line">)t</span><br><span class="line"><span class="keyword">where</span> rn<span class="operator">&lt;=</span>N</span><br><span class="line">;</span><br></pre></td></tr></table></figure><p>示例：取销售额前3的订单</p></li><li><p>分组TOPN<br>语法：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,<span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> 分组列 <span class="keyword">order</span> <span class="keyword">by</span> 排序列 <span class="keyword">DESC</span>) <span class="keyword">as</span> rn</span><br><span class="line">    <span class="keyword">from</span> 表名</span><br><span class="line">)t</span><br><span class="line"><span class="keyword">where</span> rn<span class="operator">&lt;=</span>N</span><br><span class="line">;</span><br></pre></td></tr></table></figure><p>示例：取每个地区销售额前2的订单</p></li></ol><h2 id="用户留存、复购率、完播率等计算复合指标问题"><a href="#用户留存、复购率、完播率等计算复合指标问题" class="headerlink" title="用户留存、复购率、完播率等计算复合指标问题"></a>用户留存、复购率、完播率等计算复合指标问题</h2><p>这类问题通常需要计算比率，例如用户留存率是计算某天新增的用户在后续某天仍然活跃的比例。</p><ul><li>常用日期函数：<code>date_diff()</code>, <code>date_add()</code> 等</li><li>聚合函数：<code>sum(case when ...)</code>, <code>count(distinct ...)</code></li><li>条件表达式：case when, if</li><li>小数保留n位数：<code>round(expr, n)</code></li><li>数据类型转换：<code>cast(expr as decimal)</code></li></ul><p>PostgreSQL</p><ul><li><code>expr + INTERVAL &#39;1 day&#39;</code></li></ul><p>Trino</p><ul><li><code>date_add(&#39;day&#39;, 1, expr)</code></li></ul><h2 id="新用户数、用户间隔连续登录天数、最长连续登陆问题"><a href="#新用户数、用户间隔连续登录天数、最长连续登陆问题" class="headerlink" title="新用户数、用户间隔连续登录天数、最长连续登陆问题"></a>新用户数、用户间隔连续登录天数、最长连续登陆问题</h2><ul><li>常用窗口函数：<code>lag()</code>、<code>lead()</code>，用于获取前后行的数据</li><li>日期函数：<code>date_diff()</code>、<code>timestamp_diff()</code>，计算时间间隔</li><li>使用变量或窗口函数来分组连续登录</li></ul><p>PostgreSQL</p><ul><li><code>expr +/- INTERVAL &#39;1 day&#39;</code></li></ul><p>Trino</p><ul><li><code>date_add(&#39;day&#39;, 1, expr)</code></li></ul><h3 id="抖音电商数据分析笔试SQL题"><a href="#抖音电商数据分析笔试SQL题" class="headerlink" title="抖音电商数据分析笔试SQL题"></a>抖音电商数据分析笔试SQL题</h3><p>1、有一张订单表(order_info)，表结构如下:order_id、goods_id、order_time、order_gmv<br>问题：请统计2024年9月10日这天销量金额前10的商品信息。<br>要求:排名相同的一起作为同排名次序输出<br>2、有一张用户登录表(user_login_log)，表结构如下:uid、login_time<br>问题：请统计2024.9.1之前活跃过，但是9.1之后再也没有活跃过的用户</p><ul><li><p>创建表并帮我填入一些数据</p></li><li><p>解法是最高效率的吗，bp级数据可用不</p></li></ul><ol><li><p>商品销量排名前10：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 2层子查询</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">good_id</span><br><span class="line">,order_gmv</span><br><span class="line">,rank</span><br><span class="line"><span class="keyword">from</span>(</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    good_id</span><br><span class="line">    ,order_gmv</span><br><span class="line">    ,<span class="built_in">dense_rank</span>() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> total_gmv <span class="keyword">desc</span>) <span class="keyword">as</span> rank</span><br><span class="line">    <span class="keyword">from</span>(</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        good_id</span><br><span class="line">        ,<span class="built_in">sum</span>(order_gmv) <span class="keyword">as</span> total_gmv</span><br><span class="line">        <span class="keyword">from</span> order_info</span><br><span class="line">        <span class="keyword">where</span> <span class="built_in">cast</span>(order_time <span class="keyword">as</span> <span class="type">date</span>) <span class="operator">=</span> <span class="string">&#x27;2024-09-10&#x27;</span></span><br><span class="line">        <span class="keyword">group</span> <span class="keyword">by</span> good_id</span><br><span class="line">    ) <span class="keyword">as</span> res</span><br><span class="line">) <span class="keyword">as</span> res</span><br><span class="line"><span class="keyword">where</span> rank <span class="operator">&lt;=</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1层子查询</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">    rank_num, goods_id, total_gmv</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    <span class="keyword">select</span> </span><br><span class="line">        <span class="built_in">dense_rank</span>() <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">sum</span>(total_gmv) <span class="keyword">desc</span>) <span class="keyword">as</span> rank</span><br><span class="line">        ,goods_id</span><br><span class="line">        ,<span class="built_in">sum</span>(order_gmv) <span class="keyword">as</span> total_gmv</span><br><span class="line">    <span class="keyword">from</span> order_info</span><br><span class="line">    <span class="keyword">where</span> <span class="built_in">cast</span>(order_time <span class="keyword">as</span> <span class="type">date</span>) <span class="operator">=</span> <span class="string">&#x27;2024-09-10&#x27;</span></span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> goods_id</span><br><span class="line">) t</span><br><span class="line"><span class="keyword">where</span> rank <span class="operator">&lt;=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure></li><li><p>用户流失分析：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 不写CTE</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">t.uid</span><br><span class="line"><span class="keyword">from</span>(</span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">    uid</span><br><span class="line">    <span class="keyword">from</span> user_login_log</span><br><span class="line">    <span class="keyword">where</span> login_time <span class="operator">&lt;=</span> <span class="string">&#x27;2024-09-01&#x27;</span></span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> uid</span><br><span class="line">) <span class="keyword">as</span> t</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span>(</span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">    uid</span><br><span class="line">    <span class="keyword">from</span> user_login_log</span><br><span class="line">    <span class="keyword">where</span> login_time <span class="operator">&gt;</span> <span class="string">&#x27;2024-09-01&#x27;</span></span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> uid</span><br><span class="line">)<span class="keyword">as</span> t1 </span><br><span class="line"><span class="keyword">on</span> t.uid<span class="operator">=</span>t1.uid</span><br><span class="line"><span class="keyword">where</span> t1.uid <span class="keyword">is</span> <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 写CTE</span></span><br><span class="line"><span class="keyword">with</span> tmp_before <span class="keyword">as</span>(</span><br><span class="line"><span class="keyword">select</span> uid</span><br><span class="line">    <span class="keyword">from</span> user_login_log</span><br><span class="line">    <span class="keyword">where</span> login_time <span class="operator">&lt;=</span> <span class="string">&#x27;2024-09-01&#x27;</span></span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> <span class="number">1</span></span><br><span class="line">)</span><br><span class="line">, tmp_after <span class="keyword">as</span>(</span><br><span class="line"><span class="keyword">select</span> uid</span><br><span class="line">    <span class="keyword">from</span> user_login_log</span><br><span class="line">    <span class="keyword">where</span> login_time <span class="operator">&gt;</span> <span class="string">&#x27;2024-09-01&#x27;</span></span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> <span class="number">1</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">select</span> t.uid</span><br><span class="line"><span class="keyword">from</span> tmp_before t</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> tmp_after t1 <span class="keyword">on</span> t.uid<span class="operator">=</span>t1.uid</span><br><span class="line"><span class="keyword">where</span> t1.uid <span class="keyword">is</span> <span class="keyword">null</span></span><br></pre></td></tr></table></figure></li><li><p>建表测试：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* PostgreSQL语法 */</span></span><br><span class="line"><span class="comment">-- 创建订单表</span></span><br><span class="line"><span class="keyword">create table</span> order_info (</span><br><span class="line">    order_id <span class="type">int</span> <span class="keyword">primary key</span>,</span><br><span class="line">    goods_id <span class="type">int</span>,</span><br><span class="line">    order_time <span class="type">timestamp</span>,</span><br><span class="line">    order_gmv <span class="type">decimal</span>(<span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入测试数据（2024年9月10日）</span></span><br><span class="line"><span class="keyword">insert into</span> order_info <span class="keyword">values</span></span><br><span class="line">(<span class="number">1001</span>, <span class="number">101</span>, <span class="string">&#x27;2024-09-10 08:30:00&#x27;</span>, <span class="number">299.99</span>),</span><br><span class="line">(<span class="number">1002</span>, <span class="number">102</span>, <span class="string">&#x27;2024-09-10 09:15:00&#x27;</span>, <span class="number">1500.00</span>),</span><br><span class="line">(<span class="number">1003</span>, <span class="number">103</span>, <span class="string">&#x27;2024-09-10 10:20:00&#x27;</span>, <span class="number">899.50</span>),</span><br><span class="line">(<span class="number">1004</span>, <span class="number">101</span>, <span class="string">&#x27;2024-09-10 10:45:00&#x27;</span>, <span class="number">299.99</span>),</span><br><span class="line">(<span class="number">1005</span>, <span class="number">102</span>, <span class="string">&#x27;2024-09-10 11:00:00&#x27;</span>, <span class="number">1500.00</span>),</span><br><span class="line">(<span class="number">1006</span>, <span class="number">104</span>, <span class="string">&#x27;2024-09-10 11:30:00&#x27;</span>, <span class="number">599.99</span>),</span><br><span class="line">(<span class="number">1007</span>, <span class="number">105</span>, <span class="string">&#x27;2024-09-10 12:00:00&#x27;</span>, <span class="number">2299.00</span>),</span><br><span class="line">(<span class="number">1008</span>, <span class="number">101</span>, <span class="string">&#x27;2024-09-10 12:45:00&#x27;</span>, <span class="number">299.99</span>),</span><br><span class="line">(<span class="number">1009</span>, <span class="number">106</span>, <span class="string">&#x27;2024-09-10 13:20:00&#x27;</span>, <span class="number">450.00</span>),</span><br><span class="line">(<span class="number">1010</span>, <span class="number">102</span>, <span class="string">&#x27;2024-09-10 14:00:00&#x27;</span>, <span class="number">1500.00</span>),</span><br><span class="line">(<span class="number">1011</span>, <span class="number">107</span>, <span class="string">&#x27;2024-09-10 14:30:00&#x27;</span>, <span class="number">3499.99</span>),</span><br><span class="line">(<span class="number">1012</span>, <span class="number">103</span>, <span class="string">&#x27;2024-09-10 15:00:00&#x27;</span>, <span class="number">899.50</span>),</span><br><span class="line">(<span class="number">1013</span>, <span class="number">108</span>, <span class="string">&#x27;2024-09-10 15:45:00&#x27;</span>, <span class="number">199.99</span>),</span><br><span class="line">(<span class="number">1014</span>, <span class="number">105</span>, <span class="string">&#x27;2024-09-10 16:20:00&#x27;</span>, <span class="number">2299.00</span>),</span><br><span class="line">(<span class="number">1015</span>, <span class="number">109</span>, <span class="string">&#x27;2024-09-10 17:00:00&#x27;</span>, <span class="number">799.99</span>),</span><br><span class="line">(<span class="number">1016</span>, <span class="number">101</span>, <span class="string">&#x27;2024-09-10 17:30:00&#x27;</span>, <span class="number">299.99</span>),</span><br><span class="line">(<span class="number">1017</span>, <span class="number">110</span>, <span class="string">&#x27;2024-09-10 18:00:00&#x27;</span>, <span class="number">1099.00</span>),</span><br><span class="line">(<span class="number">1018</span>, <span class="number">102</span>, <span class="string">&#x27;2024-09-10 18:45:00&#x27;</span>, <span class="number">1500.00</span>),</span><br><span class="line">(<span class="number">1019</span>, <span class="number">107</span>, <span class="string">&#x27;2024-09-10 19:20:00&#x27;</span>, <span class="number">3499.99</span>),</span><br><span class="line">(<span class="number">1020</span>, <span class="number">111</span>, <span class="string">&#x27;2024-09-10 20:00:00&#x27;</span>, <span class="number">599.50</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> order_info;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* PostgreSQL语法 */</span></span><br><span class="line"><span class="comment">-- 创建用户登录表</span></span><br><span class="line"><span class="keyword">create table</span> user_login_log (</span><br><span class="line">    uid <span class="type">int</span>,</span><br><span class="line">    login_time <span class="type">timestamp</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入测试数据</span></span><br><span class="line"><span class="comment">-- 用户1001: 9月1日前活跃，之后未活跃（流失用户）</span></span><br><span class="line"><span class="keyword">insert into</span> user_login_log <span class="keyword">values</span></span><br><span class="line">(<span class="number">1001</span>, <span class="string">&#x27;2024-08-25 10:30:00&#x27;</span>),</span><br><span class="line">(<span class="number">1001</span>, <span class="string">&#x27;2024-08-28 14:20:00&#x27;</span>),</span><br><span class="line">(<span class="number">1001</span>, <span class="string">&#x27;2024-08-31 18:45:00&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户1002: 9月1日前活跃，之后也活跃（保留用户）</span></span><br><span class="line"><span class="keyword">insert into</span> user_login_log <span class="keyword">values</span></span><br><span class="line">(<span class="number">1002</span>, <span class="string">&#x27;2024-08-20 09:00:00&#x27;</span>),</span><br><span class="line">(<span class="number">1002</span>, <span class="string">&#x27;2024-08-30 15:30:00&#x27;</span>),</span><br><span class="line">(<span class="number">1002</span>, <span class="string">&#x27;2024-09-05 11:20:00&#x27;</span>),</span><br><span class="line">(<span class="number">1002</span>, <span class="string">&#x27;2024-09-15 16:45:00&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户1003: 9月1日前活跃，之后未活跃（流失用户）</span></span><br><span class="line"><span class="keyword">insert into</span> user_login_log <span class="keyword">values</span></span><br><span class="line">(<span class="number">1003</span>, <span class="string">&#x27;2024-08-15 10:00:00&#x27;</span>),</span><br><span class="line">(<span class="number">1003</span>, <span class="string">&#x27;2024-08-22 13:30:00&#x27;</span>),</span><br><span class="line">(<span class="number">1003</span>, <span class="string">&#x27;2024-08-29 20:15:00&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户1004: 仅在9月1日后活跃（新用户，不符合条件）</span></span><br><span class="line"><span class="keyword">insert into</span> user_login_log <span class="keyword">values</span></span><br><span class="line">(<span class="number">1004</span>, <span class="string">&#x27;2024-09-10 12:00:00&#x27;</span>),</span><br><span class="line">(<span class="number">1004</span>, <span class="string">&#x27;2024-09-18 14:30:00&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户1005: 9月1日前活跃，之后也活跃（保留用户）</span></span><br><span class="line"><span class="keyword">insert into</span> user_login_log <span class="keyword">values</span></span><br><span class="line">(<span class="number">1005</span>, <span class="string">&#x27;2024-08-10 08:00:00&#x27;</span>),</span><br><span class="line">(<span class="number">1005</span>, <span class="string">&#x27;2024-08-25 17:45:00&#x27;</span>),</span><br><span class="line">(<span class="number">1005</span>, <span class="string">&#x27;2024-09-08 09:20:00&#x27;</span>),</span><br><span class="line">(<span class="number">1005</span>, <span class="string">&#x27;2024-09-20 19:00:00&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户1006: 9月1日前活跃，之后未活跃（流失用户）</span></span><br><span class="line"><span class="keyword">insert into</span> user_login_log <span class="keyword">values</span></span><br><span class="line">(<span class="number">1006</span>, <span class="string">&#x27;2024-08-05 11:30:00&#x27;</span>),</span><br><span class="line">(<span class="number">1006</span>, <span class="string">&#x27;2024-08-31 15:20:00&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户1007: 9月1日前活跃，之后未活跃（流失用户）</span></span><br><span class="line"><span class="keyword">insert into</span> user_login_log <span class="keyword">values</span></span><br><span class="line">(<span class="number">1007</span>, <span class="string">&#x27;2024-08-12 10:00:00&#x27;</span>),</span><br><span class="line">(<span class="number">1007</span>, <span class="string">&#x27;2024-08-26 13:15:00&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户1008: 仅在9月1日后活跃（新用户）</span></span><br><span class="line"><span class="keyword">insert into</span> user_login_log <span class="keyword">values</span></span><br><span class="line">(<span class="number">1008</span>, <span class="string">&#x27;2024-09-22 11:00:00&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user_login_log;</span><br></pre></td></tr></table></figure></li></ol><h2 id="偏移类求和求平均问题（lag-lead函数）"><a href="#偏移类求和求平均问题（lag-lead函数）" class="headerlink" title="偏移类求和求平均问题（lag, lead函数）"></a>偏移类求和求平均问题（lag, lead函数）</h2><ul><li>窗口函数：<code>lag()</code>、<code>lead()</code>, 用于获取前后行的值</li><li>窗口函数：<code>sum()</code>，<code>avg()</code> 等结合rows&#x2F;range</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="built_in">lag</span>(sales,<span class="number">1</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> region <span class="keyword">order</span> <span class="keyword">by</span> <span class="type">date</span>) <span class="keyword">as</span> prev_sales</span><br><span class="line"><span class="built_in">lead</span>(sales,<span class="number">1</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> region <span class="keyword">order</span> <span class="keyword">by</span> <span class="type">date</span>) <span class="keyword">as</span> next_sales</span><br><span class="line"><span class="built_in">avg</span>(sales) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> region <span class="keyword">order</span> <span class="keyword">by</span> <span class="type">date</span> <span class="keyword">rows</span> <span class="keyword">between</span> <span class="number">6</span> preceding <span class="keyword">and</span> <span class="keyword">current</span> <span class="type">row</span>) <span class="keyword">as</span> moving_avg</span><br></pre></td></tr></table></figure><ul><li><strong>rows&#x2F;range</strong> 窗口帧<ul><li>包括左右区间</li><li><code>unbounded preceding</code>                      分区头</li><li><code>unbounded following</code>                       分区尾</li><li><code>interval &#39;1 month&#39; preceding</code>    前1个月</li><li><code>n preceding </code>                 前n行</li><li><code>current row</code>                   当前行</li><li><code>n following</code>                   后n行</li></ul></li></ul><ol><li><p>分区头到分区尾：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">rows</span> <span class="keyword">between</span> unbounded preceding <span class="keyword">and</span> unbounded following</span><br></pre></td></tr></table></figure></li><li><p>前n行到当前行</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">rows</span> <span class="keyword">between</span> n preceding <span class="keyword">and</span> <span class="keyword">current</span> <span class="type">row</span></span><br></pre></td></tr></table></figure></li><li><p>当前行到后n行</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">rows</span> <span class="keyword">between</span> <span class="keyword">current</span> <span class="type">row</span> <span class="keyword">and</span> n following</span><br></pre></td></tr></table></figure></li><li><p>前n行到后n行</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">rows</span> <span class="keyword">between</span> n preceding <span class="keyword">and</span> n following</span><br></pre></td></tr></table></figure></li><li><p>分区头到当前行</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">rows</span> <span class="keyword">between</span> unbounded preceding <span class="keyword">and</span> <span class="keyword">current</span> <span class="type">row</span></span><br></pre></td></tr></table></figure></li><li><p>当前行到分区尾</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">rows</span> <span class="keyword">between</span> <span class="keyword">current</span> <span class="type">row</span> <span class="keyword">and</span> unbounded following</span><br></pre></td></tr></table></figure></li><li><p>前一个月到当前行</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">range</span> <span class="keyword">between</span> <span class="type">interval</span> <span class="string">&#x27;1 month&#x27;</span> preceding <span class="keyword">and</span> <span class="keyword">current</span> <span class="type">row</span></span><br></pre></td></tr></table></figure></li><li><p>继续。。。</p></li></ol><ul><li>同比环比<ul><li><code>lag(expr,1)</code>，<code>lag(expr,12)</code></li></ul></li></ul><h2 id="行列互转问题"><a href="#行列互转问题" class="headerlink" title="行列互转问题"></a>行列互转问题</h2><ul><li>行转列：使用<code>case when</code>或 <code>pivot</code>（部分数据库支持，如SQL Server）</li><li>列转行：使用<code>union all</code>或 <code>unpivot</code>（部分数据库支持）</li></ul><p><strong>核心概念</strong></p><ul><li><p>行转列：</p><p> 将某一列中的唯一值转换为新的列名，并将另一列的值填充到这些新列之下。通常伴随聚合操作。</p><ul><li><em>示例：</em> 将 <code>(年份, 季度, 销售额)</code> 转换为 <code>(年份, Q1销售额, Q2销售额, Q3销售额, Q4销售额)</code>。</li></ul></li><li><p>列转行：</p><p> 是行转列的逆操作，将多个列合并成两个列：一个用于存储原列名（键），一个用于存储原列的值（值）。</p><ul><li><em>示例：</em> 将 <code>(年份, Q1销售额, Q2销售额, Q3销售额, Q4销售额)</code> 转换回 <code>(年份, 季度, 销售额)</code>。</li></ul></li></ul><p><img src="/./../%E5%BF%AB%E9%80%9F%E7%B2%BE%E9%80%9ASQL/image-20251023164941369.png" alt="image-20251023164941369"></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 通用语法？？？ */</span></span><br><span class="line"><span class="keyword">create table</span> t(id <span class="type">int</span>, seller text, product text, amount <span class="type">int</span>);</span><br><span class="line"><span class="keyword">insert into</span> t <span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;101&#x27;</span>, <span class="string">&#x27;alice&#x27;</span>,<span class="string">&#x27;dior&#x27;</span>,<span class="number">310</span>),</span><br><span class="line">(<span class="string">&#x27;101&#x27;</span>, <span class="string">&#x27;alice&#x27;</span>,<span class="string">&#x27;lamer&#x27;</span>,<span class="number">285</span>),</span><br><span class="line">(<span class="string">&#x27;101&#x27;</span>, <span class="string">&#x27;alice&#x27;</span>,<span class="string">&#x27;sk2&#x27;</span>,<span class="number">265</span>),</span><br><span class="line">(<span class="string">&#x27;102&#x27;</span>, <span class="string">&#x27;bob&#x27;</span>,<span class="string">&#x27;dior&#x27;</span>,<span class="number">305</span>),</span><br><span class="line">(<span class="string">&#x27;102&#x27;</span>, <span class="string">&#x27;bob&#x27;</span>,<span class="string">&#x27;lamer&#x27;</span>,<span class="number">290</span>),</span><br><span class="line">(<span class="string">&#x27;102&#x27;</span>, <span class="string">&#x27;bob&#x27;</span>,<span class="string">&#x27;sk2&#x27;</span>,<span class="number">280</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    id,seller</span><br><span class="line">    ,<span class="built_in">sum</span>(amount) <span class="keyword">filter</span> (<span class="keyword">where</span> product <span class="operator">=</span> <span class="string">&#x27;dior&#x27;</span>)  <span class="keyword">as</span> dior</span><br><span class="line">    ,<span class="built_in">sum</span>(amount) <span class="keyword">filter</span> (<span class="keyword">where</span> product <span class="operator">=</span> <span class="string">&#x27;lamer&#x27;</span>) <span class="keyword">as</span> lamer</span><br><span class="line">    ,<span class="built_in">sum</span>(amount) <span class="keyword">filter</span> (<span class="keyword">where</span> product <span class="operator">=</span> <span class="string">&#x27;sk2&#x27;</span>)   <span class="keyword">as</span> sk2</span><br><span class="line"><span class="keyword">from</span> t</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="number">1</span>,<span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>PostgreSQL</p><ul><li><code>case when</code></li><li><code>filter</code></li></ul><p>Trino</p><ul><li><code>case when</code></li><li><code>filter</code></li><li><code>count_if</code></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* PostgreSQL语法 */</span></span><br><span class="line"><span class="keyword">select</span> dt</span><br><span class="line">,<span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> shop<span class="operator">=</span><span class="string">&#x27;A店&#x27;</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> shop1</span><br><span class="line">,<span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> shop<span class="operator">=</span><span class="string">&#x27;B店&#x27;</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> shop2</span><br><span class="line"><span class="keyword">from</span> t</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Trino语法 */</span></span><br><span class="line"><span class="keyword">select</span> dt</span><br><span class="line">,count_if(shop<span class="operator">=</span><span class="string">&#x27;A店&#x27;</span>) <span class="keyword">as</span> shop1</span><br><span class="line">,count_if(shop<span class="operator">=</span><span class="string">&#x27;B店&#x27;</span>) <span class="keyword">as</span> shop2</span><br><span class="line"><span class="keyword">from</span> t</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><h2 id="中位数问题"><a href="#中位数问题" class="headerlink" title="中位数问题"></a>中位数问题</h2><ul><li>方法1：使用窗口函数：PERCENTILE_CONT, PERCENTILE_DISC等（部分数据库支持，如PostgreSQL、SQL Server）</li><li>方法2：使用排序和计数的方法</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="built_in">percentile_cont</span>(<span class="number">0.5</span>) <span class="keyword">within</span> <span class="keyword">group</span>(<span class="keyword">order</span> <span class="keyword">by</span> score) <span class="keyword">as</span> median</span><br></pre></td></tr></table></figure><p>PostgreSQL</p><ul><li><code>percentile_cont()</code>连续百分位数（推荐）</li><li><code>percentile_disc()</code>离散百分位数</li><li><strong>如何选择？</strong><ul><li>若数据是<strong>连续型</strong>（如价格、时长），且希望百分位结果更精确（允许插值），用 <code>percentile_cont</code>；</li><li>若数据是<strong>离散型</strong>（如评分、数量），或要求结果必须是原始数据中的值，用 <code>percentile_disc</code>。</li></ul></li></ul><p>Trino</p><ul><li><code>approx_percentile()</code></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* PostgreSQL语法 */</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line"><span class="built_in">percentile_cont</span>(<span class="number">0.5</span>) <span class="keyword">within</span> <span class="keyword">group</span>(<span class="keyword">order</span> <span class="keyword">by</span> sales)</span><br><span class="line">,<span class="built_in">percentile_disc</span>(<span class="number">0.5</span>) <span class="keyword">within</span> <span class="keyword">group</span>(<span class="keyword">order</span> <span class="keyword">by</span> sales)</span><br><span class="line"><span class="keyword">from</span> t;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Trino语法 */</span></span><br><span class="line"><span class="comment">-- 基础用法（返回近似值）</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">approx_percentile(sales, <span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">from</span> t;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按商店分组</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">shop</span><br><span class="line">,approx_percentile(sales, <span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">from</span> t</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 作为窗口函数</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">shop</span><br><span class="line">,approx_percentile(sales, <span class="number">0.5</span>) <span class="keyword">over</span>(partiiton <span class="keyword">by</span> shop)</span><br><span class="line"><span class="keyword">from</span> t;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多个百分位数</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">approx_percentile(sales, <span class="keyword">array</span>[<span class="number">0.25</span>, <span class="number">0.5</span>, <span class="number">0.75</span>])</span><br><span class="line"><span class="keyword">from</span> t;</span><br></pre></td></tr></table></figure><p>通用解法：</p><p>排序求解</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tmp1 <span class="keyword">as</span>(</span><br><span class="line"><span class="keyword">select</span> sales</span><br><span class="line">,<span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> sales) <span class="keyword">as</span> rn</span><br><span class="line">,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">over</span>() <span class="keyword">as</span> total_rows</span><br><span class="line"><span class="keyword">from</span> t</span><br><span class="line">)</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sales) <span class="keyword">as</span> median</span><br><span class="line"><span class="keyword">from</span> tmp1</span><br><span class="line"><span class="keyword">where</span> rn <span class="keyword">in</span>((total_rows<span class="operator">+</span><span class="number">1</span>) div <span class="number">2</span>, (total_rows<span class="operator">+</span><span class="number">2</span>) <span class="operator">/</span> <span class="number">2</span>);</span><br></pre></td></tr></table></figure><ul><li><code>count(*) over() as total_rows</code>  – 窗口函数：全表总行数（不分组）</li><li><code>where rn in((total_rows+1) div 2, (total_rows+2) / 2)</code>我没懂</li></ul><p>​这段条件的核心是 <strong>用一个公式同时适配 “奇数总行数” 和 “偶数总行数”</strong>，不用写 IF&#x2F;CASE 判断，靠整数除法的特性自动筛选出需要的中间行。咱们用「具体例子」拆解，瞬间就能懂！</p><p><strong>先明确两个前提</strong></p><ul><li><code>rn</code>：按销售额排序后的唯一行号（1、2、3、…、total_rows）；</li><li><code>total_rows</code>：数据集的总行数（比如 5 行、6 行，分别对应奇数、偶数）；</li><li>关键：SQL 里的整数除法（比如 (5+1)&#x2F;2）会 <strong>自动向下取整</strong>（不用管小数部分）。</li></ul><p><strong>例子 1：总行数是奇数（total_rows&#x3D;5）</strong></p><p>比如数据排序后行号 <code>rn=1、2、3、4、5</code>，中位数是第 3 行的值。代入公式计算两个位置：</p><ol><li>第一个位置：<code>(5+1)/2 = 3</code>（整数除法，结果 &#x3D; 3）；</li><li>第二个位置：<code>(5+2)/2 = 3.5</code>（整数除法，向下取整 &#x3D; 3）；</li></ol><p>所以 <code>rn IN (3, 3)</code> → 实际筛选 <code>rn=3</code> 的行（只 1 行），用 AVG 计算就是它本身（中位数 &#x3D; 第 3 行的值）。</p><p><strong>例子 2：总行数是偶数（total_rows&#x3D;6）</strong></p><p>比如数据排序后行号 <code>rn=1、2、3、4、5、6</code>，中位数是第 3 行和第 4 行的平均值。代入公式计算两个位置：</p><ol><li>第一个位置：<code>(6+1)/2 = 3.5</code>（整数除法，向下取整 &#x3D; 3）；</li><li>第二个位置：<code>(6+2)/2 = 4</code>（整数除法，结果 &#x3D; 4）；</li></ol><p>所以 <code>rn IN (3, 4)</code> → 筛选出第 3 行和第 4 行，用 AVG 计算就是这两个值的平均（中位数 &#x3D;（第 3 行 + 第 4 行）&#x2F;2）。</p><p><strong>一句话总结公式的巧妙之处</strong></p><ul><li>奇数行：两个公式算出来的位置 <strong>相同</strong> → 只取 1 行；</li><li>偶数行：两个公式算出来的位置 <strong>相邻</strong> → 取 2 行；</li></ul><h2 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h2><p><code>UNION ALL</code>：合并结果</p><p><strong>自连接 (Self Join)</strong>: 用于比较表内相同记录（例如，查找薪资高于其经理的员工，查找重复记录）。</p><p><strong>字符串处理</strong>: 文本提取、拼接、模式匹配等。</p><p><strong>日期&#x2F;时间处理</strong>: 复杂的日期计算、跨时区处理、时间窗口聚合等。</p><p><strong>地理空间查询</strong>: 使用 PostGIS 等扩展进行空间数据分析（在 PostgreSQL 中常见）。</p><p><strong>数据倾斜处理</strong>: 在分布式 SQL 引擎（如 Trino）中，如何识别和处理因数据分布不均导致的性能问题。</p><hr><h1 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h1><h2 id="日期-时间戳→数值"><a href="#日期-时间戳→数值" class="headerlink" title="日期&#x2F;时间戳→数值"></a>日期&#x2F;时间戳→数值</h2><p>各数据库的替代写法</p><table><thead><tr><th align="left">数据库</th><th align="left">写法</th></tr></thead><tbody><tr><td align="left"><strong>PostgreSQL</strong></td><td align="left"><code>extract(epoch from date)</code></td></tr><tr><td align="left"><strong>Trino</strong></td><td align="left"><code>to_unixtime(date)</code></td></tr><tr><td align="left"><strong>MySQL</strong></td><td align="left"><code>unix_timestamp(date)</code></td></tr><tr><td align="left"><strong>Hive</strong></td><td align="left"><code>unix_timestamp(date)</code></td></tr></tbody></table><p>为什么Unix时间戳更适合回归分析</p><ul><li><strong>Unix时间戳</strong>: 每天均匀增加 <code>86400</code> 秒，适合线性回归</li><li><strong>YYYYMMDD格式</strong>: 数字跳跃很大（<code>20250901</code> → <code>20250902</code>），且间隔不均匀</li></ul><h2 id="函数语法"><a href="#函数语法" class="headerlink" title="函数语法"></a>函数语法</h2><p>全部都支持通用标准转换：<code>cast(expr as type)</code></p><table><thead><tr><th align="left">数据库</th><th align="left">专用转换函数</th><th>字符串→日期</th><th>日期→字符串</th><th>字符串→整数</th></tr></thead><tbody><tr><td align="left"><strong>PostgreSQL</strong></td><td align="left"><code>::</code>操作符</td><td><code>cast(expr as date)</code></td><td><code>cast(expr as text)</code></td><td><code>cast(expr as integer)</code></td></tr><tr><td align="left"><strong>Trino</strong></td><td align="left"><code>try_cast()</code></td><td><code>cast(expr as date)</code></td><td><code>cast(expr as varchar)</code></td><td><code>cast(expr as integer)</code></td></tr><tr><td align="left"><strong>MySQL</strong></td><td align="left"><code>convert(),cast()</code></td><td><code>cast(expr as date)</code></td><td><code>cast(expr as char)</code></td><td><code>cast(expr as signed)</code></td></tr><tr><td align="left"><strong>Hive</strong></td><td align="left">无<code>try_cast</code></td><td><code>cast(expr as date)</code></td><td><code>cast(expr as string)</code></td><td><code>cast(expr as int)</code></td></tr></tbody></table><p>不同数据库中的数据类型转换，数据库类型按照企业级分类</p><table><thead><tr><th align="left">分类</th><th align="left">数据库</th><th align="left">标准CAST</th><th align="left">推荐&#x2F;专用转换语法</th><th align="left">核心特点与注意事项</th></tr></thead><tbody><tr><td align="left"><strong>🔒 传统OLTP</strong></td><td align="left"><strong>PostgreSQL</strong></td><td align="left">✅</td><td align="left"><code>expr::type</code> <code>to_char(expr)</code> <code>extract(epoch from expr)</code></td><td align="left"><strong>类型系统最严格</strong>，转换失败直接报错。功能最丰富，支持自定义类型和运算符。</td></tr><tr><td align="left"></td><td align="left"><strong>MySQL</strong></td><td align="left">✅</td><td align="left"><code>CONVERT(expr, type)</code> <code>DATE_FORMAT(...)</code> <code>CAST(expr as signed)</code></td><td align="left"><strong>隐式转换宽松</strong>，可能导致意外结果。例如，字符串转数字会截取开头部分。</td></tr><tr><td align="left"><strong>🚀 大数据OLAP</strong></td><td align="left"><strong>Trino&#x2F;Presto</strong></td><td align="left">✅</td><td align="left"><strong><code>try_cast(expr as type)</code></strong> <code>to_unixtime(expr)</code> <code>format_datetime(expr)</code></td><td align="left"><strong>强调稳定性</strong>。<code>try_cast</code>转换失败返回<code>NULL</code>，是ETL任务首选。类型名多用<code>VARCHAR</code>。</td></tr><tr><td align="left"></td><td align="left"><strong>Spark SQL</strong></td><td align="left">✅</td><td align="left"><code>try_cast(expr as type)</code> (新版本) <code>date_format(...)</code> <code>unix_timestamp(...)</code></td><td align="left">与Trino理念类似，但函数名更接近Hive。处理脏数据时推荐使用<code>try_cast</code>。</td></tr><tr><td align="left"></td><td align="left"><strong>Hive</strong></td><td align="left">✅</td><td align="left"><code>unix_timestamp(...)</code> <code>from_unixtime(...)</code> <code>date_format(...)</code></td><td align="left"><strong>“读时模式”</strong>，转换相对宽松。版本间行为可能有变（如Hive 3时间戳时区处理）。</td></tr><tr><td align="left"><strong>🌐 云原生HTAP</strong></td><td align="left"><strong>TiDB</strong></td><td align="left">✅</td><td align="left"><code>CONVERT(expr, type)</code> <code>DATE_FORMAT(...)</code></td><td align="left"><strong>高度兼容MySQL语法</strong>，但作为分布式系统，某些函数（如<code>CONVERT</code>）的行为旨在确保集群一致性。</td></tr><tr><td align="left"><strong>📈 专用OLAP</strong></td><td align="left"><strong>ClickHouse</strong></td><td align="left">✅</td><td align="left"><strong><code>accurateCast(expr, type)</code></strong> <code>toUnixTimestamp(...)</code> <code>toString(...)</code></td><td align="left"><strong>类型转换函数家族庞大</strong>。<code>accurateCast</code>更安全（范围检查），<code>cast</code>会尝试尽力转换。</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 专精训练 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大文档</title>
      <link href="/2025/09/24/%E5%A4%A7%E6%96%87%E6%A1%A3/"/>
      <url>/2025/09/24/%E5%A4%A7%E6%96%87%E6%A1%A3/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重新输入" data-whm="认证失败，再试一试">  <script id="hbeData" type="hbeData" data-hmacdigest="f9bd7992cc114b30194fc653647c95b566c7dba60a171033fce11285f84ea2d9">98b9bce3395e8307c58744c12688842404ba42d2a18bef45e12087b4ccf7cd90e8c3ea113f11461d5ac969984efae3051c1c9b37482d468e586b9cb1eafaac39512c545e09d497df294cbcf4536a30ae2f4fd558ab669484686befd09712cb660aac7b18f41a724314eefb078ec8917f2b8e89b94e0b479dfeb5bf41b6b3bdca50362ca6334c6c823a177675f33c3ee8c10eae54bab66bef04e3875a282e7045d14c2127b12838e437407c8e976f259cee714cf09752972ca0b0a6a03003a90ac09f36904235658616404105613852a891c84dc6687822c1998d2b6373cab71e45b94d1304c82593370a4b33f9adc413ae75064add757e5a92b573235049b97cbbe3845237b0c12a7c08d30c75999c67f6ba36213bce8d552d8690e41f0b068793b809d1dcd5beacb94f33e001b041af246c84934097ff7fde235c3eb171ff942ef271ac0da26996b20e3a7f1c02f12d0ffeddbe6ed4672fca4302027318ebe1c1a1ad1dbb7941af970d11461614100c6e34373a15dda9c59429cc79ea4589335ff6c9c8580b80064c7ef85cdfb91801a95a12b65c57902c294ae3788cfbaefe6496f97d853fe1803d721ecd69c5275ea354b9cc0322dd9bbfb8010c7db063527e9b390433bfec33bc71cc95bb707d0711b4c40a448c8e788149fbc52ba6e8cac787f43477a55c534e4b0d3cb27e3ac94788e1f91b27f55dd18225a7922a3ec32758d7db3a99faeabc8053e564502610b77fcf88332877279678a80ee2adb86422de98d89caad52ed08d7c13f3e3b6b4b500abf8eb83d0a1a07b389a0008a672794c9a775e0e56224ed669b3d0f41b2801133f49823758eb4e08d1b891a5adfc6802ec7eda395d2e9e2dd92a5e2beb60772838bd6d39af7a6c1da9d97cac84215fb82d664461d56558070d74cc9e418618cf2bd15a585c9091881ee26fc74fea9593e1371b69992e8b61e11daf1d4c383b840325b697cadd0703a00897e3f00b4532bc5c67c176749c69577e7f8a0e4df38c84f8325f4716442a733e6afbdb35828dbef25ec0a70b24be7b1b29ec2c070265613c981c6eae62e7c995aa9897487c468291998ea9f4ac71e49676950d2038ea0e240c3df0bb436cde8eb69e2389aff89a2aa9f3640839e17af2cc66743325e9a261e36dd85e506c0351260102e79090d3a42ec4576b28a5cb646cdef18783ed2674fac17337ddd0117ad2444319ddecc986a398d23c1b51611aa73273986e11fd7c8918ba87b1c75647b71388fd7a88f476deb937aaff0542b42b324f58a4d9b608925b6f5aabd49cbeec33da67ecec2d1217f0484957643a7d12fb03b729e08a8a08d4e62f63b7f2c26ee90e6e92ec99c676c138a4b705c2180197d7dfe5f35165038f1b94f501e839873c35f81455d5e284ed135978e96267510ea59f061d4771313b7c50f702109c18baaf726d326425b125b194fa3b7ced3c494437c7cad5919df53943dd7e290682f5c4ba7b6f89ab47d23981119e34138e730fc6f01e58047f9cda4dfd526dbe114808164f85310c1338b30c4b3f1861e21304acc3636084f67b256e3b304d466479904f86fbe83e2c226c5560c60e5399cb4b181c12c225f5aa54c059b11f0c16171889c952696ff0ab79990d0a3c1264f062aa09d34ec5ca41196b300c9cad834224176365da0dc23c31268e2fc77e3dd8ce769de87afda1ff405cb83b186348804dc6b389daaede5652fab599d7bed9e038f4f5e791b82cd91c34f03c0be80695ef29979326ddfd55cec0619bc90ccd31509e97b0fca74e2298477224cf2c9ae107c5d9e27d503d50e622d520b24f3d4d5bd08332e2764eef7ae7cf80861be9be6f302ea9602fc00decb8a9b43769250ecc5c5bd0b4635ba37036398de0590db0e7dc593c9002c9d205f2a6c33d686608a70bafea7cdb6182f2948bfdcd4c5499500ecb179d40b249727ff4d840c8ad5851669181813df56e9047a664c9626af6d98a30c90b96c4fa4bc37c193d381b250f470bc63a05c563e281b6a2276e3591a224381347aec26293945129869511ccb75c1ae8c13762c5972ecc018ebd29aa4ad1217a3f9cb5a0946c48b3d921c54e69598530dbce77fc0d477c2de1891f8b0b755e41373ee3b18a6048506146daa93e612d4d7247b5929c1561f81ce476a09e23dc631574b2d0b42196983d5808c42c5b98a483b1cec5191879776c78adf924103152cc42edae76ebc62e2f958fb48fcb818c692e128fd944f51c897e1a198b2c1cf93efd614197e2b6a6b2d23bbfccd1044120d0470e10a6e0bf1e722e0586505daa479558a232c1d7c86b39c1e7bcb2713670f88526964e3532c7cf259ac5f3679b6f2a7c79397321eb0a65ff026c44eb3621c47b47195b18b3ce67e4df9d0c765e9570a1e8c09cd39944e45b4b5b76b9cb9a2a601b8b35b55237e95fd174c4db04ed6b94741577a5b73700c1bb0e73c4b337247af1118d36589793c3363a4379bf66e95755fd235f628321eff7c828d6d590c5a1ca5ca2a108db2a7e923a879f0799348a4113acf948fd99e5c9f9f6b85b867f230e354f814f60b06dbf36d8c0d9296a9e5d6ebcd6e712f3df8f9e209151b45b80c7b75166384df5bd97b01372ea052d05b2aedd941821974b042c9f8eeee4ebebb76d8a65598a04e344a8f84aff331aa1704226c85d1e6c7b2a19ce102251d625fa0e712c1b31f9c660588bceae4cffedf3fa0e4ff3490881c6ea016d03f4111188aba3720d817c558bd9bc50e9765c435324162937ec824e2051371b6f87d184c2aef33ddbfc5da2c3bd315ae15441727a1a4664a55903de8eefccef91e915d02f4afccba47dfdf2a32ece2f7f6c5981896d4119e7cff97c1801ecd79448a064380c3c9a76f8f267b0aa7b70e9d61d5b81b739eac9a730383f7e043490d0a8b324216c445cc79bab467d70131dc1ca61dffaadf55c1ea5f1fe6d405191926e569de930b40a947fc4790dce21ea02cb32bccb134d56432db42bb97fc8f877284b9f1adc88112f536a2c478e64e86a4c674e4664e35431b9bf3d942ace2f5175cac6ed1361f4a3bf071af586c28a86d114acc3a6590feddcfbe8645a4c9637db77382d8dc451e393274cb5479fe0b67b3ac2a2a433cc8282689b8de190d3f4a533d77842407a6030ffb377e350fc3082381d08de4b928ac136149cd2a6fbea730e57477993e75a9997943ce60fe9a6883f10101ebd94c54c8ba83d5daf37d603ea14b9b4e700371a6dac5f511d8dd3ced18b915574235e8d304998269ad0fa26b2a33838ecc2fcb3a30a08b9aea004d56bcd2f741cab22d5fda54a500cb2af3662c786be7c0f89251aa69ec49d5f44c44cc869623060dd64429d13892c82f4476883a95c3633f4a3ed8ba52f825adad6ddd8b61e31531860acc082beed5c73427b242dbcaca0daaec3164ff7923318da64adab36dd138280748b55ecd3a6bfd1b44f67bb610e237e0394321e81aa509981f5d6d99f3429d3a107a32149cbee2516d54e98db5fb9003021df02c06de145982fc2df700ebe1462bbfce1bca5d8e7956b941e07bbd37d4503c3031d7d913d3d27d33a1e042a4103226ae9883ce2ce53de81a5cb28068a6e0256679ece221ee9b9c0b8b7abbff722ef243145dda43ee459518745ab79bf7050998d97f9994a986cebe8cfef29ceb2bc3247c494ecdac2c9f1f3cfbf3f9c71793623f725eba8d3b7450f21ccb70bcf90b06d7aaf3492e29cd4e8f745c11c2ef653547a2d8e20faa38e78a047d5025458a6c1b4e3f534416811b87d405778522a032ceb7db3ffbf146a05379d671642c08c10b3dd0e18fb19a93d5f50beb15fe19d378828d00707f1d96764383f5b97f22aaf70e6246d29c0194cdeac91321c5026a20f3229445fbdcdf69500d7ccf2c1de4e09fc17587dd76eacfbf41d9975ea25e0754136351a0330a475afbeef370d69276cb84f36b41f1af09b79d257a74efa85bdb0c310861d6c1f845e6fe3e301604d98228c762e7b68a96b7df15579ed3be96a9e955c7b6faddc794d7442f166f413610fe8c6ab2c27ba5b94b71fe342dc5cdec389f83ddcfebd6f9058d3f9f1aecc65ae8e9ae69491b6b6962c6d17c7a47944230452386cdac9c4303f18364e93deb57d9db115740acd200644f1824a56ff27b46340f1bb6af891df0fb459ed90038feac3176cbfd07bd6d787cb335912c1fa9e6071bc158f9a1a72e35c8c2e8c33790c7e781d4d37bdcc0b2a6651afa1ab93fd56f61b9b355a469e8f12ca76b822f114333938f8faac47afcd404e18192bd87ad0df6ffb6c6c5251807704397bc1e14922223ad84587392252803540ff3756f222646927970a21db2bdf58569bab8ab221e5c3932be582696d1254cab7727b2f46e8c3718433040b9baf04c48890b0c905e16277e07e77ba89c40bffb7bb8dca8b787d01e997f1bb84d01db4222d5d24bf91e2491d8ab8f4f08ad14e3a301e66d24ad863af4662147db5365c302486483c07e811965c5f7f8f089c2b9df7eda821e7a1bbc08cacdceb90f88091a8e133237775116b0c824eddf1031edf2ead8c6edf8a7c43d838ac96b5bddeba7a872f435ccf25c79cb139026d08f3df9d54c2bd13bec13b96a454fefffe7c903bdd7083a45960e641436fcd8b5b7c1a328321ac71f0a8b3cc8afb3b6edde116cc14dd5fa74616f90680b38b7ae1a2b19be323c5eb61d08ea0f87c53b6e5f5ed26fd66fe571f199aa30d84777af433eba25e82be733effd8a2fc39e9d52687f33615af0f98906a622e75fad79385aaa53d50a1dcd67f9ecf9e383fb334c45f549269cf29eb8b003dbfd988a89137e0cc17c429d53d124e02c75e965ec2a4f67ebb0d77f4e694a46f189b9e5cb47afa4fca26f8d4e152eb149e81ce75c11ec0ad038662842ca82bdf9eacfb5ab73c1cd33c0d7d7dc0ddb076c26f965f7c4a0bf28f6b734b2e94fe2d2547d7466dcd933c40de51e66b52e23f777112d8d5e6f03ed298ad219d87b9960f014b53c8dbdc913677877fac1f7fd7a596c4a81ac1c5e48889bb11ada972290d7ba869fcafe6c267d5c010e297c29c5a33080ee0a20c266a4b50ebe92923689930321665dd4bd3d154cfe227be06760af771ee712046c55f8aaebdf22069bccadc38bbe7d9884759056d244a662fc126c6d6ad784dba24663bc791fb585a54d7ead88cc852953690a91a7d5179775d0a849a5215f0c692a5ce43ac9bb287698452c8fb452c265105797236f894fabbfd85c23b77a4f7bac7583075b2c33a10e3bea810c5e0e03c67bdafbd22be6363f0b02331b1473cd02ba422297ea9f26eedf20bc8e50c99c7edfd6d9afd930cafb1b947f9e622537941d89591890291ed878e87fb61c9edb45ae39d1ffdad0e982abf830bd5b4bfdc73061fa7e94c322b0c69c22f8e0b91b43de9cf5d98ea438a5304660a2ca14efac899d7c51f3c1d202ece94ca6f74358e25e96d584f7c546912f401842c1daa10fc2ab704532ab45c0f5f8b9bf4b5b34e02cf9ed680c6a7d5ed25239fea7fd08165bfd619fb032c50dd15c39b3614232995792411c7683a0735e4bccc1998a2a795dcee8a7ee8167dc68c0fa9e2a6ea8435da9e950ef0a4cfa2b23fd291eb834d88866ec22cf509ae38743a26ea7e5d19b69fbddcb78da6d17531edb94065a877dcf171aa5818d5201e72e2c24d6057941dd526b4b1bce546bf03a0df41937b1b25b519badea92b0c13cc6296c7f26d44d4a6cb1ba760d7e36c72d4e3c00df68d814088489407a9084f0c6c5c08b97058d5a4e58d3f22c0f38e9521f90728044903e23e587dad707835efe2f709f4c804ad5ffa06e8cc8aab1076a759270504abedb87f6fa892c926e2e509b48181a0e9aa69d2e4aa9c52145c673e008896da609654e04e0b61b4988256041628f551ffb6111f0096135262695e99d05eb651132c7f4a9a7c05d2ad988af43e4b1e31561513b7d17aa9fb9bbbce307fa30fceed322852f8ca919f1b394b565a30faa9e325aa85def77bcd428ea13c43525bb22a048d7acb5009267a48f04d13a86c907e75a8039345ad9f1622081b6185062514b4b3c49439ab700c480cbcc58c9682070def6704792c2f1af2cf29b885a03f9c35324fdc4c4cd6dbe8dc135669ef0fcd821121eff643e55fd7b119e5788a161df706d5339c8078d1f02ec3b4d9742505d53cca33a1d884150bb878f7d801dd9369d944b09f54932827a2622eccf8713592dcc3b5ac9aae994e8653c2da867464dc7d74af7c49900c92a1c85700daf84d51e5392deaa354e3e09984863fc4fc32984d8881db705128f0a470de4fb7954b88d310d57e5f9de6b0f81c7b1cf72302605eb7e964e21f5287e80e8f641fe8b4a4042576804f1c8fbf34b5a2fcf2a4fb29fd0c6490ada4a68e4219422553344c8bc61a3f53ae68d175382d54bea20a96404e66568ab4ac8b68acd8929f3b8f3af3835bc8d9f2eae47956a679f4ff43109cfa91aea694c01a8fe6dbc74bc2886cf02c01bd00e298df24e3a22306661141cd5df2ccf54009b647a20820546fa216155b87606a88b31688271f3091db7d2470ab39d352ed95e5ea0029182f84ad4c4d4a2884638f0082676289fdcf17c2f67bdd8a2103a4eaab4193386742361e63c212aefabc80508b3a9a5015daa47264eab4c1c8e887a25df2f7e26438687bf6b448946c67407ddb5beac415870088d9afeff2be738d0562d5239f4e740a4e0be74df8b0c1a39376ce6753ac103b6f6e7411928087870a97cf6c6cb6973508ab6aa07ad2aed445fee1063d7f65ef028fb50997f757d87aa26b7f963dfba7283caf20336f87d6c5015aa0c018024f01dc9caf427ee39fd5f97aa9bb7e1069af9ea6a131f6bdcf45903940d3641ee2a8cc5d699f063c0908ec90c580d400bd51c6a23fc8f5a3ccb875707e4ec7345362544025d40767eba4a791ad130e8697fbc81b7ac9b5c232a16796d3201374dc58d681c663bfc364e6a8a4132d7b02da78daa56e5a378bc0f8208b1762e62a87edbb75c7947c9b61d12fa819daa8c04fd8eb439f227a6da4d8834289ab50009dd5d169aecc0d2303b28b4a58c9b6d1e8fd2a370db0163f9ea383a1e66d00a2660409864c569a260ec0042bb514dc01d8a126c8426e6aba8a0cdd97766c85bee48c6c865acd433961d8c11b38b74d34aef4e7b9500d5a524ce8dc371bace9dae2f8cab89c75a2a5359692b16c34679df2c5fffeab041ac2cc3b8dfdbcff69ba9c76d4684c32746c33bb5af030a612fe7e1ce2cdcd9d149b443bb62305c2519aa37af0fca562b982de7c8ab5e6ab6e9afd193b6ef2b0002c317278b025ea01e694061ebbb19ae06d6af3bcea765e7b1d70155b3fb1ee61b084792d5739b155a106f10281f7714fa4bfcde99f418c54c88edde05e44611c1bc6ff85eb5464d2cb71a74ce3d0ecb86a647473c83926ee7885d7cff65248a989e50abf244d3b85b356765b7930e4e875730af57796bffaa2443692c9f699a02a4414ba0cbb35adfb382776771a1a760b5db3390aa762e3f717c6f6be4ea22a12c5bb2c18c17bd51e20f56a621a597a6da5935396fb762e44ad1078b8c5e95454a5e868455637482bffa7223485329ad0c7dfbb255320cdb3ec6028bc097548f72c7c6b4dda5c57fa88410cb5d474c372d5b16776b16ca857e88d6222accdb622e1dbe29e599fc8264d1997f5439a225929306b9f9523268eebd7b638d9ccb8ab24d12ea7f05c8dc4326283b91fe1403db5105d4eacc654dfe3440d9cfdc8f33fc133cfca7796e08ba0d89df2e07ccce1ecb014033923133ad34bd549a4cd4e3145be2e54af20db4c20055312f97adabd7064b022cb66b3255130cc39adafaa079fc3d28fffdf909c611cf2301ac8d3a29054049907826946dbe23e67c6589d428915098ad6fd615a17787390215118c4a8fbee0448fae64cf075bbe7eedd82d7b489c58504bc3139c5723c16c6dbb1636109415d83e2fc2598d8dee26bf5af9f16eba06c65512a32627a9c3309ca42091e971039df325590b3700d778df0e076083c8af2edeca64cdb07e5835548a7206265a88d55af388d455c93d1ad965bd30bd764b5479e5e81adbc9fc1da2a2715f6acdaf15dca11c5fe61e64bc1de93f409adb03033f0e4983f37b67dbbbd01f10d4d4348e4b6b12a4630512d2647a3cd17826120a528407b785e725a70abac8356c0f1f3b8d652eb75388a1fcfdf6529431150c5f6b29bd7a9954488124858f1290256ff83f7cced5148fec38071b2d9d5aecce159105371dfd9b27f334669f427c6964c2fc76b993d51ee33212a4ba7f67607ceca6077770889c2f293d796996ea9cc9b1b2c6601ac3bf3cd37ee5905c2bf4e7ad156fba6254d1f0ebbfd04c44ca97367e38df00953476660f18b5feabacee525f29f73d3ee348dd234e4d543c23b5ef1d6232f392250ac2af7d092764ad904883241fdd5bf85723c6403c2de9ef0ad4822a8bcc1ec4bc2c4f455714f8ccadd068c29f8c7a29a2296e0df14d771a586a995ba6410490be2aaf29bf95e6e7c92aef21a1358b3f0462ec6f2f178332d8f08bd70d59695b2958f3f11b49683f80f4108d01efb115d43d510f51a0cd00ebc8c0b4ba964e4351234a5863686f6a67c36ec32cc8401d541404b11ee3dc26cd47a33ab42b6d060a199b8e3775cafcda21352ba5d2b4121a1945df97744df5ac5fb8848149cd3905fb68edcf79f758418a59b9a8dc0bd3cb6e1f57d59079d57fcd0bedf572a00fc7b894e066a5dac79ec0e00e3bf2963c95d2f396584c84c2d607ff35e19d7e7866ececa45ade1b654273015368e5c2a4e7c40dd7deb5d9d9a92614e516712f9821594abce6985424da2c25b81b327ae920a02e5f8bc546973396b1bf78bceaa05138bbed38f23b89c13374c4e457c62f3382a9c85d588c85aa2a9c78229257360e746d6a59d113e95654a49d8a737af9188a730c19f5a1b9a25658309bd723025cefa51032d09b21ad69b5adf92ba01baf3abbf821f0c274e3b8506a0714062c240e83b395b9de2b6254537374802bc3cca1ef1482a7623a694dac0f5a22172263c2d64d28c2ccd5b282a1103cf20d34489dc79a4ea7f9515dfa3798fefe0c0780d39ff2473716904688e32e67339af23ccbe6eda73a56a0b69275b5be3b57c5f2ead96db4bcd1cbc03fe0df55e3eaca9ee712a369611907e26c21b32ce9037b5dce656539706be2003a32c2df1796cffe05776f5b5c48f107465bc18c7de368feacc46878e159a5a0ea93a9e13782dbfaa5f466d9775871643885784a516d900f119398737d199c667b9bb3c8732145a3c50b946da4ee2b837daca670ba1059c61c17a11f72c7f009adfc8b60eb5b91e4199788e8ca03f011681d3d73cb8122d3a383d80a197b61a29e23f55fb9b844333d49635fe2d4c501f76b77b902cf11b9039d1f7ef3960b4f16853c9db7300c13f93adc83549dd76597c5f86b4c15a067c5cef1a069575fd15c90328359e0c2b64b8969c7054dff21c87f78ab3afecd1785a35d333e10de2f0dfb6c5f846c3d6d72d3790fe7fa39164b4f7e8c2d30e97fae936b596dbe21b3767e7920a47817189c29b075a79018a0cc2192e117bfaf1548c77f7f10a550c6d3fda1ffaf9f6a30fd7b163e22503384b1047d1e44469b461a6d7f72d19b68de369d7635df83035c8abdcc2d7c19f8b6e1af27cb801d03b6f640332116c93d72e544de6e6d2f67663a4782ffeb08a59ef6ed683902eee90730015aca1a6a095ea872cebe99e0b57799677c8a30a1affa40e108db782657e7e210bd44a0153baea9b2ada661e539699dfff593f44e8b558173dc6ef5dbc0e2b01797aa30c844fecb697b8f34750200791a81e044464145caba53770f7b84b65602a0bd5220e4e99feb70988b3fcf946e15884610cea60b900e5d6d754a69a5e42ceb04a1f3bcaf37436132ed389d40934d5dee01037e93060eeea5febe77aff73465360cefff6df0a6989c8264bfee80a1f29cb3c24e4e607701c414792b00fa7a18601fe67298595e4e27e71c81cc7fd7439accb041dc5a2e3db051e6afe7c5181244c53705dbb3941abee3c5d0976a1cf4e62f41cfac059a740d6220f64a089b23a51b6c2d1b1471d017d46cbe47e23ebe0f7bdd3691cfeae28eb77262c991c7ad8d622d934b2e9aab5f7dd294219bbee5629d677a57c844775c36048ee2b1a2993c04b5d9991f939467484063c2d54c12b6389cc0b35562d74a0e3b3d491925da5e0de81c572d9a172bc16936d6a02dd6a7329ff6f7f256357a73903f92d111539489bf7c3785abe79880e3b6aebf184f04849203fb1dcb4ec71ac6c1e4495112c780a069e07f99cf9fd9506a827e97e608a83ea556b42d4a7372ad5439ecaef4e631c9e22da104067d036e443f3d1f16c5e8d2fab1188807f45be716741d3bffda64a8549ec4afc15b490f81e905f7ab3bf29dd19542a7ac419c8759bde19b4c9706e3d66aff1fe37322f477e2c5c7ea30b19ec27015f32e030da21ac6bda77d6492d38e0863675bb47b40020fa1444cbf6f32ddf1b96ccafe61cc2c80870d78c40ccd73f4e1abf457d10ba414749c0f91e76b84f309421d5eaddc11587be117d5278094f45c6c43b39195f9eef549de38b5788cfc799e7195970149586a685ce50ae3bd51cf456bf97a81fc3011a80d74702f126d6f9692b7b9d90a06e6cb2c1485df5e049025c7e495c9003c89a555710d3d6fc6005a2020afc1efa19f55db22f0ee1fee5f74fcdbc2f28d8d2920608e056df149a65416faf77a9d759216dd88734809f1100cb815fc4fc02a1bd8c8816e3b83f25e6b04853994ded0435c876e774c43b97dc17946d8b00447b98039dd8b32b049bb1e34a7caf03392e1e2aaa1edabdacd3cf3fd9cc9a2b509dbb802c46824f761fca02da8f2bcc6c846d776348c6cc835b0d65b4544c7d8f002e1ef0aed38b6c883c4b10032aa8089d98f497ba4fa23f917b910d26732bfe587ea9fc27ad35e28a02d6af2ebc08118648a03b7179a8c69f8e6da1058eb99b3997f937457081708807bd5e9680b52bade496f793744b5b0b831a375634f18a61b0b77b320394447ccc6ff3fc46ab4c1dc902f7fa02d915f0ac6d2b10ba917bb586069fbe6023e96bcdba808ce22b2f0834dd14470d413e3cafc4e92ba73a91dba0987259a048fc066c1a651edb3bdf29cd229d9bfd6852e19d14c50c572494e16055b3518d152ec2e178bdb5bfedc00f9fed212bd4218b5978551237f1f32b6fa60b2d708815798241e23c178b9947f203ca300bc82a5085db35ce4d3ddfda3e6ae0b9dca0aa31a4f898a9423b81bbd27b37ad9870cd418ed508dcb038614108cb1c049eebac5822d84dea9b209dda548fb132ec0c1894bed221cc6047548fe125d92a2967e97b5d5e835cf650701423d138cc3c8d5716ba4478a5128e75d4a262270a0dc7f7413051ba3460f4ff68f86aad38dac72c99b27e4faf399f730500e497639d6d7fbcdf65aa0a22f69245124151985e3aabbd811b8d20adbf5c4fcacac86d66157595cb01a88d18acab82556bbd04d5e0422f7097fc461e0a1b68b78f723837bd1d2fde424e525c759b32fcea0cf795a70fe56b8ed06425d306326c3f7cce717a26a410e913d4d938b2c718cd51133ee7d9c6182190bcb6d9d5cf05e0ccd8d516b34639760947d4ec06ed0a782ac58f3b14c762b7ed9d07f0f704a54eb2dc81f906e45b049193639bfe01afea0dd0d9ecaa69b9165dac23098bbf1e0ef5ade7c546657fe437d7e352d7fb997347d141afdfbfb843b801f6beb6b5e8a95a820dc9376bd20bd3411fb87e233a535a4965b7db689771aebf3cdc2374c9cf762871a0bdf740fea25b4756b4fb508e37d69f3173578b37ec5343645c02961f8957402c82b3d471f90153a42abbecc4ec5ecd2d965f76569416e88a8b6435331ae5701b080d671f2d9f08f83a54041ac0041f3cf2a6368e8973c14f7e9bb449f7a790fe19acb4878c6a48a09327e284adcb3348387fa72c2622c5e226109440c8e34551427b50ed541139d1f289ca58d132924895929cc79f6d42a55e7aa5f9c30b32ecdf11342085ac2eaa37f02890bd7cc4cd9762efaff181517381d510bc6b9e39982c3408f2e224cdc3a86233390561da397fe50e3d1f06e5e8de2e0b66c1327152bd5666fa3695f7f85901064a2cc3bd9bce1b7958352fde5392daf162c884b11f7f3d0167637f10f43a47b1e42d43b196b2e41c4466d3865f8aaaa04cfa1a147a2e36126061e081b08d7d3428dcf03e4b31d4054f9d0372247686195d038562e566dc51c7bea0b8a1e2f95960fd46343971c064c77333fdee17ad4574a3da7ceb78b1a426a26251583a49ea809432391b45dfa479a06cb88ea67505b3bf9e449d14766fd62ccf3d763c5f8ed451a5f9604f7b24d86cfdddda2ede99df9edea1b912ec162d189ce4d5a0cba82c356b0879789afdeaaa8bd29fa2f47907282b63592c382228a1e546840729c663b1c106841013e49a054071b4acabfd28a07368f11d8a29ee3ebd8fa1e58d169ad4e3d635c8a51e60571be879caecbe54b72e81aac36ba25c8b6f02291b3e79542001afccd2556c8f3cd95995ac0f6bffe96e8dbca3c0873e070877717a020035e0b3682249ff36b304f8a7e1165d2c99111a0f64d59c171ef81827b15fc518580783340155b3cd9725b0e7b912aadd8da10ebe1f92c6387516643ee042f81c253c094224934378ea5812d1fd597625e63eb54d1625d7fa10ab3c354b059db25ae77f02c9d94a355b56aac4b40687273a7d4a5945661c242cd1e1b206d03d6ef1a1667c6b488506dde338afcdf8c1f8e553bf42c6f5cf8e995edee4c2bd3e6f4f26b847c75d87faf4f792a7119d116d103c2ee8578481b535f8f7651e41c0e2278f59ced3ec97593b117b2e77da6afaebbcd6304c476f4ff3e7435e6198b2f43ff91edd140ea8dcd73ef759a275965d2d507a7cc19ba51501f932bae05473a116148ba4c45bb5ff8ecf15aeaa973bac792a143babc8c2676813ba02692a786958af1346f3f54df5b15514991fb6965fd04d2cdb64eed52cd13a132d85ce118955780ce48997446c8e4bcc8ef6bdc9a8c62633a515bef2f1e77f12147ee85c02d1a53bb122c6f7493140495592a26d59723f348e0b91fa0a378bea8efa9be3a4f244e447ef7f64122e828132ee26615a336d439b154089b781e4580e81abbb68e1adf7f22d31007a3a7827d08e20091df51d3745a7427f953c01322c0aac5057778a13c399bcf7a0b62dcfde63e4d0b92ebee372e30a7a9cfdd335dd5f112b812c7edb908d291da24e49435a77635c7c9c2af65692f508ec938f8bc11feda42ee1e71ed51b95b650ac11744db11c997dc488a66cbfe178f65482a762015a6a5858a60e24587431363c535228a65ddd81dafee4e9ab733c144888e9778e0359471adc5a2e3a9ab0f6ae98786ea549a19ccae1ab32dae0f0323f7682ba655ffef7257d63fb083cc1fdcccc8360608bc3e65ea47b85443d8bfc904110df6345c8408d8ea4fb8bc3f00f7a7ac90f8e06116f59f7ecbe8b74fb2f0be481a47202bc7e320ac8b34cca204bda1998c64ff10efffcbfff9d849d64a89c26d5d8d5da04016efdcfbbfd3748078fe3da2ea194defc2b55303662e932e33dfae2cde82c1e3aeaef94fab536c3736ae651d73b6703ab280cb12230c40a73417f679d533a4dcce253b673542236c5545c5ac63cdc55d22e6e7a8c483db88dd6b2159aab04cc2fb089cd6b13a2fcf81becd65d01243fab42a0d28f523e139ac034a3f9ccf558776df140a3f9a03589afdbd94701aa4b08e4050df3ae2268d8876e0c9ad05f966a473a6c4859fb2837a9538ab41237afab1b36e55dcb7331ed3065d06e17b4be441a45a64d7ec567fa6e1e377138dadbdca8bdcea92cf6e5c3deaeb2311839d7e5767a3dcc9cc0763afe3e94ff829811fe6f0c071fafd4eb788ac5200ebf3d24faa8daab4a382d8974983eaff81c13f137653673f6f999b810d44d1b2aaf7589bf81c9acd8e4f0508ea8d2c693c24957df6bbd8e2f8c707a4dccf9506d7469269d16420ebc281a05192f2194aeff3a3b43e293f7da77647a8c946ba96d8a56f595bb601cce2e8764e10829240474aed5a9301f9bd83927c6e937dc6e18e5228e1dedb2308ee0da2f9772a5c0be8e6d3bb791e72c71ae3c674fcfbb13cbb405616733e732d29e185994a5e598ee397310c82b6f6da2f84210b09502d7f713a2eda54cdf7661591ffc4de2c22fef9f64bd0d896d0bfdcfeee88d3d3c2546b1fa820eee2f0c9a7d1e6a93fa6dcaf52835f3a11a7902caaad5ea637e4d3dc23a4f4650cf7d293f8eae9c6bb8dd6659ac1d3463ab2ff929e71ad9ed84f94fa635d267519ec05822e6fd820833b22680330e9f102e7c1e09b8c3e3a3fe3f8338f253ab2b77fb8efcd817fbe33dbfe963e9926c49f8c50f23477bd4aadd174dbd9cd653ff7beb72e82e0e3e4cb404aa5e052e0b5a29c97091461ddd93e398f833495e9734cd9cbb433cac719ce2ebece8f64822ea7004a5ae21f52f8495f0ae306fca1518feafa58c4b80b9d9640506bbc0c52b420387e6a5ef3d7a52bcd39b7a24048b15e001c0ae8e82dd076db6e56ba42bf78ccc6fea250232ad5f85143c8951baeecf77572d8555f5f168341ace92b390c86a7df07ee00de4dedb7f909993b3eb4509a49214d0f24ada98f842b075d0869a755c2f2d8bc7c2b3ae33e227d53794f5d19432eac1c057ba610c7093705952e6acdb1c17db6454ce954da1d891c6899cac14989fec9ade3cf8d90572392a34a1a49388263ddeab9abca9b32d6d157f202893ff55795be03e67b6e49b128308bd9673c779436d47562adecc9804aaeefa2b3e7ed5b37f69bd21788797ce86075b223c5733fb736efbc2a968cf411b648b063bfeb51bad964917f9c50ad07b1835086933e22a1907576cd474f1aff367cd4ef20ad6b8c6dbe8e14153d3ad8d6d6ff0192fb39fe75bca5ccc12eacdfac2908b6cfe6f89435cddbf47ebd9c3ba47ff5dd7ced77d26420049c336276cc485443c51e53b0c7ee13b503fb4e8528d9e3b0c14ac1f8f6767210ead7c378b2bbdbf7f802f3df4e28a8aab0144f724394b8ca8e638b5cc1dca565a86547ba83c185d732e3a651fda0c4ba358053d121c25d15eb782666cc5fe0b9fad040497924f5016893527eeb6ee4122145c904a4d1e92e01348865c55e73820e370494e41a31cd5efa476d950b2b7c9fd6d79fe62cd9b865a9ec531580c604b1905982ed8c39b0821a984cbe60e0b23d9db99b09a29616f558115163b226f972469296fee0b3a6fff5977cfd7648f719e7286b01a4a1fe024558083844fa1a390fb16ae3aded34ad203c3e218baf14d4a97e31996d00415d0a79a5a496d842161721d3d9f10bc1175210047cbfdf45800fb98f6b741f9c3fbc7a99bfe175f1645cb36c2fd483a44e2705a9a57b286a4229ec178e585a243b35552f8ae54b444554d2ba434e76f2cc2c92d7cd4069092bd6d7556d4095cd5f0958834f03bc93a7d707f093e05bde432ea1d4b48ca185a5830103ac4abf11813cb38049e92b25c103b25b01644477484066e6b10248a7702a8194faaea9a3b4c505b4b0c5b8367c372f603b4b3f1366711642bc46dc121a84c549bcf273e237a09b582dd77f109ab452afb58dac9aa2aea9f61289258ef3f64b33794a99285d577a0f3830956d9f6a3bc2eeb3cc4f7154101196a8e81083533b11edf1670ecf3466ac82937fd81dbd0c8f2f4abbd155850c2d5c091bb6df5b78a4ef90f4cdd51d6118169170e6baea0feeb88f7436a6886ead4e130135a18bb5a3f3823da9b67e6bda530ff3ab7d64b1e50a4b51caf42a57107a6f4aef5bbc9dd325e73972ef84c494b98bb7bfe92f8345f43b21adbcca515b53148e782966a76e29223b7f777a609f7c46c17246007d916705ec0b57ad27efec227b4e4e94a8bf6356977b310e84df66107b2e0c19b52d9dae1ced64e217f7c3735b8c162acd0f9caed4abfa2ed0aab46d4c58f2f4581443a26127bf1498dc0d25feea404e8739a885d76d386dfa172829a6fefcd67c8b848dcb47353b06c83c7bec4bc3d5c27c8eab4b8ecefa685636eac1ec51096bfa1f29679ca58a594221f44166aa8f40a3433b262a95e4ccc4fdcc5c781f099b01fce8615f0f2885eb07a46d5ccab846566a0f4a50bca257816dac3f36fa3f3755b74d352f3abd8ef4cc833e9b3ee8833ba81f89cd9b0c5a11318da4bf970552ce29cda9b9f16e3762ac02eed2f6fe196aa006ca354a43688b6e2df28e0a61b77d0268982f82e0578899ec83794b6214b0d7d9d6c4054c625620bfa3f7b9fd68c68bcf7a8321dc1f1cd27f0f29f9c160ce12e214d026b903dae0ef2f23ac610ca5435df0dc5de15d60446adb22373fc35b57fac5a36cecbca68f24e56f52e0b4524c22332a62868653db2c7c28ade25e30d40d0326df888837caddf838476426582df8d2ddd1ed5193cbb3651b0e5a69bb6fc03919708a338563b29bf5d9304edc1686be861a2b367f798edeace6b26bc7ca936d066528c96cd54de163178cdde6c7e90e7a7d2821f4cae76ddadfbe36de68ce1fd5e7a771c1f010c7ad2f8a0e044234d637e6237cb8cbc89a88048e54d5e1390e9f3ccb47152bedd877d59e230b5742b9a154e935b564782fe1833625f30758ed0ff45f7adf950cd9600fac2984fdcac3b19faeb9b03b2cd02a7a03b79bd75c5668e79e34b1ef54af5dd7303b3026d5932bcfd2acf63a5a73ca41dfa1d6b8b41f1683273de850c1893095a29bed5e6fcfe37e8521c4e80579802ef2cfcc9f1ef8cf812b93e8957379f7aa30ad8d5d48164e01b54dab4f52994de928f8ea8c5164e26f7dcabbd912977b5ea5bbe12b74cceebf7b2f43f2de3290ef95cd9e499cb22b27a1500ba5e49496f8853aa7e935d58ccee1a0b478cffad5d05fa46caf9a9a55221904efb21f9528a2b45884081d4d3c21a30e20e3dd4a73696f4aac2f9f90d5cf7c02d1e831886a3b812106162e3402cfc9ef741ee710bbacf8e9bdb67e845d6846b786f72b05cf60540d76d6839315b7185eb9d1ab75c10c6868011bca788500b60d365c584b81555ae95a3f3f18352be7d1c9ba8559d0136df323ce9807dd8dccd7b3281ac1f7fdcc71e8e43f28430dfea876deacee9f6988b189b455cf2d757517cc5a9cd5177f0567c522e940690edf917a49ca9aef24f6d3c04a8457b4462774781e168e88b4f206d78583401ed3cdda2ec4a81b3b879328b04b3b45f1fb1dd41e67d09a6ee0c9fa0a413b3b7ca2e2eb136dd7cf37ad5a1fcfcb75ae6605e02d44c36acf224a0d2692cfb5b3c2a2ecd1cdb009f81bf8b040676b45e0f3587ebbfef0b694eb864b8479f46d1ecbbcd20f5280520af2720182a4764bbf0088edaf4acf424d2a9197c5bdc010b7a32d0d2210a06907141a60c7a9a5bb705054e4fd8295a10d13df2ee89c9a6df6de33dbfd89829bf4578719ce65cff715efa43a88d21912dbd83e47a700967228c229abd41e25376745259c3cc3e5fe1e6b9166db4eb995a1a5ba10e766caa29563f25b603fe196e991f6ee22a26393663de2d5b7b74248c61b77be196ce1e82c8df6d57b33c53416d974508c9b5980ae99633222bc8dda7a9ad236436f14ab2385a35ce210a2466af8120f890da5212c61c8a09afc587f03ceca468fa48163dcd627d5267f7c50a440ca2d7d1ba44df705c399cdf36afd52d911cbebdb1df7197e19a0c58597ff23208ab7ccb01cd3990f94b3074140e318b8f585bf131038a75f8f2ec81c9e0bb4259b496cf3f278fe06232be1a1ad8a86ba669011e3054b1b2c05b9ef497ad779b1da1cf6fdb4fcfdb3cadc97173ad8e066c1a0b47645faa13136d5b86c7e8c5bda64cbe4cfe6f67dd60a5ba220f99218bbecfc7fbc9422565c531b6fa5ae290b6563df8a36290d9b60682ce2401247afa0841c8cd2a6f4cb7d6b054418aca98d62b6110afb73da43c8eb923898faf3bf1ca2af14ce3f04d54939e263a45910d867663621a91df6658e8c166826eff3c5dd21e59ec0f7cd423e847f0028f2e78866f22e31eb7058968900d8efafd0ccdbe9948146b6edd566e12b830d9acb60057889dccd8f434a13d2c8636eaa357e36d89113a9f5fe0afe40787c8a1b8d71f567f97e3d1af7effaaf93cfe19775958e0677e3bbf2a41fabbf911f5b0f40553df4fa036fae90f9b79d5cf6a5348d67e389bf95975dd97c5c72e2fbb6d09fc4e92e07f45dba8ea677b776f2f1d452b2639751757f84fba30febdb209e6ae8076fac8e02e5b9177da2ad2a92c3a5f3e713c2f2dca359da901c09884abe3a3cc41dae374c3aedefafc2cf086756c103c1354320920e801b3d895e8a47c48ad5720cae649be3a845d9e4e0cf41e159c032ebe73694f49409b7dffde6a16653fd87ae043c03b88fd6981e593f1ec369806dbc0fdf6740db79e44ca0aab7030140f831b0e86cc38f9fba3d84da798fadcfc0247653963d26858faed34befc3a9617c1d6ad811bc213d80b7b8f4f0ddd4dead3462e8ebdc8c858820e16481024e5fd15724c6f088ebe4a8ba465a9c4a5c9a4e4409422cc51dad69148ad1e6ea535e6ea22414c0a1a438b572ed8fdca2ee678c4214389b1af0223bd5c1c3cc9787a07d67c14de9e8650be040db3f939478a803acd41bb4ceb3889f011106a44b12a00a28a8197c22bc0a9da5ccb21966ccf272a31e83d757f412b3d4c23d7af9dd02e2e39b97b0a7bde630370b2055b3bb71dd13c089f3f7eaf3d9e1db192ae9bc522ed3f44ce58656abaf79c0eac2cf883a6574cf55ff35810987b418a60282d4ff58f210da1f1e40926fbc4213e0b7f967f5bb487cb2bc8ce1ceaa8e43196b30b5b688b2535b5675e39ca7c6035b9dd29f1146f9070bf7c5ae21093a416888325a4a1ec8f5e36831e9311d4524459f4a63cb12576b450c47d935e96f12fb992438c5689f83a3d45c06020bb1a9514a9eab0a9a9f58c1a7326a7abd6da647f2e0a223c6276cbdf5038328a615903c3a5458795d797157a91bab41d2da7e7ef2e7a8f52c82746998319e5e1b9289f39f036909e1de9e8fa35c2e9aa7106af98a5ba3e5dfb5b02045a2e31545225049a941e5524b9a8eaaa169e27a9ad7558f189743280f021c83fe6ec51b7ca6338bbe3f7c7eef64977953e36c98f44f536ca9d8eab4e89085fd7433e95e58fa1f9a396a171e4333331de19ff5b0ea4885f2bf1a07b8a12e0eb2c3d97dc37c86ee55acad9a4113d13b5dc2d696b69be81a6703d636f63155690a8949098cf4f9820cbf2f4d0abf1de2751b4fec420aefa65fef9288a6d358dea18f0af3eced6490be27a03da499ed08ba353813c9ba7ee3b798db49ad37bf092bccd6ce3941d0e0bbe9738627f95a7ad85e819d7b69f9686f715de9fd95b3912a1e7ecc9d27f468de1a51e39aec787b77ceb16784d478d2e217205cf199907d4874374f642accd9c874435f75c4fb91a01a34e46784cd4ce19414c8f43356c06192d707bd03682567a3f79bf6f8c6f9ac3762d57b76af2522b7743cbc260031d65580bc54199a965a33818e6616ac29550e96db9c5ac03fabad922315614448da19ead3c67cd01913e610d8cbe195da1d4f83af31849aac5ff961dc551cdb918a8383eab2c44605a4e474085c0eddbd4e04cbf735ba34a33cf682d339ecf5b7b83304775aa14436fde748ca77af4c41d33e89aebdd2a47ff269ee925cb22a5886b8d040401b72bcc61514c6545cae3c620d95604d5d894798f463d362b7d746c3e82e7621397add645eb6f09057bef3254d3438198c4805423d8cb2d1d23418e6c50a8103a3f9292d0fd774f686c998fc3ab232244149753eb044c06cda4de9320327b747dfd67504a4a32e25f29e54ead92eddb57512aa27749d681178b42be511beb703be5856d63e1482d9c021979d7c42711da865463728c75f299cc7cbace903c57ec1fbba12e7b789799e9f2ef3cb1d89a10d6577b09cbb818399c3aafc445408cd25566a430a4f33eb88d5c8307e75a763e79142710179c6a5c2a3f8e7b4e76fbc8ad62b8db5b8615f19269714a669dc6de3ebe86aebe5d616b0ca80e1f649053b96f0e9f01bdc62db8786d4e9c9c992f253bcd0665243359f817b02576070706d98e805b4167a42984a79ab3434ed661d1067fdcc75e203ec488703c068126383b1d0e16a9613b6dc38c5e99d51c460d3cfe44638d26b6da3c7233c384171e355097e72bae700e8aad37a4d15d174d9d2af76f6960dc34302708e6349e6f6dc0620e9f2dc799aaa113cb155d775ed4f2e2aeac0afba2ae4168055f8f6e9f4aa56f16d13b21c3a311f899e0c1c84196261c729c76aa42637e702ef64feb61245b7ca0c415098282e96c89056776e8cb2f706c8fa3db634e4009b8539e30ea974f3ace7221ccb3b1ccb64d40589b89a754e419ba9159b2fcca902f709176f6242c581151ff1ccf2124c67f33d228681709d8598d814e73a1631b24c6f0c1c693eb7f46686b2799082cee8ad3b427cc9251029f68ed82b49b0a458a828fc208d57365d0bf9c3dc02ba2c9a981ef665b6d9d9c52effa75a722597054b4830a59c2840c293e0374564037685be88971175422da2d666f7dd7f3488f11b494b0f11e16438010c4dcfbe4a8d3c278bca85a048abd17ae35cdad43f6e9fab687e6ef6f81056a8ae7a2a802d8b34fcf10525c8bc4677996c9e6c1b1e882aeb5e39e1058e20ac21a6ac369683624a86f320ca04a7f7f632ea617ca87bd53ab15cb64fc041d0291cec62dd762a4a3c4291e13af2bcecb266a0d3fd2168fa10ad09e1ef809a6d56ea3420de46f63c453741cbbb89282d36707eda8088dfac3fc65b3ec50b104ec4b95a4026a3c7b8b3292832c70a444531320166ac607b605ae47791b0498e74751035afb05c87e822199b7ff607a4f01f75b21b11220d3ef457a7ab3f33e9ab756eb989f7ab882722068dc93fff3cfa5b6b34d3858f17961d6e3b5ef6a9257fb8b2e0347795b0b6f14a399b099d9148de23f630b3f3acef944eff0b19631bc61550e16ce78ac9f682fe94bf89dcaa2bd72da1df6e0afc0179eef1f6f993e226a672959262c57a016810c20295fca3dca257e2ec241a79854f3298381edaf9e3b0b3fe1ba2b639f989378508c86b2006933b1c9bfc15f0aa992485892a302ce34b3dcf32ed0d7cc7d1ccdb1cf2ce921a72af5fb69874d58f5c298736d2a087e0a705d73e416cfd457591544c3682e8a3a9bda35d21302abe0a8255e82d6479162ed37c1bbe6098fe66d0e00f82df473c3f5613662c761e0a8f9d1f87266a3d7a849df0a43f0d4451a8f513d7a9a0f4bb2f1bcfa889f76e92fef4cbf60b9c3e1d49d09f174eaf5f47f14777df08011ac6f0d229b6223360d073697a8e0822442d16699d16d0bd4ddbafcc6ff10ab34d34655cee2ff9c12264cbc3bc83678d5b8e9a1ed17774a1446861058716d80e90e33f2fb4676f24d6621e26dfd32ae30d3685dcaf936dcb9380c1882bdf2278e03d9fc9b93013e25cf162c5b11fe951ea3f87aebf02f334bca4d9e0ccc5364b264a021255c470d22dd0ad495917ecadc5892885fd49284101050dc92e5166135d9083973b8540ba8fb4eca1aba0d248e7812e887ae414deab13c1199ef9bc5e5fd0512144607bd016372e3d29ae523259f4905284f88b2fa64ec3bcad4bf347aa36180b4265950c07ad7d32fca83a891b8bf829b512e0ed47f21ff8e794b2b992c753b23aa3cd1054a53b772c7397b95d8157e7cb9c6f8e9910ff1a9ea11541b541863c21b244c60a29b97fe63489ba49c0cb825c4a1b1c5f4d6362ed47d7a03134aed9e4c4b35e3d2b2a26f977dc49a6788df831df92f99f41e7cf16b6e77fa895cb219af1d9f478859bfe212e111b8d70b7401106972576ce63cd81a1788570c65d4a5ee389be797a78ecfe887ddd26e75b848ba827b312cebee8c115791f72b959f384c6d3102ba04721d39c3cb2f11eeaa75f90eace14e0b313aba689a3bf38592874aa751ee06515a68f45e0b10d16e1ce68ca9c70feb52bab475fbf2e8109b06b4c379bce697185a671ba4168ed1420ebaa0e218308d2e3ba2a133491d6c02e30effc47fd5cccbe1ddb93a7a67ede3f8bf8c5a3762d4943e21f7dd432482fe84fea7cc51d574285c7a8ef9c8f713d787ebf29389af62f4f3a2e77bbf1542d60ac7963a744ca223bff293e893ef30bf74581da59522b70810d751eb9fd5a6cf9b3b081cb34b6241f538acc288996716a2a32b730bffe90c25be652bdbb8ba42f8581ac7f12300e23895ee91be3e0fcf06dbe192411d21405585fe69908229084832de8f280661a85dd0a7407e56022414c8130a3f2bda6bdfb1a4164b80d12fd849f7dadf8dd66819229e2cd09d276aafad3608f141d69b2037de5c7f4e602e2f5d2d4d35e17c3b97495f3dece54d277fb60fc9bcd1e315b64a9ee4a5bc09ed23bbe6aa45e1a1c547ceeedaf612672d34fb9a05299fab1d5b2c3b19edab97512ecc3f952bf623229363ebfbad44047fc9be719ceda660c81b759a0d09fa152aacc382905533882c6f30b4efdfbeebe0f15b145ec34973e810a29a53ad77b30d18bb771e231e3e33e76dbda09f98b573e6844c07816124948cc40761bfb737e501e0965f82cf12bee4047e7fabc981b2305e3bc8a2c76ceb11486748160345797454cde95c384896359d14ed1dd69554da1364473d24a4f0b6da8f30be27a0c597c5e78fddba140edbf48515e47cc61426c26093b4e48cf1da016e859f5e371fc272a7d976b808532f198644e49b6213b5965806601a8a4666b9d16891c793af028c10f02420a70da6055f64aafe0c5342c67f5de5b8b075ab65049588a449a157795a920f31ed4eeb367d1706c776cff3b7e49312b131cc22d73c02db31237f4ca837eaa986cd71f21c4a6bda6d133c5c04f74309d35e8985fc006c7df04048223d93dd1ab253a8ac6054f15655bdbb9acd473d67be5130197f97090b2861074140a25df9024537fe5b4820d20e331a9a46dfc81aa9672cb3c518d5285a5cd3248ee9a57f78397a16fd4759c1e38399bc7a03e34c76da7567021b86828e249c86773919e9bcb04e8810e59f9fdffa136d69c46f1d52ccdb73afa750f5848818aa194c6b78ebb0b88ca433660c5f3e599f36dbc69ddc8231a1bee67bd965b9239d61760b61e5667a0bd9ff855c2ee3b99af52234f0dc9daf8d265d85f6abb2525611053b32184068c5591801d68446a45600b9f30b3ed9b9e08ef7ec92d6f12450b39833e60bbb53c38d8c890858169f3fbfe87d4a4b577d434019f92f1808121b8934f17523ef8a6a1737fbea641eed38e41fc8711eb262be0761fa3a75d30c0ad91f73221c38dce991d4e2acb7e11d553c9d7e7b8b5234690d47b10dfe201306d1e94bc39bbe2f5b4b698849c19be05632e003a4699f27a2e34c0c2e016998e0ea0380b7833a8f0617e4388103cdfab06bbdbe50494c497ec027fe3f6a7fbbdb8c32782cf862c2d07df4746d5cf2ae7d05ac6e042e644833bb40f813c5fa0144567c1a317a9955e286afaa021f3ce2acfd33b5f34313fe362058bdfc70a9a4ad51bf381fba0c7bd1915f31856595aea97b9d74f97c87b6b456a5ba3b16f6d1e14425d828ba2b18c818c99b921002f3c591df6a78f9e86c667cc2657a70ea7fdf81b3a1f31d3036bb2c0753210adcd3ddee6354a0cdad1ccc85287d13f4b9115ce23ee31036abfa4fb7af0499e444c32662c795a1fbf6c2d0a25a94f258fe02adfec2100fbe0734cd202902c5c5c1c8787bf4d1e5f6888e8f93453d703d8573e44a0d7c8fae8fb0e8ad36bdb30ab2ff41277555329a2c62384b945fe8f8febdc139d5fa8fc2b5f4e35644e1407d1194738b5bfa43fd40a03bbfe64f971469abc710cc1b51a0da87283b28246c1d32d73527ff45663c4c351fbe8823ec829efc4cd5665e3809367d76c5ae4435a2a2bd80f01a8b7c1dc398f2ee25642b7030ebc4e7fbe5d8bf94e6582e0c60b521b0255c4c0b3d32e945e2f274459b0550428c3999f59def65c91dc6b39ca57952d2005b2f6569b49aad1866b55d9df039b9732fe125c35a7615273a56088524fd5e22d655ff7b8f211edfc57b4192f3f7da1e56b3d3b75167af02af5c9be70ba9953276c0ff093299fe7867f3b2f12d5319aeae9f5677a0c08b574eac6c6307f023a5c368c3768f5bacb1828742098ebda544dc6d262fcae8db51d19a12a64612ad0081014ebfa920946593a0b0a7caeb726c19b37c77e456a10f918516344f31257aff3da0038039888d9231ce2f7275985259d0247f5ffe7ea79217d716625d59d84f9cdbcd397909336d85d34d321568149c5fde517b86553029db9eeb19fbbeaaab4b5f8163f12355d7a8c4477a86ac2d713502ba30412c9ae8abbb1bef366f1d0e07b57ae98ad22075611cbfe8e5d5c3ae6791bd88721edb223dfba83950befcbb9c81cb9fa6916bc4a43dcd14a926ae24f95e1329706d2491a384c7f0826f0aa3cb1e964d501bbe41ad7051df7bb7c2aed3f8a9879c3209be6970954d18d3a18fa09fa50a37f6fe4a57f7a5ef20f56a8e0cd9ff6826db8bb81606580608d39a0802d18101cbcb50b5d095e2f71e54d4ae24a446a47c413f5ff754b3652625b84acf34c957a9a6db148959b9d7fe93c8d40a539e6cd3e3654d17807c2fdb1a0333d5966eefb7721bc22660c0a4fdffe1147f73ec852e37ca6315868e4fddc096b5e43bb7dcda920c428335fa166fc522270857b525107a65684299a8a61690dd0628e03d20cdf384bc5a7b2fbe82051c953d6230e99affcebfd9793955264ddafee7920e6c971d5b5447b796b2dcc045d71f6afac8db48b1e170fe3f5c9daa84e9e2520655c10cf2b03b715ee8a68819b163308a61f23b852d085c08bedeb3d1494d13419854db32d8bba829891675a412d07c335045a2504fe72222a2688517d3689bce2ab3418c1f43f414972f28d895d25c412738d2745b1b0cb69feeab6a44a92ec3f972f01174fa4e6af37eafdf0888110d9475b385de409e097e0c03148091ed2d2ae46c9f3d9c4ccc01a93b0ec801bb49908af5fcf6eae965d47c43830e634c6a5a3b46db02c4baf981bb2220bc65856c205971a43b0a1065b4a662c5f5bb04adaa66d6f8b0ee138d9d9ae23e7c51e5789ad07c0005ac1c08b0d687cfbb68b033d0f2e9dcc5f058b15e1c33d6f8059d956c4369c94a3f8edb4d63ebbed14c66c6909bb6dc2020309d12d458e2b3e934ea30cd61e41ae0847803e62a194c797d36b6e627160e4bedd85c13a1b39485f2b9180c76b34598a4140100a62da25617fc12394d257a3506240de5a707dc6b49db0d0e257c7cc1e34d0f4235a1acd1f05391349dce657d6bcda7b7663f5dc216da973e1c3f04d62e11df3e066e59fc84a129f3c2bbf84a630de6361c0a485bf9f83b98df846158161bf1158a74bd5ab2a415329fcf67da7b3f73e10fef358acd80df4c6f95306e0183588eff2509f8e6ca26ea5a8bae9ff712712fad4f71b938b253465bd9c0178d630bf2f9c3e4a8d2fada3d7e77cebc8e297a02098be2629f7a54fea27eed99bfcf1cdb5e6090391d2138d1a822df1b66f2a2ebeaf627f62c2711e4fd2b2e06356ffea3a534f1bf0566599d86b78c4ef680be841063f0e857eb0b54f62c680744134246b948070f6166e9b967827b7659d57c6bad4c14cba625e815c4c6efc45153ec9f3f64b0ad68d675e3d139dc85921fdeb409d08ba4f39b4acb6b339f4a53fd91858cb6e9083fcca48ed5527ce231654e6d37c3cc8835d05d87bf468a90b5c47b4de29343d9340e3b2d7fed266d1697096570c982983fb836ede5e853afb4b6f9b611325a653d10a20ebb40ac20f2bd0b60995786e219acf65c5e6e85f74977f0c5b6b75b447ac4fdf5886a9b374d6992af7728f866b40394809a9035cde8d6d10682e97b716f932effbc19265a927c995e642a668a6562546cf13dafebcc1f3b0f9805458113efb19e0a4cb66d45f0b870e7c1a0253a5c46ab0e203f4b22a0177daa5beb735494068894f58764ea11f2e2a00a2598afda4fb871651f7eda3699baa35d077e869b12eb660e3a71f41571ee8d0e0f7dc7d2ceb082032c3c78f19f17fc39b690c78bacf94af8126e6d35800cd64321e055c7bbab1f2eca99747445a1451df52d0f80fb63454887eb077ec4e5e0098c425c5b303201dbdd4464048b7809214e43a45e6fbb78287abfe10e3dc3b2d9909a49cc80d5c48010839f624febda35ca4829c5dcb327e4c8bc3b05acf692acf71ac698951de99a9472b131119971f44d624e7eb849fe8c90f0be787e366b4fb70dcf21e6586a041c47e0478f1f6fe0ecb9ddecbda51c30ad805c421c858cdbd5ef342b0fb8f098e609bd25858ffe20af1b6bc0b8accde02b1f335b30874069718147cecc918ec58fa43b7964a8523795533a5211c52ecbbc7c68355c37950e476fad8de003ae04550bbe592c3f5f4c18d0e632bd30452b45fe568ae8738dadd301cf46edf832fa482bba9a7155c4d071d2c837ca00d524a00228b39ac32583566845acda223ed201ab978d1b44b16587d9fc</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-blink">      <input class="hbe hbe-input-field hbe-input-field-blink" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-blink" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-blink" data-content="请输入密码">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> password </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>怎么缴税</title>
      <link href="/2025/09/24/%E6%80%8E%E4%B9%88%E7%BC%B4%E7%A8%8E/"/>
      <url>/2025/09/24/%E6%80%8E%E4%B9%88%E7%BC%B4%E7%A8%8E/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重新输入" data-whm="认证失败，再试一试">  <script id="hbeData" type="hbeData" data-hmacdigest="d64e6a7a671e943061d36ce0926405e9a7d9f66fa46263aaec4a781131c3643c">1f764dd9675bd4f300b7f0802d6ae563f10b22b1bb0bba190131755510e13bc25ce1bf613d513595bc2d56f1581516a1d658cfbeabf059e80ca7c34b86a3f37b409452c87c5bba9793afc1182770419af25d718f998cbbbb06599d0cd0e383e4d21044385992876c5d97809ee156b8f9b4f3c87eba743175193c980f3322d3db0ea26b96409a511c23fe2164ee97ceb21a026ea00393d0bc68221febe9d58f8b34ecabca21c79264da3f91ca79e2225ee582123d29474c8eed9717a24dc62a30e5a29c3c4c9dd0a8c2445afb097463e3ea5d60ab49827c8740049c4cb160835c398f75b542b9e2297a5bde7e6d7d83d64131504fd89c6f6d9be6519b803c6006363e38aa836119b547b57ab505b9a4246b798f1eef61071198b0aaa61af8708f04799774fa260d6d452df33463e2d3643439ba380dc185333371a9db7d9e8d0e1f5ec453a9739c75e5bf3456aed5c597572495f2e59088f9e22eb3f00f5aae0b6467b8aa3f6e07ad6252095c8a7a4467aed72f78fe1dd7aeb088cd45ae91f12ca8d646e691661840d4bc564eb4aceb318b3be112dd96c36985ca865f515540dc4de2d5b218044ea0e65b5bfc34db255ec12e8facf17c4ec900780e0943199ebe9e582f26cfb4f39f52316ed97b6df26f0fdae3d6a615002019b156ad4028adb8b40ec36b0bb27fb5763607b50215e8f0c2db248f7dbd45b6e19eb7be971ef786a007b94f8f8b0dd91a0dc122d9967e9537f486117910c4345925ee71b5b29ec0d65770cd4d25c0135481ff193d65b10f09bae4bb2ba9d4405d05f1d3162e688a4173454ef3496da3b72fc133d4acb808bc1db3dfa0de75b3c8637fdae0c7b1605f8865679f4207f4182c07f5e7ad9560b47a722d0be83670da53d1d6937b9e85a8f6f48017ee56f5154f1e25fddd8986673f5b60e05c152cd0f0ac89683b6a8f0c9d0173545431a5f455131e1fc331955b9ea66aed41d299809613e8bb56ce159f58d7b89ac9c89ca1d075f2debd96cbafe418d46c91fea3437ff0cd2268881b516e2371ea0c115a0837bb9796aa5b9727e7575cb45066411a62c4bb9f92126360d0c0fc73e50e0724ff82280f9d43efa013142e75274d509fb5045b851f0734f6a8098740c0e05bd850d59510729a5c2a93f7ee1ade3acfeaeae05d518ce573287fcc62d1b51889d1c957910c057496cd2da9ae459e4e17170db862f89c87120fe3b83b3929ca9c1c1f978b8ddc5e0429f41f70e49983b5de2bc1010f043852931a35022bacbf0684651c044c3352170ed81bfa5a705aeba784a9bc06d64c98a9f67aeacec556b2302b84616bcae09ac7f5029153d3caf1a3f1d0d224f13d004f50fe2c1131425f26991d52409e6f54c87aecc21d06cfabcf10c2370240a5c0ba36e574fe17638a1ce542ac9d62e5639d87f0d51c9b4d0e7d4da5adf4bf202bf77e4409ae23b6136a192842da7c0af8520bdadabf52c2130c723486a461f2e7615ff8a4a0314f8c0e2cd19ecd13173f37524a8e13d8eb57bface4b30642b4780fde117c7062033c7bcaf905b70060e82ff24cb847344a4f2a246e0be49c973e3b58cd488f31057eb053b20b2c6a8837b01e9b79f63b89175e8443ba7d5cc05f24563516ba825337e98f18bf649908e43991f5b8bc78be73f26d4f7e2c78baa942534b3a71a3346673720ff9d22c157ae60614f71f7bf6846a22735dab38dc34b09519eaca8e070857d5c4defc737a8e91b1be9fe37031eb18cb5d512e8e2dcfce7da37755064e8d935974e9b9d49f9e93a24c37aa5dbd103bd69ac52aefcecc82a2cb539e51f77a55d8126f023f11173293748df0233acc7ea787ac7ea6c372a269af34bae66803b38be786a479a96e48bc2e9244b3193975b4e219bf8f273edb27f1f03ba44e2baa1d4e3c9ebace80ddf3b9f097277f07c0a6e01baddc5ebee8356d3b7d2c5819cda1405f8dcc83be8f0b6fb3365316c79ac4f7f4e25e9bb257a6cf60c49818ebaab77c6d644212991a944e9ab3db64b0d73e509757d5355a213a1ea029b158f3cda9876c5723bc6f187ead3d56a4b22552c29033ef6bdc017260c191980485a7e7e8c4441644be1efd0720e6377b8c0365a6619fa17a29de1647044dfc6f958e6d9b706e418fff9d03362e9ae240a69568a20bda000dfa66277f794c1a0eeb073744692aaf3fc8b6909181a3d912525cb650bb74b58f738b9c35925e07081e20b03d1b5e76c96ab1bcc1f404541911637e5c56e2118502c3cb5c71975ece776f7ec7c4d87f4a45e515dc05ff1bdf60054a1e9479d1afdcd023de939cd0cfe4400b77a5d7146260c4f04e18c39d7ce423fe5f626431b4c8197cd168baf25952b103af47a2ad3d14120dc7486c95295ed179d3c25335f7975af4948099da3de2a290b7dad1b678a75c45d9c99e96d1a8a9c678a87ee3936ccb8c981ecf8442feff5c0e5a249c3e2b1c34d0a782eb5fe8d7ede1f255627407691b91bdd2439ff67433f0735722d601090d27e82ee594d7d1a65e39d4999b126f76eeae2399dc13cebec7d2f3826957d82a13e28a41c7d622b92d2f74a271c5aad4f7eeb5246f440ad07f62b3e8a83361f3ecc8029791923e24a873c7b723fb04d3ef8ae113cad98515e1972346ba2cdd9f9fd5793669fe7fe4df57b0b0981638a5fc1985e945430978eae2439d141da317e7753da3f245c3777ad3f5d457d8d8b7405f4c845fb14db9555213db9a5f7a5a115c47cac3239ea69c7e3433e5825429fd159a3b46b67aa5081642a666f0bd51d0bd6d61d68c62968a51a8fa718418d8eb1c867891dd98ea2a64fd1e89cb15592dc4e1a9eaa5b9d9048e4859a0820f8c0f8612dba72002a4de4aa94bde7251d71f6035351edab25b2436f15fda008377f274c0c928bbee9c2d14518b9bf50a2e1df30d236b52dd18daa5f3d1cab7fce1e2855dc783c67e3268c7958702d6a2366d4063e5f74a8cf05a163b55d7adb414a5412b9513b0de6e1c1acc855cb0f3f0a23f7bd19685024e6451226859c302fbe4bb1e96270d2bf6d03b1c26eb44aeb1b4fbbf77a6190247274d70d27985ca308b29b05d0e644be78de98db0bfe7489515c9763d9697f504c8ce79b4c10a8d0a22af9b584b1536100cb2ccde65c524807245b34c4065a925499a5960da88d94598abbe2ad7050af1104088b301911002ac96bcedbf99352e8ee332d8f7934a01ac822de0deae9570e2df6224d53290ca4ee6cbef6960b8f78ff24880e01cf09d8412802514559f1c3d8baa79a3bbf6e3e79cda7e4a7f405b6062f25d875a99585f17fa714a6d5efd1eb00f420b00b964506de2c750e015efc61b0375a8ce2ea5f04497c2acc28ed3462ac54c7642e4d77f9382beee544d6b2933156b64ef8a5d381543057f15111a1e60278e40feccbae4c328caf3e597b70e122d1e429f7741dc165c2c190db2014d7bb4ad962ceea3e7e8123ba7e1905bfee8802d2b1bd5df6929587c914850fb9f83340a22364067294a3cbd4cb1448737c15b9e115613a3e41ce21222de129be167b34b5d73369bac5c2c797c90d024b20a0b4f7ead0116173a9782e72f73ee47df92592853818bd3488310df8b15e74fca5427494661e26a1ed8de3b3b8ed9314025f4b63cdfc527552e3f8faedbbf3eada8ec883e056f945e84962a4a4bb7e3898b0bcd352f1d21f7cdcd2a85fcfcd69585cec2e688ad6f3cc4706def4bb7514ffd35946154819187732282aba0de0307b04df57a1d98e3bad420115e8c2681b8b820c883e29678ec2cf5d826e459901e1980b9dc2141452985fd82b9b2592defc737bf1244321ffd8c3659c05d91ddc00b24ebad50b20592e0fddfb9d2d0c9896cc966ac3c9ad02df961a48311d62acdfa8a6f5a3158b5ac36616cac10d68db6cafc1d63e0429137f2ec406b5522ff9ee77a86a3f1b733b53c957e97a37fa3cce676c8b18b9249e3c9565c60ca60f28900223349349895135bc0ab6f4988c8afdd040a7a3c3b1d90166b5227f1b59f605d7ee564ceed5d71da907ba5568954c86fb768ece8bfd38b785da80fb40018fbf6f583dd067ce9ce0bf99d3ac1db74578114ac0e32e917c480c38ada6d868f6de3521f17a0c1e06cf71e99da8282254b6ebdb2cdee5705fa21dbb43b9243826b794d056038c49209f98ed258b9aa8d3cc3785356b6b80960e33fa77e94b98cf5412fb03ac862c8ebe943764ea16f051a642a857c609c8105c031440646a72351e0525c4fb444a4e8a497c5fb78ffffe28d9e76b3a303860f0ba2c02d81c57e536f2652acaae2154ec11692f1acf29425bc5ce38c5576dfc7d09e9b9f571687fee75d0183be760e2740324a2cfcdce8319287bd1b4dfc1ce9e075d08e2e9f8f94b3200b62087a22f837c2e7c00d0789303f481534f8c615705e4f806e687b924ef5b0d97b159a796e56fbaef8cf1ce14d9bd6b4ba42df353150a1d37fbf8422d49f20ef21c7f6f3b181e3a33114e0c9dedbcb7bde798fd179112487690a29e94a1428704764d937cda775a72b99ebf72beacf20667775aa95cc502d67d653712e0750d6c3778f7010c1330c3ce6baba399af579f0f29e0f8e704322ee982dfa1907392f23246ee79b7edcedbe8624522faef918ec6a21d589dd1535098deae69139ce4fa87eeebc11952160756c792eb7b6849db25e928d8e2f52f047d66f5aae146996fd177a456bb70e5b479b7def613f2fa24b314c163affec62b12807939ea79ee627c94a625856112127d95c97cbb55201cb8d929026197922a5a627e2347c9cd3bbf4167d9a0bd12008b624c0d4d5b7818d55a6436f599776f62b4177bc7d9a7bbc8f99706a4e619441e8dd9decebeb02618ccf5b170d494c2b37cba860759bce67b849263389fc8dbc4015f4d25a4472bb8138c5ece2b28362edf97eb82abfc70343001896ecd01b9009842bbf7ec5cb32eae085e7203ea74b402d5a4516184ba9e7c215a74674394e25792e02e26e723c680d862af693b0deb0ac03c1e88ab5e4ef5b30809e0d334885320f0bbd0ebada4114d0e295e9f38af94158b941eb571254e52cec2de80d4eb6c4878575c03121273078368a11cbb18a1649bf464ff2cdac9bfb04fcd129ffeb3947ad880ccec76b152ee4c6b4ba9e4a3a28151f84679f419fa052f57f371039f81a72c2d9416ee9a9289dd7ab6cb5587219594685f26d6c7f80cab602d31ac20eb33f71d67141d860b159eefd0a3cf3a74fa581f96d9b40c81421563a5069730e41a914bb1e137262e89b5273c411821f8b8e455bf635d9bc23ef1cd8739ad00e0bae66fb93e14840a004f8537bb243919e2cde779496ef6bfb1a074884600f9f74b24768be6969cb514107277299086b96be55aabca286a62bd43f04421dc40be0fca6d375786895138b010c3f13abeae57f5fffeff5703542e5447a33214d2f8262f956ab7eccef07544ee7fb911ff6328a3296f50a1d57e5e0948a769ee5805f118657bec54744c6a55a3c5cc8d838ea10d9ea51ac11d0f5f6fee1bb71a44d8ef962435f3c2bff42b502d6d3f105def98a15c880b61b50b96144f872fc63b283817d2d0c83742023a52629bff1ed59deccd617cf5d858f0647db2c2fad72b691bb38ad4d8e8b1bbc89405761a6a83e4e06b09aa67db6191baa35c95468cd17da3d5fc905a4c1a9cb6760c1eda03c7adc5f0533f5e3a2fd8e4b0816a3f649857e9cc9616f3a818870e69817626c88ed74b976ae1046ec4cfe0e048610c570b0016706b5636620a7fcd68d2e2884115c6e64f5ed1c25ecfeb47cfdac2e6555478519e98a1ea60d506cd1a6cb2ab1f7345e0ae8a055c7a768bbdf2804471d819f65bb2a7fc82dc6ea518af35676890797348b7a3cdcaaaad25776c84ba61e09e0a31c84fd37a95c64e467fd4381a8673d7e30b7c840c50ca86a811942ff9c3037bcefed758d4ca633cf00ef5d9babd781593f9882214230c13d7826940e47ff9b1da758d33866ff178dae00d4758fa9ac25f56b2dd758a50686c2fb68c37f7630393a505de4fbdfa569c714c9d677b955961150728a55cf1b088dbad0b8704323011873dbe222425615d3fcaf27a92619a469c6e2593ea41ea852e502f681005d2cfc2c64830b27410db430e70c94961f41e36f0621d6ccc2f6996fb8d13f5d5784385037d0ee1a51fc3e8e705ea2a4bffc78aedbe49a015c231358e8dee85ba2aa093b8f7463506a9eae4842c6f53c5c02f1b9135c781c3065c59d752f8ef3655f655e6add4620a42e35d62851ead08bbde4ee6d9ae6b1a0e6b1858ff8da8c1ce45e828d331036867a3e749b5f9d7532401e4d6a1286de4ecefb94ba04bdf39de04f004c95933763345437ef4cbea2f74d0e874a757f281afc921a63d6af0fa9f15ea86ec16f7b07cd46c60fbf555f8105da8976a633dc31e32f22f5b2ec05002bbdd4785cf9b86441b2af3a15585f9fa08f3085ea6751911797280b2fbaac44a1dfcb5ea4338b7819d666f13d4fbd6135a54b201942c1553110b8563a54faa1e9f958675cf36a7f2d47527ed5686c76acea7dcd58a9860a9b11276cec7202824c31679711616fdf475b63df34acd6f15c9c30e337b1b60b5ef043c68c7b64ed23c54aa483b3d28da40d7ec937776119815f2c892ed17fe5f772bc15afd6443f760c547ed3ce430ab2fa29c7d83af4360d48c83806145e381c499401841adc80368cb23d671354e73846039afd68928a7c820db7904662855548f1022513c24833b920223c96ce7967c7a395ae2d5e439d394a2705a2d14ec949ecdd00d12cdfbcbc0c3736058194f3596bfa3ac7193d4bf9902f84cac52768d849e2528415228dcb25de51022ebc987b09e549c5ee05a42d198b75dd7f13c8a8cfe2a6be814a8cbc86aeee514f96f9a9ac65e5d1fe8337e9df4655988e7fd9116cd275ab95d12c1bf1ac356a317821bfed29824d92016855a27a581cc654c38e717ee428d06c0d0e47d52fd175d6bbd542811c88f7f8b5de80265dd5395c9c3cb76766487b3416ed5ac0d79423c1b4ca79c6fb96763ae698e607909a1d6ddcdf68e4d229db41b984142c672275af8fbf14868a7bc33769c8249f5112ab375f31c9e02626bf433e35cd50400babb389d57df5bc7d3b4b89a62c1d2b12d6d4fe4d0158603a9e916cd0f244d738e64786865ac6d9dac5fab7f8c88e3d0da648b4f1d9c58ffecf0f80c87ae9a65229cbd0955535d0f2ec8a9bec7cd6fb3bbc2f020ded0469d8310762b3009040d2f107b351250bb8d51369d536e661a90f098ee398b3e2187418addbd47f8161a1a14f29d082a0410e4f7fba0f32b09531da6ac70649f5628b5f6dc134060f54fc016277aab2d75ed9b9dc280f3b730be42b822f79f35c2b9c93495d3937f4705bada70d18acbaa7d0e2af4f217951a1df6ef14b32c7ede063f7907847a4510bd516215246fabe5d6bf11460a917f4bad57e7c84f0a5ee6fc196a59b6468c76c45632956e5a8a551fc6f4e742a22eb33ec47073f16a06210b2d9341a95bce2dcffa15c9286487f16a0e33529639a1d4c2df316a69d1943411dbf544ce85c9cbcf6da3ac831b3c6ff680b656e52b2418c4580efc71d60bb1d2bddf30084db217267d2decd289fb256ceec12547a4b7b7758f1d5ffb188dd495b04fd9aad24f43623159f8e614690ebd99cd7685c2975704bcba3437b50d8b2585b7a39b54cb6dd7324ac81d8d0199b8ae3543f79cb3977f14302d93c079f88b7c438555b8162d6d6a6fc832821adaed712ec7d909804df3be0e49ee8cc5278a988609a295cf6ab64b10d0c2a5166543c00ec31a0b66d50ada54155ee312584c3485ed1e6438cbf8d729a5b4bdd4b57acbd6a78082b85421ec4324dab907118dbd23be474bf63a9f837f1a9b8e9f9a1ac6a16e109a3dd7096751d47deedcf124c6492b645b8ff277f54687d7a4fc3418a59d35f6205910587dddda7ae1c0cff6fb08e08451ee74725eae65e45866fa9307956b51b414adacfbf6699ab052fd7d32689cef74d9f7b87e102543d2de011dc8ab2f05e28f20f5c5ed8bd86d4d93c624061bc3669c83abf8f7f5dfcf4cada2511e4264fde2fc0a052a9694134831d9288424df8bf4d4db8581438a7283574a52a4d83a06c3576e0fdae103de1fb5d1030683b91807c7dd6ae436b002639f07e8519884234ca2c66629d43e803158d12caae42bbee028c9ad77c4cf0fc19972909f6856a49f381961fe85af7883941cca0f672f65f153b4891883486e78a334e3b3c651347def09377a63efbe9bcb4d6d7c002c82f503f68f65badbc9f5245cf29332d196bd41733d2b536eab2905df34fb1c8ab5e534010e5b62e502c24d515904f456e03953646683f2c5cc12d0b05b9da1a02e417c64e484dbd4ac0844456c83d684364727484d947039476f67fe40265f5c34c31b383391a8c921f9ea2d01f8d6aa6593a28fbc71d2915b0611391ec92c5c6199eea524f52ce8c00d855bd73cfc812921d8d364af809e7da867036f26b4b86817b316bbcbaef5e187a6071c110c234900244e8e3e817b66dda9c4e040f1dd1cb5fd7149d40bc3b22cfd89ac3d86f2129beadb6046e186f4cd62e2982b24fd0c4c8c5cdd0dd25d0e99a1f056ae3a1d7faaae7999b35f8861c5ec945d85484d572193f46d883109f6dd98003baa6accf2cee0e249fa7adca2d6abdeadc46ebc1683ab9c200f8674c153af17ac707b61a43392d3ac2f785200dc0d540cfa48fde958cd634ae6026ea59d537b9a31e8af5f68eac00d5714f6c9436d1b3301c63194042584e5373e0a416e0beea6c3c02431319117eb17f95a36e826cce8f5140a3741b7374b9e9712bb4b89d4c10c5f2b6ba3ea437f00fcade8bb65cd1a0f9d26b295bf733fe1b37471896705d14fde714631d7f8f2be9ca054fae75bb856f07d85a50ebdf75df015826d7472d68779fef1649860a9b93e5a3ccf3c5928a6ea30fb9fe3f1c0b334b9ee8b532e3e0161b16651b47097679dd001fbda14d8913e51d13e38f318ae068db279d0b456f361c7794604a2584e993f44fa28d9855de5dde0f3cfe56924c0c767dcdfeafa53c5858299bf708e55e634cc4b983b53bfbda12d8db5ad2f98dab38cf61b136b692b3c693ca337d63bd8bd1d06cba6fc6dae3c775b37dde4b5ba6b6ae6668a7a062c39c7ceaf34be3d42f8856b19188c69fa92cea354a74f0977cda20e5b059006bb54b7b6e83bcf54aa7db24e71ef069cd2ad8174d236f098c580c0f89e7e3a039772df6dd061b54d4a4361f8fd6a20dfff687bdd0b8c662fbe1720cd44a67abbb52098237e68ad24fcd36735a2a96c23eade476963ca7d0f13d281af3fc9761f9cb5371f9c7f12d367ee2ce3054ba5e5edd469159b7cb4cc81b2a9a8df3f9b0d91ca248ab2d7a7def480604a3e9dcdcb8346cdb055796dbe953c7d60f848aa6d2f77efa533c97a0cc11344e5306670570e8bc7747d14d238343b5dce98d4c6cf6ac89f521313e7265a6bae7c05242715ccde837b32e9c9e8c9be271da72dea34eeaf09d25d473e24df54405d17e980c7b02027330783100fb1e8313915bdd9123e607cf3adce96ff9eaca3b3b0ce7ec333115f5763cc7676ae1386656fc3ad83d4bebd7f0eba2c65e43d061c703cd4d28811c5132aa74994269ad5a73a9b2862a715ac79e73118836f1e04eb2775f38822dd0bbad00224ebd1bf1ed86b953d3f3ff7f871931fdbeed435cb5178a55c7eb554ff7eaccc519859c8d7cf25ba67979aaf486c7d9c13608cf2972dcebfcde43bbe89836d85bb78f6c9df2c4fa56f0e19ef6c29d42700d138df0000a5dbe2cee6d4081b530f9b26b062ebd432efe13225256cdbba30af0e3716631f6814bd0db95cd8b99d5e624ca0338e60db878aa7a6c2a2d012a675f6edeffb2a98a00df35167629978954619b0731ee04a340f2d2e0d26a56221056170b61c3c98cb0aba7874b7358276728c01ccb51cbf9fe6e6a8dc1b0c147357d147744f9411e16e71d4bd72ac71ea1897913f052c1e4527085db9458fc50281b38ac0bd7202b3947cc92840692dbef730ab3bd15a4d02e0e18b0ecf0938f6d8d85a2eaca1a462255737b07558d6eb363cc18c578531bc7454088caf10d195bb7c14df5707860072b79fd28bab689728a9a322e84bc436d4affa236156fa0664dd8e8ceac897da9a555542a1fb50cdd65ec92941dbc282e34017364f4281d119ce61f42ec8199cfa343708658bc4af6a8d62164be93af179031b4393f823e10571cdcd3a06e53559897b166076dcb71699008e36e5d2028b98b47dd9c060c565327feb286584160ae240c516f74cb9dbedc7facd1be9703e673df9cc711450a7d288ee18b91e293fb5b4e0cc6baedec2c319891997998a3b222113d2c40d6c1afcca240fdb578fb1fa1bebefa12ea314e16bee3e73a0b19a5a12774b76458f53a7847aea7d9e01de8db0263dcc6350ad3ceb66ba94f7f019840324c6532244fe9cc50c58f44981ba14bed8f73c0779a92f501bcc46a56513540798e9803502d0bb63520ab3f53f4e15dfe9b1fcd251ddf46154d46933a6dba96abf3479e4d7571fc3df5fb3e0917ae321a979b966002b7860c5f248c78e06ecbac1464e9f959d174cc2d3ddd5c6794e7ba58ef4b3d1a674690940ed15836630c112ba321ebb4c170a86bce05d34946803a1fd89e99908466be93b142178a73eab50c7b06dd9265f51ca4047fe48412d879a758b9c58075af4c7a97e891a6650c5824ff6d13b7008c1a1e630faa4ff8eeb7ee62c98f1f5df604ec28150e4b3be7704fd556c0ce46408444c87190f1055735be6b5c59869bfc1ec484c38fcbede2c4910f713ed40514ba6887f8180d50f6c393fcb47cbc79206e2938248b2e589f400c73c45dc4f0a395db11d2b04fcc45d836335a1064bf3105b7689b5d9202d804169cced76c7a866cd7c9fcc65b411b6f4af0b8c4e7f499876fa6434ce03bc66be8a5f2296524f8f7943a40b99052a0ae9e00044bccc0ebabf2c664b3c1591968e7026aa4f7db92f008836750726866f26129dba9891e5764078b7a5f5a2b3bc7bc05af2b0bb5e47482626ddb3e26f57f9f325f3f04d4d9dd21c08a1a73d07fd0e1deefc4ec605ce543b43e4a00807df7a0ee3c888aa5d53aa8ceb0f5c6fbf639285eb6482f45906fe3310191d00b53e23a65c3260abf37bc02ceaad44ed96cb16df5cebd0cdbcf939dda720879985a85aa10d1fe0c2ed5e3018d2eff949476b480b9d893963431c152a5da9075642b89c0f8342978610206365177de36a9039aa93fb96b1ab35b5106bc874a21a75f53fc3acc9f3ab6f6b149d710399187aff52af9aefd2001c5749ccb253b417a4418e3348709531e9f58506b66be97a5b07bb37c70ef4523089870ebcfb3aa382bb4351f60e638505cfa457f4ff211230d2f63024448d83c034e9480514441e9a14050e3d02c1faa68ed1d3187c8f3fe4ba492f0200b49266dfcedbe13b2f8eca6b855d72ec53f1d7b77c16718f7d53ae1abafeb87a2bdd25e4667e49c55d4f622ee02bfc270f7c9fc0fcb78be460ee4760b264ca61a2dbeb9219b6b9b92a72d4f24abfbf9602eb165d451954072ecd17c09aeaeee79a0e8785b221ac3461f753577e4f2a06208c21abb0bd240a0e69a05878ecddd73b08fa58e7da11c55d9279efe2b42322bf27b78299b1fdac26805a2a9e66b9dc23da7cd5147a0a057990de3717222ab4f110e709d392e8b457e0dd428ada5118d7db3cc4c1bc719cc5c460b9ed122d5c1cba3112c1e90f1448e14f00d83fe938e25a02147261a946aff82d906f67613b6badc0f41772021dae7f0fc4e79e81584670f380b277efbb54da61cf92d6cde8231fc2b885775bcfbc4fb0802fac0d25ba62209a9c84e7f5ac7a367dff885709340c700267a961a2378b367b8ba854b8bef87c45db48ce066f27c70e5dce7feed0bccf7e9b6d71d4c4f62067b674c7731c05d3dfd76258c5ee1c5ec28acb05fba585195f03faab0f213b8e8d01fe74570f0a9dd952a29792c709692907ea6972ff7d4d1a695f63def55303f53895beb27e4b43bc42b6a804597c36144f4d5b6f9c0ba6db201158fc030307e85937b0bc32fe63094e546b92014283b092162c657e7a68e719c7243d029e1a735a138ab454ee88dfe89a9161c1e9e0b06c32eab0c95e92a7490a18e0224523b201390d284caaf9bb3835d00d143d65e1dccfb968d17a637b76b24d5fbf9544264943062d48508d446c2cbee1505119b1ad05bcb4d97505a7fe5728fa9fe2fa0bad579666a9ef95bfb97351cbdbaa550e2e1929d333c319b411c28144db8e2b0afa478309c72c06365b6eb8c97e9ee11907a77a41b4a5535d1079db7d20d3c38e3eb90ec41cf84e5edbb868f28084ccd1639933b6f6b070e528e3bfae4bd8ac20e76e6d0e37652eb88d9a6e44481940ac278cbb7fbfef76d7c8703f63ae643e9ee96ed26c3578354c8698e3e922b11f209d41ff836e930b0272e063cdd712591069d0fe7c66bc00fc40b727e0090fdeb665d591289675381f2a4ecd0269ff8dfa3cd816be99e6ac8413410068b90630c9c57b365977a6b029643d6c4779a3017d0d1dff441325fa7396475af4acbbd825888f66983753c3378e85780f955e1846767ea108eaffd23845e443cc1fa325c7a5b4a4aa488dbba9328ea389684bb08ce65e49a041419ba8139372b9b01fea2a1c8488ea1ab2b4d64df8b97d3b8824ed3a810bec5ba82808ef1ed4072ef67ace1289bc8e09dfebba0399128822e8c97ad03c8b4efa8acd6b8e35275010e5bdbaeee29ae87639d6597413e78d81b206246934f171041d5965985e4ba39d6b6a9a17fdb182d0ee7217078e8eb84e9edfaa36b1e99085d6489ae7924e15aafd43c8165c206a7978d9eb07272beb776121da9b53b7dde197453f44fc36600bfe8bff7a830444e945e77c09023fd6a40898072e79fa7b41490e3e2e5072c1c5bc2f2ca60e9442b926facfdd3bb4f6aa7fed276141ecc0dc0d9411a63c0749053290aad0734a5f1fa2080b3462e06beeeff46c0befbe6544bb6493d14e5eceeafa517c819cbd7b85e35ee00de0111a71a82af188e5ccf42f352e5760a7e4bf43dfe3a048252dcce38089d6a94984fe38f59304131e7b6552cc42dcbcbd8b10fbfb1b2925a643e70fc4384ad7b50067b31f4a97a82ec1d9beca5cb605b11f728eb50908cbb6b75c4cee0bffcb4316bbf8b4c00fda1c1b9732789fa07faea4e63fd155488d4aeb74d38605f2841f260871cab28ba97e08a2c0a047e8f2b56c53bc9d8ce1da81eaed7d8ad03d900af7d0e8b11a80ab29d318ac7be577a1a3dae7cec94c4d7dcee01a55e434fd7a2eb9a60864eb067e47827bb65f9cb0f4e13124faa7543805bc5ab9b7bd48c38808176bb9205b63b606034116c73372a5db75bd70d15b99a25eebd797b5d342486ca006d9c4b3dfd9c1eb6b0e8c2f69fd178e658947c1325e45c20a11f06297cd79813e63af8f3d1eeaf9c991698070e0faf3c3f0644650b5e05d1afed7d2dc9d8d03a3f2e0043eae3ff500a9f85890c8abdd4a3f19cb5b822f54dceb07af3bd90fa006b82a6a177285b8b1991f4400b769b0269a24ef911944bb9a21835e40f75975f39d317bd03d9b58748c40ade45fe255fea7f7d5151bf09bede2136192c8b2cd8893b9654ecb88289f0e8434787f0cb68f5140bb798717e879e2a9976b6ffb38d6dcc7bf8cdb6470a0f191f28408b4bc0749e04695da26a36c117b024f6f93a9072a052fbc4a03afb4972a0cf7cf811b6af2917d3282c7aaf3415efb1fd2788acd0dc7db24ef006bbbba56ef96889dd4fc6b53ef93d5f15ba9d3e1e064ca7f5dd2973ce1e1a055b71c95ea6a7450b59974575c751471b03ce601faf05290802d7bbd51cfca8ffc52eca0784bac2bbe3d0cf6ab88f825fd812e45aca9d3b5218df1119c1cb529c3047e20e898aaa13792225f5786001c4e27ede59b6c9a2df6f99d8a40d2c1c37340adb47636ac3974a5f98b3c1b318c09f88aa34120757b01679a12528e8f34dd2e36fe50bc227895603f7a944a6c9e69ede109e82efbfd536aa73354e21b036bb45121a4d78093759e2daaac5b38aa81c4986a5009d2923bfe4dcd6beafda872496f9213f52b1e80e1999fe9c4f9a275ccfd8d93ffd79ca8b13961bc9494f23db6b1b308fc986993b545fa7341482e75ff83eab5003515a1ee185b9244710dce56420e8068796d2fa296a679be8b8304bcdab7e552388abd3861c051f42519106979c171679f44db20342c38d0c417d54a40b8bd705292fc0517b081bfb7532015d2d2785230b61a3138f4a510cc09f7c15ce97750b71a8418def4434b65e053e408e2e17b08a7090c59074bdea8840bb0d763133242ede2b11599fb6a65fe29c1c11f7572f18d381a833df82b12d8f6b0025684d11941cac542add31bb1b5d76d57a2e29a57d9b235b11fbec6a2639692a8c2884d9485088d92452541364784490eeceba5673797fe38b42cd684f4f5c84d021e4bdb90699eea7f7a2f7d28d4964ac3b40cf4e264ad018f80afd59ba88f5dab1f338c6268c43baafbf7dae68f2bc9d1242273dee382b79fdd032490dad959d75bc6c27ce7604ea02b7267e4b434948812ab903376cedbf718521fc4e77c425072244473d8b287a85afda1eca49ed25fda8716d7ca38fc841b2e121671ff5043595339df752d6aed2b15125ec2f14b902292e778cf53dc498908fe6d5e17015cbea50afdab2180149c3efde8ecdae0ae38e69c8931d1a4b03fe83854a1a0ca6a2743d1cdbefc3e388b9e5dec83ad4f89e1ae9f96c2fbc481de44d13f0a92b24a0913c2ee6d9b6edba0b3ab0dd9d582d1f1578002e75e9937f1ec02f442f21df8a287283f0dd0efb153aeb47d99e8624801fd1a5b2759361c534930f9e05895c5dbe3c05d5b746c0287b5b9ad0ca1d470d3e57ebe6ddaa4ffd496df0bde478e11b780cf81cd8999b85124b967591e1b314d37f5f39b8217136c5ff6186b85961aae6f60383d903c1d8b99ea775173625786a7179e8ac7cdc0a90a067a3b7c2b94979cb187923f49e207c2ee7abfb444e51997760c3a43205f0e76efcbd6839094e884a985c08e857d90033fd435cf7868f760e11012967ce3842114607c7e321cff7b55b24a1f1aebba8fa5d24751d8c7bb0fb6e0c077e7e452e921182d47bfad2b56643d05737c289f78e8a8b4bd5bee2fe955e7395e2c1cd9950ceb1b713faf34fc64ec1a3996f383fb35db0bd4df09b70a7f2fa958757881f6b33b5a632f4f96c1a9fd20243c77acdd8a812825beebc835129af20585f9001c18e49246d68df3104c5da7552d5ed4a33276db0c64bcfb6efe167eaf957df8def5f9c2cf3b282382c028cac3072f415b3aca7bfb66a9d33f9ce597f89c737b262e9860fa33d25161a1677cff04b8c1aa43e47be9bce54330386c2b8451c6aec3dd92da213f427bcedede506a225390d8fd6c6b4a44ef5858eeaa544cb900c0b894fc7b01ef79dd441c60075478bd245f773f6de9eaa974fba75e00c4d0363c76982a3cac290c251a52c662c2c91b9e0d33aa8027079ffd1c4a759607b812a3ab23c6db715a723f71c4f3f80b734a6b3e56b364fdbe234986185e5f68ae3a89344a5ddb555f9953a81c25387e6aa451fb5114c9f0ffa03b54922f88c806eba5cc8bf4ad7ee3d2a94d9c23eb2d1e7615dc123547cf69dcac36fe586c67316af8ae81282d5ce7304e82aceb220db298df668ef88e2d589d7ccf48e4c644cd2ff4b316a98bd5468a5dc8872394331b90fca1b8261fe9624a8886b6b37e4448ec5454644d17fb2061daea85f5eeb6a643349910af04122e19c080421adb23ee89d2f7f0b8b7a9bfb47d92ce51e9b72318e87ac92c036a0957448347be644aad6ab9f22eec5e50235770e86f872f5f0c08543736550c2336e4ce385101d8046b21ca0ec4b6dc950a27700d7db21f7047d642b473f43db43ab86c24b1abdd68d2a4aabbd6241e36acc48bf033495bc0b189ce554fc1baa85b11291cdc083b0d472bb28166d0bf68bb50e9581625665d339eea971df93a0771765257fd5434d09e3fbebcf21186dfbe0cafe27799ef1cf7ea2199553d7fe28101dcc7272bb0d753c7b74e3c0c1be5b6808f1897ff638f16331bab6cd2c3b2bbdc57389ca38261efb738c59298fa70a587d24ae63cf3f60b4375f1274d5cefc6805711647ecd9fa832536cf9b41296ed8dac0f818ba9ec72a53f911f56bc095ccc394c613da87ddd057d9ff869b6de54aaa81a842a2983e990b8135ab7f7c5a1c36149a09a292ca0825c97a937e8eb2a1d422e7000af166c1fb987777f2dde4d569cbba07a69db69e7551ed1d9ce4d5045b02b60f5d2e9d7c689bdfd54b305ce28db5121e9730adc4f2fe89a9a4105df8678ee2a958a096ec930dbeba71b7974490521d53d2a56b4803e50eab7aec5bbbafc4199dcd2bc860673e3be9d92053269c9ae9ac7b6a770106c2673d73b1dbf0b1e8fc9dbe9fe646bd15fa5e75b96eb14777287b1fa74dad05682300d2ade51bca42c2ae1415df7b2de7d0b889be8a1f0b047984bcd671de45299012ce9e617045a3492945dea7b1ef1eb4e352113b483c39ed67ed6975fdfc5e222d19d55f44e15076fc33c9a63eb755095e00dbdb76789a7b5534af3e1efeb36125942e22ec0fd5c334cc3ee299f8112d4ee402a2ae1fa22cdcdc3fe972eba88399dfaafe50a4d9a32bb9fad415289b39b1912e51c1eaa97f01acf60618cb637dbed0b6a7d5ef2ed53eaf4da51faa76a4675d3a18b43df68e77b6fda620e892173db8f8f5044955e1784378737099aeaf81483f3d956a1a9d8eb2ea670a647693c9bf2356226b37b2874b9e1a751cc3b6c0a7f79b9c8481f20e5ed15b4dc040d8c4cdd7abd2c0a86dc66160028912e51a9f73edb88f50ca4a8f9c6aee4679353f0594106d55844faf6488a08ed357bc746e67649698798a4d3b755b667b6b6896f55f2a57e8b56a968e08971912619ab5472c134f4360281855a25e4ea9df5d16c6902684392b06bd79c0aab5afe4cf5ace9ba927ab0b31eb949d27c852444be04346161148fb87543f77d32622495c3e2e41cf354934ba181c1d35730bd2966731e1de6bca0d22331c12a644f0a54344fd67e1d4ba8421a2e9648b1a1cd8d5bb13e9f16cf897fc27b5eef34fb302436fbec1a20cc24c58a9aadc363c6b7ba0f00a732b1c53993cce0f94cdfe4d441029c6d56c47808986a87cd50e64f4f4b35ee74db9b6eb66a93d0a5d9a877d6b6127f46e79c94edaa731b614ad2f326d3ea2ef5a4cb02b4936ae74090144464a881f25e8dd3d36a3b07653163e3d8f8dbb0f79a93ea954ca8f476f2c760a734b67c1d91fef74b9e048fc7b4137e10f10a7022e30422a528a89b28d8fe7ee90ead51153843cda3557c51fc5dc438c1a2df916fa2e782e207eb3096433436a6163b430048cbbccdf7723888f3fd0075d2ef7af81a2070e70d3fcec62146fa7421586126ca56a6de596a65cce3fa17e79439c0f2525da94dc181bc0ce8f577af5357443c7eef65f2e060de9e8af7e1ad09d7f6d4a5c033e3e2353b718839a59b96c99a9f3007cd77a2fa7e7f39b18428dd5b55757c23fbcc5cd62cec3c06c85b0c69875955538334473cf72a89c8c40a300c3faa2e8597100996b3597a91ace0876e7b47a29a31f37f41002420114ed64be1ed18bc17ea9fbcfc681ce03497868aa8a7e87c15bfadae58972a2addd8e8447ea9f671bffb63b3c41dae0ea51ecab3b1823ea17930940f20f4ec6adc94920a9739089e5da3e040d48593555b011069b4a8faddce5412f81d4351256b3a02236c2873d162b0461a28619920556cf09815af2533a2d2d29d6989a2aa898ba8e5b843d69631a3ef0807c43385aec5dadd660edc8ecad441b371aede273818527b89e16f12948a6b4b0277a0397ee471831446ccc786b739a445c6e836525700cfe48038a48410bb841bafd14c34303a531ec6e0fc511d3ca4f2ff3b37644c94f9f12262d5eddb2d3cdda5a3990888f3dba56548bc1b01c81883315c61d22a467dab81e6de2a1dca7d426387ff19d8eff2692a5a3fa6a22811fa709bb433a7b62ea80c619b0238eeb44e6985617db0ad6a6ec0e9c1e4ef13240176c60f1c1e6ed6d9cf7385c0be7c46337b16a300b7499624e32bd8fad5bb07e8592ece5bba2981125c9610b2349cce8eb9cf70ee4c90f161a5a82e42ea1816a8b1c919a3f1aa2b301f0bd4de9dbaa28f6853301506b3738f552c76690f827d4090f07efb8faa358f4517958855ddc869f8e07788218a95638cd4bff5e07d314070e64b2bc05e3788a5d4edb5f1c0b2511fcd181090d1b8d6398be7843da1b21238c357f300e00f99ceb686caae0c40b1c6c4af64a437dc0c73338c30851ab48acb8dbb4174fff15ff0d8c2e0d625ae9759771d16a127334f9d3d268ff1e3cb2a6ec1c1c4ac32e775dd1bdfb9393f908f51e4b8e6ff370506171c286f4577c4e88ce54d7e0a925db0ca4a7e44ff2457f08b874b9085d9fda24270646aebcb1093c6cc591e5f99db9555b9aecfb48d8ab4106978f677c07c08bc0e0c96f1706f8c3c9d97315f0edd859cc0e138d2286af16df5f6cf7f683831a9beaedf31501a4bfce928977616aded800d1b062790f7a9dc892ed2b20ca33cb85f16d4f3a52e867512a45a6b0744788d2fd4982649e52482dc74a155cdcaec6a3d065545cf93d68f18b9b80a411c1b2a26f391048bfb43a390900e44250bff48b30928951015197961b123af6a615d6d692eb7ccecf1b9f2d27488f3b98285480c3661c29f018f8e94804d8b77ea2e06ac34d07e74e7d3bca880441fff596b7ddf1cf4d3bf0e1a5eeed1a618e3b158b8d6da8788a130ed234fa51ea3ed09d0447763e3fd6d599a0b85cd2dc34b632806d730e4a542cf0d1aa4aca047d562ba2e77b5c6d355282a46f9e623dba2cafdfa0752df59c42e1f4eed8983e8bde2be26fc11af86ab1ee47fca26c0f87e54241a2adb09c6a9e7aebacaef1510966ddd3ff7605a1028f28137ea6bb05fca1449a286912108d1269f8bf8091d9cf4f5e58b52cbe113272dae9e7d4d08686205aee15ef0a69dbbfff8a1680551ca5e87b02724bcceb1a5d087529f31922d069adbaee804a5e6b5701672981c0a2b746360ce37fda49c9178dd368f957388f0cc5cd225468ffbc9db370358a12a8e71d52b3ddc22a2486b6f72d24aeca708bbcf8c2841376fbb067da831f0355bfb9372ebc8d88700ca895774c40af52ee3a2ad955c4634c840ea103d383464d439243503bd7511e429171a4d00d889d99f09203cbb357f3c748c3fd9e04b2c27ff9dea1776210f3503634142452d300e9fd690111217e27e7293990edc5ece8d3bc2252417e47a24a1e6ae8482b3475e08c8e05b55a6a23d032b72de876b44aa044ddc3170d4f783cbd24083d3d8c060c827305a134216c0cfb1ec86b19ad0e2870486f42826bf5e64d99e84616a1584d2ddc5c1dc8c74b38b94f44aeecb5dcb59b416e8c924a1e625d1d4dc3edff465f635866a990ef4567b5e5d7ee6b817a21cccc72d29b76d96c79a5a362311a2a5884aa8f03f0e907ceff4df6fd7e506100b7c232191212592e3d0e0935358cba8db2e353011684960b22622a39fde49a933ef3c856cf6031edc350521c961ebe4f00d0cebdf5360010f9861188cad0ee551ca7633c07c26164f544ef46e4f4651550a57718c0b6c20a0f951b488f531bde928b1c3cd8df2dec81cfa4987db6db0fa4ba93edbd588a032b137f6e3bbac569bf5fc661b3669d1cff6af33b61404984cf09a8e5e8d63283e6170752495b7c4e67c91829d0fcaff5782e9a0aea7fd3b7b1af818f89258967d802c933e30b88e2857e19af8735de9b7a39d96d2cee30a2ea67a11427e719a494827f1dd90a5cbfe3d5258e81f9bff8c0cdac1a3205cb12913dcd02177c62bd32094f7597036a13ef21c3e48e50116a3f00cda24511192e8fb44031d9fc66513dab20feef4600379ae6c4e81a7bddd42514fdede9d74b7cf2fce13b1b2fee130790a03739d2453aa7e35752bdaad8df13bac1e3872c71e07295aa0d0f063efca9ecb97d6f006a332a41847ad35492f793d05b77d2cedf32776366390f83af5c3d5bf2a38559c3e190dc3884d7a86ffcb5224eba9e5905986a5c5dfa2fb2376d97dd5be1d83dc23eeac558e9fc473955d7db71f251a18bdaa8fca009a11aeb63bee47fafa7a3a436a6aabb2e97e2f84198062eaae6cd58e50977081886b265b953ef279a770d8c88273a849ebe4493f6719ca8f84d32eef9390709f54e180332a4049a9d47eaad1d8eec8e8b816e91940c375d6739e4db326d38b2e4c92dc2d631b649de15c723f013641a1a5548c5a079eb3701657ca45676e20d19522d20ceaa78723322ff4cc2fd49bd99ff7cbc7321d78928b8c3c054de558f36e047165c72b5158150bbdb8a06f777f2b01746ee03b6fecc0a5b3c1eb2a0c4a25f45470a0cb984ba8831f97327c1dd622402676e26ff2cf779c27ca593376bedaf33b24c0992acf3650108d607b7825bd244e5fca1bf7f439081386cfa2a16d0ba4c0e778ef96b166d28b69bd4e4a69c170b74e9230e6babce4ea4ce269a28572e16f4a1f463c9327aa564d98d6987f4589a76b440e44719720b2a7aacfaa4d91bf00b38b4550f5a079d93f41e5c6bf45198189b23563d0f5055af0eb6db2c797d2de04887cf0655a2d319a340fe9bb8592b6d98cb2acb45be8df5872e7553e6ac0d39cbf077d0f8573ebee6a8e9edf6dd1b14812de54fdd25e71ab7cd888fb4abe66e3961da1c98f940569e5a9a8922b75da4006da2f92e426db5a6a7b72d391b83ab96bcffa80d94a5bbd291c5b10a8609e0d4fb69773740c21a09516c41953fd5c5a7891f8e4909a94ec367ef028a78069ab9c4295032575e1fadae5caae6b05ba94e99188cc71a2c114551e67ba0958ac38c1e4546a1d264bd49ef176a5676c2a14734ab597f26cc264be67b7e9a3cb52e53603991580cceed9be704d490f9978ddfb1d650f750f12e5b1b55cad5456d0e0e7d15bbf88228321f6ba5606f3c393548573ec8d3d1977ccc02c5ecffe037c88363d8ea085d571210e566f09039d29e68d39dfa6e83402dfa6ed0be0afcf783bdebef86499f29f766336fd85724b9921f76b5ed1a041ef75f8b6eae6821a7309f4677ba0d4d1e0bd42af1b3bf365b1099880d395adb02c2584af54323c773651b97efe7243cf18594eb38ee29339fbfa6d0066b5c1fb286c0ba0e649a8f16fbf58a79fc81134ab07997d27a026b539ca3ad9911ab3a4fb4f0fb2dfe4c282385b08bdedcfc245b2bee981d33dc91366b1cd5edecedb69f5f5d4d0527c26c8a9424d7f17327a63518ea959089b1a163895df978b31ffd55d3042e13884930de9911ef307deba481d7980803c0f36f6b66cc14ddbe955dd7423f523a85d21f0624197fbce44518ff80e753f494a59984b2f2ed8938a20836a0a205bddbbf7e55861fb1384e69b089387c099ff4dea58a53e17a3f04cc6862d7e644f12a8899a4966098d1748b9c6721ac67a001b05fa603d4543d728a4b931071a9a28b6ad3c5f40c3fb289cfb36d7799a9c8be27075e8f563de0bb1332f428b6de6ed9f682456fc78995dc1b86b8c801a6b60784edc89d50404767e820cea519528f2981c64a17c6c4969deb4cbd50e7abb668b3a8c64a0ff1876fd4b4ee0978f12d2da2ef242691d8e1f2dfe52fa75adc02d4610abc711294d8bb6d57d84a550531204b9b5c17b57b17ec1aad9a4db7dc28ae1ce03e82583b2ccc482dacbef2d895dde4f0a618db4ac3fb5946c937c83feec49852539267ff01c375f4f9889326acf61c0f6178bfb4076dce1a65d503b523e404bc0d84665bd4961c5de926d806347bed741b4a38de03e160f200b9fab98bc9f519d878bf35013b662cb03c5b1fd0070c8425aeb6307068b6c24559c9e0b1ced29330f715ab0c70a9da1bf482a592e285ff30a2e123da16bdf13e511c60368d84d06183b18d2eb1a875cf07fd75baf3bc49f42cebf694a04a4d03367f315963f022a15e886703ea1d3fa913efcef7606bd5eed0b2acd447c402609b286cdb0f1b881709b6af1936ff0e5a5329aa09a9698046431326bc888c5285deb4df7dc855884ed30658c49cde89b548ae607966e2d0f5c8b621ac942362f7dfb579779db198da700b05ca2f8c26d23b3538e5eb57c9d8cbb1cdada02bfa11deeabebae192fb6ad744da186d140779d752f4baec50a74fb2b1db41a8f49db95f00062b6e217362617d9d3274fd6b5e8e7a65c4f55d3a34c9dff4a5bea37f100fa1069aef0bbc9fc1932ad978e27b957ea3151703f3d11e1520b046d926b34e2821f93a1886fc1dd2dfbfd608acfe0b9708ba7a8172b2cb77ff02baf1b7e3afb5c062aa4f32af616c2554d9307d17edebf0708adb2b193b971ba666ca2c113214ef351cdb10aeabcce32010d310ab3a7eb4b5343ffa8a751d629dbc618405044995fdc1281289811d7dfb64a7dfad539fd10cc561f8c9871d0a14e0bc1e8410f333fde38fa572d96d64eb009e52c0d27827550857d697c31856cb61fcf8f32da8f601d30587966c87c0465fc80021afcedb5b9a349e18bd83de621e36de1cdde265f1c43423418703cb4ce63c2d2f0759d17592a2517367a3095c6e7efc94e63b846f09ad8d360a8ee8f53df1b9b124c1f67d0cf77d0c37fc67c2f998a9da4d3290732cba15bbe9f821d4a090116e39a7589a0827a65a3ef3fe2e6f30d7e33f12922b845706dfd677d2d600f43c172a498532bd164fab6672dda8113175b62fa1f1f78ae49092689e23d07ab19d40a46693014e965bc70444e1461730ab7776f39e56de28a1f2381fd4f74210f1597ba3c36da7c48bf0f42cc4ccb44b0dfac06cab97adff995b994102b80d807441734727311a6c4323063471e0c756ab3a5422f222dbdff37aa34abba18d884ffb1b2e91bed0cbc22356b8ae1744b9d18f5bd2472b7e06c1aafc4f652934708008bbd51ad2344c5b096e83c01603a52f642eb549f4ffdbd903ffa4faf806d51d824ac03c3d19cedc61b24003ed8ca5e6d2350c5e28a315268a08e65ce12f4b0d2c5dcf83aba5121b0aacc4c34d0998d65f11ef682f05b4bc8a3f2874f22573e248e9439a9c6c1e2cef22a3a38efbba55b052a2e5543ffa75c9bd257db664d26cef055e82342a0a0f84265b29ba33d849cc5446ad96d5ac1e0cf7aaf172610b999d9dbb89b5b5a86ad2fab74d602f73e561d8836dce05755fa3e0d9484ba3c298</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-blink">      <input class="hbe hbe-input-field hbe-input-field-blink" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-blink" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-blink" data-content="请输入密码">请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> password </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL子查询</title>
      <link href="/2025/09/23/SQL%E5%AD%90%E6%9F%A5%E8%AF%A2/"/>
      <url>/2025/09/23/SQL%E5%AD%90%E6%9F%A5%E8%AF%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="🍋子查询的使用"><a href="#🍋子查询的使用" class="headerlink" title="🍋子查询的使用"></a>🍋子查询的使用</h2><ul><li>企业常用的子查询示例？</li><li>有哪些必须用子查询的情况，有哪些常见的改join&#x2F;with提高性能的例子？</li><li>Hash Join、Semi Join、宽表、FilterProject、SemiJoin 、HashBuilder这些词什么意思</li></ul><p>下面把“<strong>必须用子查询</strong>”和“<strong>可以改 JOIN &#x2F; WITH 提速</strong>”这两种场景一次性拆开讲透。</p><p>每条都给出 <strong>Trino（Presto）语法示例</strong>，并注明 <strong>为什么必须&#x2F;可以改写</strong></p><h3 id="一、4-种“必须用子查询”的场景"><a href="#一、4-种“必须用子查询”的场景" class="headerlink" title="一、4 种“必须用子查询”的场景"></a>一、4 种“<strong>必须</strong>用子查询”的场景</h3><p>（改写 JOIN 会<strong>语义错误</strong>或<strong>更慢</strong>）</p><table><thead><tr><th align="left">场景</th><th align="left">必须用子查询的原因</th><th align="left">Trino 示例</th></tr></thead><tbody><tr><td align="left">1. 聚合后回查原表（“找高于部门平均”）</td><td align="left">聚合值与明细行<strong>逐行比较</strong>，JOIN 先聚合再回查&#x3D;自己和自己连，只能用相关子查询或窗口函数</td><td align="left">SELECT * FROM employee e WHERE <code>salary &gt;</code> (SELECT <code>AVG(salary)</code> FROM employee WHERE dept&#x3D;e.dept)</td></tr><tr><td align="left">2. EXISTS &#x2F; NOT EXISTS</td><td align="left">语义是“<strong>有无匹配</strong>”，JOIN 会<strong>放大行数</strong>；NOT IN 对 NULL 敏感</td><td align="left">SELECT * FROM customer c WHERE NOT <code>EXISTS</code> (<code>SELECT 1</code> FROM orders o WHERE o.customer_id&#x3D;c.id)</td></tr><tr><td align="left">3. 行号&#x2F; Top-N 子查询（每组取最新 1 条）</td><td align="left">需要<strong>先排序再过滤</strong>，JOIN 写不出“每组”限制</td><td align="left">SELECT * FROM (SELECT *, row_number() OVER (PARTITION BY user_id ORDER BY login_dt DESC) rn FROM login_log) t <code>WHERE rn=1</code></td></tr><tr><td align="left">4. 测量数据质量（重复主键、空值率）</td><td align="left">只关心<strong>统计结果</strong>，不需要展开明细；JOIN 会强行拉明细</td><td align="left">SELECT order_id, COUNT() FROM orders GROUP BY order_id <code>HAVING COUNT()&gt;1</code></td></tr></tbody></table><h3 id="二、6-个“常见可改写”例子"><a href="#二、6-个“常见可改写”例子" class="headerlink" title="二、6 个“常见可改写”例子"></a>二、6 个“<strong>常见可改写</strong>”例子</h3><p>（子查询 → JOIN &#x2F; WITH，<strong>性能 2-10 倍</strong>提升）</p><h4 id="1-相关子查询-→-JOIN"><a href="#1-相关子查询-→-JOIN" class="headerlink" title="1. 相关子查询 → JOIN"></a>1. 相关子查询 → JOIN</h4><p><strong>原写法（慢）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> emp_id, emp_name,</span><br><span class="line">       (<span class="keyword">SELECT</span> dept_name <span class="keyword">FROM</span> department d <span class="keyword">WHERE</span> d.dept_id <span class="operator">=</span> e.dept_id) <span class="keyword">AS</span> dept_name</span><br><span class="line"><span class="keyword">FROM</span> employee e;</span><br></pre></td></tr></table></figure><p><strong>改写（快）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.emp_id, e.emp_name, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employee e</span><br><span class="line"><span class="keyword">JOIN</span> department d <span class="keyword">ON</span> d.dept_id <span class="operator">=</span> e.dept_id;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：把 <strong>每行一次索引回表</strong> 改成 <strong>一次 Hash Join</strong>。</p><hr><h4 id="2-相关聚合子查询-→-WITH-JOIN"><a href="#2-相关聚合子查询-→-WITH-JOIN" class="headerlink" title="2. 相关聚合子查询 → WITH + JOIN"></a>2. 相关聚合子查询 → WITH + JOIN</h4><p><strong>原写法（O(N²)）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> emp_id, salary,</span><br><span class="line">       salary <span class="operator">-</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> e.dept_id) <span class="keyword">AS</span> diff</span><br><span class="line"><span class="keyword">FROM</span> employee e;</span><br></pre></td></tr></table></figure><p><strong>改写（O(N)）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WITH</span> dept_avg <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> dept_id, <span class="built_in">AVG</span>(salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line">    <span class="keyword">FROM</span> employee</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> dept_id</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> e.emp_id, e.salary, e.salary <span class="operator">-</span> d.avg_salary <span class="keyword">AS</span> diff</span><br><span class="line"><span class="keyword">FROM</span> employee e</span><br><span class="line"><span class="keyword">JOIN</span> dept_avg d <span class="keyword">ON</span> d.dept_id <span class="operator">=</span> e.dept_id;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：聚合只算一次，复用结果。</p><hr><h4 id="3-IN-子查询-→-Semi-Join"><a href="#3-IN-子查询-→-Semi-Join" class="headerlink" title="3. IN (子查询) → Semi Join"></a>3. IN (子查询) → Semi Join</h4><p><strong>原写法</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> customer</span><br><span class="line"><span class="keyword">WHERE</span> customer_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> customer_id <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> order_amt <span class="operator">&gt;</span> <span class="number">10000</span>);</span><br></pre></td></tr></table></figure><p><strong>改写（Trino 自动做，也可显式写）</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> c.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> customer c</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> orders o <span class="keyword">WHERE</span> o.customer_id <span class="operator">=</span> c.customer_id <span class="keyword">AND</span> o.order_amt <span class="operator">&gt;</span> <span class="number">10000</span>);</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：Semi Join 可在 <strong>Hash Build 阶段</strong>直接过滤，<strong>不放大右表</strong>。</p><hr><h4 id="4-子查询当“临时宽表”-→-WITH-展开后多次复用"><a href="#4-子查询当“临时宽表”-→-WITH-展开后多次复用" class="headerlink" title="4. 子查询当“临时宽表” → WITH 展开后多次复用"></a>4. 子查询当“临时宽表” → WITH 展开后多次复用</h4><p><strong>场景</strong>：同一张中间结果要被<strong>选两次</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WITH</span> high_val_customer <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> customer_id, <span class="built_in">SUM</span>(order_amt) <span class="keyword">AS</span> total</span><br><span class="line">    <span class="keyword">FROM</span> orders</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> customer_id</span><br><span class="line">    <span class="keyword">HAVING</span> <span class="built_in">SUM</span>(order_amt) <span class="operator">&gt;</span> <span class="number">100000</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> h.customer_id, h.total, a.address</span><br><span class="line"><span class="keyword">FROM</span> high_val_customer h</span><br><span class="line"><span class="keyword">JOIN</span> address a <span class="keyword">ON</span> a.customer_id <span class="operator">=</span> h.customer_id;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：只扫描一次 <code>orders</code>，<strong>CTE 结果默认物化</strong>（Trino 358+ 支持 <strong>CTE Reuse</strong>）。</p><hr><h4 id="5-多层嵌套子查询-→-一步-JOIN"><a href="#5-多层嵌套子查询-→-一步-JOIN" class="headerlink" title="5. 多层嵌套子查询 → 一步 JOIN"></a>5. 多层嵌套子查询 → 一步 JOIN</h4><p><strong>原写法</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> sku s</span><br><span class="line"><span class="keyword">WHERE</span> category_id <span class="operator">=</span> (<span class="keyword">SELECT</span> category_id <span class="keyword">FROM</span> category <span class="keyword">WHERE</span> category_name <span class="operator">=</span> <span class="string">&#x27;手机&#x27;</span>)</span><br><span class="line">  <span class="keyword">AND</span> brand_id    <span class="operator">=</span> (<span class="keyword">SELECT</span> brand_id   <span class="keyword">FROM</span> brand    <span class="keyword">WHERE</span> brand_name    <span class="operator">=</span> <span class="string">&#x27;华为&#x27;</span>);</span><br></pre></td></tr></table></figure><p><strong>改写</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> sku s</span><br><span class="line"><span class="keyword">JOIN</span> category c <span class="keyword">ON</span> c.category_id <span class="operator">=</span> s.category_id <span class="keyword">AND</span> c.category_name <span class="operator">=</span> <span class="string">&#x27;手机&#x27;</span></span><br><span class="line"><span class="keyword">JOIN</span> brand    b <span class="keyword">ON</span> b.brand_id    <span class="operator">=</span> s.brand_id    <span class="keyword">AND</span> b.brand_name    <span class="operator">=</span> <span class="string">&#x27;华为&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：两次相关子查询 → <strong>一次多表 Hash Join</strong>，且可以利用 <strong>复合索引</strong>。</p><hr><h4 id="6-子查询里再子查询-→-扁平化-JOIN-窗口函数"><a href="#6-子查询里再子查询-→-扁平化-JOIN-窗口函数" class="headerlink" title="6. 子查询里再子查询 → 扁平化 JOIN + 窗口函数"></a>6. 子查询里再子查询 → 扁平化 JOIN + 窗口函数</h4><p><strong>原写法</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="operator">*</span>, (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> orders o <span class="keyword">WHERE</span> o.customer_id <span class="operator">=</span> c.customer_id) <span class="keyword">AS</span> cnt</span><br><span class="line">    <span class="keyword">FROM</span> customer c</span><br><span class="line">) t</span><br><span class="line"><span class="keyword">WHERE</span> cnt <span class="operator">&gt;=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p><strong>改写</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> c.<span class="operator">*</span>, t.cnt</span><br><span class="line"><span class="keyword">FROM</span> customer c</span><br><span class="line"><span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> customer_id, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> cnt <span class="keyword">FROM</span> orders <span class="keyword">GROUP</span> <span class="keyword">BY</span> customer_id) t</span><br><span class="line">  <span class="keyword">ON</span> t.customer_id <span class="operator">=</span> c.customer_id</span><br><span class="line"><span class="keyword">WHERE</span> t.cnt <span class="operator">&gt;=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p><strong>提速点</strong>：把 <strong>相关子查询</strong> 变成 <strong>非相关聚合</strong>，再 <strong>Hash Join</strong>。</p><h3 id="三、1-张决策表，10-秒判断“能不能改”"><a href="#三、1-张决策表，10-秒判断“能不能改”" class="headerlink" title="三、1 张决策表，10 秒判断“能不能改”"></a>三、1 张决策表，10 秒判断“能不能改”</h3><table><thead><tr><th align="left">检查项</th><th align="left">子查询必须保留</th><th align="left">可改写 JOIN&#x2F;WITH</th></tr></thead><tbody><tr><td align="left">是否 EXISTS &#x2F; NOT EXISTS</td><td align="left">✅</td><td align="left">❌</td></tr><tr><td align="left">是否“聚合后回查明细”</td><td align="left">✅（或改窗口）</td><td align="left">❌</td></tr><tr><td align="left">是否“每组 Top-N”</td><td align="left">✅（需窗口）</td><td align="left">❌</td></tr><tr><td align="left">是否只拿聚合指标</td><td align="left">❌</td><td align="left">✅（先 WITH 聚合）</td></tr><tr><td align="left">是否相关子查询且<strong>无聚合</strong></td><td align="left">❌</td><td align="left">✅（直接 JOIN）</td></tr><tr><td align="left">是否 IN (子查询)</td><td align="left">❌</td><td align="left">✅（Semi Join）</td></tr></tbody></table><h3 id="四、小结口诀"><a href="#四、小结口诀" class="headerlink" title="四、小结口诀"></a>四、小结口诀</h3><blockquote><p><strong>“聚合回查、存在性、Top-N 必须子查；其余一律拉出来做 JOIN&#x2F;WITH。”</strong></p></blockquote><p>拿不准执行计划时，<strong>EXPLAIN (TYPE DISTRIBUTED)</strong> 看有没有 <strong>FilterProject+SemiJoin</strong> 或 <strong>HashBuilder</strong> 即可。</p><h3 id="高频黑话"><a href="#高频黑话" class="headerlink" title="高频黑话"></a>高频黑话</h3><ol><li>Hash Join（哈希连接）</li></ol><ul><li><p><strong>定义</strong>：把两表里<strong>连接键</strong>先算成哈希表，再一次性“对号入座”做等值匹配。</p></li><li><p><strong>类比</strong>：老师拿两张名单，先给 A 班每人发一个“学号-座位号”小纸条（建哈希表），再让 B 班学生按纸条找座位，<strong>O(1) 定位</strong>。</p></li><li><p><strong>Trino 计划里</strong>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">└─ InnerJoin[hash = (user_id)]  </span><br><span class="line">   ├─ Scan[user_id, …]  ←  Build 端（通常选小表）  </span><br><span class="line">   └─ Scan[user_id, …]  ←  Probe 端</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>Semi Join（半连接）</li></ol><ul><li><p><strong>定义</strong>：只关心<strong>左表记录是否在右表存在匹配</strong>，<strong>不返回右表列</strong>，也<strong>不去重左表</strong>。</p></li><li><p><strong>类比</strong>：安检门只看你是否在“黑名单”里，<strong>查到就拦下</strong>，不会把黑名单详细信息打印出来。</p></li><li><p><strong>Trino 自动把</strong> <code>EXISTS / IN (子查询)</code> <strong>改写成</strong> <code>SemiJoin</code>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">└─ SemiJoin[hash = (user_id)]  </span><br><span class="line">   ├─ Scan…  ← 左表（旅客）  </span><br><span class="line">   └─ Scan…  ← 右表（黑名单）</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li>HashBuilder（哈希建造者）</li></ol><ul><li><strong>定义</strong>：Trino 执行计划里的一个<strong>运行时算子</strong>，负责把 Build 端数据<strong>全部读进内存</strong>并建成哈希表。</li><li><strong>类比</strong>：安检人员先把黑名单<strong>一次性录入扫描枪</strong>（HashBuilder），后面每过来一个旅客就<strong>扫一下枪</strong>（Probe）。</li><li><strong>计划关键字</strong>：<code>HashBuilder[hash = (key)]</code> 常出现在 <code>SemiJoin</code> 或 <code>HashJoin</code> 的<strong>右分支</strong>。</li></ul><ol start="4"><li>FilterProject（过滤+投影）</li></ol><ul><li><p><strong>定义</strong>：Trino 里最轻量的算子，<strong>先过滤行</strong>（Filter）<strong>再裁剪列</strong>（Project），无 I&#x2F;O 开销。</p></li><li><p><strong>类比</strong>：超市收银台：先把你购物车里的<strong>过期商品扔掉</strong>（Filter），再把<strong>不需要的小票副联撕掉</strong>（Project）。</p></li><li><p><strong>计划示例</strong>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">└─ FilterProject[predicate = (status = &#x27;PAID&#x27;)]  </span><br><span class="line">   └─ Scan…</span><br></pre></td></tr></table></figure></li></ul><ol start="5"><li>宽表（Wide Table）</li></ol><ul><li><strong>定义</strong>：把<strong>多张维度表字段冗余到一张事实表</strong>里，减少 Join，牺牲存储换查询速度。</li><li><strong>类比</strong>：原本要点 5 份外卖（5 张表 Join），现在直接买一份“全家桶”（宽表），<strong>一口吃到所有菜</strong>。</li><li><strong>在 Trino 里</strong>：宽表通常以 <strong>Hive&#x2F;Iceberg Parquet&#x2F;ORC</strong> 形式存在，<strong>列式存储 + 分区</strong>，配合 <strong>列裁剪</strong> 扫描极快。</li></ul><ol start="6"><li>总结</li></ol><table><thead><tr><th>术语</th><th>口诀</th></tr></thead><tbody><tr><td>Hash Join</td><td>小表先变哈希，大表逐行探。</td></tr><tr><td>Semi Join</td><td>只问“有没有”，不拿右表数据。</td></tr><tr><td>HashBuilder</td><td>造哈希表的阶段，看右支。</td></tr><tr><td>FilterProject</td><td>先过滤行，再裁剪列。</td></tr><tr><td>宽表</td><td>把字段先拼好，省掉 Join。</td></tr></tbody></table><h2 id="🍋子查询其他"><a href="#🍋子查询其他" class="headerlink" title="🍋子查询其他"></a>🍋子查询其他</h2><h4 id="LATERAL横向子查询"><a href="#LATERAL横向子查询" class="headerlink" title="LATERAL横向子查询"></a>LATERAL横向子查询</h4><ul><li>横向子查询是什么</li><li>这效率很不高吧</li><li>那我为什么不用普通 JOIN</li><li>ON true什么意思</li></ul><p>“横向子查询”是 LATERAL子查询 的直译，也有人叫 横向派生表、横向连接。 它的核心作用只有一句话：</p><blockquote><p>让右侧的子查询能够引用左侧已经列出的表&#x2F;别名，实现“逐行计算”。</p></blockquote><ol><li>出现位置 只能出现在 <code>FROM</code> 或 <code>JOIN</code> 子句里，且前面必须带关键字 <code>LATERAL</code>（PostgreSQL、SQL Server、Oracle、MySQL 8.0+ 都支持）。</li><li>与普通子查询的区别</li></ol><table><thead><tr><th>普通派生表</th><th>LATERAL 子查询</th></tr></thead><tbody><tr><td>先整体算出结果，再拿给外层用</td><td>对外层每一行都重新计算一次</td></tr><tr><td>内部看不到外层的任何列</td><td>内部可以直接引用外层“左边”已经出现的列</td></tr></tbody></table><ul><li>一眼看懂例子 <ul><li>需求：对每笔订单，找出“该客户”历史订单里金额最高的那一条。</li><li>orders订单表</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> o.<span class="operator">*</span>, top.<span class="operator">*</span><span class="keyword">FROM</span> orders <span class="keyword">AS</span> o</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (<span class="keyword">SELECT</span> <span class="operator">*</span><span class="keyword">FROM</span> orders o2</span><br><span class="line">    <span class="keyword">WHERE</span> o2.customer_id <span class="operator">=</span> o.customer_id      <span class="comment">-- 直接用到外层 o 的列</span></span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> o2.amount <span class="keyword">DESC</span></span><br><span class="line">    LIMIT <span class="number">1</span></span><br><span class="line">) <span class="keyword">AS</span> top <span class="keyword">ON</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>典型场景速记</p><ol><li>每组&#x2F;每行求 Top-N、累积、相邻行、行列转换</li><li>把“相关子查询”改写成 JOIN 形式，方便利用索引、避免重复扫描</li><li>需要“行级函数”效果，又不想写存储过程</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> SQL </tag>
            
            <tag> Trino </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL窗口函数速查表</title>
      <link href="/2025/09/23/SQL%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0%E9%80%9F%E6%9F%A5%E8%A1%A8/"/>
      <url>/2025/09/23/SQL%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0%E9%80%9F%E6%9F%A5%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="一、排名与分布分析类（核心用：给数据-“排位置、看占比”）"><a href="#一、排名与分布分析类（核心用：给数据-“排位置、看占比”）" class="headerlink" title="一、排名与分布分析类（核心用：给数据 “排位置、看占比”）"></a>一、排名与分布分析类（核心用：给数据 “排位置、看占比”）</h3><p>专门用于确定数据在整体 &#x2F; 分区中的相对位置、排名顺序或分布比例，是最常用的窗口函数类型。</p><ol><li><strong>ROW_NUMBER()</strong>：给分区内每行贴唯一连续序号，同值也不重复（如 “给每天的订单按时间排 1、2、3 号”）。</li><li><strong>RANK()</strong>：按排序值排名，同值同名次，后续名次跳号（如 “成绩并列第 1，下一名直接第 3”）。</li><li><strong>DENSE_RANK()</strong>：按排序值排名，同值同名次，后续名次不跳号（如 “成绩并列第 1，下一名仍第 2”）。</li><li><strong>PERCENT_RANK()</strong>：返回相对百分位排名（公式：(名次 - 1)&#x2F;(总行数 - 1)），范围 0~1，体现 “比多少数据好 &#x2F; 差”。</li><li><strong>CUME_DIST()</strong>：返回 “≤当前值的行数 &#x2F; 总行数”，范围 0~1，体现 “当前值及以下数据的占比”。</li><li><strong>NTILE(n)</strong>：将分区数据均匀分成 n 个 “桶”，返回每行所属桶号（如 “把员工绩效分成 3 组，标 1&#x2F;2&#x2F;3 桶”）。</li></ol><h3 id="二、相邻数据取值类（核心用：“跨行取数”，比当前行前-后-特定位置的值）"><a href="#二、相邻数据取值类（核心用：“跨行取数”，比当前行前-后-特定位置的值）" class="headerlink" title="二、相邻数据取值类（核心用：“跨行取数”，比当前行前 &#x2F; 后 &#x2F; 特定位置的值）"></a>二、相邻数据取值类（核心用：“跨行取数”，比当前行前 &#x2F; 后 &#x2F; 特定位置的值）</h3><p>专门用于获取分区内 “非当前行” 的数据，无需手动关联表，直接跨行提取目标位置的值。</p><ol><li><strong>LAG(expr [,offset [,default]])</strong>：取当前行 “往上数 offset 行” 的 expr 值，无对应行返回 default（如 “取前 1 天的销售额，无则返回 0”）。</li><li><strong>LEAD(expr [,offset [,default]])</strong>：取当前行 “往下数 offset 行” 的 expr 值，无对应行返回 default（如 “取后 1 天的销售额，无则返回 0”）。</li><li><strong>FIRST_VALUE(expr)</strong>：取分区内按排序规则的 “第一行” expr 值（如 “取店铺本月第一天的销售额”）。</li><li><strong>LAST_VALUE(expr)</strong>：取分区内 “到当前行为止” 的最后一行 expr 值（需注意窗口框架，默认到当前行，非全分区）。</li><li><strong>NTH_VALUE(expr, n)</strong>：取分区内排序后的 “第 n 行” expr 值，无第 n 行则返回 NULL（如 “取店铺本月第 2 天的销售额”）。</li></ol><h3 id="三、窗口聚合计算类（核心用：“累计-整体统计”，在分区内做聚合，不压缩行数）"><a href="#三、窗口聚合计算类（核心用：“累计-整体统计”，在分区内做聚合，不压缩行数）" class="headerlink" title="三、窗口聚合计算类（核心用：“累计 &#x2F; 整体统计”，在分区内做聚合，不压缩行数）"></a>三、窗口聚合计算类（核心用：“累计 &#x2F; 整体统计”，在分区内做聚合，不压缩行数）</h3><p>将普通聚合函数（SUM&#x2F;AVG 等）改造为窗口模式，不合并行，每行都能显示聚合结果（累计或全分区）。</p><h4 id="1-基础累计-局部聚合（支持按顺序累计，默认-“从第一行到当前行”）"><a href="#1-基础累计-局部聚合（支持按顺序累计，默认-“从第一行到当前行”）" class="headerlink" title="1. 基础累计 &#x2F; 局部聚合（支持按顺序累计，默认 “从第一行到当前行”）"></a>1. 基础累计 &#x2F; 局部聚合（支持按顺序累计，默认 “从第一行到当前行”）</h4><ul><li><strong>SUM(expr)</strong>：计算分区内到当前行的 expr 累计和（如 “按日期累计店铺销售额”）。</li><li><strong>AVG(expr)</strong>：计算分区内到当前行的 expr 累计平均值（如 “按日期累计店铺日均销售额”）。</li><li><strong>COUNT(expr)</strong>：统计分区内到当前行的非 NULL 行数（如 “按日期累计店铺营业天数”）。</li><li><strong>MIN(expr)</strong>：取分区内到当前行的 expr 最小值（如 “按日期记录店铺截至当天的最低销售额”）。</li><li><strong>MAX(expr)</strong>：取分区内到当前行的 expr 最大值（如 “按日期记录店铺截至当天的最高销售额”）。</li></ul><h4 id="2-全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）"><a href="#2-全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）" class="headerlink" title="2. 全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）"></a>2. 全分区统计（不累计，直接计算整个分区的统计量，每行结果相同）</h4><ul><li><strong>STDDEV_POP(expr)</strong>：计算分区内 expr 的 “总体标准差”（用全部数据计算，分母为总行数）。</li><li><strong>STDDEV_SAMP(expr)</strong>：计算分区内 expr 的 “样本标准差”（用样本数据计算，分母为总行数 - 1）。</li><li><strong>VAR_POP(expr)</strong>：计算分区内 expr 的 “总体方差”（总体标准差的平方）。</li><li><strong>VAR_SAMP(expr)</strong>：计算分区内 expr 的 “样本方差”（样本标准差的平方）。</li></ul><h3 id="四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）"><a href="#四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）" class="headerlink" title="四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）"></a>四、多变量关联分析类（核心用：“分析两个变量的关系”，如相关性、回归）</h3><p>专门用于分析分区内两个变量（如 “销售额” 与 “日期”、“广告投入” 与 “销量”）的关联程度或回归规律。</p><ol><li><p><strong>COVAR_POP(y, x)</strong>：计算 y 和 x 的 “总体协方差”，体现两变量的整体联动方向（正 &#x2F; 负相关趋势）。</p></li><li><p><strong>COVAR_SAMP(y, x)</strong>：计算 y 和 x 的 “样本协方差”，基于样本数据体现两变量的联动方向。</p></li><li><p><strong>CORR(y, x)</strong>：计算 y 和 x 的 “皮尔逊相关系数”，范围 - 1~1，直接体现关联强度（1 &#x3D; 完全正相关，-1 &#x3D; 完全负相关）。</p></li><li><p>REGR_* 系列</p><p>：一次线性回归专用函数，如：</p><ul><li><strong>REGR_SLOPE(y, x)</strong>：计算 y 对 x 的回归斜率（如 “销售额随日期变化的每日增长幅度”）。</li><li><strong>REGR_INTERCEPT(y, x)</strong>：计算回归截距（如 “回归公式的初始值”）。</li><li><strong>REGR_R2(y, x)</strong>：计算决定系数 R²，体现回归模型的拟合优度（越接近 1 拟合越好）。</li><li><strong>REGR_COUNT(y, x)</strong>：统计 y 和 x 均非空的行数（回归分析的有效数据量）</li></ul></li></ol><h3 id="五、窗口函数常见错误与避坑指南"><a href="#五、窗口函数常见错误与避坑指南" class="headerlink" title="五、窗口函数常见错误与避坑指南"></a>五、窗口函数常见错误与避坑指南</h3><p>窗口函数功能强大但细节复杂，实际使用中容易因理解框架范围、分区逻辑或排序规则导致结果不符合预期。以下是最常见的错误类型及解决方案：</p><h4 id="1-LAST-VALUE-结果不符合预期（最容易踩的坑）"><a href="#1-LAST-VALUE-结果不符合预期（最容易踩的坑）" class="headerlink" title="1.LAST_VALUE() 结果不符合预期（最容易踩的坑）"></a>1.<code>LAST_VALUE()</code> 结果不符合预期（最容易踩的坑）</h4><p><strong>错误表现：</strong></p><p>使用 <code>LAST_VALUE()</code> 时，返回的不是分区内最后一行的值，而是当前行或靠前位置的值。</p><p><strong>错误原因：</strong></p><p>窗口函数默认框架是 <code>RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW</code>（从第一行到当前行），而非全分区。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想取全分区最后一行，却返回当前行及之前的最后一行</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">LAST_VALUE</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> last_sales</span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><p><strong>解决方案：</strong></p><p>显式指定全分区框架 <code>ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING</code>：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">LAST_VALUE</span>(sales) <span class="keyword">OVER</span> (</span><br><span class="line">    <span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop </span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span></span><br><span class="line">    <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">  ) <span class="keyword">AS</span> last_sales  <span class="comment">-- 正确返回分区内最后一行</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="二、遗漏-PARTITION-BY-导致全局计算"><a href="#二、遗漏-PARTITION-BY-导致全局计算" class="headerlink" title="二、遗漏 PARTITION BY 导致全局计算"></a>二、遗漏 <code>PARTITION BY</code> 导致全局计算</h2><h3 id="错误表现："><a href="#错误表现：" class="headerlink" title="错误表现："></a>错误表现：</h3><p>希望按分组（如店铺）单独计算窗口函数，结果却变成了所有数据的全局计算。</p><h3 id="错误原因："><a href="#错误原因：" class="headerlink" title="错误原因："></a>错误原因：</h3><p>忘记添加 <code>PARTITION BY</code>，函数默认对全表数据进行计算。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想按店铺计算累计销售额，却计算了所有店铺的总和</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> running_sum  <span class="comment">-- 缺少 PARTITION BY shop</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h3><p>明确添加 <code>PARTITION BY</code> 定义分组：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> running_sum  <span class="comment">-- 正确按店铺分组</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="三、ORDER-BY-排序方向错误影响结果"><a href="#三、ORDER-BY-排序方向错误影响结果" class="headerlink" title="三、ORDER BY 排序方向错误影响结果"></a>三、<code>ORDER BY</code> 排序方向错误影响结果</h2><h3 id="错误表现：-1"><a href="#错误表现：-1" class="headerlink" title="错误表现："></a>错误表现：</h3><p><code>PERCENT_RANK()</code>&#x2F;<code>CUME_DIST()</code> 等排名函数的值与预期相反（如最大值的百分比反而大）。</p><h3 id="错误原因：-1"><a href="#错误原因：-1" class="headerlink" title="错误原因："></a>错误原因：</h3><p>排序方向与分析目标不符。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想让销售额越高，PERCENT_RANK() 越小，却用了升序</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, sales,</span><br><span class="line">  <span class="built_in">PERCENT_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">ASC</span>) <span class="keyword">AS</span> pct_rnk  <span class="comment">-- 升序导致最大值的百分比为1</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-1"><a href="#解决方案：-1" class="headerlink" title="解决方案："></a>解决方案：</h3><p>根据业务目标选择排序方向（通常分析 “头部数据” 用 <code>DESC</code>）：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, sales,</span><br><span class="line">  <span class="built_in">PERCENT_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">DESC</span>) <span class="keyword">AS</span> pct_rnk  <span class="comment">-- 降序让最大值的百分比为0</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="四、RANK-与-DENSE-RANK-混淆导致排名错误"><a href="#四、RANK-与-DENSE-RANK-混淆导致排名错误" class="headerlink" title="四、RANK() 与 DENSE_RANK() 混淆导致排名错误"></a>四、<code>RANK()</code> 与 <code>DENSE_RANK()</code> 混淆导致排名错误</h2><h3 id="错误表现：-2"><a href="#错误表现：-2" class="headerlink" title="错误表现："></a>错误表现：</h3><p>需要连续排名时用了 <code>RANK()</code>（出现跳号），或需要保留名次空位时用了 <code>DENSE_RANK()</code>（连续编号）。</p><h3 id="错误示例："><a href="#错误示例：" class="headerlink" title="错误示例："></a>错误示例：</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 若想统计“第2名”包含并列情况但不跳号，却用了 RANK()</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  sales,</span><br><span class="line">  <span class="built_in">RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">DESC</span>) <span class="keyword">AS</span> rnk  <span class="comment">-- 若前2名并列，下一名会是3（跳号）</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-2"><a href="#解决方案：-2" class="headerlink" title="解决方案："></a>解决方案：</h3><ul><li>需跳号（如比赛排名，允许第 1 名并列后直接第 3 名）→ 用 <code>RANK()</code></li><li>需连续（如筛选前 3 名，包含并列且不跳号）→ 用 <code>DENSE_RANK()</code></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  sales,</span><br><span class="line">  <span class="built_in">DENSE_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales <span class="keyword">DESC</span>) <span class="keyword">AS</span> dense_rnk  <span class="comment">-- 并列第1后，下一名是2（不跳号）</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="五、窗口聚合函数的-“累计”-与-“全量”-混淆"><a href="#五、窗口聚合函数的-“累计”-与-“全量”-混淆" class="headerlink" title="五、窗口聚合函数的 “累计” 与 “全量” 混淆"></a>五、窗口聚合函数的 “累计” 与 “全量” 混淆</h2><h3 id="错误表现：-3"><a href="#错误表现：-3" class="headerlink" title="错误表现："></a>错误表现：</h3><p>使用 <code>SUM()</code>&#x2F;<code>AVG()</code> 时，希望得到全分区的总量，却返回了累计值。</p><h3 id="错误原因：-2"><a href="#错误原因：-2" class="headerlink" title="错误原因："></a>错误原因：</h3><p><code>ORDER BY</code> 会触发 “累计计算”（从第一行到当前行），省略 <code>ORDER BY</code> 则返回全分区聚合结果。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：想获取店铺总销售额，却因加了 ORDER BY 变成累计值</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> total_sales  <span class="comment">-- 累计值，非总量</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-3"><a href="#解决方案：-3" class="headerlink" title="解决方案："></a>解决方案：</h3><ul><li>需累计值 → 保留 <code>ORDER BY</code>（默认从第一行到当前行）</li><li>需全分区总量 → 省略 <code>ORDER BY</code></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  <span class="built_in">SUM</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop) <span class="keyword">AS</span> total_sales  <span class="comment">-- 正确返回店铺总销售额</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="六、LAG-LEAD-越界处理缺失"><a href="#六、LAG-LEAD-越界处理缺失" class="headerlink" title="六、LAG()&#x2F;LEAD() 越界处理缺失"></a>六、<code>LAG()</code>&#x2F;<code>LEAD()</code> 越界处理缺失</h2><h3 id="错误表现：-4"><a href="#错误表现：-4" class="headerlink" title="错误表现："></a>错误表现：</h3><p>第一行用 <code>LAG()</code> 或最后一行用 <code>LEAD()</code> 时，返回 <code>NULL</code> 导致后续计算错误。</p><h3 id="错误原因：-3"><a href="#错误原因：-3" class="headerlink" title="错误原因："></a>错误原因：</h3><p>未指定越界时的默认值，函数默认返回 <code>NULL</code>。例如：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 错误示例：第一行的 LAG() 返回 NULL，可能导致计算失败</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  sales <span class="operator">-</span> <span class="built_in">LAG</span>(sales) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> diff  <span class="comment">-- 第一行 diff 为 NULL</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="解决方案：-4"><a href="#解决方案：-4" class="headerlink" title="解决方案："></a>解决方案：</h3><p>显式指定 <code>default</code> 参数（如 0 或其他合理值）：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  shop, <span class="type">date</span>, sales,</span><br><span class="line">  sales <span class="operator">-</span> <span class="built_in">LAG</span>(sales, <span class="number">1</span>, <span class="number">0</span>) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> shop <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="type">date</span>) <span class="keyword">AS</span> diff  <span class="comment">-- 越界返回0</span></span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="七、NTILE-n-数据分配不均时的误解"><a href="#七、NTILE-n-数据分配不均时的误解" class="headerlink" title="七、NTILE(n) 数据分配不均时的误解"></a>七、<code>NTILE(n)</code> 数据分配不均时的误解</h2><h3 id="错误表现：-5"><a href="#错误表现：-5" class="headerlink" title="错误表现："></a>错误表现：</h3><p>期望 <code>NTILE(n)</code> 严格均分数据，实际某些桶的行数多 1（如 7 行数据分 3 桶，结果为 3、2、2）。</p><h3 id="错误原因：-4"><a href="#错误原因：-4" class="headerlink" title="错误原因："></a>错误原因：</h3><p><code>NTILE(n)</code> 会优先向前几个桶分配多余的行（总行数不能被 n 整除时），保证分配尽可能均匀而非绝对均分。</p><h3 id="解决方案：-5"><a href="#解决方案：-5" class="headerlink" title="解决方案："></a>解决方案：</h3><ul><li>接受合理偏差（函数设计如此）</li><li>若需严格均分，可先过滤数据使总行数为 n 的倍数，或自定义逻辑：</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 替代方案：用 ROW_NUMBER() 手动分配，确保前m个桶多1行</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  <span class="operator">*</span>,</span><br><span class="line">  (<span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sales) <span class="operator">-</span> <span class="number">1</span>) <span class="operator">%</span> <span class="number">3</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">AS</span> custom_ntile</span><br><span class="line"><span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h2 id="避坑总结：3-个核心检查点"><a href="#避坑总结：3-个核心检查点" class="headerlink" title="避坑总结：3 个核心检查点"></a>避坑总结：3 个核心检查点</h2><ol><li><strong>框架范围</strong>：<code>LAST_VALUE()</code> 必须显式指定全分区框架，其他函数注意默认框架是否符合需求。</li><li><strong>分区与排序</strong>：是否遗漏 <code>PARTITION BY</code>（导致全局计算），<code>ORDER BY</code> 方向是否与业务目标一致。</li><li><strong>边界处理</strong>：<code>LAG()</code>&#x2F;<code>LEAD()</code> 显式指定默认值，<code>RANK()</code> 与 <code>DENSE_RANK()</code> 根据排名规则选择。</li></ol>]]></content>
      
      
      <categories>
          
          <category> 技术速查 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown常用</title>
      <link href="/2025/04/12/Markdown%E5%B8%B8%E7%94%A8/"/>
      <url>/2025/04/12/Markdown%E5%B8%B8%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Markdown中使用表格</p><p>Markdown中使用表格</p><p>博客文章 Front-matter的Markdown使用</p><p>如果有文章（例如：转载文章）不需要显示版权，可以在文章 Front-matter 单独设置</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">copyright:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>从Butterfly3.0.0开始，支持对单独文章设置版权信息，可以在文章 Front-matter 单独设置</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">copyright<span class="emphasis">_author: xxxx</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href: https://xxxxxx.com</span></span><br><span class="line"><span class="emphasis">copyright_</span>url: https://xxxxxx.com</span><br><span class="line">copyright<span class="emphasis">_info: 此文章版权归 xxxxx 所有，如有转载，请注明来自原作者</span></span><br></pre></td></tr></table></figure><h2 id="Markdown中使用Mermaid画图"><a href="#Markdown中使用Mermaid画图" class="headerlink" title="Markdown中使用Mermaid画图"></a>Markdown中使用Mermaid画图</h2><p>可以绘制流程图、序列图、饼图、甘特图和类图等图形。</p><h3 id="Mermaid代码的语法"><a href="#Mermaid代码的语法" class="headerlink" title="Mermaid代码的语法"></a><strong>Mermaid代码的语法</strong></h3><p>Mermaid代码通常放在一个代码块中，代码块的语法如下：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="code">```mermaid</span></span><br><span class="line"><span class="code">[Mermaid代码]</span></span><br><span class="line"><span class="code">```</span></span><br></pre></td></tr></table></figure><p>使用方法：在 Markdown 中，敲击三个后写下mermaid回车即可。</p><p>展示如下图：</p><p><img src="/./../Markdown%E5%B8%B8%E7%94%A8/image-20250904101750820.png" alt="展示图"></p><h3 id="流程图graph"><a href="#流程图graph" class="headerlink" title="流程图graph"></a>流程图graph</h3><p>流程图用于展示流程步骤和关系，支持多种布局方向。</p><p><strong>语法说明</strong>：</p><ul><li><code>graph [方向]</code>：定义图表方向（<code>LR</code> 左右，<code>TB</code> 上下，<code>RL</code> 右左，<code>BT</code> 下上）</li><li>节点表示：<code>id[文本]</code>（默认矩形）、<code>id(文本)</code>（圆角矩形）、<code>id&#123;文本&#125;</code>（菱形）、<code>id((文本))</code>（圆形）等</li><li>连接线：<code>--&gt;</code>（实线箭头）、<code>---</code>（实线无箭头）、<code>-.-&gt;</code>（虚线箭头）等，可添加标签（<code>--&gt;|标签|</code>）</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">graph TD    A[开始] --&gt; B&#123;是或否&#125;    B --&gt;|是| C[执行任务]    B --&gt;|否| D[结束]    C --&gt; D</code></pre><pre><code class="highlight mermaid">graph LR    产品[产品]    产品 --&gt;|m| 构成&#123;构成&#125;    构成 --&gt;|n| 零件[零件]    零件 --&gt;|n| 存储&#123;存储&#125;    零件 --&gt;|n| 消耗&#123;消耗&#125; --&gt;|m| 材料    存储 --&gt;|1| 仓库[仓库]        产品号((产品号)) --- 产品    产品名((产品名)) --- 产品    预算((预算)) --- 产品    零件数((零件数)) --- 构成    零件号((零件号)) --- 零件    零件名((零件名)) --- 零件    存储量((存储量)) --- 存储    仓库 --- 仓库号((仓库号))    仓库 --- 面积((面积))    仓库 --- 库管员((库管员))    消耗 --- 存储量    材料 --- 材料号((材料号))    材料 --- 材料名((材料名))    材料 --- 单位((单位))    材料 --- 单价((单价))</code></pre><h3 id="流程图进阶"><a href="#流程图进阶" class="headerlink" title="流程图进阶"></a>流程图进阶</h3><p><strong>参数说明：</strong></p><ul><li><code>fill</code>        背景色</li><li><code>stroke</code>      边框色</li><li><code>stroke-width</code> 边框粗细</li><li><code>color</code>       文字颜色</li><li><code>opacity</code>     透明度 0–1</li><li><code>rx/ry</code>       圆角半径</li></ul><p><strong>示例：</strong></p><pre><code class="highlight mermaid">graph TD    A[开始] --&gt; B&#123;是或否&#125;    B --&gt;|是| C[执行任务]    B --&gt;|否| D[结束]    C --&gt; D%% 直接给节点填色、描边、改字色style A fill:#d73027,stroke:#333,stroke-width:2px,color:#fffstyle B fill:#fc8d59,stroke:#333,stroke-width:2pxstyle C fill:#fee08b,stroke:#333,stroke-width:2pxstyle D fill:#91bfdb,stroke:#333,stroke-width:2px</code></pre><h3 id="序列图sequenceDiagram"><a href="#序列图sequenceDiagram" class="headerlink" title="序列图sequenceDiagram"></a>序列图sequenceDiagram</h3><p>展示对象之间的交互时序，常用于系统交互流程。</p><p><strong>语法说明</strong>：</p><ul><li><code>participant 参与者</code>：定义参与对象</li><li>消息传递：<code>A-&gt;B: 消息内容</code>（实线箭头）、<code>A--&gt;B: 消息内容</code>（虚线箭头，如返回）</li><li>激活状态：<code>activate A</code>（激活对象，显示生命线）、<code>deactivate A</code>（取消激活）</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">sequenceDiagram    participant A    participant B    A-&gt;&gt;B: 发送消息    B-&gt;&gt;A: 回复消息</code></pre><h3 id="饼图Pie"><a href="#饼图Pie" class="headerlink" title="饼图Pie"></a>饼图Pie</h3><p>展示数据占比关系。</p><p><strong>语法说明</strong>：</p><ul><li><code>pie</code> 开头</li><li><code>title 标题</code></li><li><code>标签: 数值</code> 定义各部分</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">pie    title 网站用户来源    &quot;直接访问&quot; : 30    &quot;搜索引擎&quot; : 50    &quot;外部链接&quot; : 15    &quot;其他&quot; : 5</code></pre><h3 id="甘特图gantt"><a href="#甘特图gantt" class="headerlink" title="甘特图gantt"></a>甘特图gantt</h3><p>用于项目进度规划，展示任务时间安排。</p><p><strong>语法说明</strong>：</p><ul><li><code>dateFormat</code>：日期格式（如 <code>YYYY-MM-DD</code>）</li><li><code>section 模块名</code>：分组任务</li><li>任务格式：<code>任务名 : 状态, 任务ID, 开始日期, 结束日期</code>（状态可选 <code>done</code>&#x2F;<code>active</code> 等）</li></ul><p><strong>示例</strong>：</p><pre><code class="highlight mermaid">gantt    dateFormat  YYYY-MM-DD    section 现有任务    已完成任务           :done,    des1, 2025-01-06,2025-01-08    进行中任务           :active,  des2, 2025-01-09, 3d    待办任务             :         des3, after des2, 5d    section 新增任务    新任务1              :         des4, after des3, 5d    新任务2              :         des5, after des4, 5d</code></pre><h3 id="思维导图mindmap"><a href="#思维导图mindmap" class="headerlink" title="思维导图mindmap"></a>思维导图mindmap</h3><p><strong>语法说明</strong>：</p><ul><li>根节点（中心主题）用 <code>root((内容))</code> 定义（<code>(( ))</code> 是固定格式，确保居中显示）</li><li>分支层级通过<strong>空格缩进</strong>区分（建议用 2-4 个空格，同一层级缩进一致）：<ul><li>无缩进：一级分支（直接从根节点延伸）</li><li>缩进 2-4 空格：二级分支（从一级分支延伸）</li><li>缩进更多：三级、四级分支（以此类推）</li><li>不支持 Tab 键，建议用 2-4 个空格统一缩进，否则会导致层级混乱</li><li>分支层级建议不超过 4 级</li></ul></li></ul><pre><code class="highlight mermaid">mindmap  root((技能check list))    硬性      编程技能: SQL、Python/R、Excel      统计学知识        假设检验: 参数检验、非参数检验、置信区间        数据分布、相关性、贝叶斯等        大数定律、中心极限定理等      建模知识        数据处理方法: 连续/离散数据、样本不平衡        聚类: K-means、DBSCAN等        回归        分类        时间序列分析: AMAR、ARIMA、prophet等        transformer、bert      因果推断        辛普森悖论        ATE、ATT、CATE、HTE        IV、DID、PSM、RDD、DRL、DML、Uplift Model、Casual forest等      数据解读&amp;本质提炼      报告撰写&amp;数据展示    业务      常见方法: 维度下钻分析、归因分析、路径分析、触点分析、用户画像分析; 其他（RFM、生命周期等）      业务分析问题        指标体系搭建        实验分析        问题归因        专项分析: 机会点、价值论证      业务理解    软性      商业sense      听信息      拆解信息      汇报信息      抗压能力      时间管理</code></pre><h3 id="思维导图实现2"><a href="#思维导图实现2" class="headerlink" title="思维导图实现2"></a>思维导图实现2</h3><p><code>graph LR</code>（左右布局）+ 分支分组</p><pre><code class="highlight mermaid">graph LR    %% 根节点（居中，作为核心）    Root[&quot;🎯 技能check list&quot;]        %% 左侧分支：硬性技能（向左展开，层级清晰）    Root --&gt; Hard[&quot;🔧 硬性技能&quot;]    Hard --&gt; Code[&quot;编程技能&quot;]    Code --&gt; code[SQL、Python/R、Excel]        Hard --&gt; Stat[&quot;统计学知识&quot;]    Stat --&gt;|1| Test[假设检验]    Test --&gt; Param[参数检验]    Test --&gt; NonParam[非参数检验]    Test --&gt; CI[置信区间]    Stat --&gt;|2| Dist[数据分布、相关性、贝叶斯等]    Stat --&gt;|3| Law[大数定律、中心极限定理等]        Hard --&gt; Model[&quot;建模知识&quot;]    Model --&gt;|1| Process[数据处理方法]    Process --&gt; Cont[连续/离散数据]    Process --&gt; Imb[样本不平衡]    Model --&gt; Cluster[聚类]    Model --&gt; Reg[回归]    Model --&gt; Class[分类]    Model --&gt; TS[时间序列分析]    Cluster --&gt; cluster[K-means、DBSCAN等]    TS --&gt; ARIMA[AMAR、ARIMA、Prophet等]    TS --&gt; Trans[Transformer、BERT]        Hard --&gt; Causal[&quot;因果推断&quot;]    Causal --&gt; Simp[辛普森悖论]    Causal --&gt; Metric[ATE、ATT、CATE、HTE]    Causal --&gt; Method[先掌握：IV、DID、PSM、RDD]    Method --&gt; method[DRL、DML、Uplift Model、Casual forest等]        Hard --&gt; Ana[数据解读&amp;提炼]    Hard --&gt; Rep[报告撰写&amp;展示]        %% 右侧分支1：业务技能（向右展开）    Root --&gt; Bus[&quot;💼 业务技能&quot;]    Bus --&gt; Meth[&quot;常见分析方法&quot;]    Meth --&gt; Drill[维度下钻分析]    Meth --&gt; Reason[归因分析]    Meth --&gt; Path[路径分析]    Meth --&gt; Touch[触点分析]    Meth --&gt; Portrait[用户画像分析]    Meth --&gt; MethOthers[还有一些别的：RFM、生命周期等]        Bus --&gt; Prob[&quot;业务分析问题&quot;]    Prob --&gt; Ind[指标体系搭建]    Prob --&gt; Exp[实验分析]    Prob --&gt; Attr[问题归因]    Prob --&gt; Spec[专项分析]    Spec --&gt; spec[机会点、价值论证]        Bus --&gt; Under[业务理解]        %% 右侧分支2：软性技能（与业务技能并列，更舒展）    Root --&gt; Soft[&quot;🌟 软性技能&quot;]    Soft --&gt; Sense[商业sense]    Soft --&gt; Listen[信息倾听]    Soft --&gt; Split[信息拆解]    Soft --&gt; ReportExp[汇报表达]    Soft --&gt; Stress[抗压能力]    Soft --&gt; Time[时间管理]        %% 样式优化：颜色+边框，区分度拉满    classDef rootColor fill:#fff3e0,stroke:#ff9800,stroke-width:2px,font-weight:bold    classDef hardColor fill:#e8f5e8,stroke:#4caf50,stroke-width:1px    classDef busColor fill:#e3f2fd,stroke:#2196f3,stroke-width:1px    classDef softColor fill:#fce4ec,stroke:#e91e63,stroke-width:1px        class Root rootColor    class Hard,Code,code,Stat,Test,Param,NonParam,CI,Dist,Law,Model,Process,Cont,Imb,Cluster,cluster,Reg,Class,TS,ARIMA,Trans,Causal,Simp,Metric,Method,method,Ana,Rep hardColor    class Bus,Meth,Drill,Reason,Path,Touch,Portrait,MethOthers,Prob,Ind,Exp,Attr,Spec,spec,Under busColor    class Soft,Sense,Listen,Split,ReportExp,Stress,Time softColor</code></pre><h1 id="使用-Markdown-编写文档用什么软件"><a href="#使用-Markdown-编写文档用什么软件" class="headerlink" title="使用 Markdown 编写文档用什么软件"></a>使用 Markdown 编写文档用什么软件</h1><ol><li><p>Typora<br> 核心优势：所见即所得（WYSIWYG）界面，实时渲染 Markdown 语法，支持表格、代码块、数学公式（LaTeX）、任务列表等。<br> 导出能力：直接导出为 PDF、HTML、Word、ePub 等格式，适合生成报告或电子书。<br> 价格：买断制 89 元人民币，支持 Windows&#x2F;macOS&#x2F;Linux。<br> 适用场景：个人写作、技术文档、学术论文。</p></li><li><p>VS Code + 插件<br> 核心优势：代码编辑器的强大扩展性，通过插件支持 Markdown 语法高亮、实时预览、TOC 生成。<br> 插件：<br> Markdown All in One：快捷键和格式转换工具。<br> Markdown PDF：一键导出 PDF（需安装 LaTeX 环境）。<br> 适用场景：开发者、技术文档撰写者。<br> 缺点：不能通过剪切板粘图，需要手动上传图片。这是我特别常用的一个功能，所以需要一个更好的软件。</p></li><li><p>MarkText<br> 核心优势：开源免费，支持实时预览、多主题切换（如 Material Dark）、三种编辑模式（源码 &#x2F; 打字机 &#x2F; 专注）。<br> 特色功能：直接粘贴图片到文档，支持数学公式（KaTeX）和 Mermaid 图表。<br> 导出能力：导出 HTML 和 PDF，适合轻量级文档。<br> 适用场景：学生、自由职业者、开源项目贡献者。<br> 缺点：现在好像没人维护了，最新版本还是v0.17.1。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> Typora </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github常用</title>
      <link href="/2025/04/11/Github%E5%B8%B8%E7%94%A8/"/>
      <url>/2025/04/11/Github%E5%B8%B8%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<hr><h1 id="Git命令"><a href="#Git命令" class="headerlink" title="Git命令"></a>Git命令</h1><h2 id="专业名词（黑话）"><a href="#专业名词（黑话）" class="headerlink" title="专业名词（黑话）"></a>专业名词（黑话）</h2><ol><li><p><strong>Git 工作流</strong></p><pre><code class="highlight mermaid">graph LR    A[关联工作区] -- git add --&gt; B[暂存区]    B -- git commit --&gt; C[本地仓库]    C -- git push --&gt; E[远程仓库]</code></pre></li><li><p><strong>工作区文件</strong>：本地文件夹的文件。<br>在 Git 版本控制中，<strong>工作区文件</strong>指的是你在本地电脑上直接编辑、修改的项目文件，也就是你能在操作系统的文件夹里看到的那些文件（比如文档、代码、图片等）。</p><p>简单说，工作区（Working Directory）就是你克隆或创建项目后，在本地电脑上存放项目文件的那个文件夹，而这个文件夹里的所有文件（包括子文件夹里的文件）都可以称为 “工作区文件”。</p></li><li><p><strong>暂存区：</strong><br>在 Git 版本控制中，<strong>暂存区（Staging Area）</strong> 是一个介于「工作区」和「本地仓库」之间的临时存储区域，也被称为「索引（Index）」。它的核心作用是：<strong>临时存放你想要提交到本地仓库的修改</strong>，让你可以先 “预览” 哪些修改会被纳入下一次提交，再统一提交到仓库</p><p><strong>为什么需要暂存区？</strong></p><p>想象一个场景：你同时修改了项目中的 3 个文件（A、B、C），但其中只有 A 和 B 的修改是完整的，C 的修改还没完成。这时候你想先提交 A 和 B 的修改，而暂时忽略 C—— 暂存区就是用来解决这个问题的：你可以先把 A 和 B 放入暂存区，然后只提交暂存区的内容，C 仍然留在工作区继续修改。</p></li><li><p><strong>工作区文件的状态：</strong></p><ol><li><strong>未跟踪（Untracked）</strong>：新创建的文件，还没被 Git 记录（Git 不知道它的存在）；</li><li>已跟踪（Tracked）：已被 Git 记录的文件，包括：<ul><li>未修改（Unmodified）：和 Git 最后一次记录的版本一致；</li><li>已修改（Modified）：被编辑过，但还没存入暂存区；</li><li>已暂存（Staged）：修改后被添加到暂存区（通过 <code>git add</code> 命令），等待提交到本地仓库。</li></ul></li></ol></li><li><p>**子模块：**嵌套仓库<br>在 Git 中，<strong>子模块（Submodule）</strong> 是一种特殊功能，用于在一个 Git 仓库（称为 “主项目”）中嵌入另一个独立的 Git 仓库（称为 “子模块项目”），同时保持两个仓库的独立性。</p></li><li><p>done</p></li></ol><h2 id="Git-版本控制工具中常用的命令"><a href="#Git-版本控制工具中常用的命令" class="headerlink" title="Git 版本控制工具中常用的命令"></a>Git 版本控制工具中常用的命令</h2><h3 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a><code>git clone</code></h3><p>：“下载” 远程项目到本地；</p><p><strong>作用</strong>：从远程仓库（比如 GitHub、GitLab 等）复制一个完整的项目到本地电脑。<br>它会将远程仓库的所有文件、分支、提交历史等完整下载到本地，并自动创建一个与远程仓库同名的文件夹，同时初始化本地 Git 仓库，关联到远程仓库。</p><p><strong>示例</strong>：</p><p>克隆远程仓库到当前目录（生成与仓库同名的文件夹）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 示例：克隆 GitHub 上的仓库</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/Kkkika/Kkkika.github.io.git</span><br></pre></td></tr></table></figure><ul><li><p><strong>自定义文件夹名称</strong>（不使用仓库默认名称）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;远程仓库地址&gt; &lt;本地目录名&gt;</span><br><span class="line"><span class="comment"># 示例：克隆到名为 &quot;my-project&quot; 的文件夹</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/Kkkika/Kkkika.github.io.git my-project</span><br></pre></td></tr></table></figure></li><li><p><strong>只克隆指定分支</strong>（默认克隆所有分支，此参数可节省时间）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b &lt;分支名&gt; --single-branch &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 示例：只克隆远程的 dev 分支</span></span><br><span class="line">git <span class="built_in">clone</span> -b dev --single-branch https://github.com/username/repo-name.git</span><br></pre></td></tr></table></figure></li><li><p><strong>浅克隆</strong>（只获取最近的 N 次提交，适合大型仓库，加快克隆速度）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth &lt;次数&gt; &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 示例：只获取最近 10 次提交</span></span><br><span class="line">git <span class="built_in">clone</span> --depth 10 https://github.com/username/repo-name.git</span><br></pre></td></tr></table></figure></li><li><p><strong>克隆时包含子模块</strong>（如果项目包含子模块，需用此参数才能完整克隆）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive &lt;远程仓库地址&gt;</span><br><span class="line"><span class="comment"># 若已克隆但子模块未下载，可补拉：git submodule update --init --recursive</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a><code>git branch</code></h3><p>：“管理” 本地分支（查看、创建、删除）；</p><p><strong>作用</strong>：用于管理本地分支（分支可以理解为项目的 “并行开发线”，方便多人协作或功能隔离）。</p><p>常用用法：</p><h4 id="1-查看分支"><a href="#1-查看分支" class="headerlink" title="1. 查看分支"></a>1. 查看分支</h4><ul><li><p>不带参数：查看本地所有分支（当前分支前有 <code>*</code> 标记）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure></li><li><p>查看本地 + 远程所有分支（远程分支以 <code>remotes/origin/</code> 开头）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure></li><li><p>查看远程分支（仅远程，不包含本地）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -r</span><br></pre></td></tr></table></figure></li><li><p>查看分支关联的远程分支（多人协作时常用，确认本地分支对应哪个远程分支）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -vv</span><br><span class="line"><span class="comment"># 输出示例：* main  a1b2c3d [origin/main] 提交说明</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="2-创建分支"><a href="#2-创建分支" class="headerlink" title="2. 创建分支"></a>2. 创建分支</h4><ul><li><p>基于当前分支创建新分支（创建后仍在当前分支，需手动切换）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch &lt;新分支名&gt;</span><br><span class="line"><span class="comment"># 示例：基于当前分支创建 feature/payment 分支</span></span><br><span class="line">git branch feature/payment</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-删除分支"><a href="#3-删除分支" class="headerlink" title="3. 删除分支"></a>3. 删除分支</h4><ul><li><p>删除本地分支（需确保分支已合并，否则会提示错误）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -d &lt;分支名&gt;</span><br><span class="line"><span class="comment"># 示例：删除已合并的 old-branch</span></span><br><span class="line">git branch -d old-branch</span><br></pre></td></tr></table></figure></li><li><p>强制删除未合并的分支（危险！未合并的修改会丢失）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -D &lt;分支名&gt;</span><br><span class="line"><span class="comment"># 示例：强制删除未合并的 test-branch</span></span><br><span class="line">git branch -D test-branch</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-重命名分支"><a href="#4-重命名分支" class="headerlink" title="4. 重命名分支"></a>4. 重命名分支</h4><ul><li><p>重命名当前所在分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -m &lt;新分支名&gt;</span><br><span class="line"><span class="comment"># 示例：将当前分支重命名为 bugfix/login</span></span><br><span class="line">git branch -m bugfix/login</span><br></pre></td></tr></table></figure></li><li><p>重命名指定分支（无需切换到该分支）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -m &lt;旧分支名&gt; &lt;新分支名&gt;</span><br><span class="line"><span class="comment"># 示例：将 feature/old 重命名为 feature/new</span></span><br><span class="line">git branch -m feature/old feature/new</span><br></pre></td></tr></table></figure></li><li><p>带分支名：创建新分支（但不会自动切换到新分支）。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch feature-login  <span class="comment"># 创建名为 feature-login 的新分支</span></span><br></pre></td></tr></table></figure></li><li><p><code>-d</code> 参数：删除指定分支（删除前需确保该分支的修改已合并，否则用 <code>-D</code> 强制删除）。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -d old-branch  <span class="comment"># 删除 old-branch 分支</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a><code>git checkout</code></h3><p>：“切换” 分支或 “恢复” 文件。</p><p><strong>作用</strong>：主要用于 “切换分支” 或 “恢复工作区文件”（Git 2.23+ 后推荐用 <code>git switch</code> 切换分支，功能更清晰，但 <code>checkout</code> 仍广泛使用）。</p><p>常用用法：</p><ul><li><p>切换到已存在的分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout dev  <span class="comment"># 切换到 dev 分支</span></span><br></pre></td></tr></table></figure></li><li><p>创建并立即切换到新分支（相当于 <code>git branch 新分支名</code> + <code>git checkout 新分支名</code> 的简写）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b dev  <span class="comment"># 创建并切换到 dev 分支</span></span><br></pre></td></tr></table></figure></li><li><p>恢复工作区的某个文件到最近一次提交的状态（丢弃本地修改）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -- README.md  <span class="comment"># 把 README.md 恢复到最近提交的版本</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="GitHub中clone指定Commits"><a href="#GitHub中clone指定Commits" class="headerlink" title="GitHub中clone指定Commits"></a>GitHub中clone指定Commits</h1><p>（Github中怎么找回历史版本；GitHub历史版本恢复指南；GitHub中下载指定版本；Github查看项目的历史版本，并实现版本的回滚）</p><blockquote><p>假设：我想下载<a href="https://github.com/Kkkika/Kkkika.github.io">Kkkika&#x2F;Kkkika.github.io</a>仓库master分支的第一次提交</p></blockquote><p>首先进入仓库后，点击【Commits】<strong>获取历史版本的提交哈希值</strong></p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250912102842935.png" alt="image-20250912102842935"></p><p>时间拉到最前，找到第一次提交，点击【复制】按钮</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250912103044962.png" alt="image-20250912103044962"></p><h3 id="克隆后创建新分支"><a href="#克隆后创建新分支" class="headerlink" title="克隆后创建新分支"></a>克隆后创建新分支</h3><p>如果你想在特定提交的基础上进行一些修改或实验，最好创建一个新分支。</p><p>新建一个文件夹来存放代码，注意路径不要有中文：</p><p>C:\Code\githubclone</p><p>然后打开cmd</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\Code\githubclone</span><br></pre></td></tr></table></figure><ol><li><p><strong>克隆仓库并进入目录</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Kkkika/Kkkika.github.io.git</span><br><span class="line"><span class="built_in">cd</span> Kkkika.github.io</span><br></pre></td></tr></table></figure></li><li><p><strong>基于特定提交创建并切换到一个新分支</strong>：这可以避免“分离头指针”状态。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch my-new-branch cc09550ac7db24e987f6f2130da2ee1564191b12</span><br><span class="line">git checkout my-new-branch</span><br></pre></td></tr></table></figure><p>或者更简洁地用一条命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b my-new-branch cc09550ac7db24e987f6f2130da2ee1564191b12</span><br></pre></td></tr></table></figure><p>这样，你就在一个名为 <code>my-new-branch</code> 的分支上工作，这个分支的起点就是你指定的那个提交。</p></li></ol><h3 id="浅克隆（如果只想快速获取）"><a href="#浅克隆（如果只想快速获取）" class="headerlink" title="浅克隆（如果只想快速获取）"></a>浅克隆（如果只想快速获取）</h3><p>如果你只关心最新的一部分提交，或者仓库很大想加快克隆速度，可以考虑浅克隆。</p><ol><li><p><strong>浅克隆仓库</strong>（例如只克隆最近 10 个提交）：</p><p>bash</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth 10 https://github.com/Kkkika/Kkkika.github.io.git</span><br><span class="line"><span class="built_in">cd</span> Kkkika.github.io</span><br></pre></td></tr></table></figure><p><code>--depth 10</code> 参数表示只克隆最近10次提交的历史。你需要确保你想要的提交（<code>cc09550...</code>）在这最近的10次提交之内。</p></li><li><p><strong>然后切换到你想要的提交</strong>：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout cc09550ac7db24e987f6f2130da2ee1564191b12</span><br></pre></td></tr></table></figure></li></ol><h3 id="重要提示"><a href="#重要提示" class="headerlink" title="重要提示"></a>重要提示</h3><ul><li><strong>关于 <code>-b</code> 参数</strong>：<code>-b</code> 在 <code>git clone</code> 中用于指定分支或标签，不能直接用于提交哈希5。</li><li><strong>“分离头指针”状态</strong>：直接 <code>git checkout &lt;commit-hash&gt;</code> 会进入此状态。在此状态下进行更改并提交后，如果不创建分支指向这些新提交，它们可能会被 Git 的垃圾回收机制清除10。如果计划基于该提交进行修改，请务必创建新分支。</li><li><strong>获取正确的提交哈希</strong>：确保你复制的提交哈希是正确的且存在于远程仓库中。你可以通过 GitHub 网站的提交历史页面来查看和确认提交哈希。</li></ul><h3 id="如何选择方法？"><a href="#如何选择方法？" class="headerlink" title="如何选择方法？"></a>如何选择方法？</h3><p>为了更清晰地选择，可以参考下面的流程：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout</span><br></pre></td></tr></table></figure><pre><code class="highlight mermaid">graph LR    A[需求：克隆特定提交] --&gt; B&#123;完整历史？&#125;    B -- 是 --&gt; C[克隆仓库&lt;br&gt;checkout 提交]    B -- 否 --&gt; D[浅克隆&lt;br&gt;checkout 提交]    C --&gt; E&#123;需修改？&#125;    D --&gt; F&#123;需修改？&#125;    E -- 是 --&gt; G[创建分支]    E -- 否 --&gt; H[分离头指针]    F -- 是 --&gt; G    F -- 否 --&gt; H</code></pre><h3 id="可能遇到的问题"><a href="#可能遇到的问题" class="headerlink" title="可能遇到的问题"></a>可能遇到的问题</h3><ol><li>网络问题<ol><li><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250919152150671.png" alt="image-20250919152150671"></li><li>关闭梯子</li><li>打开加速器</li></ol></li><li></li></ol><h1 id="Gitee"><a href="#Gitee" class="headerlink" title="Gitee"></a>Gitee</h1><h3 id="新建仓库"><a href="#新建仓库" class="headerlink" title="新建仓库"></a>新建仓库</h3><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909092345765.png" alt="示例"></p><p>上传到仓库的文件夹需要命名为blog：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909092433077.png" alt="上传到仓库的文件夹"></p><h3 id="git推送"><a href="#git推送" class="headerlink" title="git推送"></a>git推送</h3><p>将本地内容首次推送到空的 Git 远程仓库，需按顺序执行以下命令流程。以下是完整操作步骤及注意事项：</p><ol><li><p><strong>初始化本地仓库</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><ul><li>在项目根目录执行，生成隐藏的.git文件夹</li></ul></li><li><p><strong>添加文件并提交</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .              <span class="comment"># 添加所有文件到暂存区</span></span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span>  <span class="comment"># 提交到本地仓库</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span></span><br></pre></td></tr></table></figure><ul><li>必须至少有一次提交，否则推送会失败（Git 不允许推送空分支）。</li></ul></li><li><p><strong>关联远程仓库</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote add origin &lt;远程仓库URL&gt;</span><br></pre></td></tr></table></figure><ul><li><p>验证关联：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p> 查看 URL 是否正确。</p></li></ul></li><li><p><strong>首次推送并设置上游分支</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><ul><li><p>分支名为 master</p></li><li><p>-u（或–set-upstream）参数：</p><ul><li><p>建立本地分支与远程分支的追踪关系。</p></li><li><p>后续推送只需</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;写上描述&quot;</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p> 无需指定分支。</p></li></ul></li></ul></li></ol><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>在任何IDE的终端或者cmd中运行命令行都可以</p><p>在Cursor中打开终端：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909093433821.png" alt="在Cursor中打开终端"></p><p>确保路径最后的文件夹和仓库同名：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909093610035.png" alt="仓库名是blog文件夹名是blog"></p><p>所有用到的命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span></span><br><span class="line">git remote add origin https://gitee.com/kika00/blog.git</span><br><span class="line">git remote -v</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><p>成功推送：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250909102559411.png" alt="成功推送"></p><p>后续推送用到的三个命令：</p><p><img src="/./../Github%E5%B8%B8%E7%94%A8/image-20250910091241450.png" alt="改完 → git add -A → git commit -m &quot;说人话&quot; → git push"></p>]]></content>
      
      
      <categories>
          
          <category> 常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> Gitee </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pic</title>
      <link href="/2025/04/11/pic/"/>
      <url>/2025/04/11/pic/</url>
      
        <content type="html"><![CDATA[<p>文章路径：C:\Code\KikaBlog\blog\source_posts</p><p>（疑问：为什么source和_posts之间的斜杠显示的时候会被隐藏？）</p><h2 id="1-【-】"><a href="#1-【-】" class="headerlink" title="1 【.&#x2F;】"></a>1 【.&#x2F;】</h2><p>【typora可 博客不可】</p><p>实际路径在C:\Code\KikaBlog\blog\source_posts</p><p><img src="/./test1.png" alt=".&#x2F;test1.png"></p><p>但是如果我复制图片到C:\Code\KikaBlog\blog\source的时候，博客上就可以正常显示，而图片路径还是.&#x2F;</p><p><img src="/./../pic/test1-2.png" alt=".&#x2F;..&#x2F;pic&#x2F;test1-2.png"></p><p>也就是说把图片放在C:\Code\KikaBlog\blog\source上用路径.&#x2F;和.&#x2F;..&#x2F;是等价的；还有就是_posts文件夹是进不去的，这个文件夹只能放.md</p><h2 id="2【-】"><a href="#2【-】" class="headerlink" title="2【.&#x2F;..&#x2F;】"></a>2【.&#x2F;..&#x2F;】</h2><p>【都可！typora可 博客可】</p><p>实际路径在C:\Code\KikaBlog\blog\source</p><p><img src="/./../test2.png" alt=".&#x2F;..&#x2F;test2.png"></p><p>缺点：图片文件挤在同一个文件夹，不方便管理</p><h2 id="3【-filename-】"><a href="#3【-filename-】" class="headerlink" title="3【.&#x2F;${filename}】"></a>3【.&#x2F;${filename}】</h2><p>【typora可 博客不可】</p><p>实际路径在C:\Code\KikaBlog\blog\source_posts\pic</p><p><img src="/./pic/test3.png" alt=".&#x2F;pic&#x2F;test3.png"></p><p>为什么不行？这样管理分类最有秩序了，在_posts中搜索文章名，还可以直接搜到文章存放图片的文件夹。啊啊啊啊</p><h2 id="4【-filename-】"><a href="#4【-filename-】" class="headerlink" title="4【.&#x2F;..&#x2F;${filename}】"></a>4【.&#x2F;..&#x2F;${filename}】</h2><p>【都可！typora可 博客可】</p><p>实际路径在C:\Code\KikaBlog\blog\source\pic</p><p><img src="/./../pic/test4.png" alt=".&#x2F;..&#x2F;pic&#x2F;test4.png"></p><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>第2种和第4种在Typora写文章时可以看到图片，并且GitHub搭建的博客网站上也能正常显示图片。</p><p>第2种是把图片统一放在博客文件夹下的source里；</p><p>第4种则在source文件夹中创建一个与文章名同名的文件夹存放图片，个人更喜欢第4种存放方式。</p>]]></content>
      
      
      <categories>
          
          <category> blog </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo搭建Butterfly主题记录</title>
      <link href="/2024/09/04/Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
      <url>/2024/09/04/Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h2 id="Hexo常用命令"><a href="#Hexo常用命令" class="headerlink" title="Hexo常用命令"></a>Hexo常用命令</h2><p>生成主题静态文件：</p><p>等价于hexo generate</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><p>启动本地服务：</p><p>等价于hexo server</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在博客根目录下执行以下命令，创建一篇新文章：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">&quot;我的第一篇文章&quot;</span></span><br></pre></td></tr></table></figure><p>部署到GitHub：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>清除缓存</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure><h2 id="美化-常用链接"><a href="#美化-常用链接" class="headerlink" title="美化-常用链接"></a>美化-常用链接</h2><p>图标：</p><p><a href="https://fontawesome.com/v6/icons?o=r#packs">Version 6 Icons | Font Awesome</a></p><p>注意：<em>带pro的是付费版</em></p><h2 id="美化-需要下载插件的"><a href="#美化-需要下载插件的" class="headerlink" title="美化-需要下载插件的"></a>美化-需要下载插件的</h2><h3 id="本地搜索"><a href="#本地搜索" class="headerlink" title="本地搜索"></a>本地搜索</h3><p>1.安装搜索插件</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>2.配置_config.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#本地搜索开启</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>3.主题配置文件 _config.butterfly.yml：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">input_placeholder:</span> <span class="string">Search</span> <span class="string">for</span> <span class="string">Posts</span></span><br><span class="line">    <span class="attr">hits_empty:</span> <span class="string">&quot;We didn&#x27;t find any results for the search: $&#123;query&#125;&quot;</span> <span class="comment"># 如果没有查到内容相关内容显示</span></span><br></pre></td></tr></table></figure><h3 id="字数统计"><a href="#字数统计" class="headerlink" title="字数统计"></a>字数统计</h3><p>安装插件：在你的博客根目录，打开 cmd 命令窗口执行 npm install hexo-wordcount –save。<br>开启配置：修改主题配置文件_config.butterfly.yml 中的 wordcount。</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">wordcount:</span><br><span class="line">  enable: true</span><br><span class="line">  post<span class="emphasis">_wordcount: true</span></span><br><span class="line"><span class="emphasis">  min2read: true</span></span><br><span class="line"><span class="emphasis">  total_</span>wordcount: true</span><br></pre></td></tr></table></figure><h3 id="统计访问人数-UV-和-PV"><a href="#统计访问人数-UV-和-PV" class="headerlink" title="统计访问人数 (UV 和 PV)"></a>统计访问人数 (UV 和 PV)</h3><p>详细信息请查看 <a href="https://busuanzi.ibruce.info/">busuanzi 官方网站</a>。</p><p>Butterfly很贴心地集成了不蒜子计数工具，可以统计网站的访问数据（人数，次数等）。只需要修改主题配置文件即可开启。</p><p>修改主题配置文件_config.butterfly.yml。</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">busuanzi:</span><br><span class="line">  site<span class="emphasis">_uv: true  # 本站总访客数</span></span><br><span class="line"><span class="emphasis">  site_</span>pv: true  # 本站总访问量 </span><br><span class="line">  page<span class="emphasis">_pv: true  # 本文总阅读量</span></span><br></pre></td></tr></table></figure><h3 id="文章加密"><a href="#文章加密" class="headerlink" title="文章加密"></a>文章加密</h3><p>插件 hexo-blog-encrypt</p><p><strong>安装</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-blog-encrypt</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-blog-encrypt</span><br></pre></td></tr></table></figure><p>网速不好推荐使用</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cnpm install --save hexo-blog-encrypt</span><br></pre></td></tr></table></figure><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250924142228892.png" alt="成功安装了hexo-blog-encrypt插件"></p><p><strong>项目配置</strong></p><p>在hexo的_config.yml文件中添加如下代码：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安全设置</span></span><br><span class="line"><span class="attr">encrypt:</span></span><br><span class="line">  <span class="comment"># 启用插件</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">message:</span> <span class="string">&quot;请输入密码&quot;</span></span><br><span class="line">  <span class="comment"># 错误消息设置</span></span><br><span class="line">  <span class="attr">wrong_pass_message:</span> <span class="string">&quot;密码错误，请重新输入&quot;</span></span><br><span class="line">  <span class="attr">wrong_hash_message:</span> <span class="string">&quot;认证失败，再试一试&quot;</span></span><br><span class="line">  <span class="comment"># 加密算法（默认&quot;aes&quot;，可选&quot;rsa&quot;）</span></span><br><span class="line">  <span class="attr">algorithm:</span> <span class="string">&quot;aes&quot;</span></span><br><span class="line">  <span class="comment"># 记住密码（默认 7 天，单位：天）</span></span><br><span class="line">  <span class="attr">expire:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># 是否禁用日志记录</span></span><br><span class="line">  <span class="attr">silent:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 主题样式可选 default、blink、shrink、flip、up、surge、wave、xray</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">blink</span></span><br></pre></td></tr></table></figure><p>配置项说明：</p><ul><li>enable: 是否启用加密功能，设置为 true 启用。</li><li>message: 密码输入框的描述性文字。</li><li>wrong_pass_message: 密码错误时的提示信息。</li><li>wrong_hash_message: 解密内容无法验证时的提示信息。</li></ul><p>主题配色修改：在C:\Code\KikaBlog\blog\themes\butterfly\source\css\index.styl添加如下代码</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// hexo-blog-encrypt插件主题修改</span></span><br><span class="line"><span class="selector-class">.hbe-input-field-blink</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d89f68</span> <span class="meta">!important</span></span><br><span class="line"><span class="selector-class">.hbe-input-field-blink</span><span class="selector-pseudo">:focus</span></span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#d89f68</span> <span class="meta">!important</span></span><br><span class="line"><span class="selector-class">.hbe-input-label-content-blink</span><span class="selector-pseudo">::after</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#c97d3a</span> <span class="meta">!important</span></span><br><span class="line"><span class="selector-class">.hbe-input-field</span></span><br><span class="line">  <span class="attribute">margin</span> <span class="number">6px</span> <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p><strong>使用</strong></p><p>在需要加密文章的头部添加如下设置：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: ###</span><br><span class="line">date: XXXX-XX-XX XX:XX:XX</span><br><span class="line"><span class="section">password: ”你的密码”</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><h2 id="美化-文章"><a href="#美化-文章" class="headerlink" title="美化-文章"></a>美化-文章</h2><h3 id="写文参数可选"><a href="#写文参数可选" class="headerlink" title="写文参数可选"></a>写文参数可选</h3><blockquote><p>（可为特定的文章配置）在文章md文件的头部设置</p></blockquote><p>主题会优先判断文章 Markdown 的 Front-matter 是否有配置，如有，则以 Front-matter 的配置为准。否则，以主题配置文件中的配置为准。</p><table><thead><tr><th>参数</th><th>解释</th><th>可取</th></tr></thead><tbody><tr><td>copyright</td><td>文章版权模块(默认为设置中 post_copyright 的 enable 配置)</td><td>true &#x2F; false</td></tr><tr><td>copyright_author</td><td>文章版权模块的<code>文章作者</code></td><td></td></tr><tr><td>copyright_author_href</td><td>文章版权模块的<code>文章作者</code>链接</td><td></td></tr><tr><td>copyright_url</td><td>文章版权模块的<code>文章链接</code></td><td></td></tr><tr><td>copyright_info</td><td>文章版权模块的<code>版权声明</code>文字</td><td></td></tr><tr><td>noticeOutdate</td><td>文章过期提醒 (默认为设置中 noticeOutdate 的 enable 配置)</td><td></td></tr><tr><td>toc</td><td>是否显示 TOC目录(默认为设置中 toc 的 enable 配置)</td><td>true &#x2F; false</td></tr><tr><td>toc_number</td><td>是否目录自动编号(默认为设置中 toc 的 number 配置)</td><td>true &#x2F; false</td></tr><tr><td>toc_style_simple</td><td>显示 toc 简洁模式(侧边栏只剩下toc)</td><td>true &#x2F; false</td></tr><tr><td>comments</td><td>显示页面评论模块</td><td>默认true</td></tr><tr><td>aside</td><td>显示侧边栏</td><td>默认true</td></tr><tr><td>cover</td><td>封面&#x2F;缩略图(如果没有设置 top_img,文章页顶部将显示缩略图)</td><td>false&#x2F;图片地址&#x2F;留空</td></tr><tr><td>top_img</td><td>页面顶部图片</td><td></td></tr><tr><td>description</td><td>页面描述</td><td></td></tr><tr><td>keywords</td><td>页面关键字</td><td></td></tr><tr><td>aplayer</td><td>在需要的页面加载 aplayer 的 js 和 css,请参考文章下面的<code>音乐</code>配置</td><td></td></tr><tr><td>random</td><td>配置友情链接是否随机排序</td><td>默认为 false</td></tr></tbody></table><h3 id="hexo上传查看不了图片（已解决）"><a href="#hexo上传查看不了图片（已解决）" class="headerlink" title="hexo上传查看不了图片（已解决）"></a>hexo上传查看不了图片（已解决）</h3><p>解决的痛点：markdown写文章可以直接粘本地图片，并上传到github时hexo的博客也能正常显示。避免开启post_asset_folder文件资源夹，这样只有有图片的博文会新建文件夹来存储博文的图片 。不用下载任何img插件，网上很多人的解决方法都说要安装如hexo-asset-img插件，完全不必。</p><p>KEYWORDS：如何在Hexo博客中插入本地图片；如何在Hexo博客中插入图片；Hexo搭建butterfly博客中图片无法显示</p><p><strong>解决方法</strong></p><p>解决的核心：在Typora粘图时设置图像粘到指定路径:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./../</span><br></pre></td></tr></table></figure><p>这样图片会直接存放在<strong>source</strong>文件夹下，如下面三张图：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250413144513945.png"></p><p>但是这样所有图片都存在source文件夹，不方便查找和管理，所以</p><p>我更喜欢用如下路径：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./../$&#123;filename&#125;</span><br></pre></td></tr></table></figure><p>操作：Typora菜单栏的【文件】，打开【偏好设置】，点击【图像】</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250413144119948.png" alt="Typora设置"></p><p>解决过程参考<a href="https://kkkika.github.io/2025/04/11/pic/">pic</a>文章</p><h3 id="md功能展示"><a href="#md功能展示" class="headerlink" title="md功能展示"></a>md功能展示</h3><blockquote><p>markdown不熟悉的功能效果展示</p></blockquote><p>正常          加粗**          <em>斜体</em>          <u>下划线</u>          <code>代码</code></p><p>$内联公式$          <del>删除线</del>          &#x3D;&#x3D;高亮&#x3D;&#x3D;          <!--注释--></p><p>公式块：<br>$$<br>x<br>$$<br>警告框之</p><blockquote><p>[!NOTE]</p><p>提醒内容</p></blockquote><blockquote><p>[!TIP]</p><p>建议内容</p></blockquote><blockquote><p>[!IMPORTANT]</p><p>重要内容</p></blockquote><blockquote><p>[!WARNING]</p><p>警告内容</p></blockquote><blockquote><p>[!CAUTION]</p><p>注意内容</p></blockquote><blockquote><p>引用</p></blockquote><hr><h3 id="hideToggle可折叠内容"><a href="#hideToggle可折叠内容" class="headerlink" title="hideToggle可折叠内容"></a>hideToggle可折叠内容</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideToggle 我是标题，点击可展开%&#125;</span><br><span class="line">这是折叠的内容/隐藏的内容</span><br><span class="line">（可以加代码块）</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><details class="toggle" ><summary class="toggle-button" style="">我是标题，点击可展开</summary><div class="toggle-content"><p>这是折叠的内容&#x2F;隐藏的内容</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sql</span>代码</span><br></pre></td></tr></table></figure></div></details><hr><h3 id="tabs分栏选项卡"><a href="#tabs分栏选项卡" class="headerlink" title="tabs分栏选项卡"></a>tabs分栏选项卡</h3><h4 id="使用语法"><a href="#使用语法" class="headerlink" title="使用语法"></a>使用语法</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% tabs 唯一名字, [默认索引] %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 标题1 @icon --&gt;</span><br><span class="line">内容 1</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 标题2 --&gt;</span><br><span class="line">内容 2</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><ul><li><p>唯一名字：给这组 tabs 当 HTML id 用，不能重复。</p></li><li><p>默认索引：默认 1 ；写 <code>-1</code> 表示默认全部收起。</p></li><li><p><code>@icon</code> 选填，FontAwesome 全类名，中间有无空格都行。</p></li><li><table><thead><tr><th align="left">写法</th><th align="left">页签最终显示</th></tr></thead><tbody><tr><td align="left"><code>&lt;!-- tab --&gt;</code></td><td align="left">唯一名字-1</td></tr><tr><td align="left"><code>&lt;!-- tab @fas fa-apple --&gt;</code></td><td align="left">仅图标</td></tr><tr><td align="left"><code>&lt;!-- tab macOS --&gt;</code></td><td align="left">macOS</td></tr><tr><td align="left"><code>&lt;!-- tab macOS @fas fa-apple --&gt;</code></td><td align="left">macOS加图标</td></tr></tbody></table></li></ul><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab macOS --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab macOS @fas fa-apple--&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>效果如下：</p><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">test1 1</button><button type="button" class="tab">macOS</button><button type="button" class="tab"><i class="fas fa-apple"></i>macOS</button></div><div class="tab-contents"><div class="tab-item-content active"><p><strong>This is Tab 1.</strong></p></div><div class="tab-item-content"><p><strong>This is Tab 2.</strong></p></div><div class="tab-item-content"><p><strong>This is Tab 3.</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><hr><p>【未解决】</p><p>我希望选项卡在Typora写文章也可以实现同步渲染，在 Typora 编辑模式中使用类似 Hexo-Next 主题的选项卡（Tabs）功能</p><p>下载Typora插件</p><p><a href="https://github.com/obgnail/typora_plugin">obgnail&#x2F;typora_plugin: Typora plugin. Feature enhancement tool | Typora 插件，功能增强工具</a></p><p><a href="https://www.cnblogs.com/PeterJXL/p/18350073">打造个性化Typora写作体验的必备插件 - peterjxl - 博客园</a></p><hr><h3 id="Label颜色高亮"><a href="#Label颜色高亮" class="headerlink" title="Label颜色高亮"></a>Label颜色高亮</h3><blockquote><p>我觉得好像用处不大，对我来说</p></blockquote><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% label 文本 颜色 %&#125;</span><br></pre></td></tr></table></figure><p>两个参数，颜色默认值是灰色。</p><p>示例：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">臣亮言：&#123;% label 先帝 %&#125;创业未半，而&#123;% label 中道崩殂 blue %&#125;。今天下三分，&#123;% label 益州疲敝 pink %&#125;，此诚&#123;% label 危急存亡之秋 red %&#125;也！然侍衞之臣，不懈于内；&#123;% label 忠志之士 purple %&#125;，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。</span><br><span class="line">宫中、府中，俱为一体；陟罚臧否，不宜异同。若有&#123;% label 作奸 orange %&#125;、&#123;% label 犯科 green %&#125;，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</span><br></pre></td></tr></table></figure><p>臣亮言：<mark class="hl-label default">先帝</mark>创业未半，而<mark class="hl-label blue">中道崩殂</mark>。今天下三分，<mark class="hl-label pink">益州疲敝</mark>，此诚<mark class="hl-label red">危急存亡之秋</mark>也！然侍衞之臣，不懈于内；<mark class="hl-label purple">忠志之士</mark>，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。<br>宫中、府中，俱为一体；陟罚臧否，不宜异同。若有<mark class="hl-label orange">作奸</mark>、<mark class="hl-label green">犯科</mark>，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</p><h3 id="代码换行设置异常（已解决）"><a href="#代码换行设置异常（已解决）" class="headerlink" title="代码换行设置异常（已解决）"></a>代码换行设置异常（已解决）</h3><p>实现代码块自动换行：</p><p>在_config.butterfly.yml配置文件中可以配置如下功能</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">true</span> <span class="comment">#代码自动换行，关闭滚动条</span></span><br></pre></td></tr></table></figure><p>同时将站点配置文件_config.yml的highlight设置为false</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>但是出现了如下异常：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911172343525.png" alt="数字异常叠加"></p><p>当 word_wrap 启用但 Hexo 的 highlight.line_number 为 false 时，不再通过伪元素渲染行号，避免换行时前置数字异常叠加</p><p>解决方法：</p><p>将 themes&#x2F;butterfly&#x2F;source&#x2F;css&#x2F;_highlight&#x2F;highlight&#x2F;index.styl 中自动生成行号的逻辑，改为Hexo 配置 highlight.line_number: false 时不显示：</p><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_highlight\highlight\index.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span></span><br><span class="line">  <span class="selector-tag">figure</span><span class="selector-class">.highlight</span></span><br><span class="line">    <span class="selector-class">.line</span></span><br><span class="line">      <span class="keyword">if</span> wordWrap &amp;&amp; <span class="variable">$highlight_line_numb</span></span><br><span class="line">        <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">          <span class="attribute">display</span>: inline-block</span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">6px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">          <span class="attribute">min-width</span>: <span class="number">30px</span></span><br><span class="line">          <span class="attribute">color</span>: <span class="built_in">var</span>(--hlnumber-color)</span><br><span class="line">          <span class="attribute">content</span>: <span class="built_in">counter</span>(line)</span><br><span class="line">          <span class="attribute">counter-increment</span>: line</span><br><span class="line">          <span class="attribute">text-align</span>: left</span><br></pre></td></tr></table></figure><p>将if wordWrap改为if wordWrap &amp;&amp; $highlight_line_numb。</p><p>刷新之后又没问题了，我不懂。。</p><p>最后是这样的：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250912100954585.png" alt="image-20250912100954585"></p><p>可以正常换行了，但是我认为字体不好看，进行调整：</p><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_highlight\highlight\index.styl</p><p>if wordWrap就不动了，然后调整参数</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span></span><br><span class="line">  <span class="selector-tag">figure</span><span class="selector-class">.highlight</span></span><br><span class="line">    <span class="selector-class">.line</span></span><br><span class="line">      <span class="keyword">if</span> wordWrap</span><br><span class="line">        <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">          <span class="attribute">display</span>: inline-block</span><br><span class="line">          <span class="attribute">color</span>: <span class="built_in">var</span>(--hlnumber-color)</span><br><span class="line">          <span class="attribute">content</span>: <span class="built_in">counter</span>(line)</span><br><span class="line">          <span class="attribute">counter-increment</span>: line</span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">          <span class="attribute">text-align</span>: right</span><br><span class="line">          <span class="attribute">min-width</span>: <span class="number">15px</span></span><br><span class="line">          <span class="attribute">font-family</span>: <span class="string">&quot;Consolas&quot;</span> <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>其中有这些参数是修改或增加的：</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="attribute">text-align</span>: right</span><br><span class="line"><span class="attribute">min-width</span>: <span class="number">15px</span></span><br><span class="line"><span class="attribute">font-family</span>: <span class="string">&quot;Consolas&quot;</span> <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>效果调整成.gutter pre的样子：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250912100602774.png" alt="跟上次上传的样式对比"></p><h2 id="美化-首页"><a href="#美化-首页" class="headerlink" title="美化-首页"></a>美化-首页</h2><h3 id="右侧悬浮栏"><a href="#右侧悬浮栏" class="headerlink" title="右侧悬浮栏"></a>右侧悬浮栏</h3><h4 id="悬浮栏按钮"><a href="#悬浮栏按钮" class="headerlink" title="悬浮栏按钮"></a>悬浮栏按钮</h4><p>_config.butterfly.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Choose: readmode,translate,darkmode,hideAside,toc,chat,comment</span></span><br><span class="line"><span class="comment"># Don&#x27;t repeat the same value</span></span><br><span class="line"><span class="attr">rightside_item_order:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Default: readmode,translate,darkmode,hideAside</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="string">readmode,hideAside</span></span><br><span class="line">  <span class="comment"># Default: toc,chat,comment</span></span><br><span class="line">  <span class="attr">show:</span> <span class="string">translate,darkmode,toc,chat,comment</span></span><br></pre></td></tr></table></figure><ul><li><p>可选：阅读模式，简繁转换，日夜切换，单栏和双栏切换，目录，聊天，评论</p></li><li><p>在 hide 里：按钮只在点开齿轮后出现（收纳&#x2F;隐藏到设置面板）。</p></li><li><p>在 show 里：按钮一直固定悬浮显示在右侧。</p></li><li><p>不要重复：同一个键不要同时放在 hide 和 show。</p></li></ul><h4 id="悬浮栏显示"><a href="#悬浮栏显示" class="headerlink" title="悬浮栏显示"></a>悬浮栏显示</h4><p>顶部时保持显示、向下滚动隐藏、向上滚动显示</p><ul><li>导航栏是顶部时保持显示、向下滚动隐藏、向上滚动显示，帮我把右侧悬浮栏也改为这样的形式</li></ul><p>Agent变更点：</p><ul><li>更新 themes&#x2F;butterfly&#x2F;source&#x2F;js&#x2F;main.js 中滚动处理逻辑：向下滚动时移除 rightside-show 以隐藏悬浮栏，向上滚动时添加 rightside-show 以显示，与导航栏一致。</li><li>把右侧悬浮栏在页面初始就显示，并在滚动到顶部时保持显示；当向下滚动时隐藏，向上滚动时显示。我会更新滚动分支中的 else 逻辑，并在刷新初始化时立即显示 #rightside。</li><li>themes&#x2F;butterfly&#x2F;source&#x2F;js&#x2F;main.js：在注册滚动监听后立刻调用一次 scrollTask()</li></ul><h3 id="butterfly主题文章顶部大图"><a href="#butterfly主题文章顶部大图" class="headerlink" title="butterfly主题文章顶部大图"></a>butterfly主题文章顶部大图</h3><p><a href="https://blog.captainz.cc/posts/hexo_butterfly_top_img.html">Hexo+Butterfly 主题一图流背景与顶部图修改 | Hyper Tech</a></p><p><a href="https://blog.csdn.net/weixin_74811095/article/details/147954567">butterfly主题魔改02：主题颜色、宽度设置、图片设置、遮罩效果_butterfly宽度-CSDN博客</a></p><h2 id="小美化"><a href="#小美化" class="headerlink" title="小美化"></a>小美化</h2><h4 id="文章图片大小限制"><a href="#文章图片大小限制" class="headerlink" title="文章图片大小限制"></a>文章图片大小限制</h4><blockquote><p>限制最大高度为250px</p><p>宽度改为auto</p><p>然后发现图片会过宽，就再加上限制最大宽度为720px</p></blockquote><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\post.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">img</span></span><br><span class="line">  <span class="attribute">display</span>: block</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="number">20px</span></span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">250px</span></span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">720px</span></span><br><span class="line">  <span class="attribute">width</span>: auto </span><br><span class="line">  <span class="attribute">transition</span>: filter <span class="number">375ms</span> ease-in .<span class="number">2s</span></span><br><span class="line">  <span class="built_in">addBorderRadius</span>()</span><br></pre></td></tr></table></figure><h4 id="文章底部标签颜色修改"><a href="#文章底部标签颜色修改" class="headerlink" title="文章底部标签颜色修改"></a>文章底部标签颜色修改</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\post.styl</p><p>将$light-blue改了</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#post</span></span><br><span class="line">  <span class="selector-class">.tag_share</span></span><br><span class="line">    <span class="selector-pseudo">&amp;:after</span></span><br><span class="line">      <span class="attribute">display</span>: block</span><br><span class="line">      <span class="attribute">clear</span>: both</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.post-meta</span></span><br><span class="line">      &amp;__tag-list</span><br><span class="line">        <span class="attribute">display</span>: inline-block</span><br><span class="line"></span><br><span class="line">      &amp;__tags</span><br><span class="line">        <span class="attribute">display</span>: inline-block</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">8px</span> <span class="number">8px</span> <span class="number">0</span></span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12px</span></span><br><span class="line">        <span class="attribute">width</span>: fit-content</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="variable">$light</span>-blue</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="variable">$light</span>-blue</span><br><span class="line">        <span class="attribute">font-size</span>: .<span class="number">85em</span></span><br><span class="line">        <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-in-out</span><br></pre></td></tr></table></figure><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250909152952527.png" alt="文章底部标签颜色"></p><h4 id="文章页头部的背景设置为透明"><a href="#文章页头部的背景设置为透明" class="headerlink" title="文章页头部的背景设置为透明"></a>文章页头部的背景设置为透明</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\head.styl</p><p>增加<code>background: transparent !important</code>将文章页头部 .post-bg 的背景强制设为透明，避免使用封面图作为背景</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// post</span></span><br><span class="line">&amp;<span class="selector-class">.post-bg</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span></span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>还要开启页头遮罩</p><p>_config.butterfly.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Add a mask to the header and footer # 页头页脚添加遮罩</span></span><br><span class="line"><span class="attr">mask:</span></span><br><span class="line">  <span class="attr">header:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911112109190.png" alt="文章页头部的背景"></p><hr><h4 id="半透明背景"><a href="#半透明背景" class="headerlink" title="半透明背景"></a>半透明背景</h4><p>效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250910171746704.png" alt="修改后"></p><p>修改前：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250910172011461.png" alt="修改前"></p><p>增加如下代码：</p><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\post.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 浅色模式：文章阅读区域背景改为半透明</span></span><br><span class="line"><span class="comment">// 仅在非暗色主题时生效，避免影响暗色模式视觉</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#post</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br></pre></td></tr></table></figure><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_layout\aside.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 浅色模式：侧栏所有卡片统一半透明背景</span></span><br><span class="line"><span class="comment">// 说明：匹配包含 .card-widget 的全部卡片类型（recent-post/announcement/info 等）</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br></pre></td></tr></table></figure><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_page\homepage.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 浅色模式：侧栏所有卡片统一半透明背景</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#recent-posts</span> <span class="selector-class">.recent-post-item</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br></pre></td></tr></table></figure><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911094012471.png" alt="代码"></p><hr><h4 id="mark-bg参数"><a href="#mark-bg参数" class="headerlink" title="mark-bg参数"></a>mark-bg参数</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_global\index.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="attr">--mark-bg</span>: <span class="built_in">alpha</span>(<span class="variable">$dark</span>-black, .<span class="number">13</span>)</span><br></pre></td></tr></table></figure><p>C:\Code\KikaBlog\blog\themes\butterfly\source\css_mode\darkmode.styl</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="attr">--mark-bg</span>: <span class="built_in">alpha</span>(<span class="variable">$dark</span>-black, .<span class="number">24</span>)</span><br></pre></td></tr></table></figure><p>浅色主题.3效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911161632715.png" alt="浅色主题.3效果"></p><p>浅色主题.13效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911142312799.png" alt="浅色主题.13效果"></p><p>深色主题.6效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911161839729.png" alt="深色主题.6效果"></p><p>深色主题.24效果：</p><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250911161731535.png" alt="深色主题.24效果"></p><hr><h4 id="右侧悬浮栏动态效果"><a href="#右侧悬浮栏动态效果" class="headerlink" title="右侧悬浮栏动态效果"></a>右侧悬浮栏动态效果</h4><p>C:\Code\KikaBlog\blog\themes\butterfly\layout\includes\rightside.pug</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- const &#123; readmode, translate, darkmode, aside, chat &#125; = theme</span><br><span class="line">mixin rightsideItem(array)</span><br><span class="line">  each item in array</span><br><span class="line">    case item</span><br><span class="line">      when &#x27;readmode&#x27;</span><br><span class="line">        if globalPageType === &#x27;post&#x27; &amp;&amp; readmode</span><br><span class="line">          button#readmode(type=&quot;button&quot; title=_p(&#x27;rightside.readmode_title&#x27;))</span><br><span class="line">            i.fas.fa-book-open</span><br><span class="line">      when &#x27;translate&#x27;</span><br><span class="line">        if translate.enable</span><br><span class="line">          button#translateLink(type=&quot;button&quot; title=_p(&#x27;rightside.translate_title&#x27;))= translate.default</span><br><span class="line">      when &#x27;darkmode&#x27;</span><br><span class="line">        if darkmode.enable &amp;&amp; darkmode.button</span><br><span class="line">          button#darkmode(type=&quot;button&quot; title=_p(&#x27;rightside.night_mode_title&#x27;))</span><br><span class="line">            i.fas.fa-adjust.fa-flip</span><br><span class="line">      when &#x27;hideAside&#x27;</span><br><span class="line">        if aside.enable &amp;&amp; aside.button &amp;&amp; page.aside !== false</span><br><span class="line">          button#hide-aside-btn(type=&quot;button&quot; title=_p(&#x27;rightside.aside&#x27;))</span><br><span class="line">            i.fas.fa-arrows-alt-h</span><br><span class="line">      when &#x27;toc&#x27;</span><br><span class="line">        if showToc</span><br><span class="line">          button#mobile-toc-button.close(type=&quot;button&quot; title=_p(&quot;rightside.toc&quot;))</span><br><span class="line">            i.fas.fa-list-ul</span><br><span class="line">      when &#x27;chat&#x27;</span><br><span class="line">        if chat.rightside_button &amp;&amp; chat.use</span><br><span class="line">          button#chat-btn(type=&quot;button&quot; title=_p(&quot;rightside.chat&quot;) style=&quot;display:none&quot;)</span><br><span class="line">            i.fas.fa-message</span><br><span class="line">      when &#x27;comment&#x27;</span><br><span class="line">        if commentsJsLoad</span><br><span class="line">          a#to_comment(href=&quot;#post-comment&quot; title=_p(&quot;rightside.scroll_to_comment&quot;))</span><br><span class="line">            i.fas.fa-comments</span><br><span class="line"></span><br><span class="line">#rightside</span><br><span class="line">  - const &#123; enable, hide, show &#125; = theme.rightside_item_order</span><br><span class="line">  - const hideArray = enable ? hide &amp;&amp; hide.split(&#x27;,&#x27;) : [&#x27;readmode&#x27;,&#x27;translate&#x27;,&#x27;darkmode&#x27;,&#x27;hideAside&#x27;]</span><br><span class="line">  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;toc&#x27;,&#x27;chat&#x27;,&#x27;comment&#x27;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  #rightside-config-hide</span><br><span class="line">    if hideArray</span><br><span class="line">      +rightsideItem(hideArray)</span><br><span class="line">  #rightside-config-show</span><br><span class="line">    if enable</span><br><span class="line">      if hide</span><br><span class="line">        button#rightside-config(type=&quot;button&quot; title=_p(&quot;rightside.setting&quot;))</span><br><span class="line">          i.fas.fa-cog.fa-beat</span><br><span class="line">    else</span><br><span class="line">      if globalPageType === &#x27;post&#x27;</span><br><span class="line">        if (readmode || translate.enable || (darkmode.enable &amp;&amp; darkmode.button))</span><br><span class="line">          button#rightside-config(type=&quot;button&quot; title=_p(&quot;rightside.setting&quot;))</span><br><span class="line">            i.fas.fa-cog.fa-beat</span><br><span class="line">      else if translate.enable || (darkmode.enable &amp;&amp; darkmode.button)</span><br><span class="line">        button#rightside-config(type=&quot;button&quot; title=_p(&quot;rightside.setting&quot;))</span><br><span class="line">          i.fas.fa-cog.fa-beat  </span><br><span class="line"></span><br><span class="line">    if showArray</span><br><span class="line">      +rightsideItem(showArray)</span><br><span class="line"></span><br><span class="line">    button#go-up(type=&quot;button&quot; title=_p(&quot;rightside.back_to_top&quot;))</span><br><span class="line">      span.scroll-percent</span><br><span class="line">      i.fas.fa-arrow-up.fa-bounce</span><br><span class="line">    button#go-down(type=&quot;button&quot; title=_p(&quot;rightside.back_to_bottom&quot;))</span><br><span class="line">      i.fas.fa-arrow-down.fa-bounce</span><br></pre></td></tr></table></figure><ul><li>修改fas.fa-cog的.fa-spin为.fa-beat</li><li>增加fas.fa-arrow-up和fas.fa-arrow-down的.fa-bounce</li><li>增加fas.fa-adjust的.fa-flip</li></ul><hr><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="一劳永逸"><a href="#一劳永逸" class="headerlink" title="一劳永逸"></a>一劳永逸</h3><p>（修改styl文件好像版本更新后又要重新改还是什么的，不太懂）</p><p>干脆全部写在index.styl文件，方便管理</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;css_prefix&#x27;</span>)</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;nib&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_third-party/normalize.min.css&#x27;</span></span><br><span class="line"><span class="comment">// project</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;var&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_global/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_highlight/highlight&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_layout/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_tags/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_mode/*&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// search</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_search/index&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================================================================================</span></span><br><span class="line"><span class="comment">// 确保图标正常显示</span></span><br><span class="line"><span class="comment">// ===========================================</span></span><br><span class="line"><span class="comment">// 全局：设置所有伪元素 :before 使用 FontAwesome 字体</span></span><br><span class="line">*<span class="selector-pseudo">:before</span></span><br><span class="line">  <span class="attribute">font-family</span>: FontAwesome <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================================================================================</span></span><br><span class="line"><span class="comment">// 浅色模式：统一半透明背景样式</span></span><br><span class="line"><span class="comment">// 仅在非暗色主题时生效</span></span><br><span class="line"><span class="comment">// ===========================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 文章阅读区域背景</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#post</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 侧栏所有卡片</span></span><br><span class="line"><span class="comment">// 说明：匹配包含 .card-widget 的全部卡片类型（recent-post/announcement/info 等）</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首页文章卡片</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span>) <span class="selector-id">#recent-posts</span> <span class="selector-class">.recent-post-item</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">94</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================================================================================</span></span><br><span class="line"><span class="comment">// 文章页头部背景设置</span></span><br><span class="line"><span class="comment">// 将文章页头部 .post-bg 的背景强制设为透明，避免使用封面图作为背景</span></span><br><span class="line"><span class="comment">// ===========================================</span></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.post-bg</span></span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span></span><br></pre></td></tr></table></figure><p>将特定样式设置写在index.styl文件，方便管理。并从原始文件中移除重复的样式代码</p><h3 id="其他美化思路"><a href="#其他美化思路" class="headerlink" title="其他美化思路"></a>其他美化思路</h3><ul><li>针对归档页面，分类页面，tags页面（标签云页面）关闭mask背景色遮罩并设置图片透明度。我想要的不是透明度而是边缘渐变透明，不要让图片分割感这么重</li></ul><h2 id="butterfly博客评论"><a href="#butterfly博客评论" class="headerlink" title="butterfly博客评论"></a>butterfly博客评论</h2><p>主题支持多种评论系统，你可以根据自己的喜好选择一种。你也可以选择双评论，只需要配置两个评论（第一个为默认显示）</p><p><a href="https://butterfly.js.org/posts/4aa8abbe/">Butterfly 文檔(三) 主題配置 | Butterfly</a>（<code>Twikoo</code> 是一个简洁、安全、无后端的静态网站评论系统，基于腾讯云开发。）</p><p>上面列出了好多种，最后我选择<code>Twikoo</code> 的Hugging Face：<a href="https://twikoo.js.org/quick-start.html">快速上手 | Twikoo 文档</a></p><p>只需要把获取到的 环境ID (envId) 填写到配置上去就行：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">twikoo:</span></span><br><span class="line">  <span class="attr">envId:</span>           <span class="comment"># 环境 ID</span></span><br><span class="line">  <span class="attr">region:</span>          <span class="comment"># 环境地域，默认为 ap-shanghai，如果您的环境地域不是上海，需传此参数</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span>   <span class="comment"># 是否显示文章阅读数</span></span><br><span class="line">  <span class="attr">option:</span>          <span class="comment"># 可选配置，开启 visitor 后，文章页的访问人数将改为 Twikoo 提供，而不是 不蒜子</span></span><br></pre></td></tr></table></figure><h3 id="Twikoo快速上手"><a href="#Twikoo快速上手" class="headerlink" title="Twikoo快速上手"></a>Twikoo快速上手</h3><p>Twikoo 分为云函数和前端两部分，若要在您的网站上集成 Twikoo，您需要同时部署云函数和前端，部署时请注意保持二者版本一致。</p><ul><li><a href="https://twikoo.js.org/backend.html">云函数部署</a> 有多种方式，请选择适合自己的部署平台。</li><li><a href="https://twikoo.js.org/frontend.html">前端部署</a> 有 2 种方式，如果您的网站主题支持 Twikoo，您只需在配置文件中指定 Twikoo 即可；如果您的网站主题不支持 Twikoo，您需要修改源码手动引入 Twikoo 的 js 文件并初始化。</li><li>若您已部署旧版本 Twikoo，请参考 <a href="https://twikoo.js.org/update.html">版本更新</a> 升级云函数和前端版本。</li></ul><p><img src="/./../Hexo%E6%90%AD%E5%BB%BAButterfly%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/image-20250905160123616.png" alt="云函数部署我选择"></p><h3 id="Hugging-Face-部署"><a href="#Hugging-Face-部署" class="headerlink" title="Hugging Face 部署"></a>Hugging Face 部署</h3><blockquote><p>注意：Hugging Face 部署的环境，由于默认的邮件端口被屏蔽，无法使用邮件功能。详见 <a href="https://github.com/twikoojs/twikoo/issues/638">twikoo&#x2F;issues&#x2F;638</a></p></blockquote><ol><li>申请 <a href="https://account.mongodb.com/account/register">MongoDB Atlas</a> 账号，获取 MongoDB 连接字符串。<a href="https://mongodb.ac.cn/docs/guides/atlas/account/">注册指南 - MongoDB 文档</a></li><li>申请 <a href="https://huggingface.co/join">Hugging Face</a> 账号</li><li>登录，点击 Spaces - Create new Space</li></ol><p><a href="https://twikoo.js.org/assets/hugging-1.qykHscdz.png"><img src="https://twikoo.js.org/assets/hugging-1.qykHscdz.png" alt="img"></a></p><ol><li>输入 Space name，Select the Space SDK 选择 Docker，Choose a Docker template 选择 Blank，Space hardware 选择 FREE，选择 Public，点击 Create Space</li></ol><p><a href="https://twikoo.js.org/assets/hugging-2.BZLt3AFG.png"><img src="https://twikoo.js.org/assets/hugging-2.BZLt3AFG.png" alt="img"></a></p><ol><li>进入刚刚创建的 Space，点击页面上方的 Settings，滚动到 Variables and secrets 部分，点击 New secret，Name 输入 <code>MONGODB_URI</code>，Value 输入前面记录的数据库连接字符串，点击 Save</li></ol><p><a href="https://twikoo.js.org/assets/hugging-3.BE7bV_x9.png"><img src="https://twikoo.js.org/assets/hugging-3.BE7bV_x9.png" alt="img"></a></p><ol><li>点击页面上方的 Files - Add file - Create a new file</li></ol><p><a href="https://twikoo.js.org/assets/hugging-4.IZDT8YRp.png"><img src="https://twikoo.js.org/assets/hugging-4.IZDT8YRp.png" alt="img"></a></p><ol><li>在 Name your file 中输入 <code>Dockerfile</code>，在 Edit 区域输入以下内容</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FROM imaegoo/twikoo</span><br><span class="line">ENV TWIKOO_PORT 7860</span><br><span class="line">EXPOSE 7860</span><br></pre></td></tr></table></figure><p><a href="https://twikoo.js.org/assets/hugging-5.Cw4bsoD7.png"><img src="https://twikoo.js.org/assets/hugging-5.Cw4bsoD7.png" alt="img"></a></p><ol><li>点击 Commit new file to main</li><li>点击右上角 Settings 右方的菜单（三个点）图标 - Embed this Space，Direct URL 下的内容（例如 <code>https://xxx-xxx.hf.space</code>）即为您的环境 id</li></ol><p><a href="https://twikoo.js.org/assets/hugging-6.CxsVPwFh.png"><img src="https://twikoo.js.org/assets/hugging-6.CxsVPwFh.png" alt="img"></a></p><h4 id="如果你需要自定义域名"><a href="#如果你需要自定义域名" class="headerlink" title="如果你需要自定义域名"></a>如果你需要自定义域名</h4><blockquote><p>自定义域名教程由 <a href="https://github.com/Hoshino-Yumetsuki">Hoshino-Yumetsuki</a> 提供</p><p>ps：除了 <code>CF_ZERO_TRUST_TOKEN</code> 这个环境变量以外，其他环境变量的配置方式与上一步相同</p></blockquote><ol><li>申请 Cloudflare Zero Trust，关于申请方式请自行查找</li></ol><p><a href="https://twikoo.js.org/assets/hugging-7.ey7RVDUh.png"><img src="https://twikoo.js.org/assets/hugging-7.ey7RVDUh.png" alt="img"></a></p><ol><li>添加一条隧道，连接方式选择 Cloudflared，名称任意</li></ol><p><a href="https://twikoo.js.org/assets/hugging-8.bn1zLPri.png"><img src="https://twikoo.js.org/assets/hugging-8.bn1zLPri.png" alt="img"></a></p><ol><li>添加一个 Public Hostname，回源选择 HTTP，端口选择 8080</li><li>Clone Twikoo 仓库，找到 <code>src\server\hf-space</code></li><li>去 Hugging Face 创建一个 Space，然后 Clone 下来，将 hf-space 文件夹内的所有内容复制进去</li><li>在 Hugging Face Space 的设置中添加一个环境变量，变量名 <code>CF_ZERO_TRUST_TOKEN</code>，值是 Tunnels 给的令牌（删掉 <code>cloudflared.exe service install</code>，只保留令牌部分）</li></ol><p><a href="https://twikoo.js.org/assets/hugging-9.BfxLMyMQ.png"><img src="https://twikoo.js.org/assets/hugging-9.BfxLMyMQ.png" alt="img"></a></p><ol><li>Push 到 Hugging Face Space 仓库</li></ol><h2 id="hexo使用Mermaid"><a href="#hexo使用Mermaid" class="headerlink" title="hexo使用Mermaid"></a>hexo使用Mermaid</h2><p>参考<a href="https://kkkika.github.io/2025/04/12/Markdown%E5%B8%B8%E7%94%A8/">Markdown常用 | Kkkika</a></p><h2 id="部署到Github报错怎么办"><a href="#部署到Github报错怎么办" class="headerlink" title="部署到Github报错怎么办"></a>部署到Github报错怎么办</h2><p>一定要开Watt Toolkit加速器</p><p>运行这个命令，能看到 Hexo 到底卡在哪一步：</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo deploy --debug</span><br></pre></td></tr></table></figure><h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><p><a href="https://butterfly.js.org/categories/Docs%E6%96%87%E6%AA%94/">分類: Docs文檔 | Butterfly</a></p><p><a href="https://blog.csdn.net/mjh1667002013/article/details/129290903">【Hexo】Hexo搭建Butterfly主题并快速美化_hexo butterfly-CSDN博客</a></p><p><a href="https://nickxu.me/2022/02/20/Hexo-Butterfly-%E5%BB%BA%E7%AB%99%E6%8C%87%E5%8D%97%EF%BC%88%E4%BA%94%EF%BC%89%E6%97%A5%E5%B8%B8%E5%86%99%E4%BD%9C/">Hexo + Butterfly 建站指南（五）日常写作 | NX の 博客</a></p><p><a href="https://korgs.blog.csdn.net/article/details/131094362?spm=1001.2101.3001.6650.3&utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-3-131094362-blog-135929884.235%5Ev43%5Epc_blog_bottom_relevance_base8&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-3-131094362-blog-135929884.235%5Ev43%5Epc_blog_bottom_relevance_base8&utm_relevant_index=6">基于Hexo和Butterfly创建个人技术博客，(7) 配置butterfly主题搭建博客网站主体UI框架_hexo butterfly-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> blog </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
